id,tags,text
2706,javascript,function getAudio(aUrl) {
var deferred = $.Deferred();
// ajax is not capable of arraybuffer
var xhr = new XMLHttpRequest();
xhr.responseType = 'arraybuffer';
xhr.open('GET', aUrl, true);
// request succeeded
xhr.onreadystatechange = function() {
if (
(xhr.readyState === 4) &&
(xhr.status === 200) &&
(xhr.status !== 404)
) {
audioCtx.decodeAudioData(xhr.response, function(buffer) {
buf = buffer;
return deferred.resolve(true);
});
}
};
xhr.onerror = function() {
return deferred.resolve(false);
};
xhr.send();
return deferred.promise();
}
responseTypeが'arraybuffer'のXMLHttpRequestを送るメソッドを作りました。
Chrome, Safariでは動きます。しかしFirefoxだと
'InvalidStateError: An attempt was made to use an object that is not, or is no longer, usable'
というエラーが出ます。
Mozillaのサイトサンプルでも上記と同じ方法でxhrをリクエストしています。
何が問題でしょうか。
引数aUrlは"https://api.soundcloud.com/tracks/121818867/stream?client_id=8f474de4d1dedd5a6a4f4cbb60f4e6b8"
といったものです。（localではない）
2724,javascript,process.env をテスト用に置き換えたいと考えています。
現状では以下のようにごっそりと置き換えています。もっとスマートな方法はありますでしょうか？
describe('test', function() {
beforeEach(function() {
this.env = process.env;
process.env = { hoge: 123 };
});
afterEach(function() { process.env = this.env; });
it('works', function() { /* ... */ });
});
function の場合には Sinon.JS で sinon.stub(obj, 'method', func) が良いと思うのですが、property の場合にはどうするのが良いのか分かりません。
2744,javascript,https://rubygems.org/gems/i18n/versions/0.7.0
こちらのサイトの右側にテキストをクリップボードにコピーするボタンがあります。
htmlを覗いてみるとdata属性に対象の文字がありますが、どうやってコピーさせてるのでしょうか?
JavaScriptで可能なのでしょうか?
2756,javascript,javascript(coffeescript)を使い、ajaxで取得したhtmlコードをinnerHTMLでDOM要素に突っ込んでいます。
このとき、htmlコードの中にscriptタグを入れていてもjavascriptが実行されないのですが、
実行されないのは標準の挙動でしょうか？それともブラウザが気を利かせていての挙動でしょうか？
セキュリティを考慮した上で意図したスクリプトだけ実行させるにはどうすればいいでしょうか？
以前にハマったんだけどうやむやにしてたら今日またハマって、たぶん時間かけて調べてもまた結局わからずじまいになりそうなうえにこれ理解してないのまずい気がするので、どうか怒らないで教えてください。
2781,javascript,JavaScriptでの関数定義には2つあるみたいですが、違いや使い分けがわからないので教えて下さい。
パターン1
function hoge(a, b) {
...
}
パターン2
var hoge = function(a, b) {
...
}
どちらも実行するときはhoge(a, b);でよいのでしょうか。
2821,javascript,casperjs@1.1.0-beta3
spooky@0.2.5
を使って、スクリプトに渡したコマンドラインオプションをCasperJSのthenコールバック内で使おうとしています。他の変数はちゃんとCasperJS内から見えるのですが、undefinedな変数はどこかで消えてしまうのか、そんな変数はないよ ("Can't find variable") と言われてしまいます。
誰が勝手に消しているのでしょうか。また、どうすれば回避できるでしょうか。
Spooky = require 'spooky'
spooky = new Spooky
child:
command: './node_modules/casperjs/bin/casperjs'
casper:
logLevel: 'info'
verbose: false
, (err) ->
if err
e = new Error 'Failed to initialize SpookyJS'
e.details = err
throw e
spooky.on 'error', (e, stack) ->
console.error(e)
if (stack)
console.log(stack)
spooky.on 'console', (log) ->
if (log.lastIndexOf('Unsafe JavaScript attempt', 0) == 0)
return
console.log(log)
spooky.start 'http://example.com'
spooky.then [{
foo: 'bar'
hello: undefined
}, ->
@echo foo
@echo hello
]
spooky.run()
出力:
$ coffee hello.coffee
bar
ReferenceError: Can't find variable: hello
[ { file: '', line: 5, function: '' },
{ file: '/path/to/node_modules/casperjs/modules/casper.js',
line: 1553,
function: 'runStep' },
{ file: '/path/to/node_modules/casperjs/modules/casper.js',
line: 399,
function: 'checkStep' } ]
ReferenceError: Can't find variable: hello
/path/to:5
/path/to/node_modules/casperjs/modules/casper.js:1553 in runStep
/path/to/node_modules/casperjs/modules/casper.js:399 in checkStep
{ [Error: Child terminated with non-zero exit code 1] details: { code: 1, signal: null } }
2861,javascript,Adobe ExtendScript CS6で、Adobe Photoshop CS6向けにJavascriptで書いたコードです。
filename = app.activeDocument.path;
alert(filename);
alert(filename.length);
以上のコードを実行すると最初に ~/Desktop が表示されます。
しかし、その次は undefined と表示されます。
filename = app.activeDocument.fullName;
alert(filename);
alert(filename.length);
こちらのコードの場合は最初に ~/Desktop/waiwai.psd が表示されます。
その次は 32002 と表示されてしまいます。
私にはどうしてlengthオプションでこのような値が出てしまうのか理解できませんでした。
これの有効な対処方法はあるでしょうか？
2925,javascript,現在、Javascriptによるゲームフレームワークを作成しています。
主要なブラウザのうち、ChromeとFirefoxへの対応を行っていたのですが、ファミコンのようなUSBゲームパッドと、XBOX360用のUSBゲームコントローラーに対応していました。
しかし、最近のFirefoxではXBOX360コントローラーの値が取れなくなりました（Chromeでは問題ありません）。
値の取り方は以下のコードになります（CoffeeScriptです）。
gamepadsinfo = if (navigator.getGamepads) then navigator.getGamepads() else (if (navigator.webkitGetGamepads) then navigator.webkitGetGamepads else [])
ネットをいろいろと検索したのですが、みなさん問題なく使えているのか、はたまたXBOX360コントローラーにはあまり関心が無いのかわかりませんが、情報がほとんどありません。
FirefoxでのXBOX360コントローラーの値を、Javascriptから取得する方法はありますでしょうか？
もしくは私がなにか間違っているのでしょうか。
2945,javascript,CSS の font-familyプロパティ について、こちらに
font-familyプロパティは、フォントの種類を指定する際に使用します。
フォントの種類はカンマ（ , ）で区切って複数の候補を並べることができます。 複数の候補を記述しておくことで、先に記述した順にユーザー環境で利用可能なものが選択され、 より多くのユーザーに対して自分のイメージに近いフォントで表示させることができます。
指定したフォントがユーザーの環境にインストールされていない場合には、ブラウザで設定されたデフォルトのフォントで表示されます。
と記載されており、ブラウザやユーザー環境により選択されるフォントが異なることはわかるのですが、具体的にどのフォント（フォント名またはフォントの種類）が適用されているかを知る方法はあるでしょうか？
JavaScript で不可能であればブラウザの開発ツールでも構いません。
追記：Chrome と FireFox は開発ツールで確認できることが分かりました。
IE、Operaでも確認できる方法があればお願いします。
3116,javascript,HandsontableでcolumnSorting:trueにしておくとカラムのヘッダーをクリックした時に昇順ソート、再クリックで降順ソートになりますが、これを最初のクリックを降順、再クリックで昇順のように変更することはできますか？
※追記
初期表示状態でのソート順を下記のように指定できることはわかったのですが、
var hot = new Handsontable(document.getElementById('grid'), {
columnSorting: {
column: 3,
sortOrder: false // 降順
}
});
このような指定でもカラムヘッダーをクリックした場合は昇順→降順の動作になります。
ソースをカスタマイズするしかないのでしょうか…
3126,javascript,フロントエンドの勉強をしようと思っていますが、angular.jsを学ぶか、他のものを学ぶか迷っています。
angular.jsと競合関係にあるフレームワークと、できればそのメリットや特徴などを教えていただけると助かります。
3153,javascript,ECMAScriptにおけるtagged templateを動的に生成する方法について教えて下さい。
template stringsは、一般的には、template literalsという呼称のとおり以下のコード例のようにリテラルとしてソースコード内に固定値として保持されるものですが、
var name = "user input here";
var str = `Hello, ${name}!`;
変数に格納された文字列をテンプレート文字列としてtagged template stringsとして利用したいと考えています。
この場合、evalやFunctionコンストラクタを使って文字列からコードを生成する以外にスマートな方法はないのでしょうか。
var name = "user input here";
var template = "Hello, ${name}";
var tagfunc = function(){ ... };
var str = eval( "tagfunc`" + template + "`" );
変数templateの内容が多言語化のために設定ファイルなどで指定されているといった状況を想定して下さい。
この場合、templateの内容そのものは開発者の支配下にあり実質的にevalされるコードは固定的な内容と等しいため、XSS等のセキュリティ上の心配はほぼないのですが、それでもContent-Security-Policyの導入などを考えると極力コード中のevalの使用は控えたいと思っています。
3157,javascript,controllerが10個あり、対応するviewも同じ数だけある場合
6個のviewで使っているjavascriptを１個のファイルとしてapp/asset/javascript/以下に置きました。
その後、適用したいviewとは別の1個のviewがそのjavascriptの内容と競合してしまいそのviewのみ適用したくないという状況になりました。
こういう事が起こった場合どのようにするのがスマートでしょうか？
補足
起こっている競合は、datetimepickerが二重にかかってしまうという事です。
6個のviewでは共通のオプションでの適用だったのでまとめましたが、別の1個の方では別のオプションで適用しようとし、こちらはapp/asset/javascript/該当のcontroller名.jsに書きました。
3166,javascript,Internet Explorerではdocument.URLUnencodedというプロパティがあります。
http://msdn.microsoft.com/en-us/library/ie/ms534709%28v=vs.85%29.aspx
このdocument.URLUnencodedプロパティとdocument.URLプロパティの違いについて詳しく教えて欲しいです(あるいは違いが詳しく説明されているサイトなどがあれば教えて下さい)。
IE7-IE11にて試した範囲では、
fileスキームで開いた場合にdocument.URLはfile://C:\tmp path\file.htmlになるが、document.URLUnencodedではfile:///C:/tmp%20path/file.htmlになる
IE7,IE8ではdocument.URLEncodedは書き換え可能。書き換えた場合にはページが遷移する
という2点がわかりました。
3170,javascript,これだとダメで
var histArray = new Array(256);
var histData = [histArray,histArray,histArray];
for(i = 0; i < 3; i++){
for(j = 0; j < 256; j++){
histData[i][j] = 0;
}
}
こっちだとちゃんと初期化されるんですが、これはなぜでしょうか？
var histData = [histArray,histArray,histArray];
for(j = 0; j < 3; j++){
histData[j] = new Array(256);
for(i = 0; i < 256; i++){
histData[j][i] = 0;
}
}
4227,javascript,CasperJS で、クリック後の Request URL の取得方法を教えて下さい。
タグの href や src の属性を確認せず、 Request URL を取得する方法です。
casper.on('resource.requested', function(resource){
this.echo(resource.url);
});
で全ての Request URL は取得できるのですが、クリック後に発生したリクエストのURLのみを取得したいのです。
環境は以下になります。
CentOS 6.6
PhantomJS 1.9.7
CasperJS 1.1.0-beta3
よろしくお願いします。
4231,android,現在 Android から Facebook に投稿しようとしているのですが、投稿する段階で以下のエラーが発生して投稿できません。
{HttpStatus: 403, errorCode: 200,
errorType: OAuthException, errorMessage: (#200) Permissions error}
下記のサイトを参考にしながら作っており、ログイン機能までは実装できました。
「AndroidStudioでFacebook連携アプリを作ろうその１」
Facebook Developers にある App ID や Hash Key の設定も行いました。 Hash Key は以下のように生成しました。
keytool -exportcert -alias androiddebugkey -keystore ~/.android/debug.keystore | \
openssl sha1 -binary | \
openssl base64
Graph API Explorer で publish_actions にもチェックを入れてます。これ以上どうすればいいかわかりません。どのようにすれば Facebook でウォールに投稿することができるようになるのでしょうか？
4257,android,現在非アクティビティクラスから別のアクティビティへ画面遷移をさせようとしているのですが、NullPointerExceptionが返ってきて画面遷移ができません。
java.lang.NullPointerException
at android.app.Activity.startActivityForResult(Activity.java:3424)
at android.app.Activity.startActivityForResult(Activity.java:3385)
at android.app.Activity.startActivity(Activity.java:3627)
at android.app.Activity.startActivity(Activity.java:3595)
at appdev.test.subactivity.move(SubActivity.java:79)
at appdev.test.MainActivity.onClick(MainActivity.java:58)
at android.view.View.performClick(View.java:4438)
at android.view.View$PerformClick.run(View.java:18422)
at android.os.Handler.handleCallback(Handler.java:733)
at android.os.Handler.dispatchMessage(Handler.java:95)
at android.os.Looper.loop(Looper.java:136)
at android.app.ActivityThread.main(ActivityThread.java:5001)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:515)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:785)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:601)
at dalvik.system.NativeStart.main(Native Method)
下記のようなコードを書いているのですが、どうすれば画面遷移ができるようになるのでしょうか？宜しくお願いします。
MainActivity
SubActivity subactivity = new SubActivity();
subactivity.move(this);
SubActivity
public void move(Activity activity) {
startActivity(new Intent(activity, AnotherActivity.class));
}
4260,javascript,MixPanelのJavaScript APIを使用して、ユーザごとに行動を管理したいと考えています。
以下のマニュアルのManaging user identityを参考に行っているのですが、ユーザ毎にフィルタすることができません。
https://mixpanel.com/help/reference/javascript
どのように行えば実現できるかご存知ないでしょうか？
追記
mixpanelで設定しているコードは以下です。（仮で固定データを入れてます
ブラウザを更新するとView Page testがIncrementされると思うのですが、MixPanelのPeopleのメニューには何も変化が現れなくて困っています。
具体的にやりたい事は例のView page testをユーザ情報毎にフィルタする事です。
mixpanel.identify("11111");
mixpanel.people.set({
"$id": "11111",
"$email": "hoge@email.com",    // only special properties need the $
"vpc":0
});
mixpanel.people.increment("vpc");
4266,android,Android アプリに ffmpeg を組み込んで使用したいと考えています。
このサイトの記事を参考に libvideokit.so を作成しました。
作成した libvideokit.soをアプリに組み込んで使用すると例外が発生します。
以下、例外が発生したときのログです。
01-08 12:55:18.980: I/Videokit(5477): Initializing AV codecs
01-08 12:55:18.990: I/Videokit(5477): Splitting the commandline.
01-08 12:55:18.990: I/Videokit(5477): Finished splitting the commandline.
01-08 12:55:18.990: I/Videokit(5477): Parsing a group of options: global .
01-08 12:55:18.990: I/Videokit(5477): Successfully parsed a group of options.
01-08 12:55:18.990: W/Videokit(5477): Use -h to get full help or, even better, run 'man ffmpeg'
01-08 12:55:18.990: E/Videokit(5477): At least one output file must be specified
01-08 12:55:18.990: I/Videokit(5477): Stream mapping:
01-08 12:55:19.000: A/libc(5477): Fatal signal 11 (SIGSEGV) at 0x0000048c (code=1), thread 5477 (ample.img2video)
解決策のアドバイスをよろしくお願い致します。
追記
エラーメッセージに「At least one output file must be specified」と出力されていますので、ffmpeg を実行するコマンド文字列で出力ファイルが指定されていないのだと思われます。 –  heliac2001
ご指摘のとおり出力ファイルを指定して実行してらうまくいきました。ありがとうございました。
追加で質問なのですが、コマンドに指定するファイルがなかった場合もアプリが落ちてしまいます。これをアプリが落ちないで、アプリ上で「エラーが発生しました。」と表示す‌​ることは可能でしょうか？
4269,android,以下のサイトを参考にlibvideokit.soを作成して使用しようと考えています。
http://qiita.com/hayabon/items/3a0817b4443bd0e4c5af
実行コマンドに指定するファイルが無かった場合にアプリが落ちます。
これをアプリ側で捕捉して、「エラーが発生しました」と表示することは可能でしょうか？
アドバイスをよろしくお願い致します。
01-08 14:26:01.490: I/Videokit(14692): Initializing AV codecs
01-08 14:26:01.500: I/Videokit(14692): Splitting the commandline.
01-08 14:26:01.500: I/Videokit(14692): Reading option '-y' ...
01-08 14:26:01.500: I/Videokit(14692):  matched as option 'y' (overwrite output files) with argument '1'.
01-08 14:26:01.500: I/Videokit(14692): Reading option '-f' ...
01-08 14:26:01.500: I/Videokit(14692):  matched as option 'f' (force format) with argument 'image2'.
01-08 14:26:01.500: I/Videokit(14692): Reading option '-loop' ...
01-08 14:26:01.500: I/Videokit(14692):  matched as AVOption 'loop' with argument '1'.
01-08 14:26:01.500: I/Videokit(14692): Reading option '-i' ...
01-08 14:26:01.500: I/Videokit(14692):  matched as input file with argument '/data/data/com.example.img2video/files/movie_0001.jpg'.
01-08 14:26:01.500: I/Videokit(14692): Reading option '-vcodec' ...
01-08 14:26:01.500: I/Videokit(14692):  matched as option 'vcodec' (force video codec ('copy' to copy stream)) with argument 'mpeg4'.
01-08 14:26:01.500: I/Videokit(14692): Reading option '-t' ...
01-08 14:26:01.500: I/Videokit(14692):  matched as option 't' (record or transcode "duration" seconds of audio/video) with argument '3'.
01-08 14:26:01.500: I/Videokit(14692): Reading option '-r' ...
01-08 14:26:01.500: I/Videokit(14692):  matched as option 'r' (set frame rate (Hz value, fraction or abbreviation)) with argument '1'.
01-08 14:26:01.500: I/Videokit(14692): Reading option '-s' ...
01-08 14:26:01.500: I/Videokit(14692):  matched as option 's' (set frame size (WxH or abbreviation)) with argument '640x360'.
01-08 14:26:01.500: I/Videokit(14692): Reading option '-preset' ...
01-08 14:26:01.500: I/Videokit(14692):  matched as AVOption 'preset' with argument 'ultrafast'.
01-08 14:26:01.500: I/Videokit(14692): Reading option '-tune' ...
01-08 14:26:01.500: I/Videokit(14692):  matched as AVOption 'tune' with argument 'stillimage'.
01-08 14:26:01.500: I/Videokit(14692): Reading option '/data/data/com.example.img2video/files/1.mp4' ...
01-08 14:26:01.500: I/Videokit(14692):  matched as output file.
01-08 14:26:01.500: I/Videokit(14692): Finished splitting the commandline.
01-08 14:26:01.500: I/Videokit(14692): Parsing a group of options: global .
01-08 14:26:01.500: I/Videokit(14692): Applying option y (overwrite output files) with argument 1.
01-08 14:26:01.500: I/Videokit(14692): Successfully parsed a group of options.
01-08 14:26:01.500: I/Videokit(14692): Parsing a group of options: input file /data/data/com.example.img2video/files/movie_0001.jpg.
01-08 14:26:01.500: I/Videokit(14692): Applying option f (force format) with argument image2.
01-08 14:26:01.500: I/Videokit(14692): Successfully parsed a group of options.
01-08 14:26:01.500: E/Videokit(14692): /data/data/com.example.img2video/files/movie_0001.jpg: No such file or directory
01-08 14:26:01.500: E/Videokit(14692): Option loop not found.
01-08 14:26:01.510: A/libc(14692): Fatal signal 11 (SIGSEGV) at 0x00000018 (code=1), thread 14692 (ample.img2video)
4279,android,プッシュ通知実装を行っているのですが、サーバからのデータを受け取る段階でクラッシュしてしまいます。
環境はEclipseでgoogle play service libはプロジェクトを作ってimportし、ライブラリとして追加。
suport v4 はandroid toolsからadd support libraryして追加しました。
エラー：
FATAL EXCEPTION: main
java.lang.RuntimeException: Unable to instantiate receiver org.techbooster.gcmsample.GCMBroadcastReceiver: java.lang.ClassNotFoundException: Didn't find class "org.techbooster.gcmsample.GCMBroadcastReceiver" on path: /data/app/org.techbooster.gcmsample-1.apk
at android.app.ActivityThread.handleReceiver(ActivityThread.java:2371)
at android.app.ActivityThread.access$1500(ActivityThread.java:149)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1322)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:213)
at android.app.ActivityThread.main(ActivityThread.java:5092)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:797)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:564)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.ClassNotFoundException: Didn't find class "org.techbooster.gcmsample.GCMBroadcastReceiver" on path: /data/app/org.techbooster.gcmsample-1.apk
at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:65)
at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
at android.app.ActivityThread.handleReceiver(ActivityThread.java:2366)
... 10 more
アクティビティ
package org.techbooster.gcmsample;
import java.io.IOException;
import java.io.OutputStream;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.HashMap;
import java.util.Iterator;
import java.util.Map;
import java.util.Map.Entry;
import com.google.android.gms.common.ConnectionResult;
import com.google.android.gms.common.GooglePlayServicesUtil;
import com.google.android.gms.gcm.GoogleCloudMessaging;
import org.techbooster.gcmsample.CommonUtilities;
import org.techbooster.gcmsample.*;
import android.os.AsyncTask;
import android.os.Bundle;
import android.app.Activity;
import android.content.Context;
import android.content.SharedPreferences;
import android.content.pm.PackageInfo;
import android.content.pm.PackageManager.NameNotFoundException;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
public class MainActivity extends Activity implements OnClickListener{
private static final String TAG = "TechBoosterSample";
public static final String EXTRA_MESSAGE = "message";
public static final String PROPERTY_REG_ID = "registration_id";
private static final String PROPERTY_APP_VERSION = "appVersion";
private final static int PLAY_SERVICES_RESOLUTION_REQUEST = 9000;
GoogleCloudMessaging gcm;
String regid;
Context context;
/**
* サーバー通信用AsyncTask
*/
AsyncTask<Void, Void, Void> mRegisterTask;
@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);
Button btnRegist = (Button) findViewById(R.id.btn_regist);
btnRegist.setOnClickListener(this);
Button btnUnregist = (Button) findViewById(R.id.btn_unregist);
btnUnregist.setOnClickListener(this);
context = getApplicationContext();
// デバイスにPlayサービスAPKが入っているか検証する
if (checkPlayServices()) {
gcm = GoogleCloudMessaging.getInstance(context);
regid = getRegistrationId(context);
} else {
Log.i(TAG, "Google Play Services APKが見つかりません");
}
}
/*
* PlayサービスのAPKチェック
*/
private boolean checkPlayServices() {
int resultCode = GooglePlayServicesUtil.isGooglePlayServicesAvailable(this);
if (resultCode != ConnectionResult.SUCCESS) {
if (GooglePlayServicesUtil.isUserRecoverableError(resultCode)) {
GooglePlayServicesUtil.getErrorDialog(resultCode, this,
PLAY_SERVICES_RESOLUTION_REQUEST).show();
} else {
Log.i(TAG, "Playサービスがサポートされていない端末です");
finish();
}
return false;
}
return true;
}
/*
* レジストレーションIDの取得
*/
private String getRegistrationId(Context context) {
final SharedPreferences prefs = getGCMPreferences(context);
String registrationId = prefs.getString(PROPERTY_REG_ID, "");
if (regid == null) return "";
// プリファレンスに格納されていない場合は空で返却
if (regid.equals("")) {
Log.i(TAG, "レジストレーションIDが見つかりません");
return "";
}
// アプリケーションがバージョンアップされていた場合、レジストレーションIDを必ずクリアしないといけません
// すでにレジストレーションIDが存在していた場合、再生成は行いません。
int registeredVersion = prefs.getInt(PROPERTY_APP_VERSION, Integer.MIN_VALUE);
int currentVersion = getAppVersion(context);
if (registeredVersion != currentVersion) {
Log.i(TAG, "アプリケーションバージョンが変更されています");
return "";
}
return registrationId;
}
/*
* アプリケーションバージョン情報を取得する
*/
private static int getAppVersion(Context context) {
try {
PackageInfo packageInfo = context.getPackageManager()
.getPackageInfo(context.getPackageName(), 0);
return packageInfo.versionCode;
} catch (NameNotFoundException e) {
throw new RuntimeException("パッケージ名が見つかりません : " + e);
}
}
/*
* SharedPreferencesを取得
*/
private SharedPreferences getGCMPreferences(Context context) {
return getSharedPreferences(MainActivity.class.getSimpleName(),
Context.MODE_PRIVATE);
}
/*
* レジストレーションIDの保存
*/
private void storeRegistrationId(Context context, String regId) {
final SharedPreferences prefs = getGCMPreferences(context);
int appVersion = getAppVersion(context);
Log.i(TAG, "レジストレーションIDを登録。登録時のアプリケーションバージョン: " + appVersion);
SharedPreferences.Editor editor = prefs.edit();
editor.putString(PROPERTY_REG_ID, regId);
editor.putInt(PROPERTY_APP_VERSION, appVersion);
editor.commit();
}
@Override
protected void onResume() {
super.onResume();
checkPlayServices();
}
@Override
protected void onDestroy() {
if (mRegisterTask != null) {
mRegisterTask.cancel(true);
}
gcm.close();
super.onDestroy();
}
@Override
public void onClick(View v) {
if(v.getId() == R.id.btn_regist){
if (regid.equals("")) {
// GCM登録用AsyncTaskの実行
mRegisterTask = new AsyncTask<Void, Void, Void>() {
@Override
protected Void doInBackground(Void... params) {
if (gcm == null) {
// インスタンスがなければ取得する
gcm = GoogleCloudMessaging.getInstance(context);
}
try {
// GCMサーバーへ登録する
regid = gcm.register(CommonUtilities.SENDER_ID);
} catch (IOException e) {
e.printStackTrace();
}
// レジストレーションIDを自分のサーバーへ送信する
// レジストレーションIDをつかえば、アプリケーションにGCMメッセージを送信できるようになります
Log.i(TAG,"送信対象のレジストレーションID: " + regid);
register(regid);
// レジストレーションIDを端末に保存
storeRegistrationId(context, regid);
return null;
}
@Override
protected void onPostExecute(Void result) {
mRegisterTask = null;
}
};
mRegisterTask.execute(null, null, null);
}
}else if(v.getId() == R.id.btn_unregist){
//GCMサーバーから登録を解除するAsyncTaskの実行
mRegisterTask = new AsyncTask<Void, Void, Void>() {
@Override
protected Void doInBackground(Void... params) {
if (gcm == null) {
// インスタンスがなければ取得する
gcm = GoogleCloudMessaging.getInstance(context);
}
try {
// GCMサーバーの登録を解除する
gcm.unregister();
} catch (IOException e) {
e.printStackTrace();
}
// レジストレーションIDを自分のサーバーでも削除する
unregister(regid);
return null;
}
@Override
protected void onPostExecute(Void result) {
mRegisterTask = null;
}
};
mRegisterTask.execute(null, null, null);
}
}
/*
*
*/
public static boolean register(String regId) {
String serverUrl = CommonUtilities.SERVER_URL + "/register";
Map<String, String> params = new HashMap<String, String>();
params.put("key", regId);
try {
post(serverUrl, params);
return true;
} catch (IOException e) {
e.printStackTrace();
}
return false;
}
public static void unregister(String regId) {
String serverUrl = CommonUtilities.SERVER_URL + "/unregister";
Map<String, String> params = new HashMap<String, String>();
params.put("key", regId);
try {
post(serverUrl, params);
} catch (IOException e) {
}
}
public static void post(String endpoint, Map<String, String> params)
throws IOException {
URL url;
try {
url = new URL(endpoint);
} catch (MalformedURLException e) {
throw new IllegalArgumentException("invalid url: " + endpoint);
}
StringBuilder bodyBuilder = new StringBuilder();
Iterator<Entry<String, String>> iterator = params.entrySet().iterator();
// POSTするパラメータ
while (iterator.hasNext()) {
Entry<String, String> param = iterator.next();
bodyBuilder.append(param.getKey()).append('=')
.append(param.getValue());
if (iterator.hasNext()) {
bodyBuilder.append('&');
}
}
String body = bodyBuilder.toString();
byte[] bytes = body.getBytes();
HttpURLConnection conn = null;
try {
conn = (HttpURLConnection) url.openConnection();
conn.setDoOutput(true);
conn.setUseCaches(false);
conn.setFixedLengthStreamingMode(bytes.length);
conn.setRequestMethod("POST");
conn.setRequestProperty("Content-Type",
"application/x-www-form-urlencoded;charset=UTF-8");
// ポスト送信
OutputStream out = conn.getOutputStream();
out.write(bytes);
out.close();
// サーバーレスポンス受信
int status = conn.getResponseCode();
if (status != 200) {
throw new IOException("Post failed with error code " + status);
}
} finally {
if (conn != null) {
conn.disconnect();
}
}
}
}
レシーバクラス
package org.techbooster.gcmsample;
import com.google.android.gms.gcm.GoogleCloudMessaging;
import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.Context;
import android.content.Intent;
import android.content.res.Resources;
import android.media.RingtoneManager;
import android.net.Uri;
import android.os.Bundle;
import android.support.v4.content.WakefulBroadcastReceiver;
import android.util.Log;
public class GcmBroadcastReceiver extends WakefulBroadcastReceiver {
private static final String TAG = "gcm debug";
@Override
public void onReceive(Context context, Intent intent) {
// 送られてきたデータを受け取る
GoogleCloudMessaging gcm = GoogleCloudMessaging.getInstance(context);
String messageType = gcm.getMessageType(intent);
// 送られてきたデータのメッセージ
Bundle extras = intent.getExtras();
String mess = extras.toString();
if (!extras.isEmpty()) {
// エラー
if (messageType
.equals(GoogleCloudMessaging.MESSAGE_TYPE_SEND_ERROR)) {
Log.d(TAG, "MESSAGE_TYPE_SEND_ERROR：" + mess);
}
// サーバーでメッセージ削除
else if (messageType
.equals(GoogleCloudMessaging.MESSAGE_TYPE_DELETED)) {
Log.d(TAG, "MESSAGE_TYPE_DELETED：" + mess);
}
// 正常に受信
else if (messageType
.equals(GoogleCloudMessaging.MESSAGE_TYPE_MESSAGE)) {
Resources res = context.getResources();
Notification n = new Notification(); // Notificationの生成
n.icon = R.drawable.ic_launcher; // アイコンの設定
// 通知されたときに通知バーに表示される文章
n.tickerText = mess + "(short)"; // メッセージの設定
n.flags = Notification.FLAG_AUTO_CANCEL; // 通知を選択した時に自動的に通知が消えるための設定
// 通常の着信音を選択する
Uri uri = RingtoneManager
.getDefaultUri(RingtoneManager.TYPE_ALARM); // アラーム音
n.sound = uri; // サウンド
Intent i = new Intent(context, MainActivity.class);
i.putExtra("MESS", mess);
PendingIntent pi = PendingIntent.getActivity(context, 0, i,
PendingIntent.FLAG_UPDATE_CURRENT);
// 上から通知バーを下してきたときに表示される文章をセット
n.setLatestEventInfo(context, res.getString(R.string.app_name),
mess + "(long)", pi);
long[] vibrate_ptn = { 0, 100, 300, 1000 }; // 独自バイブレーションパターン
n.vibrate = vibrate_ptn; // 独自バイブレーションパターンを設定
n.defaults |= Notification.DEFAULT_LIGHTS; // デフォルトLED点滅パターンを設定
// NotificationManagerのインスタンス取得
NotificationManager nm = (NotificationManager) context
.getSystemService(Context.NOTIFICATION_SERVICE);
nm.notify(1, n); // 設定したNotificationを通知する
}
}
}
}
サービスクラス
package org.techbooster.gcmsample;
import com.google.android.gms.gcm.GoogleCloudMessaging;
import android.app.IntentService;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.os.SystemClock;
import android.support.v4.app.NotificationCompat;
import android.util.Log;
public class GcmIntentService extends IntentService {
private static final String TAG = "TechBoosterSample";
public static final int NOTIFICATION_ID = 1;
private NotificationManager mNotificationManager;
NotificationCompat.Builder builder;
public GcmIntentService() {
super("GcmIntentService");
}
@Override
protected void onHandleIntent(Intent intent) {
Bundle extras = intent.getExtras();
GoogleCloudMessaging gcm = GoogleCloudMessaging.getInstance(this);
// The getMessageType() intent parameter must be the intent you received
// in your BroadcastReceiver.
String messageType = gcm.getMessageType(intent);
if (!extras.isEmpty()) {  // has effect of unparcelling Bundle
/*
* Filter messages based on message type. Since it is likely that GCM
* will be extended in the future with new message types, just ignore
* any message types you're not interested in, or that you don't
* recognize.
*/
if (GoogleCloudMessaging.
MESSAGE_TYPE_SEND_ERROR.equals(messageType)) {
sendNotification("Send error: " + extras.toString());
} else if (GoogleCloudMessaging.
MESSAGE_TYPE_DELETED.equals(messageType)) {
sendNotification("Deleted messages on server: " +
extras.toString());
// If it's a regular GCM message, do some work.
} else if (GoogleCloudMessaging.
MESSAGE_TYPE_MESSAGE.equals(messageType)) {
// This loop represents the service doing some work.
for (int i=0; i<5; i++) {
Log.i(TAG, "Working... " + (i+1)
+ "/5 @ " + SystemClock.elapsedRealtime());
try {
Thread.sleep(5000);
} catch (InterruptedException e) {
}
}
Log.i(TAG, "Completed work @ " + SystemClock.elapsedRealtime());
// Post notification of received message.
sendNotification("Received: " + extras.toString());
Log.i(TAG, "Received: " + extras.toString());
}
}
// Release the wake lock provided by the WakefulBroadcastReceiver.
org.techbooster.gcmsample.GcmBroadcastReceiver.completeWakefulIntent(intent);
}
// Put the message into a notification and post it.
// This is just one simple example of what you might choose to do with
// a GCM message.
private void sendNotification(String msg) {
mNotificationManager = (NotificationManager)
this.getSystemService(Context.NOTIFICATION_SERVICE);
PendingIntent contentIntent = PendingIntent.getActivity(this, 0,
new Intent(this, MainActivity.class), 0);
NotificationCompat.Builder mBuilder =
new NotificationCompat.Builder(this)
.setSmallIcon(R.drawable.ic_launcher)
.setContentTitle("GCM Notification")
.setStyle(new NotificationCompat.BigTextStyle()
.bigText(msg))
.setContentText(msg);
mBuilder.setContentIntent(contentIntent);
mNotificationManager.notify(NOTIFICATION_ID, mBuilder.build());
}
}
マニュフェスト
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="org.techbooster.gcmsample"
android:versionCode="1"
android:versionName="1.0" >
<uses-sdk
android:minSdkVersion="9"
android:targetSdkVersion="17" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.READ_CONTACTS"/>
<uses-permission android:name="android.permission.WAKE_LOCK" />
<uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
<permission
android:name="org.techbooster.gcmsample.permission.C2D_MESSAGE"
android:protectionLevel="signature" />
<uses-permission android:name="org.techbooster.gcmsample.permission.C2D_MESSAGE" />
<application
android:allowBackup="true"
android:icon="@drawable/ic_launcher"
android:label="@string/app_name"
android:theme="@style/AppTheme" >
<meta-data
android:name="com.google.android.gms.version"
android:value="@integer/google_play_services_version" />
<activity
android:name="org.techbooster.gcmsample.MainActivity"
android:label="@string/app_name" >
<intent-filter>
<action android:name="android.intent.action.MAIN" />
<category android:name="android.intent.category.LAUNCHER" />
</intent-filter>
</activity>
<receiver
android:name="org.techbooster.gcmsample.GCMBroadcastReceiver"
android:permission="com.google.android.c2dm.permission.SEND" >
<intent-filter>
<action android:name="com.google.android.c2dm.intent.RECEIVE" />
<action android:name="com.google.android.c2dm.intent.REGISTRATION" />
<category android:name="org.techbooster.gcmsample" />
</intent-filter>
</receiver>
<service android:name="org.techbooster.gcmsample.GCMIntentService" />
</application>
</manifest>
4282,javascript,MixPanel JavaScript Api でEngagementをTrackするには　mixpanel.track("View Page");を使用して、PeopleのTrackを行うには mixpanel.people.function("people以下の関数のどれか");　を使用すると思います。
どうすれば、EngagemantとPeople関係のイベントを同時にTrackできるのでしょうか？
mixpanel.identify("11111");
//以下２つを一度に行いたい
mixpanel.people.increment("View Page", 1);
mixpanel.track("View Page");
4285,android,Android で ScrollView の入れ子をしたいと考えていますが、うまくいきません。
親の ScrollView が画面全体()で、子の ScrollView はその親のなかの一部という構成になりますが、そもそも可能なのでしょうか？
できれば XML を使用したいと考えています。
4297,android,PorterDuff.Modeのドキュメントを見るとADD, OVERLAYだけ具体的な式が記述されておらず、SRC・DSTのARGB値にどのような計算が行われるのかわかりません。
ADDには「Saturate(S + D)」と書いてありますがこの意味がわかりません。[Sa+Da, Sc+Dc] みたいな感じになるのでしょうか？
OVERLAYに至っては何も書いてありません…
4302,android,OracleのJDK6実装では、
Locale locale = new Locale("ja", "JP", "JP"); // ja_JP_JP
のロケールを利用することで和暦を扱うことができますが、AndroidではGregorianCalendarが返却される、という実装の違いがあります。
これはAndroidにはJapaneseImperialCalendarが存在しない、ということなんでしょうか？
UPDATE: Android N にてICU4J Android フレームワーク APIが提供されました。
android.icu.util.Calendar calendar = new android.icu.util.JapaneseCalendar();
android.icu.text.DateFormat df = new android.icu.text.SimpleDateFormat("Gy年M月d日", new android.icu.text.DateFormatSymbols(calendar, Locale.JAPANESE));
df.setCalendar(calendar);
Log.d("Calendar", df.format(new Date())); // 平成28年4月30日
Android標準で和暦を扱うことができるようになりました（ただし Android N 以降のみ）。
4308,android,Kickstarter支援者に、特別アイテムをプレゼントしたいのですが
Androidアプリ、(Unity3d制作)で
サーバーを立ててユーザー認証をする方法ではなく、
アプリ単体でどの支援者か判別する方法はあるでしょうか？
支援者に特別アイテム用のパスワードをメールで送る
などは考えたのですが、
それだとパスワードをTwitterなどでつぶやかれたり、
攻略サイトに張られたりなどされる可能性もあり
スマートな方法ではないと考えます。
サーバー立てないのは、単に僕がサーバー触ったことないだけなので
他に方法がなければそのままパスワード制にするか
この機会にサーバーの勉強を始めようかと思うのですが。
4323,android,intentでやりとりする情報からR.idを取るに当たって下記の様にHashMapで　"news" => R.id.menu_new　といった関連付けを行っているのですが、もっとスマートな方法はあるのでしょうか？
R.idをそのまま投げるやり方もあるのですが、外部とやり取りする際に文字列にするので結局変換が必要です。
static HashMap<String,Integer> menuIdTable = new HashMap<String, Integer>() {
{
put("news", R.id.menu_news);
put("message", R.id.menu_message);
put("bookmark", R.id.menu_bookmark);
put("ranking", R.id.menu_ranking);
}
};
4356,android,現在ContentProviderを使ったアプリを作成しているのですが「Failed to find provider info for taro.thanks.mycontentprovider」と、「java.lang.RuntimeException: Unable to start activity ComponentInfo{taro.thanks/taro.thanks.MainActivity}: java.lang.NullPointerException」というエラーが返ってきます。色々と調べてみたところ、Manifestファイルに追記しなければいけないことが分かり、以下のように追記したのですが、それでも同じエラーが返ってきます。
<provider
android:authorities="taro.thanks"
android:name=".MyContentProvider"
android:exported="false"/>
そもそもContentProviderの使い方が間違っているのでしょうか？
エラーが出る場所は下記のコードのwhile(cursor.moveToNext())の行です。
Cursor cursor = getContentResolver().query(MyContentProvider.URI_MAN, new String[]{MyContentProvider.COLUMN_VOICE}, null, null, null);
while (cursor.moveToNext()) {
ContentProviderを継承したMyContentProviderクラスのqueryメソッドは以下のようになっています。
@Override
public Cursor query(Uri uri, String[] projection, String selection, String[] selectionArgs, String sortOrder) {
Cursor c = db.query(uri.getPathSegments().get(0), projection, selection, selectionArgs, null, null, null);
return c;
}
また、UriはMyContentProviderクラスのフィールドで
public static final Uri URI_MAN = Uri.parse("content://taro.thanks.mycontentprovider/" + TB_MAN);
と定義しています。
間違っているところがあれば、指摘していただきたいです。
すみませんが、宜しくお願いします。
Manifestファイル
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="taro.thanks" >
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.RECORD_AUDIO" />
<application
android:allowBackup="true"
android:icon="@drawable/ic_launcher"
android:theme="@style/Theme.AppCompat.Light" >
<activity
android:name=".MainActivity"
android:icon="@drawable/ic_launcher"
android:label="@string/app_name"
android:screenOrientation="portrait" >
<intent-filter>
<action android:name="android.intent.action.MAIN" />
<category android:name="android.intent.category.LAUNCHER" />
</intent-filter>
</activity>
<provider
android:authorities="taro.thanks.MyContentProvider"
android:name=".MyContentProvider"
android:exported="false" />
</application>
<supports-screens
android:smallScreens="true"
android:normalScreens="true"
android:largeScreens="true"
android:anyDensity="true" />
</manifest>
4365,javascript,Rails4 で Sass を利用してスタイルシートを記述しています。
Sass は変数が使えるのでとても便利なのですが、 Sass で定義した変数の値を Javascript から変更するというようなことはできますでしょうか。
たとえば以下の様な Sass ファイルを作成し「赤」をテーマカラーに設定していた場合:
$theme-color: #FF0000
body
color: $theme-color
.box
background: $theme-color
color: white
.message
border: solid 1px $theme-color
&:after
content 'message:'
color: $theme-color
$theme-color の値を Javascript から #0000FF に切り替え、サイトのテーマカラーを一括で変更するというようなことはできますでしょうか。
4387,android,データベースのバージョンを変更し、データベースのアップグレードをしようとしたところ以下のようなエラーメッソージが返ってきました。
「android.database.sqlite.SQLiteDatabaseLockedException: database is locked (code 5): , while compiling: PRAGMA journal_mode」
色々調べて、データベースをcloseしてみてもうまくいきません。（closeの仕方が間違っているのかもしれませんが...）
下記にコードを記載します。
現在setDataToDBメソッドの中でエラーが出ています。
すみませんが、宜しくお願いします。
public class MyDBHelper extends SQLiteOpenHelper {
public MyDBHelper(Context context) {
super(context, DB_NAME, null, DB_VERSION);
}
@Override
public void onCreate(SQLiteDatabase db) {
db.beginTransaction();
try {
db.execSQL("CREATE TABLE IF NOT EXISTS " + TB_MAN + "(ID INTEGER PRIMARY KEY AUTOINCREMENT, VOICE TEXT)");
db.execSQL("CREATE TABLE IF NOT EXISTS " + TB_WOMAN + "(ID INTEGER PRIMARY KEY AUTOINCREMENT, VOICE TEXT)");
db.execSQL("CREATE TABLE IF NOT EXISTS " + TB_WOMAN_MAX + "(ID INTEGER PRIMARY KEY AUTOINCREMENT, VOICE TEXT)");
db.execSQL("CREATE TABLE IF NOT EXISTS " + TB_WOMAN_MAX + "(ID INTEGER PRIMARY KEY AUTOINCREMENT, VOICE TEXT)");
}finally {
db.endTransaction();
}
setDataToDB("aaa", "bbb", Uri.parse("content://taro.thanks.MyContentProvider/" + TB_MAN));
setDataToDB("AAA", "BBB", Uri.parse("content://taro.thanks.MyContentProvider/" + TB_MAN_MAX));
setDataToDB("ccc", "ddd", Uri.parse("content://taro.thanks.MyContentProvider/" + TB_WOMAN));
setDataToDB("CCC", "DDD", Uri.parse("content://taro.thanks.MyContentProvider/" + TB_WOMAN_MAX));
}
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
db.beginTransaction();
try {
db.execSQL("DROP TABLE IF EXISTS " + TB_MAN);
db.execSQL("DROP TABLE IF EXISTS " + TB_WOMAN);
db.execSQL("DROP TABLE IF EXISTS " + TB_MAN_MAX);
db.execSQL("DROP TABLE IF EXISTS " + TB_WOMAN_MAX);
}finally {
db.endTransaction();
}
onCreate(db);
}
public void setDataToDB(String defaultData1, String defaultData2, Uri uri) {
ContentValues values = new ContentValues();
values.put(COLUMN_VOICE, defaultData1);
values.put(COLUMN_VOICE, defaultData2);
getContext().getContentResolver().insert(uri, values);
}
}
4400,android,Eclipseで新規にプロジェクトと作ったのですが､画像のようにエラーがでてしまいました｡  プロジェクトを見てみると､今までに作ったプロジェクトにはあった､Private Librariesがありませんでした｡
1番上のエラーである｡import android.support.v7.app.ActionBarActivity;のエラーには｢インポートされた android.support.v7.app は見つかりません｣と書かれていました｡
4402,android,mMediaPlayer = MediaPlayer.create(this, Uri.parse("android.resource://" + getPackageName() + "/R.raw." + name));
mMediaPlayer.start();
上記のようにしてrawフォルダの音声ファイルを再生させようとすると、以下のようなエラーが返ってきます。
Couldn't open file on client side, trying server side
D/MediaPlayer﹕ create failed: java.io.IOException: Prepare failed.: status=0x1
これはMediaPlayer.createの引数のUriが間違っているのでしょうか？
原因が分からず詰まってしまっており、ぜひお力添えをいただきたいと思います。
宜しくお願いします。
4436,android,内部ストレージに音声ファイルを保存したくてやり方を調べていたのですが、テキストファイルの保存方法ばかりで音声ファイルの保存方法が出てきませんでした。音声ファイルは内部ストレージに保存できないのでしょうか？できるとするならば一体どのような方法で保存をすればよいのでしょうか？すみませんが、宜しくお願いします。
4437,javascript,以下のHTMLとCSSがあるとき、Javascriptで #FF0000 を #0000FF に変更するには
すべての要素を繰り返し処理で回し、さらにcolorやborder-color、background-colorの
一つ一つの要素の中を覗いて書き換える方法しか思いつかないのですが、もうすこし
効率の良い方法はありますか？
また、:after や :before で定義した色については差し替え不能だと思うのですが、可能ですか？
追記：
JavascriptでDOMのクラスを書き換えることで実現する方法が紹介されましたが
そうすると置換したい色の数だけCSSの定義を増やさなければならなくなるため
sassを利用したスマートな解決方法などもございましたら
是非教えていただきたいです。
HTML
<h1>hoge</h1>
<p>piyo</p>
<div>fuga</div>
<span>hena</span>
CSS
h1 {
background: #FF0000;
}
p {
color: #FF0000;
}
div {
border: solid 1px #FF0000;
}
span:after {
content: 'after:';
color: #FF0000;
}
4445,javascript,matter.jsのオブジェクトの結合でつまづいています。
下記コードでcarオブジェクトの上に四角形を３つ固定させたいのですが、うまく固定できずに困っています。どうすればうまくできますでしょうか？
var Engine = Matter.Engine,
Gui = Matter.Gui,
World = Matter.World,
Bodies = Matter.Bodies,
Body = Matter.Body,
Composite = Matter.Composite,
Composites = Matter.Composites,
Common = Matter.Common,
Events = Matter.Events;
MouseConstraint = Matter.MouseConstraint,
Constraint = Matter.Constraint;
var container = document.getElementById("canvas-container");
var engine = Engine.create(container,{render: {
options: {
wireframes:false,
showIds:true
}
}});
var offset = 5;
World.addBody(engine.world, Bodies.rectangle(400, -offset, 800.5 + 2 * offset, 50.5, { isStatic: true }));
World.addBody(engine.world, Bodies.rectangle(400, 600 + offset, 800.5 + 2 * offset, 50.5, { isStatic: true }));
World.addBody(engine.world, Bodies.rectangle(800 + offset, 300, 50.5, 600.5 + 2 * offset, { isStatic: true }));
World.addBody(engine.world, Bodies.rectangle(-offset, 300, 50.5, 600.5 + 2 * offset, { isStatic: true }));
var mouseConstraint = MouseConstraint.create(engine);
World.add(engine.world, mouseConstraint);
/*    var testComp = Composite.create();
var car = Composites.car(200, 400, 100, 40 , 30);
//ここのパラメータは要調整
var testBody = Bodies.rectangle(200,400,10,10);
//carメソッドの内部を参考に追加　ここのパラメータも要調整
var axelTest = Constraint.create({
bodyA: car.bodies[0],
pointA: { x: 200, y:400 },
bodyB: testBody,
stiffness: 0
});
Composite.addBody(car,testBody);
Composite.addConstraint(car, axelTest);
//World.add(engine.world,Composite.add(car,testBody));
World.add(engine.world, car);
//World.add(engine.world, testBody); ここで追加はしません
Engine.run(engine);
World.add(engine.world,Composite.addBody(car,testBody));
//World.add(engine.world, testBody);
*/
var xx = 120;
var yy = 170;
var width = 200;
var height = 40;
var wheelSize = 20;
var groupId = Body.nextGroupId(),
wheelBase = 20,
wheelAOffset = -width * 0.5 + wheelBase,
wheelBOffset = width * 0.5 - wheelBase,
wheelYOffset = 40;
var car = Composite.create({ label: 'Car' }),
body = Bodies.rectangle(xx, yy, width, height, {
groupId: groupId,
friction: 0.01,
});
var wheelA = Bodies.circle(xx + wheelAOffset, yy + wheelYOffset, wheelSize, {
groupId: groupId,
restitution: 0.5,
friction: 0.9,
density: 0.01
});
var wheelB = Bodies.circle(xx + wheelBOffset, yy + wheelYOffset, wheelSize, {
groupId: groupId,
restitution: 0.5,
friction: 0.9,
density: 0.01
});
var axelA = Constraint.create({
bodyA: body,
pointA: { x: wheelAOffset, y: wheelYOffset },
bodyB: wheelA,
stiffness: 0.5
});
var axelB = Constraint.create({
bodyA: body,
pointA: { x: wheelBOffset, y: wheelYOffset },
bodyB: wheelB,
stiffness: 0.5
});
Composite.addBody(car, body);
Composite.addBody(car, wheelA);
Composite.addBody(car, wheelB);
Composite.addConstraint(car, axelA);
Composite.addConstraint(car, axelB);
var box = Composite.create({ label: 'box' });
var underBox = Bodies.rectangle(150,150,60,25);
var leftBox = Bodies.rectangle(110,127.5,25,70);
var rightBox = Bodies.rectangle(190,127.5,25,70);
var leftLabel = Constraint.create({
bodyA: underBox,
pointA: { x: -20,y: 0 },
bodyB: leftBox,
stiffness: 0.5
});
var rightLabel = Constraint.create({
bodyA: underBox,
pointA: { x: 20,y: 0 },
bodyB: rightBox,
stiffness: 0.5
});
// World.add(engine.world,underBox);
// World.add(engine.world,leftBox);
// World.add(engine.world,rightBox);
Composite.addBody(box,underBox);
Composite.addBody(box,leftBox);
Composite.addBody(box,rightBox);
Composite.addConstraint(box,leftLabel);
Composite.addConstraint(box,rightLabel);
var carLabel = Constraint.create({
bodyA: body,
pointA: { x: 0,y: 10 },
bodyB: underBox,
stiffness: 0.5
});
var carLabel2 = Constraint.create({
bodyA: body,
pointA: { x: -20,y: -10 },
bodyB: leftBox,
stiffness: 0.5
});
var carLabel3 = Constraint.create({
bodyA: body,
pointA: { x: 20,y: -10 },
bodyB: rightBox,
stiffness: 0.5
});
Composite.addComposite(car,box);
Composite.addConstraint(car,carLabel);
World.add(engine.world,car);
Engine.run(engine);
$("#left").click(function(t){
var carBodies = Composite.allBodies(car);
carBodies[1].force.x = 2;
});
<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://github.com/liabru/matter-js/releases/download/0.8.0-alpha/matter-0.8.0.js" type="text/javascript"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.7.0/underscore.js"></script>
<div id = "canvas-container"></div>
<input id = "left" type = "button" value = "left">
4453,ios,iOSアプリの開発において一つのビュー上に複数個のUIViewを配置し、それぞれにタップ、ロングタップの動作(Segue)を割り当てようと思っています。
UIViewにはそれぞれtagが割り振られています。タップは下記のUITouchを使った方法で実装できたのですが、ロングタップの実装方法がわかりません。
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
UITouch *touch = [touches anyObject];
switch (touch.view.tag) {
case 1:
// 1のタグがタップされた場合の処理
appDelegate.locno = @"1";
[self performSegueWithIdentifier:@"read" sender:self];
case2:
appDelegate.locno = @"2";
[self performSegueWithIdentifier:@"read" sender:self];
default:
break;
}
}
ロングタップした際には
appDelegate.locno = @"タグの番号";
[self performSegueWithIdentifier:@"write" sender:self];
を実行するようにしたいのですがどのようにすればいいのでしょうか？
4459,javascript,あるサーバーがよく落ちるので、chrome拡張アプリで死活監視プログラムを書いてみました。
死活の判断はステータスコードが200でresponseURLがopenにセットしたのと同じ場合に生存と判断をして、それ以外は死亡としました。
これで一応動いたのですが、サーバーがDDNSから接続先が見つからないとDDNSの管理する警告画面に飛ばされます。
その時の違いは画像の通りで、ステータスコードが200でresponseURLは同じでした。
本来はDDNSの不具合でサーバーにつながらないので死亡中と判断をしたいのですが、ステータスコードとURLが同じなので生存と判断してしまっています。
ここで質問なのですが、DDNSにつながってしまった時死亡と判断するにはどうしたらよいでしょうか？
HTMLの中身が違うのでその差を比較するしか無いのでしょうか？
（例えばタイトルを抜き出して比較する等）
github masakinihirota/GreenHeartRedCross_trial chrome拡張アプリの公開先
responseとresponseTextだけが違う。
4464,ios,お世話になっております。
現在iOS開発をしているのですが、一部の画面をTab形式で表示したいと思っています。
流れとしては
NavigationController->MainViewController->TabBarController
としたいと思っています。
ですが、調べてみるとNavigationControllerのStackにTabBarControllerを積むと
ViewControllerで追加したNavigation Itemの設定が反映されないとの意見がありました。
NavigationItemは使用したいのですが、この場合、Tabを表現する方法はあるのでしょうか？
4485,ios,CGRect screen = [[UIScreen mainScreen]bounds];
CGRect rect = CGRectMake(screen.size.width/2, screen.size.height/2, 128, 128);
imageView = [[UIImageView alloc]initWithFrame:rect];
[self addSubview:imageView];
imageView.animationImages = @[
[UIImage imageNamed:@"fire_flower01.png"],
[UIImage imageNamed:@"fire_flower02.png"],
[UIImage imageNamed:@"fire_flower03.png"],
[UIImage imageNamed:@"fire_flower04.png"],
[UIImage imageNamed:@"fire_flower05.png"],
上記のコードをシミュレーターで実行するとエラーも無く実行できるのですが、実機で実行すると animationImagesに画像を入れる過程で以下のエラーが表示されます。
attempt to insert nil object from objects[0]
なのでnilを加えようと以下のように変更してみたのですが、今度はunrecognized selector sent to instanceというエラーが返ってきました。
NSArray *animationImages = @[[[NSArray alloc]initWithObjects:nil,
[UIImage imageNamed:@"fire_flower01.png"],
[UIImage imageNamed:@"fire_flower02.png"],
[UIImage imageNamed:@"fire_flower03.png"],
[UIImage imageNamed:@"fire_flower04.png"],
[UIImage imageNamed:@"fire_flower05.png"], nil
]];
パラパラのアニメーションを行うために画像を格納していきたいのですが、どうすればよろしいでしょうか？
4489,android,エラー :(1, 0) Plugin with id 'com.android.library' not found.
Android Studio で Import Module で Facebook SDK をインポートしたら、 Gradle の同期で上記のエラーが出てしまいました。
原因が不明です。
プロジェクト構成も設定済みです。
Android Studio　ver.1.0.2
Facebook SDK 3.21.1
よろしくお願いします。
追記
build.gradle
apply plugin: 'com.android.library'
repositories {
mavenCentral()
}
project.group = 'com.facebook.android'
dependencies {
compile files('libs/android-support-v4.jar')
compile files('libs/bolts-android-1.1.2.jar')
}
android {
compileSdkVersion Integer.parseInt(project.ANDROID_BUILD_SDK_VERSION)
buildToolsVersion project.ANDROID_BUILD_TOOLS_VERSION
defaultConfig {
minSdkVersion Integer.parseInt(project.ANDROID_BUILD_MIN_SDK_VERSION)
targetSdkVersion Integer.parseInt(project.ANDROID_BUILD_TARGET_SDK_VERSION)
}
lintOptions {
abortOnError false
}
sourceSets {
main {
manifest.srcFile 'AndroidManifest.xml'
java.srcDirs = ['src']
res.srcDirs = ['res']
}
}
}
apply plugin: 'maven'
apply plugin: 'signing'
def isSnapshot = version.endsWith('-SNAPSHOT')
def ossrhUsername = hasProperty('NEXUS_USERNAME') ? NEXUS_USERNAME : ""
def ossrhPassword = hasProperty('NEXUS_PASSWORD') ? NEXUS_PASSWORD : ""
task setVersion {
// The version will be derived from source
project.version = null
def sdkVersionFile = file('src/com/facebook/FacebookSdkVersion.java')
sdkVersionFile.eachLine{
def matcher = (it =~ /(?:.*BUILD = \")(.*)(?:\".*)/)
if (matcher.matches()) {
project.version = matcher[0][1]
return
}
}
if (project.version.is('unspecified')) {
throw new GradleScriptException('Version could not be found.', null)
}
}
uploadArchives {
repositories.mavenDeployer {
beforeDeployment { MavenDeployment deployment -> signing.signPom(deployment) }
repository(url: "https://oss.sonatype.org/service/local/staging/deploy/maven2/") {
authentication(userName: ossrhUsername, password: ossrhPassword)
}
snapshotRepository(url: "https://oss.sonatype.org/content/repositories/snapshots/") {
authentication(userName: ossrhUsername, password: ossrhPassword)
}
pom.project {
name 'Facebook-Android-SDK'
artifactId = 'facebook-android-sdk'
packaging 'aar'
description 'Facebook Android SDK'
url 'https://github.com/facebook/facebook-android-sdk'
scm {
connection 'scm:git@github.com:facebook/facebook-android-sdk.git'
developerConnection 'scm:git@github.com:facebook/facebook-android-sdk.git'
url 'https://github.com/facebook/facebook-android-sdk'
}
licenses {
license {
name 'The Apache Software License, Version 2.0'
url 'https://github.com/facebook/facebook-android-sdk/blob/master/LICENSE.txt'
distribution 'repo'
}
}
developers {
developer {
id 'facebook'
name 'Facebook'
}
}
}
}
}
uploadArchives.dependsOn(setVersion)
signing {
required { !isSnapshot && gradle.taskGraph.hasTask("uploadArchives") }
sign configurations.archives
}
task androidJavadocs(type: Javadoc) {
source = android.sourceSets.main.java.srcDirs
classpath += project.files(android.getBootClasspath().join(File.pathSeparator))
}
task androidJavadocsJar(type: Jar, dependsOn: androidJavadocs) {
classifier = 'javadoc'
from androidJavadocs.destinationDir
}
task androidSourcesJar(type: Jar) {
classifier = 'sources'
from android.sourceSets.main.java.sourceFiles
}
artifacts {
archives androidSourcesJar
archives androidJavadocsJar
}
afterEvaluate {
androidJavadocs.classpath += project.android.libraryVariants.toList().first().javaCompile.classpath
}
setting Gradle
include ':aplname', ':Facebook'
4499,ios,現在SNS周りの機能を作っているのですが、ユーザがTwitterやFacebookやLineのタイムラインに投稿したことを確認する方法はありますか？Facebookなどへ投稿する際にダイアログの投稿ボタンを押すと、投稿が成功した旨を伝えるアラートを表示させたいのですが、調べてもやり方が見つからず困っています。どなたか分かる方がいれば教えていただきたいです。すみませんが、宜しくお願いします。
4505,android,ActiveAndroid で、データ挿入の際にどのように行えばよいかわからず悩んでおります。
book.title = "Book";
book.save();
上記のように挿入することは分かったのですが、モデルにデータを挿入する際、どのように行えばよいか思案しています。
よろしくお願いします。
public static void jsonParse() {
new Delete().from(Book.class).execute();
ActiveAndroid.beginTransaction();
try {
AndroidTestActivity.mContext = app.getContext();
AssetManager assetManager = mContext.getAssets();
InputStream inputStream = assetManager.open(FILE_NAMES);
JsonReader jsonReader = new JsonReader(new InputStreamReader(inputStream));
Gson gson = new Gson();
JsonParser parser = new JsonParser();
JsonArray jArray = parser.parse(jsonReader).getAsJsonArray();
Book book = new Book();
/** ここでどのように挿入すればよいか */
book.title =
book.author =
book.publisher =
book.releaseDate =
book.save();
} catch (IOException e) {
e.printStackTrace();
}
finally {
ActiveAndroid.setTransactionSuccessful();
}
ActiveAndroid.endTransaction();
}
Book.java
@Table(name = "Book")
public class Book extends Model {
private static final String TAG = Book.class.getSimpleName();
@Column(name = "title")
public String title;
@Column(name = "author")
public String author;
@Column(name = "publisher")
public String publisher;
@Column(name = "release_date")
public String releaseDate;
public Book() {
super();
}
public Book(String title, String author, String publisher, String date) {
super();
this.title = title;
this.author = author;
this.publisher = publisher;
this.releaseDate = date;
}
public static Book fromJson(JSONObject jsonObject){
Book b = new Book();
try{
b.title = jsonObject.getString("title");
b.author = jsonObject.getString("author");
b.publisher = jsonObject.getString("publisher");
b.releaseDate = jsonObject.getString("release_date");
b.save();
}catch (JSONException e) {
e.printStackTrace();
return null;
}
//return new object
return b;
}
}
4527,ios,NSURLSession を利用して 60個のファイル（それぞれ 2M程度）を連続ダウンロードしたいと思います。
以下のようなサンプルコードを作成し、うまくダウンロードできました。
ボタンを押すと 60個のファイルをダウンロードします。ダウンロードが終了すると再びボタンが有効になり、押下すると再度ダウンロードが始まります。
しかしながら、メモリ関連の問題が発生しました。
iOS7 では繰り返しダウンロードしても占有メモリは 50M程度で一定なのですが、
iOS8 ではダウンロード中に徐々に占有メモリが増加し、 1回実行すると 170MB程度となります。さらに繰り返し実行（Startボタンの押下）するとさらに占有量が増し、やがて Memory Warning が発生し、ついにはクラッシュしてしまいます。
どなたか解決の糸口をご教授していただける方、何卒宜しくお願いします。
#import "ViewController.h"
#define URL_MODEL_STRING @"http://sample.com/sample_%03d.pdf"
#define MAX_FILE_NUMBER 60
@interface ViewController ()<NSURLSessionDownloadDelegate>{
NSURLSessionConfiguration* _conf;
NSURLSession*              _session;
NSURLSessionDownloadTask*  _downloadTask;
int _currentFileNumber;
__weak IBOutlet UIButton *_startButton;
}
@end
@implementation ViewController
- (void)viewDidLoad {
[super viewDidLoad];
_conf = [NSURLSessionConfiguration defaultSessionConfiguration];
}
- (IBAction)startButtonPushed:(id)sender {
_startButton.enabled = NO;
_session = [NSURLSession sessionWithConfiguration:_conf
delegate:self
delegateQueue:[NSOperationQueue mainQueue]];
_currentFileNumber = 1;
[self downloadFileWithNumber:_currentFileNumber];
}
- (void)downloadFileWithNumber:(int)fileNumber{
NSURL* url    = [self urlWithFileNumber:fileNumber];
_downloadTask = [_session downloadTaskWithURL:url];
[_downloadTask resume];
}
- (NSURL*)urlWithFileNumber:(int)fileNumber{
return [NSURL URLWithString:[NSString stringWithFormat:URL_MODEL_STRING, fileNumber]];
}
#pragma mark - NSURLSessionDownloadDelegate
- (void)URLSession:(NSURLSession *)session
downloadTask:(NSURLSessionDownloadTask *)downloadTask
didFinishDownloadingToURL:(NSURL *)location{
NSLog(@"fileNumber:%d location:%@", _currentFileNumber, location);
//TODO: Move downloaded temporary file to another place.
if(_currentFileNumber == MAX_FILE_NUMBER){
NSLog(@"Download complete.");
[_session invalidateAndCancel];
_startButton.enabled = YES;
return;
}
_currentFileNumber++;
[self downloadFileWithNumber:_currentFileNumber];
}
- (void)didReceiveMemoryWarning{
[super didReceiveMemoryWarning];
NSLog(@"didReceiveMemoryWarning");
}
@end
4530,ios,UIColor のカテゴリを作っている時に、そのメソッドの中で self(UIColor型) の RGBA を変更する必要が出ました。
インスタンスを再生成せずに RGBA を変更する方法を教えてください。
4534,javascript,CasperJS　であるサイトをクロールし、クロールした情報をデータベースに格納する処理を作成しましたが、クロール中にメモリが97%程度まで上がり、　Killed　と表示され終了してしまいます。
メモリを大幅に使用してしまう原因は、以下のいずれかだと予想しています。
クロールした情報を格納している配列が大きすぎる
eachThen を使用しクロールするページが多すぎる
1.が原因の場合、ある程度の数になったら配列情報をデータベースに格納し、配列の中身をクリア。その後、クロールを継続する方法、または、参考になるサイト教えて頂けますでしょうか。
また、 2.が原因の場合を想定して、 casper.page オブジェクトの close() を使用したのですが、
Error: cannot access member `customHeaders' of deleted QObject
と表示されてしまいます。原因を教えて頂けますでしょうか。
上記のいずれでもない場合は、原因、または参考になるサイトを教えて頂けますでしょうか。
よろしくお願いします。
'use strict';
var i, e;
var targets = new Array();
var title = new Array();
var page = new Array();
var image = new Array();
var duration = new Array();
var video = new Array();
var ua = ('Mozilla/5.0 (iPhone; U; CPU iPhone OS 4_2_1 like Mac OS X; en-us) AppleWebKit/533.17.9 (KHTML, like Gecko) Version/5.0.2 Mobile/8C148 Safari/6533.18.5');
for (i=0; i<10; i++) {
targets.push('http://example.com&page=' + i);
}
var casper = require('casper').create({
exitOnError: true,
verbose: true,
logLevel: "debug",
pageSettings: {
loadImages: false,
loadPlugins: false
}
}).userAgent(ua);
casper.start().eachThen(targets, function(response){
this.thenOpen(response.data, function(response){
//タイトルを取得
e = this.getElementsInfo('.thumbInside>p>a');
for (i=0; i < e.length; i++) {
title.push(e[i]['text']);
}
//時間を取得
e = this.getElementsInfo('.duration');
for (i=0; i < e.length; i++) {
duration.push(e[i]['text'].replace(/min/, "分").replace(/()/, ""));
}
//画像ファイルを取得
e = this.getElementsInfo('.thumb>a>img');
for (i=0; i < e.length; i++) {
image.push(e[i]['attributes']['src']);
}
//ページURLを取得
e = this.getElementsInfo('.thumb>a');
for (i=0; i < e.length; i++) {
page.push('http://example.com' + e[i]['attributes']['href']);
}
});
});
//動画ファイルURLを所得
casper.then(function(){
this.eachThen(page, function(response){
this.thenOpen(response.data, function(response){
this.thenClick('#playbtn>a', function(){
video.push(this.requestUrl);
});
});
});
});
casper.thenOpen('http://localhost/add.php', {
method: 'post',
data: {
'site': site,
'title[]': title,
'page[]': page,
'image[]': image,
'duration[]': duration,
'video[]': video
}
});
casper.run(function(){
this.exit();
});
4545,javascript,lodash.js を利用して、ある1つの配列が持つすべての値は同値か、否か という判定をしようとしています。（複数の配列同士の比較ではありません）
ドキュメントを見た限りではそのような機能を提供するメソッドはなく、以下のように実現するしかない、と考えたのですが、よりベストな手段はありますでしょうか。
（万が一、ドキュメントで見落としていた場合は大変申し訳ありません）
var sameValCount = _([1, 2, 3])
.union()
.size();
console.log(sameValCount > 1 ? false : true); // false
var sameValCount2 = _([1, 1, 1])
.union()
.size();
console.log(sameValCount2 > 1 ? false : true); // true
Lo-Dash documentation
https://lodash.com/docs
4550,android,<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:padding="8dp"
android:orientation="horizontal">
<!-- これはネットワーク経由で読み込む画像 -->
<ImageView
android:id="@+id/image"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
tools:src="@drawable/ic_launcher"/>
<TextView
android:id="@+id/text"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_gravity="center_vertical"
android:layout_margin="8dp"
tools:text="hogehoge"/>
</LinearLayout>
上記のようなレイアウトをRecyclerViewのアイテムのレイアウトとして設定しています。
これにセレクターを適用すると、当然ですがレイアウトの背景のみ変化するため、ImageViewの見た目はそのままになります。
ImageViewも背景と同様のセレクターの効果（全体に半透明の黒がブレンドされるようなイメージ）を適用したいと考えています。
背景はセレクター、画像はColorFilterをそれぞれ使うことでも実現は出来るのですが、
レイアウトが複雑になると対応が難しい（このレイアウトの中に背景色を持つViewが入った場合や、ImageViewが増えた場合など）
定義場所がxml, コードに分散され保守しづらい
等の問題が有ります。
レイアウト全体に適用可能なフィルターのような機能はどのように実現するのがよいのでしょうか？
※ 前提条件として対象OSは4.0-5.0で、Material Designは今回導入しません。
4555,ios,失礼します、Objective-Cで開発をしている初心者です。
iPadでPDFビューアのプログラムを作成しております。
その時、「スクリーンショットで撮った画像を切り取り、切り取った画像をOCRを用いてテキスト認識して」います。
シミュレータではきちんと動作するのですが、実機だと同様の動作をしても認識しません。
例えば、画像に「Hello」と書かれていた場合、シミュレータの場合は「Hello」と認識します。
ですが、実機の場合「chv2f,,」のように、文字を認識しているのか分かりません。
スクリーンショット自体は、きちんと「Hello」と書かれた画像を取り出して来ています。
特にエラー等は出ていません。
コードを出したいのですが、そもそもどこがおかしいのかが分からず、載せようが有りません。
実機で作成した画像をきちんと読み込めていないのでしょうか？
何か心当たりがある方がいらっしゃいましたら、コメントをいただけると幸いです。
使用しているOCRのソフトはtesseract-ocrです。
追記：
シミュレータのバージョン？　を変えたところ、シミュレータでも挙動しなくなりました。
tesseract-ocrがiOS6(もしくは6.1?)より後では動かないのは知っていたので、もしかするとバージョンのせいかもしれません。
引き続き、何か心当たりのある方がいらっしゃいましたら助言をお願いします。
4575,ios,SWiftで行の高さを、文字数によって動的に変更したいと思っております。
対象はiOS7とiOS8のどちらにも対応予定です。
そこで以下の様なコードを書いたところエラーがでて使えませんでした。
どちらか片方のオプションを指定して場合は問題ないのですが、今回は２つとも必要だと思われます。
let options:NSStringDrawingOptions = (NSStringDrawingOptions.UsesLineFragmentOrigin | NSStringDrawingOptions.UsesFontLeading)
このエラーについて調べたところどうもiOS7の不具合との情報を見かけました。
それでこのコードの部分だけをObjective-Cのクラスとしようとしたところ、
NSStringDrawingOptionsがExpected as typeというエラーになってしまうのですが通す方法はあるのでしょうか？
Bridging-Headerは作り、他のクラス（SDWebImage等）が無事動作していますのでその点は問題ないかと思ってます。
よろしくお願いいたします。
コードは以下になります。
DrawingOptions.h
#import <Foundation/Foundation.h>
@interface StringDrawingOptions : NSObject
+ (NSStringDrawingOptions)combine:(NSStringDrawingOptions)option1 with:(NSStringDrawingOptions)option2;
@end
DrawingOptions.m
#import "StringDrawingOptions.h"
@implementation StringDrawingOptions
+ (NSStringDrawingOptions)combine:(NSStringDrawingOptions)option1 with:(NSStringDrawingOptions)option2
{
return (option1 | option2);
}
@end
4638,javascript|android,Cordova Pluginを使用したアプリ内課金の実装方法について教えて下さい。
Cordovaを使ったAndroidアプリケーションを作っています。
Cordova Pluginを利用したアプリ内課金実装を実現するにはいくつかのPluginの候補がありましたが、Cordova Purchase Pluginを使用することに決め、実装にとりかかりました。
In-App Purchase for PhoneGap / Cordova iOS and AndroidのREADME.mdに記載のあったSetupなどを済ませた結果、導入したPluginの呼び出し自体は出来ており、
Demo of the Purchase Plugin for Cordovaのjsを一部書き換えたもの(下記、一部抜粋)を
使うことにより、Pluginが呼び出せていないときに出力されてしまう'Store not available'が出力されることなく、
'registerProducts'から最下段の'refresh'までログが出力されていることを確認できています。
(尚、Google Play Developer Console上にてmyProductAという商品の登録も済んでいます)
app.initStore = function() {
if (!window.store) {
log('Store not available');
return;
}
// Enable maximum logging level
store.verbosity = store.DEBUG;
// Enable remote receipt validation
//    store.validator = "https://api.fovea.cc:1982/check-purchase";
// Inform the store of your products
log('registerProducts');
store.register({
id:    'myProductA',
alias: 'myProductA',
type:   store.CONSUMABLE
});
// When any product gets updated, refresh the HTML.
store.when("product").updated(function (p) {
console.info("app.renderIAP is called");
app.renderIAP(p);
});
// Log all errors
store.error(function(error) {
log('ERROR ' + error.code + ': ' + error.message);
});
// When purchase of an extra life is approved,
// deliver it... by displaying logs in the console.
store.when("myProductA").approved(function (order) {
log("You got a ProductA");
order.finish();
});
// When the store is ready (i.e. all products are loaded and in their "final"
// state), we hide the "loading" indicator.
//
// Note that the "ready" function will be called immediately if the store
// is already ready.
store.ready(function() {
var el = document.getElementById("loading-indicator");
console.info(el + "ready is called")
if (el)
el.style.display = 'none';
});
// When store is ready, activate the "refresh" button;
store.ready(function() {
var el = document.getElementById('refresh-button');
console.info(el + "ready is called and refresh-button show?");
if (el) {
el.style.display = 'block';
el.onclick = function(ev) {
store.refresh();
};
}
});
// Refresh the store.
//
// This will contact the server to check all registered products
// validity and ownership status.
//
// It's fine to do this only at application startup, as it could be
// pretty expensive.
log('refresh');
store.refresh();
};
しかしながら、
store.when("product").updated(function (p)
が呼ばれず、当該関数の呼び出しを前提としている後続のコードに到達できない状態にあります。
何に現状、躓いているのかわからないため、質問が曖昧になってしまっていますが、
解決の糸口などいただけると非常に助かります。
(或いは諦めてネイティブコードを書いた方が良いというアドバイスでも構いません)
尚、
store.validator = "https://api.fovea.cc:1982/check-purchase";
に入れるべき値もわかっておらず、現在コメントアウトしておりますが、
もしかするとこのコメントアウトしている箇所を適切な値にすることで
動くようになるのでは、とも思っています。
(コメントアウトを外しただけでは状況は変わりませんでした。)
4640,javascript,var SM = (function () {
var my = {};
my.get = function (key) {
return localStorage.getItem(key);
}
my.put = function (key, value) {
return localStorage.setItem(key, value);
}
my.delete = function (key) {
return localStorage.removeItem(key);
}
return my;
}());
このコードを実行した後に
console.dir(SM);
とするとSMのメソッドとして get() put() delete() の3つが定義されていることが
わかりますが、これは何故でしょうか。
Javaとかの感覚では
SM.my.get(key)
ならわかるのですが、そのままSMという変数にこのメソッドが生えていることが
難しく感じました。
なぜこのような挙動をするのか、ご存知の方、教えていただけないでしょうか。
ちなみにこのコードはこちらでGoogleChromeExtensionのチュートリアルとして紹介されていました。
よろしくお願い致します。
4652,ios,as IntとInt()の違いを教えていただきたいです。
swiftでキャストをする際はas Hogeとすると、キャストされるかと思います。
そして、Int()もIntにキャストしてくれる関数との認識です。
appleの公式ドキュメントを見たり、ぐぐってみましたが、両者の違いがいまいちよくわかっておりません。
以下のキャプチャのコードで、as IntとInt()でキャストをしてみると、as Intのほうだけ、
エラーが出てしまいます。UInt32をIntにキャストできないというエラーなら、Int()でも
同じエラーが出ていいと思うのですが、出ないということからすると両者の挙動に
違いがあるのだろうなと考えています。
そもそも、UInt32をIntにキャストできないのも謎で、
そちらも合わせてご説明いただけると幸いです。
よろしくお願いします。
なお、補足ですが、arc4random()はUInt32の戻り値を持っています。
4653,android,現在AndroidとFacebookを連携させたアプリを作っており、ボタンを押すとFacebook認証を開始するようなプログラムを組んでいるのですが、なぜかボタンを押すとFacebookの認証画面と読み込み中の処理待ちダイアログが表示され、その後すぐに認証画面が消えてしまいます。しばらく色々と調べていると、onActivityResultでauthorizeCallbackを呼んであげる必要があると分かり、そのコードを追加したのですが、それでも画面が一瞬だけ現れ、すぐに消えてしまいました。しかも、ログを見るとPostFacebookクラスのDialogListener内のonCompleteが呼ばれていました。なのになぜ認証画面が出てこないのでしょうか？これは非推奨のクラス（Facebook）やメソッド（authorize）を使っているから起こっている現象なのでしょうか？下記にコードを記していますので、どなたか分かる方がいればアドバイスをいただきたいです。すみませんが宜しくお願いします。
MainActivity
public void onClick(View v) {
switch (v.getId()) {
case R.id.facabook_button:
PostFacebook postFacebook = new PostFacebook(); {
postFacebook.shareFacebook(this);
}
break;
}
}
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
super.onActivityResult(requestCode, resultCode, data);
PostFacebook.createFacebook().authorizeCallback(requestCode, resultCode, data);
}
PostFacebook
public class PostFacebook {
private static Facebook mFacebook;
}
public static Facebook createFacebook() {
return mFacebook;
}
public void shareFacebook(Activity activity) {
PostFacebook postFacebook = new PostFacebook(activity.getApplicationContext());
if (String.valueOf(postFacebook.getSession().getState()) == "CREATED_TOKEN_LOADED") {
postFacebook.share();
} else {
loginFacebook(activity);
}
}
public void loginFacebook(Activity activity) {
Facebook facebook = new Facebook(activity.getString(R.string.Facebook_AppId));
facebook.authorize(activity, new String[]{ "publish_actions" }, new Facebook.DialogListener() {
@Override
public void onComplete(Bundle values) {
Log.v("--->", "onComplete");
}
@Override
public void onFacebookError(FacebookError e) {
Log.v("--->", "onFacebookError");
}
@Override
public void onError(DialogError e) {
Log.v("--->", "onError");
}
@Override
public void onCancel() {
Log.v("--->", "onCancel");
}
});
}
4669,javascript,動画を参考にしたり、
Youtube: TypeScript Project Structure using File Watchers
「File Watcher」 の設定画面より Arguments 部分を下記に設定したりしていろいろ試したのですが、空ファイルで出力されてしまったり、特定ファイル以外はうまくはきだせないなど。うまくいく設定が見つかりませんでした。
--out
$ProjectFileDir$/public/js/$FileDirPathFromParent(typescript)$$FileNameWithoutExtension$.js
$FileDirName$/$FileName$
--module amd
--outDir $ProjectFileDir$/public/js/
--module amd
階層維持してはき出すことができる設定方法はあるでしょうか？
※ 追記内容
たとえば階層が下記の様になっていて、 require.js などを使って 1.ts のファイルを 2.ts に import などしている場合にうまく吐き出すことができませんでした。
その場合に動画のとおりにコンパイルすると、他の ts ファイルを認識していないためか、エラーが起きてしまいました。
そのため1階層上でコンパイルをしてすべての typescript を認識させた上で階層をたどってコンパイルするために、上記のような記述方法をしていました。
app
└─ public
├─ js
|  ├─ dir1
|  |   └─ 1.js
|  └─ dir2
|      └─ 2.js
└─ typescript
├─ dir1
|   └─ 1.ts
└─ dir2
└─ 2.ts
すると typescript の同一フォルダに js が生成され、js フォルダ内には中身がからの js ファイルが生成されるといった現象が起きてしまいました。
typescript, require を使った場合に階層を維持出来る方法がありましたら押していただけると助かります。
4673,ios,現在iOSアプリを開発中なのですが、既存のオンラインストア（WEBアプリ）との連携機能に関して、どこまで審査のリジェクト対象になるのかについて質問があり、投稿させていただきます。
（オンラインストアは仮想的なアイテムではなく、物理的な商品（例えば時計等）を購入可能なサイトになっています。Amazonのようなサイトであるとイメージして頂いて結構です。）
iOSアプリ内に、オンラインストアへのリンクを貼ることはリジェクト対象か。
オンラインストアで購入した物理的な商品を所持している場合のみ追加される機能がiOSアプリにあるのはリジェクト対象になるか。
アプリ内で貯まるポイントをオンラインストアでの割引で使用するのはリジェクト対象になるか。
オンラインストアで貯まるポイントをアプリ内で使用するのはリジェクト対象になるか。
上記4つに関してもしご存知の方いらっしゃいましたらご教授願えないでしょうか。
4674,javascript,function test(){
window.open("/xxxxx/TEST.PDF","_blank","");
}
:
< body onload='test();'>
:
iPad Safariを使用し、上記のスクリプトを実行するとPDFのPOPUP画面が開きません。
（body onloadによるwindow.openが動いてくれない。）
PC版Safariでは、問題なく動き、PDFのPOPUP画面が開きます。
ボタンによるクリックイベントも、PDFのPOPUP画面が開きます。
PDFではなくHTMLファイルにしても、POPUP画面が表示されませんでした。
safariは、最新に更新しています。
safari設定のポップブロックは「オフ」にしています。
何か解決方法がございましたら、お教示ください。
よろしくお願いいたします。
4676,javascript,Google Chrome(Mac)でWebサイトの開発をしております。
テキストボックスやプルダウンなどに入力・変更したりすると、Chromeデベロッパー・ツールのコンソールに以下のように表示されております。
作成しているサイトではmain.jsといったようなファイルは使用しておらず、当該エラーがなぜでるか・解消できるか教えていただけますでしょうか？
Uncaught TypeError: Cannot read property 'style' of undefined
main.js:64
4695,ios,NSUserDefaultsについてお伺いしたいです。
例えば4つほどのViewが存在して、2つ目のビューまで遷移したとします。
そこで、「2つ目のViewまで遷移した」というデータを永続化させ、次回ビルド時にも2つ目のViewから始めたいのですが、
その場合、NSUserDefaultsを使うのは可能でしょうか？
新しい言語ということもあるのか、Swift版NSUserDefaultsの情報が少なく、Web上のページや解説動画は全て見たのですが、よく理解できませんでした……。
お詳しい方がいましたら、どうか回答宜しくお願い致します。
出来れば上記した内容のコードをお願いしたいです。
また、それに近い参考Webページがあれば、ご紹介して頂けるととても嬉しいです。
宜しくお願い致します。
【補足】
複数のViewControllerを隔ててしまうとNSUserDefaultsは機能しないのでしょうか？
2つ目のViewControllerまで遷移したことを記録し、再起動した時に、initial Viewに表示されている「Loadボタン」を押すと、2つ目のViewControllerに遷移する……などは不可能でしょうか？
NSUserDefaultsはどこまで画面遷移したか、などの記録ではなく、StringやIntなどの値しか記録できないのでしょうか？
4712,android,「AndEngineでつくる Android 2Dゲーム」という本を購入し、勉強をしていました。
最後の最後、本の情報が古いからでしょうか、本の通りにやっても広告の表示ができなくて困ってしまいました。
本の通りと言っても、AdMob自体は最新のものです。エラーも起きていません。
が、どうしてもloadAd();のところで強制終了です。
みなさんどのようにしてAdMob広告を表示してますか？ソースを教えていただきたいです。
思い切った、図々しい質問で申し訳ありません。
一つではないでしょうけども、ズバリ正解のある質問だと思いましたので、「このようなソースですがどこが悪いのでしょう」などと質問するより、「こうすればできる！」というのを提示していただいた方が、こちらの知識不足で情報を十分に伝えることができない、などの事態が避けられると思いましたので、このような形にさせていただきました。
よろしくお願いします。
4716,android,私は今､Androidで動くYouTubeプレーヤーを作ろうと考えています｡  そこで質問なのですが､YouTube動画を再生するにはYouTube Player APIを使えばよいとのことですが､検索結果や関連動画､コメント､高評価ボタン､登録ボタンは取得できるのでしょうか｡  できればUIを公式のYouTubeアプリに近づけたいので､もし出来るならば､方法を教えて頂きたいです｡
また,参考になるサイト等あれば教えていただけると幸いです｡
YouTube DATA APIを使えば良いのかと考えたのですが､これはAndroidアプリでつかえるのでしょうか?
また､ある期間､例えば1時間､1週間､1ヶ月等､に同じ検索ワードで検索された動画をランキング表示することはできますか?
4729,android,android.media.MediaExtractorを使用してShoutcast Serverからストリーミング中の音楽の
メタデータ(icy-meta)を取得する事は可能でしょうか？
icy-meta から 楽曲のタイトル、アーティスト名を取得したいと考えています。
4762,javascript,ブラウザから逆引きを行いたいのですが何か方法はありますか?
理想としてはJavaScriptから直接Digコマンドのようなものが打てればよいのですが、JavaScriptにそのような関数は存在するのでしょか。
それ以外で思いつくのはサーバー側でdigコマンドで取得した情報をajaxでやりとりする方法なのですが、複数人が同時に使用するとなると同一のIPから大量に逆引きを仕掛ける事になるので、避けたいです。
複数のサーバーを用意するほどでもないですし。。。
何か良い方法があれば教えて下さい。
4778,android|ios,iOS、Androidなどのモバイル系の開発を行っているとき、開発環境では快適なwifi環境を利用していたために、低速な3G回線環境や、他アプリのバックグラウンド通信に妨害されるなど、実ユーザー環境で発生しうる通信過負荷状態で起きる異常系テストが見逃されることがありがちです。
このようなテストは、一般的にはどのような手法を用いるのでしょうか？
理想としては、
OSに依存しない
端末だけで完結できる
方法です。是非ともご教授頂きたいです。
4800,javascript,onMapMoved = function(e) {
map.removeLayer(markerList);
var url = "https://api.twitter.com/1.1/search/tweets.json";
var searchKeywords = get_search_keywords();
if (searchKeywords.length > 0) {
searchKeywords.forEach(function output(searchKeywords) {
since_id = null;
getTwitter(url, searchKeywords);
});
}
};
地図上に追加されたマーカーを消す実装をonMapMoved関数に追加したいと考えているのですが、どなたかその方法を知っている方、回答お願い致します。
(get_search_keywords関数はウェブページで検索したいキーワードを選択させたものを解釈して配列に、その配列に入っているキーワード分getTwitter関数に渡して実際にツイートを検索しています。getした情報を基に違う関数で地図に緯度経度情報を持つものだけマーカープロットしている状況です。)
地図にプロットしている関数のコードはこちら
function update(data) { // 引数(data)に取得したデータが入ってくる
var bounds, distance1, distance2, r, southWest;
var bounds = map.getBounds();
var center = bounds.getCenter();
var southWest = bounds.getSouthWest();
var distance1 = bounds.getNorthWest().distanceTo(southWest) / 1000;
var distance2 = bounds.getSouthEast().distanceTo(southWest) / 1000;
var r = distance1 < distance2 ? distance1 : distance2;
r *= 0.5;
r = Math.floor(r * 10) / 10;
$("#tweetDisplay").empty(); // 表示エリアを空にする
$("#tweetDisplay").append('<br>');
var geoFlag = 0;
$("#tweetDisplay").append("<p style='border: medium solid'>Twitter (地図中央から半径" + r + "km)</p>");
var result = data.statuses; // 取得したデータから、メソッドチェーンで必要なものを取得
// TwitterからGeoタグを保有しているTweetだった場合のみ緯度経度を取得して、地図にマーカープロット
for (var i = 0; i < result.length; i++) {
var name = result[i].user.name; // ツイートした人の名前
var account = result[i].user.screen_name; // ツイートした人のアカウント名
var imgsrc = result[i].user.profile_image_url; // ツイートした人のプロフィール画像
// var content = result[i].text; // ツイートの内容
var contents = AutoLink(result[i].text); // ツイート内にURLがあればリンクへ飛ぶ
var updated = result[i].created_at; // ツイートした時間
var tweet;
// Tweet表示エリアに取得したデータを追加していく
tweet = "<a href='https://twitter.com/" + account + "'><img src='"
+ imgsrc + "'></a>" + "<p>" + 'ID: ' + name + ' @' + account
+ "<br>" + contents + "<br>";
if (result[i].coordinates) {
geoFlag = 1;
var coordinates = result[i].coordinates.coordinates; // ツイートの緯度経度情報
tweet += '緯度: ' + coordinates[1] + ', 経度: ' + coordinates[0]
+ "<br>" + 'Time: ' + updated + "<br></p>";
$("#tweetDisplay").append(tweet);
var icon = L.icon({
iconUrl : imgsrc,
iconSize : [ 20, 22 ]
});
marker = L.marker([ coordinates[1], coordinates[0] ], {
icon : icon
}).addTo(map);
markerList.push(marker);
} else {
tweet += 'Time: ' + updated + "<br></p>";
$("#tweetDisplay").append(tweet);
}
if (i != count - 1) {
$("#tweetDisplay").append("</p><hr noshade size='7'>");
}
}
if (geoFlag === 0) {
alert('Geoタグ付きツイートは検出されませんでした。');
}
}
4810,android,特定のアプリ起動時、特定のWi-Fiスポットに自動接続するというアプリを考えています。
Android または iPhone アプリのプログラム上から、無線LANアクセスポイントの検索、および検索された任意の Wi-Fi ネットワークへの接続は可能でしょうか。
4819,ios,私はドキュメントの手順通り、iOSビルドを実行しました。
Debug Build で実行したら問題無しですが、Adhoc buildでエラーが発生しました。
もちろん、配布用の手順とおりに行いました。
エラー状況は添付しました。
ビルド設定に何を足りないのか気になっています。
他の方はこの状況をあったことがありませんか。
また、対策があれば教えてください。
4825,javascript,以下のコードで、存在しない要素#hogeを取得しようとしたとき、エラーで処理がストップし、後続の#economyの処理を実行できません。
エラーが発生しても処理を継続させる方法はないでしょうか？
var casper = require('casper').create();
casper.start('http://www.yahoo.co.jp');
casper.then(function(){
this.echo(this.getElementInfo('#topics').html);  //#topicsは存在する
this.echo(this.getElementInfo('#hoge').html);  //#hogeは存在しない
this.echo(this.getElementInfo('#economy').html);  //#economyは存在する
});
casper.run(function(){
this.exit;
});
4829,android,現在DBに二つのテーブルがあり、その二つのテーブルにはそれぞれtextというカラムがあります。その二つのtextカラムのデータを取得してとりあえずログに表示させようとしているのですが、次のようなエラーが出てきてしまいます。
no such column: text (code 1): , while compiling: SELECT text FROM sqlite_master WHERE type = 'table'
sqlite_masterというようなものがあるということを先ほど知ったのですが、そもそもこれを使えば僕がやりたいような「全テーブル内で、指定したカラムのデータの取得」ということができるのでしょうか？以下に現在のコードを記します。間違いがあれば指摘していただけるとありがたいです。すみませんが、宜しくお願いします。
Cursor cursor = MyDB.db.rawQuery("SELECT text FROM sqlite_master WHERE type = 'table'", null);
while (cursor.moveToNext()) {
Log.v("--->", cursor.getString(cursor.getColumnIndex("text")));
}
4836,android,Androidアプリについて、以下のURLに従って、アプリ譲渡を行いました。
http://sitecatcher.net/blog/androidapp
アプリ譲渡自体はうまく行ったのですが、その後の（新しいアカウントでの）アプリのアップデートを行おうと思い、新しいバージョンのアプリのapkファイルをデベロッパーコンソールからアップロードしようとすると、keystoreが異なる旨のエラーが出て、アップロードできませんでした。
※keystoreは新しく譲渡先（当方）で作成したものです。
これはアプリ譲渡後もkeystore自体は元々のもの（アプリ譲渡元のkeystore）を使用するしかないのでしょうか？
4869,android,下記のようなTextureViewを継承したViewを作成してFragment内に配置し、Fragmentの表示・リプレースを何度か繰り返すと　Fatal signal 11 (SIGSEGV)　が出て終了します。
試したことは
表示・リプレースを繰り返した時、数回でFatal signal 11 (SIGSEGV)となる場合もあれば、ずっと繰り返してやっと出る場合もある。
表示上の都合でSurfaceViewからTextureViewに変更したのですが、SurfaceViewでは同じようなこと（オーバーライドしたrunメソッド内でCanvasにループして描画する）をしてもFatal signal 11 (SIGSEGV)は出なかった。
android:largeHeapの設定をしても現象は変わらず、MemoryMonitorとMemoryAnalyzerで調査を行いましたがメモリリークはないようです。
よろしくお願いします。
追記
エミュレータで試したところ現象を再現できませんでした。
現象が発生する端末
- Xperia Z3 compact
発生しない端末
エミュレータ　Genymotion
参考にしたサイト
http://dev.classmethod.jp/slide/introduction_textureview_20130116/
TextureViewを継承したView：
public class TextureAnimation extends TextureView  implements TextureView.SurfaceTextureListener,Runnable{
static final long FPS = 60;
static final long FRAME_TIME = 1000 / FPS;
static final int BALL_R = 40;
Thread thread;
private float scale;
public TextureAnimation(Context context){
super(context);
setSurfaceTextureListener(this);
}
@Override
public void onSurfaceTextureAvailable(SurfaceTexture surface, int width,
int height) {
thread=new Thread(this);
thread.start();
}
@Override
public boolean onSurfaceTextureDestroyed(SurfaceTexture surface) {
thread=null;
return false;
}
@Override
public void onSurfaceTextureSizeChanged(SurfaceTexture surface, int width,
int height) {
}
@Override
public void onSurfaceTextureUpdated(SurfaceTexture surface) {
}
@Override
public void run() {
Canvas canvas = null;
long loopCount = 0;
long waitTime = 0;
long startTime = System.currentTimeMillis();
//アニメーション用のループ
while (thread != null) {
Paint paint = new Paint();
paint.setAntiAlias(true);
// Ball
paint.setStyle(Paint.Style.FILL);
paint.setColor(Color.BLUE);
try {
loopCount++;
canvas = this.lockCanvas();
scale = scale + 0.025f;
//透明色で前回の描画を消す
canvas.drawColor(Color.TRANSPARENT, PorterDuff.Mode.CLEAR);
//玉の描画
canvas.save();
canvas.scale(scale, scale,50, 50);
canvas.drawCircle(50, 50, BALL_R,paint);
canvas.restore();
this.unlockCanvasAndPost(canvas);
waitTime = (loopCount * FRAME_TIME)
- (System.currentTimeMillis() - startTime);
if (scale > 1) {
scale = 0;
}
if (waitTime > 0) {
Thread.sleep(waitTime);
}
} catch (Exception e) {
}
}
}
}
Fragmentへの配置
textureanim = new TextureAnimation(context);
frameLayout.addView(textureanim, new ViewGroup.LayoutParams(MP, MP));
Logcat
Fatal signal 11 (SIGSEGV) at 0x93f3a5f4 (code=1), thread 5581 (Thread-644)
4873,ios,はじめまして。
現在、 Swift で動画撮影アプリを制作しておりますが、デバイスを縦横に回転させた際の処理で困っています。
デバイスを傾けたときに、撮影枠は縦横対応にうまく対応できたのですが、それに伴って被写体がうまく回転してくれません。いろいろ調べていますが、アプリ開発の初心者ということもあり、いまいち修正ポイントがわかっていません。
画面回転時のメソッドの中で、 CameraEngine.swift の startup 処理の何かを再度、設定するべきなのかなど、初心者なりに悩んでおります。
どなたか、アドバイスをいただけないでしょうか？何卒よろしくお願いいたします。
以下に、修正すべきところと思われるソースの一部を抜粋させていただきます。
【ViewController.swift】
override func viewDidLoad(){
super.viewDidLoad()
// カメラエンジンスタート
self.cameraEngine.startup()
videoLayer = AVCaptureVideoPreviewLayer.layerWithSession(self.cameraEngine.captureSession) as AVCaptureVideoPreviewLayer
// 画面セットアップ
setupScreen()
}
// 画面回転時に呼び出される
override func willAnimateRotationToInterfaceOrientation(toInterfaceOrientation: UIInterfaceOrientation, duration: NSTimeInterval) {
// 画面セットアップ
setupScreen()
}
// 画面セットアップ
func setupScreen(){
// ビデオレイヤー設定
videoLayer.frame = self.view.bounds
videoLayer.videoGravity = AVLayerVideoGravityResizeAspectFill
self.view.layer.addSublayer(videoLayer)
}
【CameraEngine.swift】
func startup(){
// video input
self.videoDevice.activeVideoMinFrameDuration = CMTimeMake(1, 30)
var captureDevice: AVCaptureDevice?
// バックカメラ
captureDevice = self.videoDevice
let videoInput = AVCaptureDeviceInput.deviceInputWithDevice(captureDevice, error: nil) as AVCaptureDeviceInput
self.captureSession.addInput(videoInput)
// audio input
let audioInput = AVCaptureDeviceInput.deviceInputWithDevice(self.audioDevice, error: nil)  as AVCaptureDeviceInput
self.captureSession.addInput(audioInput);
// video output
var videoDataOutput = AVCaptureVideoDataOutput()
videoDataOutput.setSampleBufferDelegate(self, queue: self.recordingQueue)
videoDataOutput.alwaysDiscardsLateVideoFrames = true
videoDataOutput.videoSettings = [
kCVPixelBufferPixelFormatTypeKey : kCVPixelFormatType_420YpCbCr8BiPlanarVideoRange
]
self.captureSession.addOutput(videoDataOutput)
self.height = videoDataOutput.videoSettings["Height"] as Int!
self.width = videoDataOutput.videoSettings["Width"] as Int!
// audio output
var audioDataOutput = AVCaptureAudioDataOutput()
audioDataOutput.setSampleBufferDelegate(self, queue: self.recordingQueue)
self.captureSession.addOutput(audioDataOutput)
self.captureSession.startRunning()
}
【追記】20150121
デバイス横のイメージ
デバイス縦のイメージ
4879,android,Android 向けにカメラアプリを開発しています。
android.hardware.Camera#takePicture(Camera.ShutterCallback shutter, Camera.PictureCallback raw, Camera.PictureCallback jpeg) を呼び出して撮影したデータをコールバックで取得するところは実装したところ、デフォルトのシャッター音が再生されることを期待したのですが、なぜかシャッター音が鳴りません。
デフォルトのシャッター音を再生するために必要な Camera パラメータなどが存在するのでしょうか？
補足：
念のため、 takePicture する前に、Camera#enableShutterSound(true); を呼び出して true が返ってきている事も確認しました。(enableShutterSound (boolean enabled) のAPI Doc を読む限り、これで正しくデフォルトのシャッター音が再生されるよう設定された筈)
標準(?)のカメラアプリ、 Instagram で撮影すると、2つのアプリで機種毎に同じサウンドが再生されています。（ので、それが各端末のデフォルトのシャッター音なのだろうと推測しています）
PictureCallback 等で自前でサウンド再生する方法も考えられますが、二重になってしまうのは避けたいので気がすすみません。
環境 :
Nexus 7 2014(4.4.4) ... 再生されない
xperia Acro HD(4.0.4) ... 再生されない
compileSdkVersion 21, buildToolsVersion '21.1.1'
4885,android,androidのwebviewでも普通にa:visitedなどで移動したリンクを表示できますが、
アプリを再起動するとリセットされてしまいます。
これを保持できないでしょうか？
4902,android,Androidとサーバを連携させたくて色々と調べていたのですが、サーバなどに関する知識が無く、まだ分からない点がいくつかあるのですみませんが少々質問させていただきたいです。
サーバにアップロードした自作のテキストファイルを取得してAndroidアプリの画面に表示させるというようなことを行いたいのですが、この場合Androidと連携させるためのサーバは無料のレンタルWebサーバなどでもよろしいでしょうか？
そうであれば実装の手順としては、個人的に以下のようになるかと思います。
テキストファイルをサーバにアップロードする。
HttpURLConnectionを使ってサーバからデータを取得する。
しかしHttpURLConnectionではURLを指定してそのURL上のデータを取得するという流れだったので、ということはサーバにアップロードしたテキストファイルデータが並んでいるWebページを一つ作成する必要があるでしょうか......？
また、調べているとPHPという単語が結構出てきたのですが、サーバと連携する際にはPHPを使わなければならないのでしょうか？
色々と分からないことが多くて申し訳ないのですが、ご指導していただけると幸いです。
すみませんが、宜しくお願いします。
4929,ios,現在、 AppExtension のカスタムキーボードを UIDatePicker を使って作成しています。
シミュレータ上では UIDatePicker は正常に動作するのですが、いざ実機で操作してみると、
UIDatePicker を操作した(回した)時点で固まってしまいます。
カスタムキーボードのテンプレートに追加したコードは、
- (void)viewDidLoad {
[super viewDidLoad];
UIView* view = (UIView*) [[UINib nibWithNibName:@"KeyboardView" bundle:NULL] instantiateWithOwner:self options:NULL][0];
view.frame = self.inputView.frame;
[self.inputView addSubview:view];
}
- (IBAction)nextButtonTapped:(id)sender {
[self advanceToNextInputMode];
}
のみで、 viewDidLoad の中で、以下の KeyboardView.xib を読み込んでいます。
KeyboardView.xib:
この現象は UIPickerView でも同様に発生するようです。
原因や対策など、何かないでしょうか？
問題のプロジェクトを以下に貼ります。
https://mega.co.nz/#!zBInkIzY!Obt7elqi3pKkVPRplkI1knsMEbz5bUyhdAzn4d3iRX4
4930,ios,今までなんとなく Objective-C の Delegate を使っていましたが、もっと理解を深めたいと考えています。 現在は「UITableView を使いたいから Delegate しないと」程度の認識です。
Delegate の正確な意味合い
設計上の位置付け
はどういったものなのでしょうか。
4945,android,AndroidアプリのUIをXMLで指定するときによく使う @+id/ ですが、なんでこれだけ + が入っているのですか？なんとなくこう書くものだと思って使っていましたが、改めて考えてみるとなんでだろうと思いまして… @id/ ではなぜいけなかったのでしょうか？
4974,android,こちらのサイトを参考にしてVolleyによるHTTP通信を実装したのですが｡画像のように引数が間違っていると出てしまいます｡  調べてみたのですがどこのサイトも上のサイトと同じ引数を使用しているので､Volleyの仕様が変更になったのでしょうか｡  VolleyのJsonObjectRequestを確認したところ､次のようなコードになっていたのですが､なぜかUrlがint型になっているのですが､これはバグか何かですか?
/**
* Constructor which defaults to <code>GET</code> if <code>jsonRequest</code> is
* <code>null</code>, <code>POST</code> otherwise.
*
* @see #JsonObjectRequest(int, String, JSONObject, Listener, ErrorListener)
*/
public JsonObjectRequest(int url, String jsonRequest, Listener<JSONObject> listener,
Listener<JSONObject> errorListener) {
this(jsonRequest == null ? Method.GET : Method.POST, url, jsonRequest,
listener, errorListener);
}
4986,android,Android Lollipop に対応する実装を行っています。
KitKat までは異常無く動作するのですが、 Lollipop でアプリ起動時した場合にクラッシュしてしまいます。
Log を追ってみた所クラッシュは OpenGL 関数内 glDrawArrays() 呼び出しで起こっていました。
glPushMatrix();
glLoadIdentity();
glVertexPointer(3, GL_FLOAT, 0, ver);
glColorPointer(4, GL_FLOAT, 0, color);
glDrawArrays(GL_TRIANGLE_STRIP, 0, 4);  // crash
glPopMatrix();
を呼び出した時にクラッシュしています。KitKat までになかった WARNING です。
WARNING: Couldn't find glCurrentPaletteMatrixOES in procAddrs table
WARNING: Couldn't find glLoadPaletteFromModelViewMatrixOES in procAddrs table
WARNING: Couldn't find glMatrixIndexPointerOES in procAddrs table
WARNING: Couldn't find glWeightPointerOES in procAddrs table
検索を行った所、他に全く例がありませんでした。
ご存知の方、解決方を教えて頂けないでしょうか。
よろしくお願いいたします。
4988,java,現在 Java にて、 API を使い DB からデータを読み込むプログラムを作っています。
しかし、うまく動作しないため困っています。 自分で調べたりしているのですがよくわかりません。どなたかお助け願います。
以下を実行すると「例外発生: java.lang.ClassNotFoundException: com.mysql.jdbc.Driver」とでて、実行結果は「{"prefecture":""}」と表示されるだけになります。 まだ Java をはじめて半月くらいなのであまり詳しくないため質問に至りました。
よろしくお願いします。
1: PreResouce.java
package com.sample.rest;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.Statement;
import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.PathParam;
import javax.ws.rs.Produces;
import javax.ws.rs.core.MediaType;
import com.sample.rest.data.Prefecture;
@Path("pref")
@Produces(MediaType.APPLICATION_JSON)
public class PrefResouce {
@GET
@Path("{cd}")
public Prefecture getPaef(@PathParam("cd") Integer cd) {
Prefecture pref = new Prefecture();
try {
Class.forName("com.mysql.jdbc.Driver");
String url = "jdbc:mysql://localhost/SampleDB040";
String user = "testuser";
String password = "*****";
Connection conn = DriverManager.getConnection(url, user, password);
Statement stmt = conn.createStatement();
String sql = "select * from t01prefecture";
ResultSet rs = stmt.executeQuery(sql);
rs.close();
stmt.close();
conn.close();
while (rs.next()) {
int prefCd = rs.getInt("pref_cd");
String prefName = rs.getString("pref_name");  // 都道府県
int areaCd = rs.getInt("area_cd");  // 東西
int contCd = rs.getInt("cont_cd");  // 地方
int helzCd = rs.getInt("helz_cd");  // 電気周波数
pref.setPrefCd(prefCd);
pref.setPrefName(prefName);
pref.setAreaCd(areaCd);
pref.setContCd(contCd);
pref.setHelzCd(helzCd);
}
} catch (Exception e) {
System.out.println("例外発生:" + e);
}
return pref;
}
}
2: Prefecture.java
package com.sample.rest.data;
import javax.xml.bind.annotation.XmlRootElement;
@XmlRootElement
public class Prefecture {
private Integer prefCd;
private String prefName;
private Integer areaCd;
private Integer contCd;
private Integer helzCd;
public Integer getPrefCd() {
return prefCd;
}
public void setPrefCd(Integer prefCd) {
this.prefCd = prefCd;
}
public String getPrefName() {
return prefName;
}
public void setPrefName(String prefName) {
this.prefName = prefName;
}
public Integer getAreaCd() {
return areaCd;
}
public void setAreaCd(Integer areaCd) {
this.areaCd = areaCd;
}
public Integer getContCd() {
return contCd;
}
public void setContCd(Integer contCd) {
this.contCd = contCd;
}
public Integer getHelzCd() {
return helzCd;
}
public void setHelzCd(Integer helzCd) {
this.helzCd = helzCd;
}
}
3: ApplicationConfig.java
package com.sample.rest;
import java.util.HashSet;
import java.util.Set;
import javax.ws.rs.ApplicationPath;
import javax.ws.rs.core.Application;
@ApplicationPath("/api")
public class ApplicationConfig extends Application {
@Override
public Set<Class<?>> getClasses() {
Set<Class<?>> resources = new HashSet<>();
resources.add(PrefResouce.class);
return resources;
}
}
4997,ios,Monaca を使ってアプリ開発しているのですが下の画像のようにツールバーの上に空白ができてしまいます。
画面 http://ryo110isa.main.jp/ios.png
Android の場合はこのようなことにはなりません。
いろいろやってみると、 AngularJS を使ったときだけ空白ができるようです。
ちなみに index.html は
<!DOCTYPE HTML>
<html  ng-app="myApp">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<script src="components/loader.js"></script>
<link rel="stylesheet" href="components/loader.css">
<link rel="stylesheet" href="css/style.css">
<script src="js/app.js"></script>
</head>
<body ng-controller = "Page1Ctrl">
<ons-tabbar var="tabbar" >
<ons-tabbar-item
icon="home"
label="ホーム"
page="navigator/navigator1.html"
active="true"></ons-tabbar-item>
<ons-tabbar-item
icon="fa-book"
label="メニュー"
page="navigator/navigator2.html"></ons-tabbar-item>
<ons-tabbar-item
icon="fa-star-o"
label="クーポン"
ng-click="on_search_btn()"></ons-tabbar-item>
<ons-tabbar-item
icon="fa-phone"
label="予約"
page="navigator/navigator4.html"></ons-tabbar-item>
</ons-tabbar>
</body>
</html>
としております。
なぜでしょうか？素人で申し訳ございませんがご教授お願いいたします。
5015,android,Android グラフ描画ライブラリ AchartEngine の CubicLineChart を使用し、横長の曲線グラフの一覧を表示する画面を作成しようとしています。
まず TemplatureChart.class の execute メソッドで GraphicalView を返すように作成します。
【グラフのView作成クラス】
public class TemplatureChart  {
public GraphicalView execute(Context context) {
String[] titles = new String[] { "Sales for 2008", "Sales for 2007",
"Difference between 2008 and 2007 sales" };
List<double[]> values = new ArrayList<double[]>();
values.add(new double[] { 14230, 12300, 14240, 15244, 14900, 12200, 11030, 12000, 12500, 15500,
14600, 15000 });
values.add(new double[] { 10230, 10900, 11240, 12540, 13500, 14200, 12530, 11200, 10500, 12500,
11600, 13500 });
int length = values.get(0).length;
double[] diff = new double[length];
for (int i = 0; i < length; i++) {
diff[i] = values.get(0)[i] - values.get(1)[i];
}
values.add(diff);
int[] colors = new int[] { Color.BLUE, Color.CYAN, Color.GREEN };
PointStyle[] styles = new PointStyle[] { PointStyle.POINT, PointStyle.POINT, PointStyle.POINT };
XYMultipleSeriesRenderer renderer = buildRenderer(colors, styles);
setChartSettings(renderer, "Monthly sales in the last 2 years", "Month", "Units sold", 0.75,
12.25, -5000, 19000, Color.GRAY, Color.LTGRAY);
renderer.setXLabels(12);
renderer.setYLabels(10);
renderer.setChartTitleTextSize(20);
renderer.setTextTypeface("sans_serif", Typeface.BOLD);
renderer.setLabelsTextSize(14f);
renderer.setAxisTitleTextSize(15);
renderer.setLegendTextSize(15);
length = renderer.getSeriesRendererCount();
for (int i = 0; i < length; i++) {
XYSeriesRenderer seriesRenderer = (XYSeriesRenderer) renderer.getSeriesRendererAt(i);
if (i == length - 1) {
FillOutsideLine fill = new FillOutsideLine(FillOutsideLine.Type.BOUNDS_ALL);
fill.setColor(Color.GREEN);
seriesRenderer.addFillOutsideLine(fill);
}
seriesRenderer.setLineWidth(2.5f);
seriesRenderer.setDisplayChartValues(true);
seriesRenderer.setChartValuesTextSize(10f);
}
return ChartFactory.getCubeLineChartView(context, buildBarDataset(titles, values), renderer,
0.5f);
}
/**
* Builds a bar multiple series dataset using the provided values.
*
* @param titles the series titles
* @param values the values
* @return the XY multiple bar dataset
*/
protected XYMultipleSeriesDataset buildBarDataset(String[] titles, List<double[]> values) {
XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();
int length = titles.length;
for (int i = 0; i < length; i++) {
CategorySeries series = new CategorySeries(titles[i]);
double[] v = values.get(i);
int seriesLength = v.length;
for (int k = 0; k < seriesLength; k++) {
series.add(v[k]);
}
dataset.addSeries(series.toXYSeries());
}
return dataset;
}
public static XYMultipleSeriesRenderer getRenderer(){
XYSeriesRenderer renderer1 = new XYSeriesRenderer(); //個別のグラフ
renderer1.setColor(Color.rgb(51,181,229)); //グラフの色
renderer1.setLineWidth(2); //グラフの幅
renderer1.setPointStyle(PointStyle.SQUARE); //ポイント設定
renderer1.setPointStrokeWidth(8);
renderer1.setFillPoints(true);
XYMultipleSeriesRenderer mRenderer = new XYMultipleSeriesRenderer(); //グラフ全体
mRenderer.setApplyBackgroundColor(true); //背景色変更
mRenderer.setBackgroundColor(Color.BLACK);
mRenderer.setMarginsColor(Color.argb(0x00, 0x01, 0x01, 0x01)); //余白色変更
mRenderer.setPanEnabled(true);  //グラフを固定
mRenderer.setZoomEnabled(false); //ズームを不可に
mRenderer.setShowLegend(false); //凡例非表示
mRenderer.setAxesColor(Color.GRAY); //軸の色
mRenderer.setShowGrid(true); //グリッド表示
mRenderer.setGridColor(Color.parseColor("lightgray")); //グリッドの色
mRenderer.setXAxisMin(0);
//mRenderer.setXAxisMax(23); //表示範囲
//mRenderer.setLabelsTextSize(24); //ラベル文字サイズ
// mRenderer.setXLabels(0); //X軸ラベル非表示
//Y軸ラベル設定
mRenderer.setYLabels(5);//Y軸グリッドの密度？
mRenderer.setYLabelsColor(0, Color.GRAY);
mRenderer.setYLabelsPadding(20);
mRenderer.setYLabelsVerticalPadding(-8);
mRenderer.addSeriesRenderer(renderer1);
return mRenderer;
}
/**
* Builds an XY multiple dataset using the provided values.
*
* @param titles the series titles
* @param xValues the values for the X axis
* @param yValues the values for the Y axis
* @return the XY multiple dataset
*/
protected XYMultipleSeriesDataset buildDataset(String[] titles, List<double[]> xValues,
List<double[]> yValues) {
XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();
addXYSeries(dataset, titles, xValues, yValues, 0);
return dataset;
}
public void addXYSeries(XYMultipleSeriesDataset dataset, String[] titles, List<double[]> xValues,
List<double[]> yValues, int scale) {
int length = titles.length;
for (int i = 0; i < length; i++) {
XYSeries series = new XYSeries(titles[i], scale);
double[] xV = xValues.get(i);
double[] yV = yValues.get(i);
int seriesLength = xV.length;
for (int k = 0; k < seriesLength; k++) {
series.add(xV[k], yV[k]);
}
dataset.addSeries(series);
}
}
/**
* Builds an XY multiple series renderer.
*
* @param colors the series rendering colors
* @param styles the series point styles
* @return the XY multiple series renderers
*/
protected XYMultipleSeriesRenderer buildRenderer(int[] colors, PointStyle[] styles) {
XYMultipleSeriesRenderer renderer = new XYMultipleSeriesRenderer();
setRenderer(renderer, colors, styles);
return renderer;
}
protected void setRenderer(XYMultipleSeriesRenderer renderer, int[] colors, PointStyle[] styles) {
renderer.setAxisTitleTextSize(16);
renderer.setChartTitleTextSize(20);
renderer.setLabelsTextSize(15);
renderer.setLegendTextSize(15);
renderer.setPointSize(5f);
renderer.setMargins(new int[] { 20, 30, 15, 20 });
int length = colors.length;
for (int i = 0; i < length; i++) {
XYSeriesRenderer r = new XYSeriesRenderer();
r.setColor(colors[i]);
r.setPointStyle(styles[i]);
renderer.addSeriesRenderer(r);
}
}
/**
* Sets a few of the series renderer settings.
*
* @param renderer the renderer to set the properties to
* @param title the chart title
* @param xTitle the title for the X axis
* @param yTitle the title for the Y axis
* @param xMin the minimum value on the X axis
* @param xMax the maximum value on the X axis
* @param yMin the minimum value on the Y axis
* @param yMax the maximum value on the Y axis
* @param axesColor the axes color
* @param labelsColor the labels color
*/
protected void setChartSettings(XYMultipleSeriesRenderer renderer, String title, String xTitle,
String yTitle, double xMin, double xMax, double yMin, double yMax, int axesColor,
int labelsColor) {
renderer.setChartTitle(title);
renderer.setXTitle(xTitle);
renderer.setYTitle(yTitle);
renderer.setXAxisMin(xMin);
renderer.setXAxisMax(xMax);
renderer.setYAxisMin(yMin);
renderer.setYAxisMax(yMax);
renderer.setAxesColor(axesColor);
renderer.setLabelsColor(labelsColor);
}
}
次に下記のような XML ファイルを作成します。
【レイアウトxmlファイル】
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/LinearLayout1"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context="com.example.templature.MainActivity$PlaceholderFragment" >
<HorizontalScrollView
android:id="@+id/horizontalScrollView1"
android:layout_width="wrap_content"
android:layout_height="wrap_content" >
<LinearLayout
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >
<LinearLayout
android:id="@+id/graph1"
android:layout_width="1000dp"
android:layout_height="100dp"
android:orientation="vertical" >
</LinearLayout>
<LinearLayout
android:id="@+id/graph2"
android:layout_width="2000dp"
android:layout_height="100dp"
android:orientation="vertical" >
</LinearLayout>
<LinearLayout
android:id="@+id/graph3"
android:layout_width="3000dp"
android:layout_height="100dp"
android:orientation="vertical" >
</LinearLayout>
</LinearLayout>
</HorizontalScrollView>
</LinearLayout>
上記のレイアウトにexecuteで設定したidがgraph1, graph2、graph3のLinearLayoutにaddViewします。
【addView部分】
LinearLayout graph1 = (LinearLayout) rootView.findViewById(R.id.graph1);
LinearLayout graph2 = (LinearLayout) rootView.findViewById(R.id.graph2);
LinearLayout graph3 = (LinearLayout) rootView.findViewById(R.id.graph3);
TemplatureChart chart1 = new TemplatureChart();
GraphicalView chartA = chart1.execute(getActivity());
graph1.addView(chartA);
TemplatureChart chart2 = new TemplatureChart();
GraphicalView chartB = chart2.execute(getActivity());
graph2.addView(chartB);
TemplatureChart chart3 = new TemplatureChart();
GraphicalView chartC = chart3.execute(getActivity());
graph3.addView(chartC);
実行結果は下記のようになります。
上記のように大きなレイアウト入れたビューのグラフが消えてしまいます。
この問題の原因と解決方法をご存知の方は御教授いただければ幸いです。
よろしくお願いします。
5017,android,はじめまして。
Android の WebView を使ったアプリの開発をしています。
WebView にて、モーダルウィンドウを表示した状態で WebView を回転させると、
モーダルウィンドウが消えてしまいます。
たとえば、この「モーダルウィンドウのデモ」のモーダルウィンドウを Android の WebView で表示した状態で、 Android を回転させるとモーダルが消えます。
Google Chrome や Firefox などの既存のブラウザアプリではこれが消えずに残るため、なにか方法があると思うのですがそれが分かりません。
WebView の回転時にリロードしないように、 AndroidManifest.xml に以下の記述を加えたり、
<application
...
android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"
/>
MainActivity 内で onSavedInstance を使って値を保存したり、
WebView webView;
@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);
webView = (WebView)findViewById(R.id.webView);
webView.setWebViewClient(new WebViewClient(){
@Override
public boolean shouldOverrideUrlLoading(WebView view, String url) {
return false;
}
});
webView.getSettings().setCacheMode(WebSettings.LOAD_CACHE_ELSE_NETWORK);
webView.setLayerType(View.LAYER_TYPE_SOFTWARE, null);
if(savedInstanceState == null){
webView.loadUrl("http://syncer.jp/_demo/javascript/jquery-modal-window/modal.html");
}
webView.getSettings().setJavaScriptEnabled(true);
}
@Override
protected void onRestoreInstanceState(Bundle savedInstanceState) {
super.onRestoreInstanceState(savedInstanceState);
webView.restoreState(savedInstanceState);
}
@Override
protected void onSaveInstanceState(Bundle outState) {
super.onSaveInstanceState(outState);
webView.saveState(outState);
}
いろいろと試してみたのですが、どうにも解決できません。
この問題の解決策をご存知の方、お力添えをよろしくお願いします。
5029,android,Androidで端末ごとにユニークなIDを持たせてサーバー側とやりとりする際に簡易的に利用者を識別したいです。事前の会員登録などはおこなわず、アプリケーション側で端末IDを取得(もしくは発番)してサーバーに送信したいです。
一人の利用者が複数台の端末を使っているケースは考えなくて良いです(その場合は複数人が利用していると処理して良い)。
どのように実装したら良いでしょうか？
5061,android,EclipseにてOpenCVのチュートリアル(OpenCV Tutorial 2 - Mixed Processing)をインポートしてコンパイルしようとしているのですが、
jni_part.cppで Symbol 'std' could not be resolved, Symbol 'cv' could not be resolved
となってしまいます。
Application.mkでのAPP_STL指定は行っています
APP_STL := gnustl_static
APP_CPPFLAGS := -frtti -fexceptions
APP_ABI := armeabi-v7a
APP_PLATFORM := android-8
5062,ios,Xcode5.1を使っています。プロジェクトをビルドした時、件名のようなエラーが出てしまいます。どの様にすれば直るでしょうか？
5083,android,OpenCV のリファレンスとソースコードを探してみたのですが、インカメラ＋縦向きで実行したいのですが、カメラのプレビューが意図したとおりに、することができません。
スマートフォンが横向きでは、プレビューは正常です。縦向きにすると、プレビューの上下が逆さまになります。
上下逆さまをsetDisplayOrientationとsetRotationを使って、正しい向きにしたいのですが、私のプログラムでは、意図したとおりに動作しませんでした。
お分かりになる方、教えてください。
Eclipse 4.4 + ADT
API 19
Nexus 5
やってみたこと。
メンバ変数mOpenCvCameraViewのCameraBridgeViewBase型をJavaCameraView型にして動作するか確認。-> 意図したとおりに動作することを確認。
JavaCameraViewクラスに、画面の向きを変更するメソッドが見つからなかったので、JavaCameraViewを継承したJavaCameraView2クラスを作成して、向きを変えるメソッドを追加
FdActivityクラスのonCreateメソッド内で、作成したメソッドを呼ぶ
-> ここで、つまづいています。
public class JavaCameraView2 extends JavaCameraView {
// snip..
public void setCameraRotation(int angle) {
Log.i(TAG, "called setCameraRotation");
try {
this.mCamera.setDisplayOrientation(angle);
} catch (Exception e) {
Log.e(TAG, "failed camera setting");
e.printStackTrace();
}
}
}
public class FdActivity extends Activity implements CvCameraViewListener2 {
private JavaCameraView2        mOpenCvCameraView;
// snip..
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
Log.i(TAG, "called onCreate");
super.onCreate(savedInstanceState);
getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);
setContentView(R.layout.face_detect_surface_view);
mOpenCvCameraView = (JavaCameraView2) findViewById(R.id.fd_activity_surface_view);
mOpenCvCameraView.setCvCameraViewListener(this);
mOpenCvCameraView.setCameraRotation(90);
}
// snip..
}
mOpenCvCameraView.setCameraRotation(90); で Java.lang.NullPointerException が発生します。
どうぞ、よろしくお願いします。
追記
アドバイスを元に「onResume」メソッドにコードを追加しました。
public void onResume() {
super.onResume();
OpenCVLoader.initAsync(OpenCVLoader.OPENCV_VERSION_2_4_3, this, mLoaderCallback);
// 以下追加
mOpenCvCameraView.setVisibility(SurfaceView.VISIBLE);
mOpenCvCameraView.setCameraRotation(90);
mOpenCvCameraView.enableView();
}
結果は、NullPointerExceptionが発生し、意図したとおりにはなりませんでした。
何か参考になる情報があれば、教えてください。
1/27 追記
プレビューを意図した向きにすることができました。以下のサイトを参考にしています。
OpenCV4Android - Displaying Preview in Portrait Mode
カメラをOpenした直後に、setDisplayOrientationメソッドを実行しても、向きが変化しないのは、
OpenCVの中で、向きを変更できないようなコーディングがされていると思い、参考サイトで向きを調整
しました。
ただ、このままだと比率が正しくないので、潰れた状態でプレビューされます。
この方法が正しいのかどうかは、自信がありません。
今は、潰れないように、比率が正しくなるように調整しています。
public class FdActivity extends Activity implements CvCameraViewListener2 {
private Mat mRgbaF;
private Mat mRgbaT;
public void onCameraViewStarted(int width, int height) {
mGray = new Mat();
mRgba = new Mat();
mRgbaF = new Mat(height, width, CvType.CV_8UC4);
mRgbaT = new Mat(width, width, CvType.CV_8UC4);
}
public Mat onCameraFrame(CvCameraViewFrame inputFrame) {
// 省略
// Rotate mRgba 90 degrees
Core.transpose(mRgba, mRgbaT);
Imgproc.resize(mRgbaT, mRgbaF, mRgbaF.size(), 0, 0, 0);
Core.flip(mRgbaF, mRgba, 0 );
return mRgba;
}
}
この方法以外の情報がございましたら、教えてください。
よろしくお願いします。
追記 2/9
上記方法ですと、プレビュー画面が潰れてしまい（縦と横の比率がおかしい）、意図したとおりにならないため、参考になるサイトを探しておりました。
以下のサイトを参考にしましたが、バックカメラ＋portrait は意図したとおりになることを確認しましたが、インカメラ＋portrait では、プレビュー画面の上下が逆さまになってしまいます。
参考サイト：
http://answers.opencv.org/question/7313/rotating-android-camera-to-portrait/
http://littlecheesecake.me/blog/13804736/opencv-android-orientation
結論として、OpenCVは「インカメラ＋portrait」の条件では、意図したとおりに動作できない。と判断しました。
ありがとうござました。
5090,ios,iOS の Swift を使って、動画保存処理を作っています。
動画保存はできるようになったのですが、 iPhone を縦にして撮った動画をカメラロールで確認すると、横向きになっています。これを回避するために、 AVCaptureConnection を使い、デバイスの向きを設定する必要があることがわかりました。
以下の Objective-C のソースをもとに、Swift 版で書き換えようとしました。
AVCaptureConnection *captureConnection = <#A capture connection#>;
if ([captureConnection isVideoOrientationSupported])
{
AVCaptureVideoOrientation orientation = AVCaptureVideoOrientationLandscapeLeft;
[captureConnection setVideoOrientation:orientation];
}
実際に書き換えたのが以下のソースです。
わからないなりに、イメージはこうなるのかと思って、強引に書き換えたため、エラーになってしまいますが、これをどのように修正したらよいかわからない状況です。（ネットでいろいろ調べてみましたが、お手上げ状態です）
var captureConnection = AVCaptureConnection()
if (captureConnection.videoOrientation)
{
var orientation:AVCaptureVideoOrientation = AVCaptureVideoOrientationLandscapeLeft
captureConnection.videoOrientation(orientation);
}
どなたか、アドバイスをいただけないでしょうか？
何卒よろしくお願いいたします。
5092,android,次のURLでリクエストしたところ以下のエラーが出てしまいました｡
エラー内容:
01-22 22:24:43.326  23433-23461/com.hoge.piyo.buzz E/Volley﹕
[2094]    BasicNetwork.performRequest: Unexpected response code 400 for
https://www.googleapis.com/youtube/v3/search?q=%E3%81%BB%E3%81%92&part=id,snippet&maxResults=20&order=viewCount&type=video&videoDefinition=high&publishedAfter=2015-01-21T10:24:42Z&key=API_KEY
ブラウザで､APIKeyを取得して実行したところ正常な結果を受け取ることが出来ました｡
APIKeyの取得も問題ないはずです｡
すみません｡ 上記のリクエストですが､APIKeyを定数として記述することを忘れていました｡ 申し訳ありません｡  しかし､それを直し実行したところ､今度は以下のようなエラーが出てしまいました｡
エラー内容
01-23 19:39:27.832  16150-16194/com.hoge.piyo.buzz E/Volley﹕ [4276] BasicNetwork.performRequest: Unexpected response code 403 for https://www.googleapis.com/youtube/v3/search?q=hoge&part=id,snippet&maxResults=20&order=viewCount&type=video&videoDefinition=high&publishedAfter=2015-01-22T07:39:27Z&key=API_KEY
ログ出力
com.android.volley.AuthFailureError
また､サーバーのレスポンスを表示するには次の命令であっていますか?
Log.e("tag", new String(error.networkResponse.data, error));
これを､記述するとString(byte[], com.volley.VolleyError)とでて実行できません｡
レスポンスの内容をLogに表示したところ次のような結果を得られました｡
レスポンスのログ出力:
"error": {
"errors": [
{
"domain": "usageLimits",
"reason": "accessNotConfigured",
"message": "Access Not Configured. The API is not enabled for your project, or there is a per-IP or per-Referer restriction configured on your API key and the request does not match these restrictions. Please use the Google Developers Console to update your configuration.",
"extendedHelp": "https://console.developers.google.com"
}
],
"code": 403,
"message": "Access Not Configured. The API is not enabled for your project, or there is a per-IP or per-Referer restriction configured on your API key and the request does not match these restrictions. Please use the Google Developers Console to update your configuration."
}
}
com.android.volley.AuthFailureError
at com.android.volley.toolbox.BasicNetwork.performRequest(BasicNetwork.java:159)
at com.android.volley.NetworkDispatcher.run(NetworkDispatcher.java:112)
私も､APIKeyが間違っていると思い､APIKeyを再発行したり､Packageが間違っていないか確かめたのですが､何故かうまくいきません｡
5128,java,下記のコードにてMYSQLへ接続し、URL「http://hogehoge/hoge/api/hoge/search?hoge=*」で指定した範囲の結果表示をしたいです。
しかし、例外やエラーが続出していまい、作業がとまっています。
いろいろ調べたりしているのですがよくわかりません。
@GET
@Path("search?hoge={hoge}")
public ArrayList<Hogehoge> getHoge(@QueryParam("hoge") Integer hoge){
ArrayList<Hogehoge> list = new ArrayList<Hogehoge>();
Hogehoge hoge;
hoge = new Hogehoge();
try {
Class.forName("com.mysql.jdbc.Driver");
String url = "jdbc:mysql://localhost/SampleDB040";
String user = "testmysql";
String password = "******";
Connection conn = DriverManager.getConnection(url, user, password);
System.out.println(conn.getMetaData().getDatabaseProductName());
Statement stmt = conn.createStatement();
String sql = "select hoge,hoge,hoge,hoge,hoge"
+ " from hoge,hoge,hoge,hoge"
+ " where hoge.hoge = hoge.hoge "
+ " and hoge.hoge = hoge.hoge"
+ " and hoge.hoge = hoge.hoge"
+ " and order by hoge"
+ " and hoge.hoge = "+hoge+"";
ResultSet rs = stmt.executeQuery(sql);
System.out.println();
while (rs.next()) {
hoge = new Hogehoge();
pref.setHogeCd(rs.getInt("hoge"));
pref.setHoge1Name(rs.getString("hoge"));
pref.setHoge2Name(rs.getString("hoge"));
pref.setHoge3Name(rs.getString("hoge"));
pref.setHoge4Name(rs.getString("hoge"));
list.add(hoge);
}
} catch (Exception e) {
System.out.println("例外発生:" + e);
}
return null;
}
下記のClassで実行？されます
import java.util.HashSet;
import java.util.Set;
import javax.ws.rs.ApplicationPath;
import javax.ws.rs.core.Application;
@ApplicationPath("/api")
public class ApplicationConfig extends Application {
@Override
public Set<Class<?>> getClasses() {
Set<Class<?>> resources = new HashSet<>();
resources.add(Hogehoge.class);
return resources;
}
}
下記エラー、例外です。長くてすみません。
警告: No operation matching request path "/rest-sample/api/pref/1" is found, Relative                             Path: /1, HTTP Method: GET, ContentType: */*, Accept:     text/html,application/xhtml+xml,image/webp,application/xml;q=0.9,*/*;q=0.8,. Please enable FINE/TRACE log level for more details. [金 1 23 14:14:35 JST 2015]
警告: javax.ws.rs.WebApplicationException
at org.apache.cxf.jaxrs.utils.JAXRSUtils.findTargetMethod(JAXRSUtils.java:415)
at     org.apache.cxf.jaxrs.interceptor.JAXRSInInterceptor.processRequest(JAXRSInInterceptor.java:216)
at org.apache.cxf.jaxrs.interceptor.JAXRSInInterceptor.handleMessage(JAXRSInInterceptor.java:91)
at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:263)
at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:121)
at org.apache.cxf.transport.http.AbstractHTTPDestination.invoke(AbstractHTTPDestination.java:240)
at org.apache.openejb.server.cxf.rs.CxfRsHttpListener.onMessage(CxfRsHttpListener.java:187)
at org.apache.openejb.server.rest.RsServlet.service(RsServlet.java:53)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:727)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:303)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)
at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:220)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:122)
at org.apache.tomee.catalina.OpenEJBValve.invoke(OpenEJBValve.java:44)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:501)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:950)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:116)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:408)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1070)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:611)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:316)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
at java.lang.Thread.run(Thread.java:745)
5137,android,onClickで実行している処理を、PCからの命令をトリガーに実行するようにしたいです。
スタートボタン押下を、PCから命令したいです。
package com.pushbutton;
import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
public class MainActivity extends Activity {
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);
}
public void onClickGrtBtn(View v) {
Log.v("onClickGrtBtn", "hoge");
}
}
5145,android|java,OpenGL ESを用いた3D表示のプログラム課題への助言のお願いです。
今2つの正六面体を描画するプログラム( Zバッファを有効にしていないもの)を Android 端末で表示させる課題を進めています。
教科書としてオライリー・ジャパンの初めての OpenGL ES を用いて行われているのですが、教科書を読んだ末、次のようなプログラムリストにしてみました。ですが実際に動かしてみると起動後、画面に表示されることもなく落ちてしまいます。どのように変更すればよろしいでしょうか？とても勉強不足で正直何しているのかと思われるようなプログラムかとは思いますが何か助言をもらえないでしょうか？
package com.example.rokumen1;
import javax.microedition.khronos.egl.EGLConfig;
import javax.microedition.khronos.opengles.GL10;
import android.app.Activity;
import android.opengl.GLSurfaceView;
import android.os.Bundle;
import java.nio.ByteBuffer;
import java.nio.ByteOrder;
import java.nio.FloatBuffer;
import android.opengl.GLU;
import android.opengl.GLSurfaceView.Renderer;
import javax.microedition.khronos.opengles.GL11;
public class rokumen1 extends Activity {
// ! 描写対象のView
private GLSurfaceView glSurfaceView = null;
/**
* Called when the activity is first created.
*/
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
glSurfaceView = new GLSurfaceView(this);
glSurfaceView.setRenderer(new  GLRenderSample1());
setContentView(glSurfaceView);
}
// ! Activity 休止時の処理
@Override
protected void onPause() {
super.onPause();
glSurfaceView.onPause();
}
// ! Activity復帰時の処理
@Override
protected void onResume() {
super.onResume();
glSurfaceView.onResume();
}
class GLRenderSample1 implements Renderer {
float aspect=0.0f;
int vertices=0;
int indices=0;
int  indicesLength=0;
class Object3D {
public float posX = 0.0f;
public float posY = 0.0f;
public float posZ = 0.0f;
public float rotateY = 0.0f;
public float scale = 1.0f;
public float colR = 1.0f;
public float colG = 1.0f;
public float colB = 1.0f;
public float colA = 1.0f;
public void drawBox(GL10 gl) {
//! 行列をデフォルト状態へ戻す
gl.glMatrixMode(GL10.GL_MODELVIEW);
gl.glLoadIdentity();
//! 指定行列を生成
gl.glTranslatef(posX, posY, posZ);
gl.glRotatef(rotateY, 0, 1, 0);
gl.glScalef(scale, scale, scale);
//! 色指定
gl.glColor4f(colR, colG, colB, colA);
GL11 gl11 = (GL11) gl;
//!頂点バッファの関連付け
gl11.glDrawElements(GL10.GL_TRIANGLES, indicesLength, GL10.GL_UNSIGNED_BYTE, 0);
}
}
Object3D box0 = new Object3D();
Object3D box1 = new Object3D();
// ! サーフェイス作成時の処理
@Override
public void onSurfaceCreated(GL10 gl, EGLConfig eglconfig) {
//  Toast.makeText(OpenGLSample_1_2.this, "message", Toast.LENGTH_LONG).show();
}
@Override
public void onSurfaceChanged(GL10 gl, int width, int height) {
aspect = (float) width / (float) height;
gl.glViewport(0, 0, width, height);
//! バッファを生成
GL11 gl11 = (GL11) gl;
{
int[] buffer = new int[2];
gl11.glGenBuffers(2, buffer, 0);
vertices = buffer[0];
indices = buffer[1];
}
//! 頂点バッファを作成する
// ! 頂点転送
{
final float one = 1.0f;
final float[] vertices = new float[]{
//! x y z
one,one,one, //!< 0 左上手前
one,one,-one, //!< 1 左上奥
-one,one,one, //!< 2 右上手前
-one,one,-one, //!<3 右上奥
one,-one,one, //!<4 左下手前
one,-one,-one, //!<5 左下奥
-one,-one,one, //!<6 右下手前
-one,-one,-one, //!<7 右下奥
};
FloatBuffer fb = ByteBuffer.allocateDirect(vertices.length * 4)
.order(ByteOrder.nativeOrder()).asFloatBuffer();
fb.put(vertices);
fb.position(0);
gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
gl11.glBindBuffer(GL11.GL_ARRAY_BUFFER, this.vertices);
gl11.glBufferData(GL11.GL_ARRAY_BUFFER, fb.capacity() * 4, fb, GL11.GL_STATIC_DRAW);
gl11.glVertexPointer(3, GL10.GL_FLOAT, 0, 0);
}
// ! インデックスバッファ生成
{
final byte[] indices = new byte[]{
0,1,2,
2,1,3,
2,3,6,
6,3,7,
6,7,4,
4,7,5,
4,5,0,
0,5,1,
1,5,3,
3,5,7,
0,2,4,
4,2,6,
};
ByteBuffer bb = ByteBuffer.allocateDirect(indices.length)
.order(ByteOrder.nativeOrder());
bb.put(indices);
indicesLength = bb.capacity();
bb.position(0);
gl11.glBindBuffer(GL11.GL_ARRAY_BUFFER, this.indices);
gl11.glBufferData(GL11.GL_ARRAY_BUFFER, bb.capacity(), bb, GL11.GL_STATIC_DRAW);
}
}
@Override
public void onDrawFrame(GL10 gl) {
gl.glClearColor(0.0f, 0.5f, 0.5f, 1.0f);
gl.glClear(GL10.GL_COLOR_BUFFER_BIT);
//! カメラ転送
{
gl.glMatrixMode(GL10.GL_PROJECTION);
gl.glLoadIdentity();
GLU.gluPerspective(gl, 45.0f, aspect, 0.01f, 100.0f);
GLU.gluLookAt(gl, 0, 5.0f, 5.0f, 0, 0, 0.0f, 0.0f, 1.0f, 0.0f);
}
gl.glMatrixMode(GL10.GL_MODELVIEW);
{
box0.posX = -0.5f;
box0.rotateY += 1.0f;
box0.colR = 1.0f;
box0.colG = 0.0f;
box0.colB = 1.0f;
box0.drawBox(gl);
}
{
box1.posX = 0.5f;
box1.rotateY -= 0.5f;
box1.colR = 0.0f;
box1.colG = 0.0f;
box1.colB = 1.0f;
box1.drawBox(gl);
}
}
}
}
ちなみにログでは:
01-23 04:22:58.775  17459-17459/com.example.rokumen1 D/NvOsDebugPrintf﹕ Opened!
/dev/nvhost-ctrl 42
01-23 04:22:58.779  17459-17459/com.example.rokumen1 D/libEGL﹕ loaded
/system/lib/egl/libEGL_tegra.so
01-23 04:22:58.799  17459-17459/com.example.rokumen1 D/libEGL﹕ loaded /system/lib/egl/libGLESv1_CM_tegra.so
01-23 04:22:58.810  17459-17459/com.example.rokumen1 D/libEGL﹕ loaded /system/lib/egl/libGLESv2_tegra.so
01-23 04:22:58.856  17459-17459/com.example.rokumen1 D/OpenGLRenderer﹕ Enabling debug mode 0
01-23 04:22:58.898  17459-17473/com.example.rokumen1 A/libc﹕ Fatal signal 11 (SIGSEGV) at 0x00000000 (code=1)
となっています。
5149,java,今回の質問で一番教えてもらいたいことは、どこがどのようになっているため描画させたい図が表示されないのか、またどう改善させればよいのかという点です。
今2つの正六面体を描画するプログラム( Zバッファを有効にしたもの)を Android 端末で表示させる課題を進めています。
教科書としてオライリー・ジャパンの初めての OpenGL ES を用いて行われているのですが、教科書を読んだ末、次のようなプログラムリストにしてみました。ですが実際に動かしてみると起動後、画面は真っ青なまま3Dで表示させたい物体はでてきません。どのように変更すればよろしいでしょうか？とても勉強不足で正直何しているのかと思われるようなプログラムかとは思いますが何か助言をもらえないでしょうか？
一つ前に私はこの課題に似たZバッファを有効にしない課題を質問させていただいたのですがその分はしっかり実行までいきつくことができました。そしてその有効にしないプログラムから
//! 深度バッファを有効にする
gl.glEnable(GL10.GL_DEPTH_TEST);
をonSurfaceChanged内に組み込むことでZバッファを有効にした描画が可能になるというように書かれていてそのように変更し実行した結果先ほど述べたような結果が現れてしまったのです。
package com.example.rokumen1;
import javax.microedition.khronos.egl.EGLConfig;
import javax.microedition.khronos.opengles.GL10;
import android.app.Activity;
import android.opengl.GLSurfaceView;
import android.os.Bundle;
import java.nio.ByteBuffer;
import java.nio.ByteOrder;
import java.nio.FloatBuffer;
import android.opengl.GLU;
import android.opengl.GLSurfaceView.Renderer;
import javax.microedition.khronos.opengles.GL11;
public class rokumen1 extends Activity {
// ! 描写対象のView
private GLSurfaceView glSurfaceView = null;
/**
* Called when the activity is first created.
*/
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
glSurfaceView = new GLSurfaceView(this);
glSurfaceView.setRenderer(new  GLRenderSample2());
setContentView(glSurfaceView);
}
// ! Activity 休止時の処理
@Override
protected void onPause() {
super.onPause();
glSurfaceView.onPause();
}
// ! Activity復帰時の処理
@Override
protected void onResume() {
super.onResume();
glSurfaceView.onResume();
}
class GLRenderSample1 implements Renderer {
float aspect=0.0f;
int vertices=0;
int indices=0;
int  indicesLength=0;
class Object3D {
public float posX = 0.0f;
public float posY = 0.0f;
public float posZ = 0.0f;
public float rotateY = 0.0f;
public float scale = 1.0f;
public float colR = 1.0f;
public float colG = 1.0f;
public float colB = 1.0f;
public float colA = 1.0f;
public void drawBox(GL10 gl) {
//! 行列をデフォルト状態へ戻す
gl.glMatrixMode(GL10.GL_MODELVIEW);
gl.glLoadIdentity();
//! 指定行列を生成
gl.glTranslatef(posX, posY, posZ);
gl.glRotatef(rotateY, 0, 1, 0);
gl.glScalef(scale, scale, scale);
//! 色指定
gl.glColor4f(colR, colG, colB, colA);
GL11 gl11 = (GL11) gl;
//!頂点バッファの関連付け
gl11.glDrawElements(GL10.GL_TRIANGLES, indicesLength, GL10.GL_UNSIGNED_BYTE, 0);
}
}
Object3D box0 = new Object3D();
Object3D box1 = new Object3D();
// ! サーフェイス作成時の処理
@Override
public void onSurfaceCreated(GL10 gl, EGLConfig eglconfig) {
//  Toast.makeText(OpenGLSample_1_2.this, "message", Toast.LENGTH_LONG).show();
}
@Override
public void onSurfaceChanged(GL10 gl, int width, int height) {
aspect = (float) width / (float) height;
gl.glViewport(0, 0, width, height);
//! 深度バッファを有効にする
gl.glEnable(GL10.GL_DEPTH_TEST);
//! バッファを生成
GL11 gl11 = (GL11) gl;
{
int[] buffer = new int[2];
gl11.glGenBuffers(2, buffer, 0);
vertices = buffer[0];
indices = buffer[1];
}
//! 頂点バッファを作成する
// ! 頂点転送
{
final float one = 1.0f;
final float[] vertices = new float[]{
//! x y z
one,one,one, //!< 0 左上手前
one,one,-one, //!< 1 左上奥
-one,one,one, //!< 2 右上手前
-one,one,-one, //!<3 右上奥
one,-one,one, //!<4 左下手前
one,-one,-one, //!<5 左下奥
-one,-one,one, //!<6 右下手前
-one,-one,-one, //!<7 右下奥
};
FloatBuffer fb = ByteBuffer.allocateDirect(vertices.length * 4)
.order(ByteOrder.nativeOrder()).asFloatBuffer();
fb.put(vertices);
fb.position(0);
gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
gl11.glBindBuffer(GL11.GL_ARRAY_BUFFER, this.vertices);
gl11.glBufferData(GL11.GL_ARRAY_BUFFER, fb.capacity() * 4, fb, GL11.GL_STATIC_DRAW);
gl11.glVertexPointer(3, GL10.GL_FLOAT, 0, 0);
}
// ! インデックスバッファ生成
{
final byte[] indices = new byte[]{
0,1,2,
2,1,3,
2,3,6,
6,3,7,
6,7,4,
4,7,5,
4,5,0,
0,5,1,
1,5,3,
3,5,7,
0,2,4,
4,2,6,
};
ByteBuffer bb = ByteBuffer.allocateDirect(indices.length)
.order(ByteOrder.nativeOrder());
bb.put(indices);
indicesLength = bb.capacity();
bb.position(0);
gl11.glBindBuffer(GL11.GL_ELEMENT_ARRAY_BUFFER, this.indices);
gl11.glBufferData(GL11.GL_ELEMENT_ARRAY_BUFFER, bb.capacity(), bb, GL11.GL_STATIC_DRAW);
}
}
@Override
public void onDrawFrame(GL10 gl) {
gl.glClearColor(0.0f, 0.5f, 0.5f, 1.0f);
gl.glClear(GL10.GL_COLOR_BUFFER_BIT);
//! カメラ転送
{
gl.glMatrixMode(GL10.GL_PROJECTION);
gl.glLoadIdentity();
GLU.gluPerspective(gl, 45.0f, aspect, 0.01f, 100.0f);
GLU.gluLookAt(gl, 0, 5.0f, 5.0f, 0, 0, 0.0f, 0.0f, 1.0f, 0.0f);
}
gl.glMatrixMode(GL10.GL_MODELVIEW);
{
box0.posX = -0.5f;
box0.rotateY += 1.0f;
box0.colR = 1.0f;
box0.colG = 0.0f;
box0.colB = 1.0f;
box0.drawBox(gl);
}
{
box1.posX = 0.5f;
box1.rotateY -= 0.5f;
box1.colR = 0.0f;
box1.colG = 0.0f;
box1.colB = 1.0f;
box1.drawBox(gl);
}
}
}
}
5151,android,現在ListViewを使用してアプリを作っているのですが、adapterの更新で不可解な箇所がありましたので質問させていただきます。
ArrayAdapterを継承したMyArrayAdapterクラス内で
public void setData(MessageData mData) {
this.messageData = mData;
if (messageData.getMessageList().isEmpty()) {
this.messageDetailList = messageData.getMessageList();
}
notifyDataSetChanged();
}
としています。
データの更新があったらsetDataを呼び出してMyArrayAdapterを更新しているのですが、更新される場合とされない場合があります。
MethodAから呼ぶと更新される: getViewが呼ばれてListViewに反映される
MethodBから呼ぶと更新されない: 更新されたデータだけgetViewが呼ばれず、ListViewに反映されない(元々入っていた要素に関しては'getView'が呼ばれている)
MethodA、MethodBはMainThreadから実行している(各メソッド内でThread確認済み)
ほとんど同じ処理であり、Listデータの数も更新されたものが渡されています。MyArrayAdapterが保持するListデータもMethodAの場合もMethodBの場合もsizeが更新されて数が増えているのですが、MethodBで実行すると新規で追加したデータに関してのみListViewに更新がかからない状態です。
MethodBで呼び出した場合は新規データの箇所のみMyArrayAdapterのgetViewが呼ばれず、
既存のデータに関してはgetViewが呼ばれます。
つまりMethodBの場合は表示が変更されません。
MethodBの実装
Hogeクラス内で
public void MethodB(JSONArray array){
//JSONからListを取り出す
ListmessageList=jsonUtil.getMessageDataList(array);
if(messageList.size()!=0){
userData.addMessageDataAll(messageList);
userData=saveDataUtil.setUserData(userData);
messageData=userData.getMessageData("ID");
if(messageData!=null){
//この時点では新規データが入っており更新されている
messageData.getMessageList().size()="+messageData.getMessageList().size());
adapter.setData(messageData);
//ここでlist.getCount()したがサイズが増えていない。
listView.setSelection(listView.getCount()-1);
}else{
Log.e(TAG,"messageData==null");
}
}
MethodAの実装
public void MethodA(JSONArray array){
List detailList=jsonUtil.getMessageDetailList(array);
Log.d(TAG,"送信したMessageDetail messageDetailList.size="+detailList.size());
if(detailList.size()!=0){
MessageDetail detail=detailList.get(0);
messageData.addMessageList(detail);
userData.setMessageData(messageData);
userData=saveDataUtil.setUserData(userData);//userData保存
messageData=userData.getMessageData("ID");
if(messageData!=null){
adapter.setData(messageData);
}else{
Log.e(TAG,"userData.messageData==null");
}
listView.setSelection(listView.getCount()-1);
}
MethodAとMethodBは共にVolleyのJSONArray取得メソッドから呼び出されています。
この場合どのような状況が考えられるのでしょうか？
5152,android,Android4.0向けにアプリを作成しており、
その中でFacebookで認証(OAuth)をしたいと思っています。
FacebookSDKで用意されている
Sessionや、GUIコンポーネントのUserSettingsFragmentやLoginButtonを使ってみたのですが、
端末にFacebookアプリが入っている場合、
自動的にFacebookアプリの方で認証をしようとします。
これをFacebookアプリが入っていようと無かろうと
同じ動作にしたいのですが、方法をご存知な方がいたら教えてください。
もしくは公式アプリを使わずに純粋にOAuth認証だけをする方法がありましたらご教授下さい。
5194,ios,昨年の後半からiOSの開発を始めた者です。
現在iOS7以降対応のアプリを作成しているのですが、Xcode6ではシミュレータが7.1以降しか対応しておらず、7.0の検証手段がありません。
古いバージョンのXcodeから7.0のSDKを持ってくるという情報もありましたが、OSX yosemiteでは対応していないのか、試してみたところシミュレータを起動しても真っ暗なままになってしまいます。
そこで第一に"OSX yosemiteの環境でiOS7.0のシミュレータを動作させる方法があるのか"お聞きしたいです。
またシミュレータが動作するにせよ細かいUIを調整するには実機が必要だと考えているのですが、現在iOS7.0が動作する端末を入手することはできるのでしょうか？
ipod touch第5世代をアップデートすることでiOS6からiOS7以降にすることはできるようですが、懸念材料としてiOS7.1に一気にジャンプアップしてしまうのではないかということがあります。
二点目として"iOS7.0が搭載された実機の入手方法"についてもお聞きしたいです。
回答のほど、よろしくお願い致しします。
5230,android,YouTube Data API から取得した､データを Gson を使ってパースしようとしているのですが､対応するクラスについて､一つ疑問があります｡リファレンスを拝見すると publishedAt の型は､ datetime となっていますが､次の例のように､ Gson では Date 型で当てはめてもいいのでしょうか､
コード:
public class Snippet {
public Date publishedAt;
public String title;
public String description;
public Thumbnails thumbnails;
}
これを実行したところ､独自に作成した CustomAdapter で以下の NullPointerException が出てしまいました｡
エラー:
java.lang.NullPointerException: Attempt to invoke virtual method 'long java.util.Date.getTime()' on a null object reference
CustomAdapter:
public class CustomAdapter extends ArrayAdapter<Items> {
private LayoutInflater layoutInflater;
private ImageLoader mImageLoader;
private RequestQueue mQueue;
SimpleDateFormat sdf = new SimpleDateFormat("yyyy/MM/dd");
public CustomAdapter(Context context, int textViewResourceId, List<Items> objects, RequestQueue queue){
super(context, textViewResourceId, objects);
layoutInflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
mImageLoader = new ImageLoader(queue, new LruCacheClass());
}
static class ViewHolder{
ImageView image;
TextView title;
TextView maker;
TextView numView;
}
@Override
public View getView(int position, View convertView, ViewGroup parent){
ViewHolder holder;
Items item = getItem(position);
String url = item.snippet.thumbnails.high.url;
if(convertView==null){
convertView = layoutInflater.inflate(R.layout.list_search, parent, false);
holder = new ViewHolder();
holder.image = (ImageView)convertView.findViewById(R.id.iv_thumbnail);
holder.title = (TextView)convertView.findViewById(R.id.tv_movie_title);
holder.maker = (TextView)convertView.findViewById(R.id.tv_maker);
holder.numView = (TextView)convertView.findViewById(R.id.tv_day_num_view);
convertView.setTag(holder);
}else{
holder = (ViewHolder)convertView.getTag();
}
ImageLoader.ImageListener listener = ImageLoader.getImageListener(holder.image,
android.R.drawable.spinner_background,
android.R.drawable.ic_dialog_alert);
mImageLoader.get(url, listener);
holder.title.setText(item.snippet.title);
holder.maker.setText(item.channelTitle);
//この行でNullPointerExceptionがでてしまう｡
holder.numView.setText(sdf.format(item.snippet.publishedAt.getTime()));
return convertView;
}
}
また､ publishedAt でタイムゾーンに依存させたいので､こちらのサイトを参考にして Gson を編集しています｡
BuildGson:
import com.google.gson.FieldNamingPolicy;
import com.google.gson.Gson;
import com.google.gson.GsonBuilder;
import com.google.gson.JsonDeserializationContext;
import com.google.gson.JsonDeserializer;
import com.google.gson.JsonElement;
import com.google.gson.JsonParseException;
import java.lang.reflect.Type;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.TimeZone;
/**
* Created by zousan on 2015/01/25.
*/
public class BuildGson {
public static Gson buildGsonForPublishedAt() {
GsonBuilder gb = new GsonBuilder();
gb.registerTypeAdapter(Date.class, new JsonDeserializer<Date>() {
@Override
public Date deserialize(JsonElement dateElement, Type arg1, JsonDeserializationContext arg2)
throws JsonParseException {
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.s'Z'");
sdf.setTimeZone(TimeZone.getDefault());
String date = dateElement.getAsString();
try {
return sdf.parse(date);
} catch (ParseException e) {
//System.err(String.format("Gsonのパースに失敗しました: %s", date));
return null;
}
}
});
gb.setFieldNamingPolicy(FieldNamingPolicy.LOWER_CASE_WITH_UNDERSCORES);
return gb.create();
}
}
改善点等ありましたら教えていただけると助かります｡
5249,javascript,!function(d, s, id) {
}(document, 'script', 'twitter-wjs');
Twitterのシェアボタンのコードの一部です。
functionの前にある!はどういう意味ですか。
最後の(document, 'script', 'twitter-wjs');はどういう意味ですか。
また、これをcoffeescriptで書くとどうなりますか?
5292,android,webView.getSettings().setCacheMode( WebSettings.LOAD_CACHE_ELSE_NETWORK );
というかたちでキャッシュを行っている時に、ページ遷移時にキャッシュが存在したかどうかを判定したいです。
5304,javascript,以下のコードの出力なんですが、
var source = Rx.Observable
.range(1, 3)
.flatMap(function (v) {
return Rx.Observable.range(1, 3);
})
.subscribe(function (v) {
console.log(v)
});
下記になります。
1
2
1
3
2
1
3
2
3
ところが、私がイメージしていた結果は
1
2
3
1
2
3
1
2
3
公式のドキュメントを見てもさっぱり分からないです。
なぜそうなるのか、何方か説明して頂けませんか？　ありがとうございます！
5312,javascript|ios,今週から（iOS Monacaデバッガー(3.2.0)になってから）、ビューポートが効かず、画面が4倍に表示されてしまいます。
もちろんiOSアプリにて「ビューポート制御を有効にする」は、チェックし、monaca.viewport({width : 640});を指定しています。
どなたか解決策、回避策があればご教示ください。
環境：iPhone6plus iOS:v8.1.2
5316,android,Android アプリケーションを開発していると、あれこれとアイコンを試すうちに、使わない png ファイルやら xml ファイルやらが幾つものフォルダに散在しがちになります。
そうなってしまったresフォルダ（特にdrawable-*）を整理する良い方法は無いでしょうか？
或いは、そうならないようにresフォルダを管理する方法は無いでしょうか？
（ベストで無くても、僕はこうやってるよ、という方法を教えて頂ければ嬉しいです）
5327,android,Monacaで作成したAndroidアプリにおいて
アイテム課金がないものなのですが
インストールボタンの下に【アプリ内購入あり】と表記されています。
下記が該当のアプリです。
https://play.google.com/store/apps/details?id=com.madeingunma.girlfriend
この件をgoogleに問い合わせたところ下記のような返答を頂きました。
Play ストアにてアプリ内購入を表示しないように、
マニフェストにてcom.android.vending.BILLINGの許可を削除して下さい。
monacaの設定で可能でしょうか？
また、その他の方法がございましたらご教授頂けないでしょうか？
5337,android,WifiのRSSIを取得したく存じます。
下記のように記述しましたが、RSSIの値が取得できておりません。
修正方法をご教示願えませんでしょうか。
// 信号強度の取得部分。
private double getStrength() {
WifiManager wifi = (WifiManager)getSystemService(WIFI_SERVICE);
WifiInfo info = wifi.getConnectionInfo();
String[] apInfo = new String[4];
int rssi = info .getRssi();
int level = WifiManager.calculateSignalLevel(rssi, 5);
apInfo[3] = String.format("RSSI : %d / Level : %d/4", rssi, level);
return rssi;
}
5338,android|java,private void start() の部分で、「The method start() from the type MainActivity is never used locally」という警告が出ています。どう修正すべきかご教示いただけないでしょうか。
package com.jp.hoge;
import java.net.HttpURLConnection;
import java.net.URL;
import java.util.Timer;
import java.util.TimerTask;
import android.net.wifi.WifiInfo;
import android.net.wifi.WifiManager;
// マニフェストに <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" /> を追加すること。
import android.app.Activity;
import android.os.Bundle;
import android.widget.ListView;
public class MainActivity extends Activity {
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);
}
private Timer timer;
private void start() {
// タイマーの初期化
if (timer == null) {
timer = new Timer();
timer.schedule(new TimerTask() {
// タイマーの実行回数
private int i;
// 信号強度の合計
private double sum;
// 信号強度の取得部分。
private double getStrength() {
WifiManager wifi = (WifiManager)getSystemService(WIFI_SERVICE);
WifiInfo info = wifi.getConnectionInfo();
String[] apInfo = new String[4];
int rssi = info .getRssi();
int level = WifiManager.calculateSignalLevel(rssi, 5);
apInfo[3] = String.format("RSSI : %d / Level : %d/4", rssi, level);
return rssi;
}
// タイマー実行時に呼び出される。
// 1秒間隔で信号強度を取得し、10回に1回送信を行う
@Override
public void run() {
try {
// 実行回数が5, 15, 25, 35…であれば送信
if (++i % 10 == 5) {
// URLの生成部分。http://192.168.0.2/index.php?RSSI=80 といった具合に、RSSIを引数で渡す。
URL url = new URL(
"http://192.168.0.2/index.php?RSSI=" + Math.round(sum / 5));
HttpURLConnection cn = (HttpURLConnection) url.openConnection();
// 送信
cn.getResponseCode();
// 切断
cn.disconnect();
}
// 実行回数が5の倍数であれば強度の和をリセット
if (i % 5 == 0) {
sum = 0;
}
// 現在の強度を加算
sum += getStrength();
} catch (Exception e) {
// TODO エラー処理
}
}
}, 0, 1000); // 上のrunを0ミリ秒後から1000ミリ秒間隔で実行する
}
}
private void stop() {
// タイマーの停止
if (timer != null) {
timer.cancel();
timer = null;
}
}
}
5341,ios,お世話になります。
質問させてください。
monacaでonsen-uiを使用しています。
ons-list内で最下部までスクロールした時のイベントをとりたいのですが、みなさんどうやって実装していますでしょうか？
最下部までスクロール → 自動読み込み　このよくある機能を実装したいのです。
$(window).on("load scrol", hove);
ではスクロール値を取得できませんでした。
既出（ https://monaca.mobi/ja/forum/q/52ea3b8a7e2193dd37eea8d1 ）
今のところ、この機能を実装したいがためだけに、
ons-listでは無く、iscroll.jsを使用しています。
どうぞご教授くださいませ。
5370,android|ios|java,お世話になっております。お知恵をお貸しください。
Unityにて開発中ですが
Android/iOSにて、
①パスワード付きzipにしたmp3ファイルをAudioClip等で再生する方法
②byte[]にしたmp3をAudioClip等で再生する（zipアーカイブからwwwで読み込んでbyte[]になった）方法
または
③mp3ファイルをコピーガードする方法
いずれの一つでも方法が解るとありがたいです。
java,Objective-Cなどをプラグイン呼び出しでも、どんな方法でも可能性があればお知恵をお借りしたいです。
よろしくお願いいたします。
5377,php,サーバーからJSONをNSURLSessionで取得して
一覧に表示するところまで作成しました。
次にサーバーにJSONデータを送信するところで迷ってます。
DBから結果を取得後のサーバーにデータを
送信する場合は、どういった処理をすればいいのでしょうか。
データの中は複数件あります。
出来ればPHPで受け取って処理する
方法もわかれば教えていただけないでしょうか。
PHP側では、
php://inputで処理をするところまでは、
わかりました。
宜しくお願い致します。
5378,ios,私が作成しているアプリで、起動中に表示している UIWindow をログ出力(recursiveDescription)したところ下記のクラスが出てきました。
意図的に追加した覚えのないクラスです。それぞれ何の役割を持ったクラスか教えてください。
起動は Xcode 6.1.1 のシミュレータ iPhone6 で iOS8 になります。
UILayoutContainerView
UINavigationTransitionView
UIViewControllerWrapperView
5382,php,cronologを使い php_error_logが分割できなくて困っています。
下記のようにhttpd.confを書いてしてErrorLogやCustomLogはcronologで正常にログ分割ができています
-rw-r--r-- 1 root   root   370592  1月 26 23:42 access_log.2015.01.26
-rw-r--r-- 1 root   root     4680  1月 27 10:14 access_log.2015.01.27
-rw-r--r-- 1 root   root   233081  1月 26 19:35 error_log.2015.01.26
-rw-r--r-- 1 root   root      148  1月 27 09:12 error_log.2015.01.27
が、httpd.confの
php_value error_log "|/usr/sbin/cronolog /home/htdocs/logs/php_error_log.%Y.%m.%d"
の部分がうまく動きません。logsフォルダ内にファイル自体が作られません。
ただし、
php_value error_log "/home/htdocs/logs/php_error_log"
のようなcronologを使わない分割なしのphp_error_log出力はできますのでlogsフォルダのパーミッションやphp.iniの設定は問題ないと思っています。
/home/htdocs/logsのパーミッションはapache:apacheです。
drwxr-xr-x  2 apache apache 4096  1月 27 09:12 logs
httpd.conf
<VirtualHost xxxxxxxxxxx.jp:80>
DocumentRoot "/home/htdocs/xxxxxxxxxxxxxxxxx"
ServerName xxxxxxxxxxxxx.jp:80
ServerAlias www.xxxxxxxxxxxxxxxx.jp
ErrorLog "|/usr/sbin/cronolog /home/htdocs/logs/error_log.%Y.%m.%d"
CustomLog "|/usr/sbin/cronolog /home/htdocs/logs/access_log.%Y.%m.%d" combined
<Directory "/home/htdocs/xxxxxxxxxxxxxxxxxx">
php_value error_log "|/usr/sbin/cronolog /home/htdocs/logs/php_error_log.%Y.%m.%d"
</Directory>
5385,java,GAE/Java + Slim3 において、
new GcsFileOptions.Builder()
.mimeType(mimeType).acl("bucket-owner-full-control")
.build();
を実行した際に java.lang.NoSuchMethodError が発生してしまいます。昨日デプロイしたプロジェクトのみで発生しており、その他の同処理を含んだプロジェクトでは発生しております。
原因ご存じの方いましたら対策ご教授下さい。
以下ログ：
java.lang.NoSuchMethodError: com.google.common.base.Stopwatch.createUnstarted()Lcom/google/common/base/Stopwatch;
at com.google.appengine.tools.cloudstorage.RetryHelper.runWithRetries(RetryHelper.java:156)
at com.google.appengine.tools.cloudstorage.GcsServiceImpl.createOrReplace(GcsServiceImpl.java:70)
at com.cresco.apps.report.service.GoogleCloudStorageService.getNewFile(GoogleCloudStorageService.java:56)
at com.cresco.apps.report.service.GoogleCloudStorageService.doFileItemUpload(GoogleCloudStorageService.java:84)
at com.cresco.apps.report.controller.maintenance.ImportController.doPost(ImportController.java:229)
at com.cresco.apps.report.controller.maintenance.ImportController.run(ImportController.java:127)
at org.slim3.controller.Controller.runBare(Controller.java:111)
at org.slim3.controller.FrontController.processController(FrontController.java:491)
at org.slim3.controller.FrontController.doFilter(FrontController.java:277)
at org.slim3.controller.FrontController.doFilter(FrontController.java:237)
at org.slim3.controller.FrontController.doFilter(FrontController.java:199)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at org.slim3.datastore.DatastoreFilter.doFilter(DatastoreFilter.java:55)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at org.slim3.controller.HotReloadingFilter.doFilter(HotReloadingFilter.java:192)
at org.slim3.controller.HotReloadingFilter.doFilter(HotReloadingFilter.java:157)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.apphosting.utils.servlet.ParseBlobUploadFilter.doFilter(ParseBlobUploadFilter.java:125)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.apphosting.runtime.jetty.SaveSessionFilter.doFilter(SaveSessionFilter.java:35)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.apphosting.utils.servlet.JdbcMySqlConnectionCleanupFilter.doFilter(JdbcMySqlConnectionCleanupFilter.java:60)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.handle(AppVersionHandlerMap.java:254)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at org.mortbay.jetty.Server.handle(Server.java:326)
at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
at com.google.apphosting.runtime.jetty.RpcRequestParser.parseAvailable(RpcRequestParser.java:76)
at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
at com.google.apphosting.runtime.jetty.JettyServletEngineAdapter.serviceRequest(JettyServletEngineAdapter.java:146)
at com.google.apphosting.runtime.JavaRuntime$RequestRunnable.run(JavaRuntime.java:484)
at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:438)
at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:445)
at com.google.tracing.CurrentContext.runInContext(CurrentContext.java:220)
at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:309)
at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:301)
at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:442)
at com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run(ThreadGroupPool.java:251)
at java.lang.Thread.run(Thread.java:724)
5411,php,PHP のセッションID に独自の文字列を付加したいと思っています。
例）
PHP が生成した元のセッションID が eyJpdiI6Im05eWNZd2Q4dVwvbjlPc3I1S であれば、xx- を付加して xx-eyJpdiI6Im05eWNZd2Q4dVwvbjlPc3I1S としたい。
この目的のためにいくつかのセッション関連の関数を調べましたが、
session_regenerate_id() は、新しいセッションIDを指定できないため NG
session_id() は、`session_start() の前に呼ぶ必要があるため、現在のセッションID がわからずNG
となりだめそうです。SessionHandler::create_sid で自前でセッションID を作る方法は、残念ながら利用している PHP のバージョンが合わず使えません。何かいいアイデアがありますでしょうか？
5416,ios,Monaca と iOS Dev Center とで証明書をいろいろ発行してみたのですが、この三日くらい iOS アプリの開発版がビルドエラーになります。
APPID をワイルドカードにしたり、 monaca プロジェクトを一から作り直してみたりもしました。
当初の数回はビルドできていました。ログの始めは以下で、すべて同じ内容です。
Temporary folder: /private/tmp/monaca/5(xxx)
Download complete
Running command: php /private/tmp/monaca/54c74b48fd1734b440a735bf/ios/scripts/build_ios.php --path /data/monaca_build_module/3.5 --type &apos;debug&apos;  2&gt;&amp;1
Prepare keychain...
1 key imported.
Unable to delete certificate matching &quot;iPhone Developer: T(xxx) (G(xxx))&quot;
なにかの証明書が削除できないというないようでしょうか？
5420,java,apache poi を利用して pptx の加工を行う処理を作っています。
具体的には
テキスト置換
画像挿入
グラフ挿入
行いたいです。
ぐぐってみると
https://stackoverflow.com/questions/24873725/how-to-get-pptx-slide-notes-text-using-apache-poi
https://stackoverflow.com/questions/3471472/does-anyone-have-an-example-of-apache-poi-converting-pptx-to-png
この辺りでテキスト置換、画像挿入はできそうだなと感じたのですが、グラフ挿入が見つかりません。
ご経験のあるかたにご相談させて下さい。
5425,php,環境
apache 2.2.15 (prefork)
php 5.3.3
eAccelerator 1.0-dev
アプリは自前のPHPアプリ
お聞きしたいこと
eAcceleratorでSegmentation Faultが出るという事例がいくつか
（http://www.multiburst.net/sometime-php/2010/06/eaccelerator/　や
http://u-tamax.jp/2012/04/httpd-%E3%81%A7-segmentation-fault-11-%E7%99%BA%E7%94%9F/　や
http://bucci.bp7.org/archives/414）があるようです。
似た現象に遭遇しておりまして、これを再現するための状況や原因について推測されることはどんなことがありますでしょうか？
5453,php,PHP スクリプトを実行したところ、以下の様なエラーが表示されました。
Warning: Cannot modify header information - headers already sent by
(output started at /some/file.php:12) in /some/file.php on line 23
エラー行では header() と setcookie() を行っています。
エラーの理由と、どうやって解決したらいいのかを教えてください。
この質問は以下の翻訳です。
Stack Overflow - How to fix “Headers already sent” error in PHP @Moses89
5455,javascript,function A(){};
A.prototype.a = function() {
// 他のなんらかの処理
// A.prototype._bの呼び出し
this._b();
};
A.prototype._b = function() {};
A.prototype._b は A.prototype.a でのみ利用され、 Node や Browserify で require('A') として扱うモジュールを想定しています。( module.exports は省略します)
この場合 A.prototype._b はどう書くのが望ましいといえるでしょうか。
上記のコードは個人的には違和感があり、
パブリックであること
1度しか呼び出さないのにも関わらずメソッドであること
などが挙げられます。それらを解決するとなれば、
ex1: プライベートで、関数にした場合
function A(){};
var _b = function();
A.prototype.a = function() {
_b();
};
のようなコードや、
ex2: ベタ書きで問題ないと判断した場合
function A(){};
// var _b = function();
A.prototype.a = function() {
// _b()と同様の処理をここにベタ書き
};
といったコードが思い浮かびます。
しかし、
var _b = func~とするのは独立していて違和感がある
であれば A._b = func~ のような形はどうか
いずれも納得できないのであれば、「1回だけ呼び出すならなんでもかんでもベタ書き」ということでいいのか
このようにどうすべきなのか判断がつきません。
これでは自分の中で考えても仕方がないので、結局のところこのケースでは A.prototype._b はどう書くのがベストなのか教えていただけないでしょうか。
JavaScript なのでそこまでプライベートにこだわっているわけではなく、一般的な実装として望ましい形を知りたいと思っています。
よろしくお願いします。
5479,java,Microsoft Word の docx 形式ファイルにおいて、指定したテキスト要素が何ページに表示されるのか、取得したいと考えています。
Apache POI または XML を直接操作した場合どうやって取得したらよいでしょうか。
そもそも不可能なのでしょうか。
5494,javascript,JavaScriptのコードを作成したり編集するためのエディターを探しています。
お勧めのものを教えてください。
※日本語対応のものでお願い致します。
作業環境：Windows7Pro
【質問の背景】
私はWeb系の開発を始めたばかりなのですが、今のところWindows標準のメモ帳でJavaScriptやHTMLのファイルを開いてソースコードの内容を確認しています。
しかしながら、JavaScriptのコードを扱うに当り、HTMLの中に埋め込まれているものを探し出してXXXXXXXX.jsファイルを開いてコードの追加・編集・削除を行うことに手間がかかっています。
そこで、作業の迅速化を図るためにJavaScriptを扱うための比較的良くコードの編集に適したものを、経験者のご意見を参考にして作業を快適に進めていきたいと考えたので、今回の質問に至りました。
5506,javascript,knockout.jsで以下の様なコードのchild配下の変更を検知できずに困っています。
どのようにすれば実装できるかご教示願います。
var SomeVMM = function(){
var self = this;
self.some = ko.observable();
self.fire = function(dict){
self.some([{"title": hoge, "child":dict}]);
}
}
5516,php,The Facebook SDK for PHP v4 において Oauth 認証を利用してプロフィール（名前、メールアドレス）などを取得したいと思っております。しかし getLoginUrl で生成した URL に飛び、自分自身のファイルに callback すると getSessionFromRedirect でエラーも吐かずに止まってしまいます。( echo デバックでの確認）
参考ブログ記事: 「Facebook API v4でプロフィールを取得する」
ほかのサイトのコードも試したのですがうまく行きませんでした。考えられる原因があれば教えていただきたいです。
実行環境
CentOS6.4
facebook-php-sdk-v4 4.0.15
PHP 5.4.37
5522,javascript,Poltergeistを使用した場合、Capybaraのテストケースの挙動が不思議です。
まず最初に、Poltergeistを使用しない場合、Capybaraのテストケースはsuccessです。
before { create(:user) }
it 'test' do
visit root_path
expect(page).to have_content 'ユーザは1人です'
end
テスト対象のviewでは
ユーザは<%= User.count %>人です
のような記述です。
JSのテストを行いたいため、
it 'test', js: true do
とすると、表示が「ユーザは0人です」のようになり、テストがfailureとなります。
(page.save_screenshotにて確認)
どうやらbeforeで作成したユーザがうまくviewで取得できてないようです。
expect(User.count).to eq 1
はsuccessなので、DBに書き込みは行われています。
Poltergeistの代わりにcapybara-webkitでも同じ状況です。
どうすればテストを通すことができるでしょうか？
5538,javascript,AngularJSについての質問です。
$routeProviderのresolveにおいて、controllerが依存するリソースをRESTAPIで取得しています。
このリソースの取得処理が完了するまでの間、ページ遷移が保留状態となり画面が硬直してしまいます。
この間、ユーザは何が起こっているか分からないので、通信中であることを示すローディングイメージを表示したいと考えています。
また、ローディングイメージについては遷移先や遷移元のビューに埋め込むのではなく、独立したローディングビューを用意しそれをページ遷移の間に挟むようにしたいと考えています。
上記を実現する方法、または一般的なベストプラクティスがあればお教え下さい。
よろしくお願いします。
5542,php,PHP初心者です。
FuelPHPのソースコードリーディングをしていたところ、Requestクラスのforgeメソッドに↓のような記述がありました。
is_bool($options) and $options = array('route' => $options);
is_string($options) and $options = array('driver' => $options);
この記述はどういう意味になるのでしょうか？
よろしくお願いします。
↓リクエストクラスの全文はこちらです。
public static function forge($uri = null, $options = true, $method = null)
{
is_bool($options) and $options = array('route' => $options);
is_string($options) and $options = array('driver' => $options);
if ( ! empty($options['driver']))
{
$class = \Inflector::words_to_upper('Request_'.$options['driver']);
return $class::forge($uri, $options, $method);
}
$request = new static($uri, isset($options['route']) ? $options['route'] : true, $method);
if (static::$active)
{
$request->parent = static::$active;
static::$active->children[] = $request;
}
// fire any request created events
\Event::instance()->has_events('request_created') and \Event::instance()->trigger('request_created', '', 'none');
return $request;
}
5550,ios,現在cocoapodsを利用してライブラリを導入しているのですが、podfileのプラットフォームをiOS7もしくはiOS8にすると以下のようなエラーが出てしまいます。
fatal: Not a git repository (or any of the parent directories): .git
fatal: Not a git repository (or any of the parent directories): .git
fatal: Not a git repository (or any of the parent directories): .git
fatal: Not a git repository (or any of the parent directories): .git
fatal: Not a git repository (or any of the parent directories): .git
fatal: Not a git repository (or any of the parent directories): .git
fatal: Not a git repository (or any of the parent directories): .git
fatal: Not a git repository (or any of the parent directories): .git
fatal: Not a git repository (or any of the parent directories): .git
fatal: Not a git repository (or any of the parent directories): .git
/Library/Ruby/Gems/2.0.0/gems/cocoapods-            0.35.0/lib/cocoapods/user_interface/error_report.rb:13:in `report': incompatible     character encodings: UTF-8 and ASCII-8BIT (Encoding::CompatibilityError)
from /Library/Ruby/Gems/2.0.0/gems/cocoapods-0.35.0/lib/cocoapods/command.rb:58:in `report_error'
from /Library/Ruby/Gems/2.0.0/gems/claide-0.7.0/lib/claide/command.rb:300:in `handle_exception'
from /Library/Ruby/Gems/2.0.0/gems/claide-0.7.0/lib/claide/command.rb:274:in `rescue in run'
from /Library/Ruby/Gems/2.0.0/gems/claide-0.7.0/lib/claide/command.rb:264:in `run'
from /Library/Ruby/Gems/2.0.0/gems/cocoapods-0.35.0/lib/cocoapods/command.rb:45:in `run'
from /Library/Ruby/Gems/2.0.0/gems/cocoapods-0.35.0/bin/pod:43:in `<top (required)>'
from /usr/bin/pod:23:in `load'
from /usr/bin/pod:23:in `<main>'
このエラーはどのような意味なのでしょうか？
ちなみにポッドファイルは以下のようになっております。
source 'https://github.com/CocoaPods/Specs.git'
platform :ios, ‘7.0’
pod 'pop', '~> 1.0'
pod 'MBProgressHUD', '~> 0.8'
pod 'YLMoment', '~> 0.2.0'
pod 'RegexKitLite', '4.0'
pod 'AFDropdownNotification', '~> 1.0'
pod 'RESideMenu', '~> 4.0.7'
5563,php,質問の背景
個人的に作成しているサービスで、自作の RESTful API に接続してデータを取得したいと考えています。
APIのエンドポイント例
http://example.com/api/restful/v1/profile/{...}
自分で調べてみたこと
CakePHP 3.x では MVC の M (Model) が大幅に変更されたためなのか、まるで情報が見つかりません。
チュートリアルにも Tableless Model や Datasource に言及したページが見つかりませんでした。
以下、CakePHP 2.x でのチュートリアルページ
Datasource の場合
CakePHP 2.x では Datasource クラスを継承して API への接続を実装できました。
参考 URL : http://book.cakephp.org/2.0/en/models/datasources.html
Tableless Model の場合
Tableless なモデルを用いて API からデータを取得する方法が考えられます。
参考 URL : http://book.cakephp.org/2.0/en/models/model-attributes.html#usetable
どちらの場合でも CakePHP 3.x でやるにはどうしたらいいか資料が見つからず困っております。
どなたかお力添えして頂けると助かります。
5564,php,doctrineで以下のような形でデータを取得しています。
$partsNoArrayはINT型の配列、$owner_noはINT型です。
$PartsArray = $PartsRepository->createQueryBuilder('p')
->add('where', $expr->andX(
$expr->eq('p.owner_no', '?1'),
$expr->in('p.parts_no', '?2')
))
->setParameters(array(
1 => $owner_no,
2 => $partsNoArray
))
->getQuery()
->getResult();
この取得処理中にORDER BY field(p.parts_no,$partsNoArray)のようなコードを挿入して
$partsNoArrayの配列の順序通りにデータを取得することは可能でしょうか？
ややこしい質問とは思いますが、よろしくお願いします。
5571,android|java,Android2.x 系の端末にて、Activity のレイアウト XML にandroid.support.v4.widget.DrawerLayout を適用したところ、下記のような StackOverflowError が発生して強制終了します。
同様の不具合情報を探していたところ、レイアウト階層が深すぎて発生するという問題という情報があり、原因特定の手段として試験的に一階層下げてみましたが、やはり同様の異常終了が発生してしています。
DrawerLayout を使用しなければ発生しないため、これに起因することは間違いないのですが、有効な手段がわかっていない状況です。 (現状これ以上の階層構造を変更することも難しい状況でもあります)
上記問題について、有効な手段をご存じの方がいらっしゃいましたら教えて下さい。
01-29 17:25:36.660: E/AndroidRuntime(24284): FATAL EXCEPTION: main
01-29 17:25:36.660: E/AndroidRuntime(24284): java.lang.StackOverflowError
01-29 17:25:36.660: E/AndroidRuntime(24284):    at java.lang.String.getChars(String.java:1026)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.text.SpannableStringInternal.getChars(SpannableStringInternal.java:70)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.text.TextUtils.getChars(TextUtils.java:69)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.text.Layout$Ellipsizer.getChars(Layout.java:2155)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.text.TextUtils.getChars(TextUtils.java:69)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.graphics.Canvas.drawText(Canvas.java:1310)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.text.Styled.drawUniformRun(Styled.java:151)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.text.Styled.drawDirectionalRun(Styled.java:317)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.text.Styled.drawText(Styled.java:376)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.text.Layout.drawText(Layout.java:1667)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.text.Layout.draw(Layout.java:483)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.widget.TextView.onDraw(TextView.java:4481)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.view.View.draw(View.java:7080)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.view.View.draw(View.java:7083)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.widget.FrameLayout.draw(FrameLayout.java:357)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.view.View.buildDrawingCache(View.java:6840)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.view.View.getDrawingCache(View.java:6628)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.view.ViewGroup.drawChild(ViewGroup.java:1571)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.widget.AbsListView.dispatchDraw(AbsListView.java:1686)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.widget.ListView.dispatchDraw(ListView.java:3211)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.view.View.draw(View.java:7083)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.widget.AbsListView.draw(AbsListView.java:3096)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.view.View.draw(View.java:7083)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.support.v4.widget.DrawerLayout.drawChild(DrawerLayout.java:870)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.view.View.draw(View.java:7083)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.widget.FrameLayout.draw(FrameLayout.java:357)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.view.View.draw(View.java:7083)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.widget.FrameLayout.draw(FrameLayout.java:357)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.view.View.draw(View.java:7083)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at android.widget.FrameLayout.draw(FrameLayout.java:357)
01-29 17:25:36.660: E/AndroidRuntime(24284):    at com.android.internal.policy.impl.PhoneWind
5600,php,お世話になります。
phpのpreg系関数で正規表現パターンを以下のように記述する際に、検索対象文字列をシングルバイトのみの対象にする装飾子があった気がするのですが、ド忘れしてしまいました。
preg_match("/^[0-9a-z\.\_\-]+$/",$str,$matched);
これを
preg_match("/^[:@0-9a-z\.\_\-]+$/",$str,$matched);
のようにすれば、マルチバイト文字を検索することがないので
正規表現検索が高速化出来た気がするのですが、ググってもそれらしきリソースが出てきませんでした。
(私の検索方法が悪いのかもしれないのでしょうが)
皆様のお知恵をお貸しいただけませんでしょうか、宜しくお願い申し上げます。
5609,ios,AFNetWorking を使用した非同期通信を実装しています。
下記のようなコードで非同期通信にデータを取得することはできました。
しかし通信の終了タイミングで特定の処理を実行する方法がわかりません。
@property NSInteger *pageIndex;
@property NSArray *responseData;
- (void)viewDidLoad{
self.pageIndex = 1;
while (true) {
[self getJSON];
NSLog(@"%@", self.responseData);
}
}
- (void) getJSON{
AFHTTPRequestOperationManager* manager = [AFHTTPRequestOperationManager manager];
manager.responseSerializer = [AFJSONResponseSerializer serializer];
[manager GET:@"http://togech.jp/api/getPosts"
parameters:@{@"page": [NSString stringWithFormat:@"%d", self.pageIndex]}
success:^(AFHTTPRequestOperation *operation, id responseObject) {
self.responseData = responseObject;
} failure:nil];
self.pageIndex++; // このコードを非同期通信の最後に実行したい
}
非同期処理の終了タイミングで特定の処理を呼び出すにはどのようにすればよいのでしょうか？
5619,php,SSLv3とTLSとを判別したいと考えております。
是非、よろしくお願い致します。
5622,c#,自作ゲームで木構造のシーングラフを持っています。
親ノードは複数の子ノードを持ちゲームの進行に応じてノードが追加されたり削除されたりします。ようはコレクションの変更です。async/await を使った非同期プログラミングでこれを行うとタイミングによっては foreach でぐるぐる回している最中に別スレッドからコレクションを変更することになり例外が発生します（これ自体は当然の動作）。
質問は非同期プログラミングでのコレクション操作のベストな方法を教えて下さい、という事です。
SemaphoreSlim で排他制御を行う
コレクションを必ず ToArray() でコピーしてから使う
追加および削除を1つのスレッドで行うようにロジックを変更する
どれも一長一短で決めかねています。ご意見をお聞かせ下さい。
回答を考慮して追加
System.Collections.Concurrent 名前空間のスレッドセーフなコレクションを使用する
System.Collections.ImmutableList 名前空間の不変なコレクションを使用する
4.はConcurrentBag, ConcurrentStack, ConcurrentQueue, ConcurrentDictionaryなど。既存のListに比べて呼び出し方法が大分異なる。基本はキューとスタックなのでProducer-Consumerパターン。
5.は.Net標準ではないがマイクロソフト提供のライブラリ。NuGetでインストール可能。「不変」(Immutable)なコレクションなのでマルチスレッド環境でも問題が起きない。コレクションの変更はコピーして変更を加えて差し替えるので比較的コストが高い。参照するだけなら問題はない。
排他制御がコードに現れない、既存のListとほぼ同様のインターフェースを持つ、書き換えはそんなに起きないので無視できる、などを評価して5番のImmutableListがベストですね。
今のところ.Net標準ではないですがそのうち標準として取り込まれるような気がします。これは便利だ。
5649,php,[zendopcache]
zend_extension=opcache.so
opcache.memory_consumption=128
opcache.interned_strings_buffer=8
opcache.max_accelerated_files=4000
opcache.revalidate_freq=60
opcache.fast_shutdown=1
opcache.enable_cli=1
opcache.enable = On
OpCacheをインストールして、PHP5.5.iniに上記を記述しました。php-fpmをrestartするとエラーになります。
zend_extension=opcache.so
こちらをコメントアウトすると再起動はできますので、これに問題があるかもしれません。
また、php-fpmのリスタートだけでなく、php -vでも下記のようなエラーが表示されます。
バージョンは
php5.5.20
zend opcache 7.0.3
Amazon AWS EC2 micro t2 linux
nginx
です。
エラー文
[root@ip-********* ~]# /etc/init.d/php-fpm restart
php-fpm-5.5 を停止中:                                      [  OK  ]
php-fpm-5.5 を起動中: [31-Jan-2015 12:33:32] NOTICE: PHP message: PHP Warning:  Module 'Zend OPcache' already loaded in Unknown on line 0
[31-Jan-2015 12:33:32] NOTICE: PHP message: PHP Warning:  Zend OPcache: module registration failed! in Unknown on line 0
*** Error in `php-fpm-5.5': free(): invalid pointer: 0x00007ffd35a4faf8 ***
======= Backtrace: =========
/lib64/libc.so.6(+0x7638e)[0x7ffd526c838e]
/lib64/libc.so.6(+0x770f7)[0x7ffd526c90f7]
php-fpm-5.5(php_module_shutdown+0x2b)[0x53360b]
php-fpm-5.5[0x64cd19]
php-fpm-5.5[0x645f06]
php-fpm-5.5[0x652eb1]
php-fpm-5.5[0x6451d3]
php-fpm-5.5[0x421583]
/lib64/libc.so.6(__libc_start_main+0xf5)[0x7ffd526737d5]
php-fpm-5.5[0x42283d]
======= Memory map: ========
00400000-006fb000 r-xp 00000000 ca:01 396155                             /usr/sbin/php-fpm-5.5
008fb000-00984000 rw-p 002fb000 ca:01 396155                             /usr/sbin/php-fpm-5.5
====ここから似たような文字列がズラーっと====
7fffd0ec4000-7fffd0ee5000 rw-p 00000000 00:00 0                          [stack]
7fffd0f89000-7fffd0f8b000 r-xp 00000000 00:00 0                          [vdso]
ffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0                  [vsyscall]
中止
[root@ip-****** ~]# [31-Jan-2015 12:33:32] NOTICE: PHP message: PHP Warning:  Zend OPcache: module registration failed! in Unknown on line 0
-bash: [31-Jan-2015: コマンドが見つかりません
5651,php,Wordpressで自動生成されるコンテンツのURLをhttp://ドメイン 部分を表示させないように設定しています。
ですが、SNSにシェアさせるURLまで相対パスで表示されてしまいます。
<?php echo 'http://hogehoge.com' ?><?php the_permalink(); ?>
上記のようにechoで出力させようとしても、ドメイン部分が取得されていません。
特定した要素のみドメインを表示させる事は可能でしょうか？
下記のコードがfunction.phpに記載しているドメイン非表示用のコードです。
<?php
class relative_URI {
function relative_URI() {
add_action('get_header', array(&$this, 'get_header'), 1);
add_action('wp_footer', array(&$this, 'wp_footer'), 99999);
}
function replace_relative_URI($content) {
$home_url = trailingslashit(get_home_url('/'));
return str_replace($home_url, '/', $content);
}
function get_header(){
ob_start(array(&$this, 'replace_relative_URI'));
}
function wp_footer(){
ob_end_flush();
}
}
new relative_URI();
?>
よろしくお願いいたします。
5659,php,クロスドメインでjsを実行するためにlocalhostでテスト中です。
html側
jQuery.ajax({
type:'GET',
url:Url,
dataType: "jsonp",
crossDomain: true,
success : function (res) {
alert("success");
},
error : function(res){
alert("error");
}
});
php側
<?php
header('Access-Control-Allow-Origin: *');
header('Access-Control-Allow-Headers: Origin, X-Requested-With, Content-Type, Accept');
echo json_encode( 123456789 );
上記コードを実行すると "error" というダイアログが表示されます。
一番シンプルな形にしているつもりですが、どこに原因があるのかつかません。
echo を文字列にしたり、配列にしたりしてみましたが状況変わらずでした。
dataType: "jsonp を削除すると"success"が表示されます。
アドバイスお願いします。
5670,c#,C#でのドラッグ&ドロップによる他のアプリからのデータ取得は、以下に公開されているソースを流用しました。
Outlook Drag and Drop in C#
しかし、FileContentsの取得結果がAll 0になってしまいます。サイズは取得すべきサイズになっていて正しいです。
FORMATETC構造体に設定する.lindexメンバー変数の値が正しく設定されていないせいだとおもい、FILEGROUPDESCRIPTOR構造体の.cItemsの値を設定してやってるんですが、やはりAll 0のままです。
何が悪いのかわかりません・・・
case "FileContents":
//override the default handling of FileContents which returns the
//contents of the first file as a memory stream and instead return
//a array of MemoryStreams containing the data to each file dropped
//get the array of filenames which lets us know how many file contents exist
// modified begin
//string[] fileContentNames = (string[])this.GetData("FileGroupDescriptor");
string[] fileContentNames = (string[])this.GetData("FileGroupDescriptorW");     // Unicode UTF-16LE
if (fileContentNames.Length <= 0)
fileContentNames = (string[])this.GetData("FileGroupDescriptor");
//create a MemoryStream array to store the file contents
MemoryStream[] fileContents = new MemoryStream[fileContentNames.Length];
//loop for the number of files acording to the file names
for(int fileIndex = 0;fileIndex < fileContentNames.Length;fileIndex++)
{
//get the data at the file index and store in array
// modified begin
//fileContents[fileIndex] = this.GetData(format, fileIndex);
if (gFileGrpDescW != null)
{
fileContents[fileIndex] = this.GetData(format, (int)gFileGrpDescW.cItems);
}
else if (gFileGrpDescA != null)
{
fileContents[fileIndex] = this.GetData(format, (int)gFileGrpDescA.cItems);
}
// modified end
}
// added
gFileGrpDescW = null;
gFileGrpDescA = null;
//return array of MemoryStreams containing file contents
return fileContents;
なお、具体的なアプリというのはEvernoteなのですが、Evernoteのノートを開発アプリにドラッグ&ドロップされたら直接受け取りたいのです。
一応元のコードをほぼそのまま使用しています。なお、ドラッグ&ドロップ時に複数のノートをまとめてドラッグすると、一つのデータとして受け取りますのでコード中のループは1度しか行われません。
Evernoteからエクスプローラ上に複数のノートをドラッグ&ドロップしても、一つのファイルとして出力されます。
FileContentsの情報取得については、以下の情報を参考にしています。
Shows how Email attachments can be dropped onto your own controls
しかし、前述の通りFileContentsがAll 0となってしまい、困っています。
宜しくお願いいたします。
5691,android|java,こんにちは！私はJavaの初心者である外国人です。Javaの基本的な知識を勉強したが、なんかどこから始めたらいいか分かりません。
Android Studioでアプリを作りたいけど、Javaの上にそれを習うのは相当難しいことになるんじゃないかなと思っています。
とにかく、名前、メールアドレス、誕生日等を保存する簡単なものを作りたいと思っています。
ただ、Eclipseでそういうものを作っても、プログラムから出ると全ての入力された情報がなくなってしまうんじゃないですか？
だから、長くなってすみませんが、プログラムを起動して、情報を入れたりして、プログラムから出ても、どうやってまたそのプログラムを起動したら全ての入れた情報にアクセスすることが出来ますか？
5703,javascript,Ractive.jsを使用しています。
ボタンのクリックで非同期処理を開始するので、二度押し防止のためにdisabledにしたいのですが、Ractive.jsではどのようにdisabledにするのが王道パターンなのでしょうか？
サンプルHTML
<script id="myTemplate" type="text/ractive">
<button on-click="login">Log in</button>
</script>
これに対するJavaScript
var ractive = new Ractive({
el : '#container',
template : '#myTemplate',
}).on('login', function(e) {
// ボタンが押された時の処理
// 押されたボタンをdisabledにしたい
// idを付けて、$('#loginButton').attr('disabled','disabled');
// は、何か違う気がする。。。
});
5715,php,失礼します。
セッションを利用したカートシステムを作っているのですが、今の状態では同じ商品がいくつも重複して追加されてしまいます。
これを解決するためにin_array関数などをいろいろと試してみたのですが、自分の力ではどれも上手く動いてくれなかったのでこちらで質問させていただきます。
以下がコードです。
//セッション変数「cart」が未設定の場合は空の配列に初期化
if(!isset($_SESSION['cart'])){
$_SESSION['cart'] = array();
}else if (is_string($_SESSION['cart'])){
//セッション変数「cart」に文字列が存在していれば配列セッションcartを代入
$_SESSION['cart'] = array($_SESSION['cart']);
}
/********************追加処理**********************/
//セッション変数内にPOSTで送られてきたidと同じものが無かった場合の処理
$key = in_array($_POST['id'], $_SESSION['cart']);
if(!$key){
if(isset($_POST['price'])){
$price = $_POST['price'];
if(isset($_POST['num'])){
$num = $_POST['num'];
$sum = $price * $num;
}
}
//item_resultからpostでid,name,priceが送られてきたかを確認
if(isset($_POST['id'])){
if(isset($_POST['name'])){
if(isset($_POST['price'])){
if(isset($_POST['num'])){
if(isset($sum)){
//送られてきたデータを配列に格納
$item = array('id' => $_POST['id'],
'name' => $_POST['name'],
'price' => $_POST['price'],
'num' => $_POST['num'],
'sum' => $sum);
}}}}
}else{
$msg = 'no item';   //何もカートに入れてませんよー
}
//セッション変数「cart」に配列の中身を追加
if(isset($item)){
$_SESSION['cart'][] = $item;
}
}
//表示するためにセッションの中身を配列に入れなおす
$print_cart = $_SESSION['cart'];
/*************************************************/
カートに追加する動きに関する処理のみになります。
目的はカート内に重複したデータが存在しない事ですので、
1.POSTで送られてきたデータが既に存在している場合、カート内の商品の個数をプラス1する
2.カートに入れた後、重複したデータが存在していたら1つのみを残して個数をプラス1する
この2点のどちらの方法でも問題ありません。
どちらも自分で試した結果、上手くいきませんでした。
どう記述したら良いでしょうか？
よろしくお願いします。
コメントを頂きましたので、コードを修正しました。
重複チェックをしていた時のコードになります。
5743,c#,マルチスレッドで実行中のメソッド（voidメソッド）の内で、スレッドを終了させる方法がないか調査しています。
マルチスレッドの外側からならば、.Abort()でスレッドを強制終了することが出来るのですが、
内側で自スレッドを終了させる方法がまだ分かっていません。
分かる方がいましたらご教授をお願いします。
5760,php,ereg_matchとpreg_matchの違いについて教えて下さい。
どちらも正規表現でマッチできるようなのですが、どちらを使ったら良いのか判断できません。
もしほとんど同じ機能であれば、とりあえずどちらを使うようにしておけば大丈夫といった指標などはありますか?
5765,c#,基底クラスに仮想関数 virtual OnUpdate() が定義されていてユーザーはこれを派生クラスでオーバーライドして処理を実装するとします。
この OnUpdate() を Unity のようにコルーチン化して非同期で同時に実行されるようにしたいのですが await/async を使って実装する場合 virtual メソッドに async キーワードを付けて定義すればいいでしょうか。
class Base {
public async virtual Task OnUpdate () {
}
}
class Derived : Base {
public async override Task OnUpdate () {
}
}
5770,php,この質問は foreach の内部的な挙動についてのものです。
PHP の foreach は、イテレーション対象の配列をコピーして動作しているのだと思っています。
ケース1:
$array = array(1, 2, 3);
foreach ($array as $item) {
echo $item, ' ';
$array[] = $item;
}
echo PHP_EOL, json_encode($array), PHP_EOL;
/* output:
1 2 3
[1,2,3,1,2,3]
*/
もし、イテレーション対象の配列そのものとして動作するなら、上記スクリプトは（ループ中に配列に対して要素を追加しているため）無限ループとなるはずだからです。
foreach についての PHP マニュアル を見たところ、以下の記述がありました。
foreach の実行開始時に内部配列ポインタは、 配列の先頭要素を指すように自動的にリセットされます。
そこでまず、以下のケース2を試してポインタの位置を確かめました。
ケース2:
$array = array(1, 2, 3);
// 配列のポインタを次に進めます。（が、foreach によりリセットされるため影響しないはずです）
each($array);
foreach ($array as $item) {
echo $item, " ";
}
// foreach によりポインタが最後に進んでるはずなので、false が返って来るはず
var_dump(each($array));
/* output:
1 2 3
bool(false)
*/
予想通りの結果が得られました。
PHP マニュアル には以下の記述もあります。
foreach は内部の配列ポインタに依存するので、 ループ内で配列ポインタを変更すると予期せぬ振る舞いを引き起こします。
「予期せぬ振る舞い」が何なのか試すために、以下のケース3を実行してみます。
ケース3
$array = array(1, 2, 3);
foreach ($array as $key => $item) {
echo $item, " ";
reset($array); // 配列ポインタを強制リセット
}
/* output:
1 2 3
*/
結果は、「予期せぬ振る舞い」ではなく、配列のコピーに対して foreach が動作しているように見えるだけでした。
質問
foreach はその配列のコピーで動作しているように見えますが、ループが終了した後に元配列の配列ポインタを末尾に移動しているようです。
foreach は本当のところどのように動作しているのでしょうか？
また、どのような場合に「予期せぬ振る舞い」が出るのでしょうか？
この質問は以下の本家StackOverflowの質問を翻訳・編集したものです。
How 'foreach' actually works @DaveRandom
5781,c#,C#にあるコントロールのWebBrowserを使って自作ブラウザを作成しようと考えています。
JavaScriptを用いたページに対応させるためにJavaScriptエンジンを組み込もうと考えているのですが、
どのような方法があるでしょうか？
5807,javascript|php,ボタンクリックしたら、HTMLの指定タグ(id)範囲のみ、「JavaScript」か「PHP」で画面キャプチャしたいです。
HTMLの指定タグ(id)範囲から、画面位置を割り出し、そのサイズを取得して、画像で画面キャプチャすることは可能でしょうか？
5814,javascript,Google API の JavaScriptクライアントライブラリを使っているのですが、グローバル関数から無名関数の処理の中に入る（？）よい方法が思い浮かばず悩んでいます。
</body>の前に、(1)自分のJavaScript読み込み (2)Google API読み込み を記載しています。
:
<script src="MY.js"></script>
<script src="https://apis.google.com/js/client.js?onload=GoogleApiLoad"></script>
</body>
MY.js では、グローバルな名前をできるだけ作らないよう無名関数の中で、Google API とは関係なく先にできる処理を行ってます。
!function(){
// 先にできることいろいろ
}();
そして、Google API のロード完了後に、この無名関数の中で処理を続行したいのですが、どんなコードにすればよいのかわかりません。
Google API の使い方は、ロード完了したタイミングでコールバック関数を実行する方式(client.js?onload=XXX)が公式的なようなので、それに従っています。
https://developers.google.com/api-client-library/javascript/start/start-js
このコールバック関数(上の例ではGoogleApiLoad)は、グローバルな名前でないといけないと思いますが、そうすると、
!function(){
// 先にできることいろいろ
// Google APIロード完了後はAPIを使っていろいろ
}();
function GoogleApiLoad(){
// Google APIロード完了
}
・基本は無名関数で自分のJavaScriptコードを実行している中で、
・Google API がロード完了したら、その無名関数の中でAPIを使って処理を続行する
というやり方をしたい時に、どうすればよいのか・・よい方法が思い浮かびません。。
こういう時は、どうするのがよいのでしょうか？
よろしくお願いいたします。
5818,php,失礼します。
PHPでセッションを利用したショッピングカートのシステムを作っているのです。
現在、カート内に商品の重複をさせない処理まではできているのですが、カート内に同じIDの商品が存在する時には既にカート内に入っている商品の個数を追加する変更処理を行えるようにしたいです。
例）カート内　　：ID1　りんご　個数1
↓
ユーザの行動：追加でりんごを2つカートに入れる
↓
カート内　　：ID1　りんご　個数3
このような状態になるように処理をしたいです。
伝わっているでしょうか。
コードは以下の通りです。
//セッション変数「cart」が未設定の場合は空の配列に初期化
if(!isset($_SESSION['cart'])){
$_SESSION['cart'] = array();
}else if (is_string($_SESSION['cart'])){
//セッション変数「cart」に文字列が存在していれば配列セッションcartを代入
$_SESSION['cart'] = array($_SESSION['cart']);
}
/********************追加処理**********************/
$key = isset($_SESSION['cart'][$_POST['id']]);
//セッション変数内にPOSTで送られてきたidと同じものが無かった場合の処理
if(!$key){
if(isset($_POST['price'])){
$price = $_POST['price'];
if(isset($_POST['num'])){
$num = $_POST['num'];
$sum = $price * $num;
}
}
//item_resultからpostでid,name,priceが送られてきたかを確認
if(isset($_POST['id'])){
if(isset($_POST['name'])){
if(isset($_POST['price'])){
if(isset($_POST['num'])){
if(isset($sum)){
//送られてきたデータを配列に格納
$item = array('id' => $_POST['id'],
'name' => $_POST['name'],
'price' => $_POST['price'],
'num' => $_POST['num'],
'sum' => $sum);
}}}}
}else{
$msg = 'no item';   //何もカートに入れてませんよー
}
}
//セッション変数「cart」に配列の中身を追加
if(isset($item)){
$_SESSION['cart'][$_POST['id']] = $item;
}
//表示するためにセッションの中身を配列に入れなおす
$print_cart = $_SESSION['cart'];
foreachで$print_cartを回しながら、POSTで送られたIDと配列内のIDが一致した場合にarray_spliceで置換したらどうかと考えたのですが書き方が分からず断念してしまいました。
やりたい事は、カート内に同じIDの処理が存在する時には既にカート内に入っている商品の個数を追加する変更処理です。
どうしたらよいのでしょうか？
よろしくお願いします。
5823,php,CakePHPのSanitizeが廃止になるそうなので、代わりにネイティブPHPで使えるライブラリを探しています。
今までCakePHPしか触ったことがないので、何が定番で信用できるのかわからないので教えて下さい。
5834,ios,調べた結果、 Xcode で iOS アプリの画面の向きを固定できそうなことは分かりました。
Monaca を使って開発しているため、 Monaca で画面の向きを固定する方法を知りたいです。
どなたか教えていただけないでしょうか？
よろしくお願いいたします。
5846,ios,URLの配列を作りたいのですが、なかなかうまくできません。。。
NSURL *url1 = [NSURL URLWithString:@"http://www.ajisaba.net/motion/dnld.php?fpath=emu.mp4"];
NSURL *url2 = [NSURL URLWithString:@"http://www.ajisaba.net/motion/dnld.php?fpath=penguin.mp4"];
NSArray *urls = [NSArray arrayWithObjects:url1,url2,nil];
MPMoviePlayerController *moviePlayerController = [[MPMoviePlayerController alloc]initWithContentURL:urls];
とするとエラーがでてしまいます。。
どなたか教えてください、よろしくお願い致します。
5850,ios,今、テザリング時のような見た目のビュー（ボタン）を設置してアクションさせるための機能を作成しています。
具体的には、とあるアクション時に、画面上部に44pxの高さのボタンを設置し、ショートカットとして使ってもらうことを想定したものです。
現在の実装は、AppDelegateが持っているkey windowを縮小し、上端に空きを作った上でそこにボタンを配置しています。
iOS8では意図した通りに動作しているのですが、iOS6, 7で意図した挙動にならないときがあります。
意図した挙動にならないのは「モーダルビュー」を表示した時で、presentViewController:animated:completion:を実行したタイミングです。
これを実行すると、（見た目には）上記でリサイズしたkey windowのサイズが元に戻り、その上でモーダルビューが表示されます。
結果として重ねたボタンの下にビューが潜り込んでしまう、というものです。
この挙動について、なにか分かりますでしょうか？
[2015.02.04 追記]
コメント頂いたので再現する最小コードを載せます。
再現手順は、
新規プロジェクト作成（Storyboard未使用）
AppDelegateに以下コード追加
起動(Run)
画面中央あたりにある＋ボタン押下（UIWindowリサイズ）
barButton（ブックマーク型）押下（modal view表示）
現象発生
となります。
- (BOOL)application:(UIApplication *)application
didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
UIButton *button = [UIButton buttonWithType:UIButtonTypeContactAdd];
button.frame = CGRectMake(50, 150, 100, 44);
[button addTarget:self
action:@selector(tap:)
forControlEvents:UIControlEventTouchUpInside];
// ViewController
self.viewController = [[UIViewController alloc] init];
self.viewController.view.backgroundColor = UIColor.blueColor;
self.viewController.definesPresentationContext = NO;
[self.viewController.view addSubview:button];
UIBarButtonItem *barButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemBookmarks
target:self
action:@selector(barBtnTap:)];
self.viewController.navigationItem.rightBarButtonItem = barButton;
// NavigationController
UINavigationController *nv = [[UINavigationController alloc] initWithRootViewController:self.viewController];
self.window = [[UIWindow alloc] initWithFrame:UIScreen.mainScreen.bounds];
self.window.backgroundColor = UIColor.redColor;
self.window.rootViewController = nv;
[self.window makeKeyAndVisible];
return YES;
}
- (void)barBtnTap:(id)sender
{
UIView *mark = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 50, 50)];
mark.backgroundColor = UIColor.yellowColor;
UIViewController *modal = [[UIViewController alloc] init];
modal.view.backgroundColor = UIColor.grayColor;
[modal.view addSubview:mark];
[self.viewController presentViewController:modal
animated:YES
completion:nil];;
}
- (void)tap:(id)sender
{
self.backupFrame = self.window.frame;
CGRect newFrame = self.window.frame;
NSInteger pad = 60;
newFrame.size.height -= pad;
newFrame.origin.y    += pad;
self.window.frame = newFrame;
CGRect otherFrame = CGRectMake(0, 0, newFrame.size.width, pad);
self.otherWindow = [[UIWindow alloc] initWithFrame:otherFrame];
self.otherWindow.backgroundColor = UIColor.greenColor;
[self.otherWindow makeKeyAndVisible];
}
5855,c#,タイトルのとおりですが、直接設定したあとも補完がされません。
UnityとVisualStudio2008でプロジェクトを作成して試しましたが、両方とも同じ症状です。
どうしたら直るのかご教授ください。
質問の内容が足りない場合、ご指摘ください。
至らない点あると思いますが、よろしくお願いします。
環境
windows7
kaoriya-gvim 32bit
python 2.7.9 32bit
Unity 4.5.5p5
vimrc(抜粋)
OmniSharp
NeoBundleLazy 'nosami/Omnisharp', {
\   'autoload': {'filetypes': ['cs']},
\   'build': {
\     'windows': 'MSBuild.exe server/OmniSharp.sln /p:Platform="Any CPU"',
\     'mac': 'xbuild server/OmniSharp.sln',
\     'unix': 'xbuild server/OmniSharp.sln',
\   }
\ }
neocomplete
let g:acp_enableAtStartup = 0
let g:neocomplete#enable_at_startup = 1
let g:neocomplete#enable_smart_case = 1
let g:neocomplete#sources#syntax#min_keyword_length = 3
let g:neocomplete#lock_buffer_name_pattern = '\*ku\*'
let g:neocomplete#sources#dictionary#dictionaries = {
\ 'default' : '',
\ 'vimshell' : $HOME.'/.vimshell_hist',
\ 'scheme' : $HOME.'/.gosh_completions'
\ }
if !exists('g:neocomplete#keyword_patterns')
let g:neocomplete#keyword_patterns = {}
endif
let g:neocomplete#keyword_patterns['default'] = '\h\w*'
autocmd FileType cs setlocal omnifunc=OmniSharp#Complete
if !exists('g:neocomplete#sources#omni#input_patterns')
let g:neocomplete#sources#omni#input_patterns = {}
endif
let g:neocomplete#sources#omni#input_patterns.cs = '[^.]\.\%(\u\{2,}\)\?'
vim上で:set omnifunc=OmniSharp#Completeとすると下の画像のようになります。
5856,ios,現在コールアウトをクリックすると処理が行われるように、以下のようにmapView:annotationView:calloutAccessoryControlTapped:に処理を記述しております。
- (void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)annotationView calloutAccessoryControlTapped:(UIControl *)control {
// 処理
}
しかし、pin.rightCalloutAccessoryViewに入れて表示されるボタンの種類は
UIButtonTypeDetailDisclosure（iマーク）
UIButtonTypeContactAdd（+マーク）
の２種類だけで、UIButtonTypeCustomなどにしても表示されません。
pinView.rightCalloutAccessoryView = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
どうすれば、好きなボタンを吹き出しに入れることができ、かつcalloutAccessoryControlTapped:を呼び出せるでしょうか。
5865,javascript,下記に合致するNamespace管理がきるJavascriptのライブラリ／スーパーセットは存在するでしょうか？
「Jav‌​aライクな名前空間」－　com.hogehoge.foo.bar のような名前空間が持てるかどうか
Knockout.js と連携して名前空間を管理することができる
開発規模は約5人くらいのチーム
Jsのファイル数は30ファイル程度
5880,c#,現在、Helix toolkitを用いて簡単な3Dビュアーを作成しています。
三次元の点を色付きで3D表示したいです。
プロジェクト自体はHelixToolkit.Wpf.SharpDXのExampleフォルダ内にあるSimpleDemoを参考にしています。
xamlでは以下のように記述しています。
<hx:PointGeometryModel3D x:Name="points" Geometry="{Binding Points}" Transform="{Binding Model1Transform}" Color="{x:Static sdx:Color.White}" />
表示する際の更新は以下の通りです。
var points = new PointGeometry3D();
var col = new Color4Collection();
var ptPos = new Vector3Collection();
var ptIdx = new IntCollection();
for(int y = 0; y < height; y++) {
for(int x = 0; x < width; x++) {
if(depth[y * width + x] < 1000 && depth[y * width + x] > 0) {
ptIdx.Add(ptPos.Count);
ptPos.Add(new Vector3(x, height - y, (-depth[y * width + x] / 3.0f) + 800));
col.Add(rnd.NextColor().ToColor4());
}
}
}
points.Positions = ptPos;
points.Indices = ptIdx;
points.Colors = col;
Points = points;
更新する点が約200×200ぐらいならば、各点がランダムな色が設定されて期待通りの動作になるのですが、
これが500×300ぐらいになると色が全く更新されません。（黒色で表示される）
実際、200×200の際も、アプリケーション起動のタイミングであるときはうまくランダムの色が表示されるが、あるときは黒色で表示されます。
何が原因であると考えられますか？ご教授ください。
5909,ios,通常、MapKitを使って地図上にピンを立て、タップするとアノテーションのバルーンが表示されます。
そこで、アノテーションのバルーンが表示されるタイミングで他に何か処理を行いたいのですが、
どこに記述すればよいのでしょうか。
5910,ios,CGAffineTransform の影響で変更された CGRect の値を元に戻すにはどうすればいいでしょうか？
以下が検証として取り組んでいる変換例で、point(10,10), size(100, 100) の四角形を 45 度傾けています。
// 初期状態
CGRect rect = CGRectMake(10, 10, 100, 100);                          // {{10, 10}, {100, 100}}
CGAffineTransform transform = CGAffineTransformIdentity;             // [1, 0, 0, 1, 0, 0]
// 45度回転させる
CGAffineTransform rotate = CGAffineTransformMakeRotation(45.0f * M_PI / 180.0f); // [0.70710677, 0.70710677, -0.70710677, 0.70710677, 0, 0]
transform = CGAffineTransformConcat(transform, rotate);              // [0.70710677, 0.70710677, -0.70710677, 0.70710677, 0, 0]
rect = CGRectApplyAffineTransform(rect, transform);                  // {{-70.710678, 14.142136}, {141.42136, 141.42136}}
// rectを初期状態に復元したい
// ...？
以下のコードはダメでした。
rect = CGRectApplyAffineTransform(rect, CGAffineTransformInvert(transform)); // {{-40, -40}, {200, 200}}
ちなみに、
CGAffineTransformConcat(transform, CGAffineTransformInvert(transform)) // [0.99999994, 0, 0, 0.99999994, 0, 0]
であり、誤差はあるものの、行列自体は CGAffineTransformInvert() で戻せるようです。が、CGRect が期待どおりに戻りません。
実際に使用する際は、初期状態が CGAffineTransformIdentity とは限らず、どのような行列が適用されているかはわかりません。また、CGAffineTransformIdentity なときの CGRect も取得できるとは限りません。言い換えれば、ある行列が既に適用済みの CGRect から CGAffineTransformIdentity な状態の CGRect を算出するのが目的です。
今回の例では、45度傾けることで {{-70.710678, 14.142136}, {141.42136, 141.42136}} になってしまったものを {{10, 10}, {100, 100}} に変換できれば成功です。
5918,javascript,JavaScriptで絵文字の正確な長さを取得したいのですが、うまくいきません。
(蛇の絵文字)は1文字なので 1 を期待しているのですが、2 が 返ってきてしまいます。
Firefox, Node.js, io.js などいろいろなもので試しましたが、やはり 2 が返ってきています。
どうすれば、正確な長さを取得できるのでしょうか?
var my_string = ""; // 蛇の絵文字
var str_length = my_string.length;
console.log(str_length); // 2
5925,php,UNIONを使ったSELECT文で、プレースホルダーを使用すると、syntaxエラーになってしまいます。
プレースホルダーを使わない、以下のコードではエラーがでません。
function getContents($page)
{
$limit = 3;
$offset = $limit * $page - $limit;
$sql = "(SELECT * FROM casper LIMIT 3 OFFSET 0) UNION ALL
(SELECT * FROM gasper LIMIT 3 OFFSET 0) UNION ALL
(SELECT * FROM jasper LIMIT 3 OFFSET 0) UNION ALL
(SELECT * FROM masper LIMIT 3 OFFSET 0) UNION ALL
(SELECT * FROM rasper LIMIT 3 OFFSET 0)
ORDER BY title ASC";
$stmt = $this->dbh->prepare($sql);
$stmt->execute();
return $stmt->fetchAll();
}
しかし、以下のコードはエラーになります。
function getContents($page)
{
$limit = 3;
$offset = $limit * $page - $limit;
$sql = "(SELECT * FROM casper LIMIT :limit OFFSET :offset) UNION ALL
(SELECT * FROM gasper LIMIT :limit OFFSET :offset) UNION ALL
(SELECT * FROM jasper LIMIT :limit OFFSET :offset) UNION ALL
(SELECT * FROM masper LIMIT :limit OFFSET :offset) UNION ALL
(SELECT * FROM rasper LIMIT :limit OFFSET :offset)
ORDER BY title ASC";
$stmt = $this->dbh->prepare($sql);
$stmt->bindValue(':limit', $limit, PDO::PARAM_INT);
$stmt->bindValue(':offset', $offset, PDO::PARAM_INT);
$stmt->execute();
return $stmt->fetchAll();
}
エラー内容は以下です。
Fatal error: Uncaught exception 'PDOException' with message 'SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''3' OFFSET '0') UNION ALL
(SELECT * FROM jasper LIMIT '3' OFFSET '0' at line 2' in /var/www/html/class/Jk.php:51
Stack trace:
#0 /var/www/html/class/Jk.php(51): PDOStatement->execute()
#1 /var/www/html/index.php(5): Jk->getVideos(1)
#2 {main}
thrown in /var/www/html/class/Jk.php on line 51
プレースホルダーを使っても、結果的にはプレースホルダーを使わず、値を直接している方法と同じになるはずだと思うのですが、なぜエラーになるのでしょうか？
環境に以下になります。
CentOS 6.6
PHP 5.3.3
MySQL 5.1.73
よろしくお願いします。
5929,ios,UIAlertをいろいろなところから呼び出し可能にしたいと思っています。
例えば
MyAlert.show()
といった感じに。
下記のようなクラスを作って表示させるのは作法としておかしいでしょうか？
特にrootViewControllerを呼び出している辺りについてどうするのが適切でしょうか？
import UIKit
class MyAlert {
class func show(){
let alertTitle = "アラート"
let alertMsg = "サンプルアラートです。"
let alertController: UIAlertController = UIAlertController(title: alertTitle, message: alertMsg, preferredStyle: .Alert)
let cancelAction: UIAlertAction = UIAlertAction(title: "キャンセル", style: .Cancel) { action -> Void in
//nothing
}
alertController.addAction(cancelAction)
let submitAction: UIAlertAction = UIAlertAction(title: "OK", style: .Default) { action -> Void in
//something to do
}
alertController.addAction(submitAction)
var rootvc = UIApplication.sharedApplication().keyWindow?.rootViewController
rootvc!.presentViewController(alertController, animated: true, completion: nil)
}
}
5930,java,YouTube Data APIで得られる動画の再生時間はISO 8601形式に従ってPT#M#SというString型のデータで返されます｡  そこで質問なのですが表示する上でJavaを使ってこの文字列をhh:MM:ssという形式に変換したいと考えています｡そこで何か簡単な方法はありますでしょうか｡
よろしくおねがいします｡
追記:
YouTube Data APIのリソース表現です｡ 再生時間はcontentDetailsのdurationという項目です｡
5931,ios,MPMoviePlayerControllerにプレイリストを設定したいのですが、MPMoviePlayerControllerは引数に配列を取るクラスではないとのことで下記のようなコードを書いてみました。
が、やはりエラーが出てしまいます。
どの部分がいけないのでしょうか。
どなたか教えてください、よろしくお願い致します。
(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
MovieTableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"movieCell" forIndexPath:indexPath];
NSURL *url1 = [NSURL URLWithString:@"http://www.ajisaba.net/motion/dnld.php?fpath=emu.mp4"];
NSURL *url2 = [NSURL URLWithString:@"http://www.ajisaba.net/motion/dnld.php?fpath=penguin.mp4"];
NSArray *urls = [NSArray arrayWithObjects:url1,url2,nil];
for (int i=0; i<urls.count; i++)
{
urls = urls[i];
MPMoviePlayerController *moviePlayerController = [[MPMoviePlayerController alloc]initWithContentURL:urls];
[moviePlayerController setScalingMode:MPMovieScalingModeAspectFit];
[moviePlayerController.view setFrame:CGRectMake(0, 0, 320, 170)];
if([self.movieList indexOfObject:moviePlayerController] == NSNotFound ){
[self.movieList insertObject:moviePlayerController atIndex:indexPath.row];
}}
return cell;
}
5942,javascript,お世話になります。
MoancaIDEでiOS/Android向けアプリを開発中ですが、頻繁にJQueryによるAjax通信が動作しなくなり原因がわからず困っています。
というのも、そもそも別ページに記載したjavascriptが動作していないのではないかという疑念です。
環境：MoancaIDE / Chrome 40.0.2214.93 m
Cordova 4.1.0
ONSEN UI 1.2.1
JQuery MonacaVer 2.0.3
iOS MonacaDebugger 3.2.0
■やりたいこと
タブバー＋ナビゲーションコンポーネントを使用したい
タブバーにより読みこまれたhtmlファイル内で記載されているスクリプトでデータを取得し、画面に反映させたい
■ファイル構成
http://docs.monaca.mobi/cur/ja/sampleapp/samples/onsen_ui_tabbar_navigator/
こちらのサンプルをそのまま使いつつ独自にコードを加えています。
index.html内にタブバー記載（基本部分ははしょります）
<ons-tabbar>
<ons-tab label="home" page="home_navi.html" icon="ion-home" active="true"></ons-tab>
<ons-tab label="page2" page="page2.html" icon="ion-coffee"></ons-tab>
</ons-tabbar>
home_navi.html
<ons-navigator title="HOME" var="MyNavi" page="home.html">
</ons-navigator>
<ons-template id="home.html">
<script src="js/home.js"></script>
<script>
ons.ready(function(){
console.log('hoge');
//test.hoge();
});
</script>
<ons-page>
<ons-toolbar>
<div class="center">HOME</div>
</ons-toolbar>
<div>this tab is home</div>
</ons-page>
■home.htmlで起きている現象
タブバーから遷移することから、別のページ自体は読み込まれているようですが、home.jsが動作していない。
ただ出来ているときとそうじゃないときがあり、Monaca側のバグなのか、それともons.readyの仕様をよく理解していないためにjsファイルの読み込み順の問題なのかわかりません。
■試したこと
まずはページがきちんと読み込まれたのかチェックするために、console.log('home is done');を実行。
しかしログが出ませんでした。
また、devicereadyが呼ばれ、デバイスがきちんと準備されていることを確認してから試しているのでデバイス側の読み込み待ちということもなさそうです。
■想定している理由
Monacaビルドサーバー？側でデータのキャッシュがされているのではないか、また、そのキャッシュがおかしくなっているのでは？
一定時間経つと治る（コード変更せず）ことから、tmpなどに保持されており翌日には消えているため動作しているのではと考えています。
似たような状態になった方、もしくは解決された方がいましたら
ぜひアドバイスいただけると助かります。
【2015年2月09日 追記】
結局のところ、各種サイト確認してもONSEN UI自体がAngularjsで作成されているため、そちらの方針に従ったほうが良さそうなため、既存ロジックある程度使い回しで構築し直すことにしました。
Monacaドキュメント側にはJQueryで作成できる旨が書いてありますが、正直該当項目は消してほしいと思います。
5954,c#,エクスプローラで表示されるサムネイルのイメージを取り出したく、IShellFolderインターフェイスをネットで幾つか調べ、試行錯誤しているのですがうまく動きません。
呼び出しているどのメソッドも動かないため、もしかしたらコーディング上の問題だけではなく、プロジェクトの設定や環境にも問題があるのか・・・と思うのですが何か御存知の方、教えて頂けないでしょうか。
呼び出したのは、BindToObject、GetUIObjectOf、ParseDisplayNameですが、どれもダメでした。
なおWin7 64bit環境だったのでAnyCPUをやめて32bitにしてみたりもしましたが、結果は変わりませんでした。
恐れ入りますがご教示頂けると幸いです。
static Guid IID_IExtractImage = new Guid("{BB2E617C-0920-11d1-9A0B-00C04FC2D6C1}");
// COMによりエクスプローラのサムネイル画像を取得するインターフェイスを実装
[ComImportAttribute()]
[GuidAttribute("BB2E617C-0920-11d1-9A0B-00C04FC2D6C1")]
[InterfaceTypeAttribute(ComInterfaceType.InterfaceIsIUnknown)]
interface IExtractImage
{
[PreserveSig()]
UInt32 GetLocation([Out, MarshalAs(UnmanagedType.LPWStr)] StringBuilder pszPathBuffer,
UInt32 cchMax, out UInt32 pdwPriority, ref SIZE prgSize, UInt32 dwRecClrDepth, ref IEIFLAG pdwFlags);
[PreserveSig()]
UInt32 Extract(out IntPtr phBmpThumbnail);
}
static Guid IID_IShellFolder = new Guid("{000214E6-0000-0000-C000-000000000046}");
[ComImportAttribute()]
[GuidAttribute("000214E6-0000-0000-C000-000000000046")]
[InterfaceTypeAttribute(ComInterfaceType.InterfaceIsIUnknown)]
interface IShellFolder
{
UInt32 BindToObject(IntPtr pidl, IntPtr pbc, [In] ref Guid riid, ref IntPtr ppvOut);
UInt32 BindToStorage(IntPtr pidl, IntPtr pbc, [In] ref Guid riid, IntPtr ppvOut);
[PreserveSig()]
UInt32 CompareIDs(Int32 lparam, IntPtr pidl1, IntPtr pidl2);
[PreserveSig()]
UInt32 CreateViewObject(IntPtr hwndOwner, [In] ref Guid riid, ref IntPtr ppv);
[PreserveSig()]
UInt32 EnumObjects(IntPtr hwndOwner, [MarshalAs(UnmanagedType.U4)] SHCONTF grfFlags, ref IntPtr ppenumIDLis);
[PreserveSig()]
//UInt32 GetAttributesOf(UInt32 cidl, [MarshalAs(UnmanagedType.LPArray, SizeParamIndex = 0)]
//    IntPtr[] apidl, ref SFGAO rgfInOut);
UInt32 GetAttributesOf(UInt32 cidl, IntPtr apidl, [MarshalAs(UnmanagedType.U4)] ref SFGAO rgfInOut);
[PreserveSig()]
UInt32 GetDisplayNameOf(IntPtr pidl, SHGDNF uFlags, out STRRET pName);
[PreserveSig()]
//UInt32 GetUIObjectOf(IntPtr hwndOwner, UInt32 cidl, [MarshalAs(UnmanagedType.LPArray, SizeParamIndex = 1)]
//    IntPtr[] apidl, [In] ref Guid riid, ref UInt32 rgfReserved, out IntPtr ppv);
UInt32 GetUIObjectOf(IntPtr hwndOwner, UInt32 cidl, ref IntPtr apidl, [In] ref Guid riid, ref UInt32 rgfReserved, ref IntPtr ppv);
[PreserveSig()]
UInt32 ParseDisplayName(IntPtr hwndOwner, IntPtr pbc, [MarshalAs(UnmanagedType.LPWStr)] string pszDisplayName,
ref IntPtr pchEaten, ref IntPtr pidl, ref UInt32 pdwAttributes);
[PreserveSig()]
UInt32 SetNameOf(IntPtr hwndOwner, IntPtr pidl, string pszName, SHGDNF uFlags, out IntPtr ppidlOut);
}
#region IShellFolder type definitions
[Flags]
enum SHCONTF: uint
{
SHCONTF_CHECKING_FOR_CHILDREN   = 0x00010,
SHCONTF_FOLDERS                 = 0x00020,
SHCONTF_NONFOLDERS              = 0x00040,
SHCONTF_INCLUDEHIDDEN           = 0x00080,
SHCONTF_INIT_ON_FIRST_NEXT      = 0x00100,
SHCONTF_NETPRINTERSRCH          = 0x00200,
SHCONTF_SHAREABLE               = 0x00400,
SHCONTF_STORAGE                 = 0x00800,
SHCONTF_NAVIGATION_ENUM         = 0x01000,
SHCONTF_FASTITEMS               = 0x02000,
SHCONTF_FLATLIST                = 0x04000,
SHCONTF_ENABLE_ASYNC            = 0x08000,
SHCONTF_INCLUDESUPERHIDDEN      = 0x10000
}
[Flags]
enum SFGAO: uint
{
SFGAO_CANCOPY                   = 0x00000001,
SFGAO_CANMOVE                   = 0x00000002,
SFGAO_CANLINK                   = 0x00000004,
SFGAO_STORAGE                   = 0x00000008,
SFGAO_CANRENAME                 = 0x00000010,
SFGAO_CANDELETE                 = 0x00000020,
SFGAO_HASPROPSHEET              = 0x00000040,
SFGAO_DROPTARGET                = 0x00000100,
SFGAO_CAPABILITYMASK            = 0x00000177,
SFGAO_SYSTEM                    = 0x00001000,
SFGAO_ENCRYPTED                 = 0x00002000,
SFGAO_ISSLOW                    = 0x00004000,
SFGAO_GHOSTED                   = 0x00008000,
SFGAO_LINK                      = 0x00010000,
SFGAO_SHARE                     = 0x00020000,
SFGAO_READONLY                  = 0x00040000,
SFGAO_HIDDEN                    = 0x00080000,
SFGAO_DISPLAYATTRMASK           = 0x000FC000,
SFGAO_NONENUMERATED             = 0x00100000,
SFGAO_NEWCONTENT                = 0x00200000,
SFGAO_CANMONIKER                = 0x00000000,   //Not supported.
SFGAO_HASSTORAGE                = 0x00000000,   //Not supported.
SFGAO_STREAM                    = 0x00400000,
SFGAO_STORAGEANCESTOR           = 0x00800000,
SFGAO_VALIDATE                  = 0x01000000,
SFGAO_REMOVABLE                 = 0x02000000,
SFGAO_COMPRESSED                = 0x04000000,
SFGAO_BROWSABLE                 = 0x08000000,
SFGAO_FILESYSANCESTOR           = 0x10000000,
SFGAO_FOLDER                    = 0x20000000,
SFGAO_FILESYSTEM                = 0x40000000,
SFGAO_STORAGECAPMASK            = 0x70C50008,
SFGAO_HASSUBFOLDER              = 0x80000000,
SFGAO_CONTENTSMASK              = 0x80000000,
SFGAO_PKEYSFGAOMASK             = 0x81044000
}
enum SHGDNF: uint
{
SHGDN_NORMAL                    = 0,
SHGDN_INFOLDER                  = 0x1,
SHGDN_FOREDITING                = 0x1000,
SHGDN_FORADDRESSBAR             = 0x4000,
SHGDN_FORPARSING                = 0x8000
}
enum STREET_TYPE: uint
{
STREET_OFFSET                   = 0x0001,
STREET_WSTR                     = 0x0000,
STREET_CSTR                     = 0x0002
}
[StructLayout(LayoutKind.Explicit, CharSet = CharSet.Ansi, Pack = 4)]
struct STRRET_UNIONC
{
[FieldOffset(0)]
IntPtr pOleStr;
[FieldOffset(0)]
UInt32 uOffset;
[FieldOffset(0)]
[MarshalAs(UnmanagedType.LPStr, SizeConst = 260)]
string pStr;
}
[StructLayout(LayoutKind.Explicit, CharSet = CharSet.Unicode, Pack = 4)]
struct STRRET_UNIONW
{
[FieldOffset(0)]
IntPtr pOleStr;
[FieldOffset(0)]
UInt32 uOffset;
[FieldOffset(0)]
[MarshalAs(UnmanagedType.LPWStr, SizeConst = 260 / 2)]
string pStr;
}
[StructLayout(LayoutKind.Explicit, Pack = 4)]
struct STRRET {
//UInt32  uType;
[FieldOffset(0)]
STREET_TYPE uType;
// union start
[FieldOffset(4)]
STRRET_UNIONC uniC;
[FieldOffset(4)]
STRRET_UNIONW uniW;
// union end
}
class ShellApi
{
[DllImport("shell32.dll", CharSet = CharSet.Auto)]
static extern int SHGetDesktopFolder(out IntPtr ppshf);
public static IShellFolder GetDesktopFolder()
{
IntPtr res = IntPtr.Zero;
SHGetDesktopFolder(out res);
return (IShellFolder)Marshal.GetTypedObjectForIUnknown(res, typeof(IShellFolder));
}
[DllImport("shell32.dll", CharSet = CharSet.Auto)]
public static extern UInt32 SHParseDisplayName([MarshalAs(UnmanagedType.LPWStr)] String pszName,
IntPtr pbc, out IntPtr ppidl, UInt32 sfgaoIn, out UInt32 psfgaoOut);
[DllImport("shell32.dll", CharSet = CharSet.Auto)]
public static extern Int32 SHBindToObject(IShellFolder shell, IntPtr pidl, IntPtr pbc, ref Guid riid,
out IntPtr ppvOut);
}
public static Image GetThumbnailImage(string strFilePath)
{
IntPtr peaten = IntPtr.Zero;
IntPtr ppidl = IntPtr.Zero;
UInt32 iattr = 0;
IntPtr pbmp = IntPtr.Zero;
string strDir = strFilePath.Substring(0, strFilePath.LastIndexOf('\\')) + '\\';
string strFile = Path.GetFileName(strFilePath);
IShellFolder shell = null;
try
{
shell = ShellApi.GetDesktopFolder();
}
catch (Exception e)
{
}
//shell.ParseDisplayName(IntPtr.Zero, IntPtr.Zero, strFile, ref peaten, ref ppidl, ref iattr); //うまく動かない
ShellApi.SHParseDisplayName(strFilePath, IntPtr.Zero, out ppidl, 0, out iattr); //うまく動かないため代用
IExtractImage ieimg = null;
peaten = IntPtr.Zero;
if (ppidl != IntPtr.Zero)
{
UInt32 rgfRes = 0;
IntPtr res = IntPtr.Zero;
shell.GetUIObjectOf(IntPtr.Zero, 1, ref ppidl, ref IID_IExtractImage, ref rgfRes, ref res);  //うまく動かない
ieimg = (IExtractImage)Marshal.GetTypedObjectForIUnknown(res, typeof(IExtractImage));  //resがnullのため例外発生
//以下、例外発生のため未テスト
if (ieimg != null)
{
StringBuilder sb = new StringBuilder(1024);
SIZE size = new SIZE();
size.cx = 64;
size.cy = 64;
UInt32 priority = 0;
IEIFLAG flag = IEIFLAG.IEIFLAG_ORIGSIZE | IEIFLAG.IEIFLAG_SCREEN | IEIFLAG.IEIFLAG_ASPECT;
ieimg.GetLocation(sb, (UInt32)sb.Capacity, out priority, ref size, 32, ref flag);
ieimg.Extract(out pbmp);
Marshal.FreeCoTaskMem(ppidl);
}
}
Image image = null;
if (pbmp != null)
{
image = Image.FromHbitmap(pbmp);
}
if (shell != null)
{
Marshal.ReleaseComObject(shell);
}
if (ieimg != null)
{
Marshal.ReleaseComObject(ieimg);
}
return image;
}
参考にしたのは、以下のサイトなどです。ここに登録してまだ間もないためURLが2つまでしか引用できませんでした。。。
Re[4]: IExtractImageによるサムネイルの取得
Rewrite DirectoryInfo using IShellFolder
追記です。
教えて頂いた情報をもとにコードを修正しました。
それにより、ParseDisplayName()、BindToObject()がうまく動く様になったようです。しかし、GetUIObjectOf()の最後の引数に結果が帰って来ず、nullのままです。
GetUIObjectOf()の引数の取り方に誤りがあるでしょうか？もしくは何か不足があるでしょうか。
度々すみませんがおねがいいたしますm(__)m
☆Program.cs (未変更)
[STAThread]についてはそのままです。
static class Program
{
/// <summary>
/// アプリケーションのメイン エントリ ポイントです。
/// </summary>
[STAThread]
static void Main()
{
Application.EnableVisualStyles();
Application.SetCompatibleTextRenderingDefault(false);
Application.Run(new formMain());
}
}
☆メインフォーム
public partial class formMain : Form
{
public formMain()
{
InitializeComponent();
}
private void formMain_Load(object sender, EventArgs e)
{
pictureBox1.Image = Libs.Acrobat.AcrobatControl.GetThumbnailImage(@"D:Data\20150123-01.pdf");
}
☆IShellFolder定義と呼び出し
static Guid IID_IShellFolder = new Guid("{000214E6-0000-0000-C000-000000000046}");
[ComImportAttribute()]
[GuidAttribute("000214E6-0000-0000-C000-000000000046")]
[InterfaceTypeAttribute(ComInterfaceType.InterfaceIsIUnknown)]
interface IShellFolder
{
void ParseDisplayName(IntPtr hwndOwner, IntPtr pbc, [MarshalAs(UnmanagedType.LPWStr)] string pszDisplayName,
[In, Out] ref IntPtr pchEaten, out IntPtr pidl, [In, Out] ref UInt32 pdwAttributes);
IEnumIDList EnumObjects(IntPtr hwndOwner, [MarshalAs(UnmanagedType.U4)] SHCONTF grfFlags);
//[return: MarshalAs(UnmanagedType.Interface)]
void BindToObject(IntPtr pidl, IntPtr pbc, [In] ref Guid riid, out IntPtr ppv);
//[return: MarshalAs(UnmanagedType.Interface)]
object BindToStorage(IntPtr pidl, IntPtr pbc, [In] ref Guid riid, out IntPtr ppv);
[PreserveSig()]
UInt32 CompareIDs(Int32 lparam, IntPtr pidl1, IntPtr pidl2);
[return: MarshalAs(UnmanagedType.Interface)]
object CreateViewObject(IntPtr hwndOwner, [In] ref Guid riid);
//[PreserveSig()]
//UInt32 GetAttributesOf(UInt32 cidl, [MarshalAs(UnmanagedType.LPArray, SizeParamIndex = 0)]
//    IntPtr[] apidl, ref SFGAO rgfInOut);
[PreserveSig()]
UInt32 GetAttributesOf(UInt32 cidl, IntPtr apidl, [In, Out] [MarshalAs(UnmanagedType.U4)] ref SFGAO rgfInOut);
//[PreserveSig()]
//UInt32 GetUIObjectOf(IntPtr hwndOwner, UInt32 cidl, [MarshalAs(UnmanagedType.LPArray, SizeParamIndex = 1)]
//    IntPtr[] apidl, [In] ref Guid riid, ref UInt32 rgfReserved, out IntPtr ppv);
[PreserveSig()]
UInt32 GetUIObjectOf(IntPtr hwndOwner, UInt32 cidl, ref IntPtr apidl, [In] ref Guid riid, ref UInt32 rgfReserved, ref IntPtr ppv);  //←☆☆これがまだちゃんと動かない
void GetDisplayNameOf(IntPtr pidl, SHGDNF uFlags, out STRRET pName);
[PreserveSig()]
void SetNameOf(IntPtr hwndOwner, IntPtr pidl, [MarshalAs(UnmanagedType.LPWStr)] string pszName,
SHGDNF uFlags, out IntPtr ppidlOut);
}
class ShellApi
{
[DllImport("shell32.dll", CharSet = CharSet.Unicode)]
public static extern int SHGetDesktopFolder(out IShellFolder ppshf);
[DllImport("shell32.dll", CharSet = CharSet.Auto)]
public static extern UInt32 SHParseDisplayName([MarshalAs(UnmanagedType.LPWStr)] String pszName,
IntPtr pbc, out IntPtr ppidl, UInt32 sfgaoIn, out UInt32 psfgaoOut);
[DllImport("shell32.dll", CharSet = CharSet.Auto)]
public static extern Int32 SHBindToObject(IShellFolder shell, IntPtr pidl, IntPtr pbc, ref Guid riid,
out IntPtr ppvOut);
}
public static Image GetThumbnailImage(string strFilePath)
{
IntPtr peaten = IntPtr.Zero;
IntPtr ppidl = IntPtr.Zero;
UInt32 iattr = 0;
IntPtr pbmp = IntPtr.Zero;
string strDir = strFilePath.Substring(0, strFilePath.LastIndexOf('\\')) + '\\';
//string strFile = Path.GetFileName(strFilePath);
IShellFolder shell = null;
try
{
ShellApi.SHGetDesktopFolder(out shell);
}
catch (Exception e)
{
}
shell.ParseDisplayName(IntPtr.Zero, IntPtr.Zero, strFilePath, ref peaten, out ppidl, ref iattr);
//ShellApi.SHParseDisplayName(strFilePath, IntPtr.Zero, out ppidl, 0, out iattr);
IExtractImage ieimg = null;
peaten = IntPtr.Zero;
if (ppidl != IntPtr.Zero)
{
UInt32 rgfRes = 0;
IntPtr res = IntPtr.Zero;
shell.GetUIObjectOf(IntPtr.Zero, 1, ref ppidl, ref IID_IExtractImage, ref rgfRes, ref res);   //☆☆←どうしてもresの結果がnullのまま、うまくいかない
ieimg = (IExtractImage)Marshal.GetTypedObjectForIUnknown(res, typeof(IExtractImage));
if (ieimg != null)
{
StringBuilder sb = new StringBuilder(1024);
SIZE size = new SIZE();
size.cx = 64;
size.cy = 64;
UInt32 priority = 0;
IEIFLAG flag = IEIFLAG.IEIFLAG_ORIGSIZE | IEIFLAG.IEIFLAG_SCREEN | IEIFLAG.IEIFLAG_ASPECT;
ieimg.GetLocation(sb, (UInt32)sb.Capacity, out priority, ref size, 32, ref flag);
ieimg.Extract(out pbmp);
Marshal.FreeCoTaskMem(ppidl);
}
}
Image image = null;
if (pbmp != null)
{
image = Image.FromHbitmap(pbmp);
}
if (shell != null)
{
Marshal.ReleaseComObject(shell);
}
if (ieimg != null)
{
Marshal.ReleaseComObject(ieimg);
}
AcroPDFLib.AcroPDF pdf = new AcroPDF();
pdf.gotoNextPage();
return image;
}
}
5955,c#,色々調べてみたのですが、サードパーティのものを使ったりするサンプルはあるのですが、Adobe Reader (Acrobat Reader)のタイプライブラリを使用するというものは見つけられませんでした。 AcroPDFLib.AcroPDF で出来ないか調べましたが、それらしいメソッドやプロパティが見当たりません。
考えついたのは、 gotoNextPage() メソッドを例外が発生するまで繰り返す・・・という方法でページ数が得られなくはなさそうに感じますが、なんか美しくありません。試したわけではありませんがそもそも処理的に遅そうな気がします (^_^;
一応、今求められているのは、複数の PDF の全ページ数を合算し、そのページ数がユーザが設定した値より大きければ警告すればよいので、たとえば 10 ページと設定されていれば PDF、 10 ファイル以上であればページ数は確認すら要りませんし、それ以下でも最高 10 ページ目までページ移動できた時点で確認メッセージを出せると言えば出せそうです。
諦めるしかないでしょうか？ 御存知の方、教えてください。
参考にした情報は以下のものの他、「C# PDF ページ数取得」等で検索して見つかった物を調べました。
AcroPDFLib.AxAcroPDF 一覧
[VB / C#] PDF ファイルをフォーム上に表示する
追記です。
AcroPDFLib.AcroPDF は画面コントロールだとおもいます。 PDF に関しては、サムネイル情報 (これは別の方法で取得しようとしています) 以外は、総ページ数だけ取得できれば構わないため、画面コントロールである必要はありません。寧ろ画面コントロールでないほうが良いです。
xxxPDF pdf = new xxxPDF();
pdf.LoadFromStream(stream);
int pageNum = pdf.GetPageCount();
size.width = pdf.GetPDFInfo().PaperSize.width;
size.height = pdf.GetPDFInfo().PaperSize.height;
こんな感じの方法で PDF 情報が取れれば有り難いんですが^^
5960,php,Modelに_belongs_toのリレーションの設定をして、findした場合に、勝手にリレーションされた結果が返ってきました。ドキュメントにはrelatedで呼び出す様に書かれています。
なぜ自動的にリレーションされたのでしょうか？_belongs_toの場合は自動的に結合されるのでしょうか？
fuelphp 1.6です
5961,android|java,検索文字をURLエンコードするためにjava.net.URLEncoder.encode()を使ったのですが以下のUnhandled exceptionがでてしまいできません｡  なぜでしょうか｡
Unhandled exception :
Unhandled exception: java.io.UnsupportedEncodeingException
URLEncoder使用箇所のコード :
if(this.searchWord!=null&&!this.searchWord.equals(""){
this.searchWord = URLEncoder.encode(this.searchWord, "utf-8");
}
5966,php,Fuelphpのテスト実行に関して
Modelを使用してDBアクセスを行っているのですが、
テスト時のみ開発用DBに接続してテストするのではなく、
インメモリのDBを使用してテストしたいと思っています。
FuelphpはSqliteに対応しているようなのでそちらは問題ないのですが、
以下の仕組みが無いか探しています。
・テスト実行時、データベースに初期データを流し込む
・モデル経由でDBにアクセスし、データを取得、更新、削除等のテストをする
・テスト終了時、データをクリアする
初期データはJson、Yaml等の形式で保存しておいて、流し込むという風にできればいいなと考えています。
イメージとしましてはJavaのPlayframeworkのテスト実行をイメージしています。
https://www.playframework.com/documentation/ja/1.2.x/test
単純にDBのテストするだけならphpunitの仕組みでなんとかなるのではないかと思っているのですが、
ドキュメントを読んだだけだとこの仕組みで具体的にどう実装すればいイイのかがわかりません。
https://phpunit.de/manual/current/ja/database.html
具体的にどういう実装をすればいいのか、
やり方の書いてある資料の場所などご存知の方がいらっしゃいましたら、教えていただけると助かります。
よろしくお願いいたします。
5968,php,PHPでPDFlib、もしくはGDなどデフォルトのPHPモジュールを使用してPDFからPNGへの変換を行うことは可能でしょうか。
ImageMagickなど、変換用のライブラリがあるとは思うのですが、そのような外部のライブラリをインポートせず、です。
5977,php,現在以下の様なファイルを作成しています。
[fuel/app/modules/hoge/classes/controller/hoge.php]
namespace Hoge
{
class Controller_Hoge extends \Controller
{
public function aaa(){}
}
class Hoge_Util
{
public static function bbb(){}
}
}
こちらに対してテストを書こうと思い、以下の様なテストを作成しました。
[fuel/app/modules/hoge/tests/testhogeutil.php]
class Test_Hoge_Util
{
public function test_bbb()
{
\Module::load('Hoge');
$bbb = Hoge_Util::bbb();
$this->assertEquals(1,$bbb);
}
}
php oil test を実行したところ、以下のエラーが発生しました。
Fatal Error - Class 'Hoge\Hoge_Util' not found
おそらく hoge.php の Hoge_Util がロードできていないことが原因ではないかと思うのですが、
FuelPHP では、このように一つのファイルに複数のクラスが存在する場合は、最初に書いてあるクラスしかロードされないのでしょうか？もしくは、 Controller ディレクトリにあるので、クラス名に Controller の文字列を入れないといけないのでしょうか？
ご存知のかたいらっしゃいましたら、教えていただけると助かります。
5992,ios,UIScrollView を使用して画像（黒線内が画面）を以下のように並べて
スワイプさせたら以下のようにループさせたいです。
UIScrollView で画像をタイル上に並べること
UIScrollView で画像をループさせること
この２つを実現するにはどのようなコードを書けばいいのでしょうか？
5995,ios,iOSアプリでPDFファイルの各ページをUIImageに変換する処理を作成しています。
iOS7まででは下記に示すコードで正常にPDFのページを取得・変換できているのですが、
iOS8.1で実行したところCGContextDrawPDFPageの段階で原因不明のエラーとなってしまいます。
以下が主なコードになります。
NSURL *url = [NSURL fileURLWithPath:pdfPath];
CGPDFDocumentRef pdf = CGPDFDocumentCreateWithURL((__bridge CFURLRef)url);
CGPDFPageRef pageRef = CGPDFDocumentGetPage(pdf, 1);
CGPDFPageRetain(pageRef);
CGRect pageRect = CGPDFPageGetBoxRect(pageRef, kCGPDFMediaBox);
UIGraphicsBeginImageContext(pageRect.size);
CGContextRef context = UIGraphicsGetCurrentContext();
CGContextSaveGState(context);
CGContextSetRGBFillColor(context, 1.0, 1.0, 1.0, 1.0);
CGContextFillRect(context, pageRect);
CGContextTranslateCTM(context, 0.0, pageRect.size.height);
CGContextScaleCTM(context, 1.0f, -1.0f);
CGContextSetInterpolationQuality(context, kCGInterpolationHigh);
CGContextSetRenderingIntent(context, kCGRenderingIntentDefault);
CGContextDrawPDFPage(context, pageRef);
CGContextRestoreGState(context);
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
CGPDFPageRelease(pageRef);
CGPDFDocumentRelease(pdf);
iOS8からCoreGraphicsでPDFの扱い方に変更があったのでしょうか？
もしよろしければ原因やヒントとなる情報をお持ちの方がいましたらご教示いただければ幸いです。
なお、iOS8でも、Xcodeから実行した際にはエラーとなるものの、
ArchiveしてOTAで実機にインストールするとエラーが発生せず正常にPDFの取得・変換ができております。
つまり、
・iOS8以上
・Xcodeから実行
・一部のPDFでのみエラーとなる
という条件でエラーが発生しております。
Xcodeから実行した際と実機単体で実行した際で差分が発生する現象について、
何か知見をお持ちの方がおりましたら、
本現象と直接の関係がないことでも結構ですのでご教示いただけませんでしょうか？
6006,ios,いつもお世話になっております。
WEB上に詳しい情報が出ていないため、わかる方に教えていただきたく書き込みます。
「配信中の既存iPhoneアプリ」の更新申請について、
2月1日以降に新基準を満たしていない(64bitサポートしていない）新規アプリ申請はリジェクトされると発表がありましたが、
既存アプリの2月以降更新申請は、まだ32bitでも大丈夫なのでしょうか？
※WEB上には、配信中アプリは6月1日までの更新申請は32bitでも大丈夫と書いてあったり、
どちらも新基準を満たさないとNGとあったり、情報が錯綜しているようです。
というのも現在配信中のiPhoneアプリを、先方より急きょ改修依頼をされておりまして、
monacaのCordova 2.9でビルドいるため基準を満たしておらず、
新基準対応に時間がかかり先方期限に間に合わない可能性もあるため
どう回答したものか…と悩んでおります。
わかる方、何卒よろしくお願いいたします。
6011,android|java,現在私は､AndroidでYouTubeのプレイヤーアプリを作っています｡そこで質問です｡
YouTubeアプリの動画再生画面のを再生するフレームの下には､以下の画像のように動画の各情報が出ると思うのですが､このレイアウトをどのようにつくるか考えた時に私は次のように考えました｡
Layout.xml:
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent">
<LinearLayout
xmlns:tools="http://schemas.android.com/tools" android:layout_width="match_parent"
android:layout_height="wrap_content"
tools:context="com.example.zousan.VideoPlayerActivity"
android:orientation="vertical">
<fragment
android:name="com.google.android.youtube.player.YouTubePlayerFragment"
android:id="@+id/youtube_fragment"
android:layout_width="wrap_content"
android:layout_height="wrap_content">
</fragment>
<ExpandableListView
android:id="@+id/title_and_view_count"
android:layout_width="match_parent"
android:layout_height="match_parent">
</ExpandableListView>
<LinearLayout
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal">
<TextView
android:id="@+id/good"
android:layout_width="wrap_content"
android:layout_height="wrap_content" />
<ImageView
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:src="@drawable/ic_action_good"
android:contentDescription="@string/good"/>
<TextView
android:layout_width="wrap_content"
android:layout_height="wrap_content" />
<ImageView
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:src="@drawable/ic_action_bad"
android:contentDescription="@string/bad"/>
</LinearLayout>
<ListView
android:id="@+id/ch_title_and_sub"
android:layout_width="match_parent"
android:layout_height="match_parent">
</ListView>
<TextView
android:layout_width="match_parent"
android:layout_height="match_parent"
android:text="@string/suggestion"/>
<GridLayout
android:id="@+id/suggest_videos"
android:layout_width="match_parent"
android:layout_height="match_parent">
</GridLayout>
</LinearLayout>
しかしこれだと､ScrollViewの下にGridViewがあるのでおそらく実行できません｡  なにか､いい方法はありますでしょうか｡
私はこの代替案として2つ考えました｡
まず1つはScrollViewはそのままに､ScrollView以下のコンポーネントをそれぞれFragmentとして､まとめる方法｡しかしこの方法は､動画の詳細を取得するリクエストが複雑になると考えられます｡
2つめは､FrameLayoutを用いて､同じくScrollView配下に設置する｡しかしこの方法ではListViewがUselessになってしまう｡
他に何かいいアイデアがありましたら教えて下さい｡ よろしくお願いします｡
6028,php,たとえばPHPの処理を実行したい時、ブラウザを開いて毎回結果を確認しています。
$ php -f file.phpで実行できるのは知っているのですが、getリクエストなどのパラメータが渡せないと確認できなかったりするので、結局ブラウザでの確認をしてしまいます。
また、rubyなどでもruby on railsなどのウェブフレームワークになると、コントローラのアクションを指定して実行することになるので、やはりgetリクエストなどが必要になってしまいます。
皆さんはこれをどう解決しているのでしょうか?
6035,php,zendframework2で構築されているWEBシステムの改修を実施したいのですが、WEBページ（複数画像あり）上にPDF出力ボタンを配置し、それを押下するとPDFが出力される方法をどなたかご教示願います。
何卒よろしくお願いいたします。
【備考】
システムOS：WindowsServer2012R2
言語：PHP5.6.3(ZendFramework2)
DB：Postgres
6037,c#,WPF で DataGrid.Rows が見つからず苦労しています。
以下の方法で DataGrid の内容を取得できましたが、もっとシンプルな方法があると思っています。 Columns["name"] のように特定の列を指定して取得する方法もわかりますでしょうか。
dg は XAML の <DataGrid x:Name=...> です。
for (int i = 0; i < dg.Items.Count; i++)
{
DataGridRow row = (DataGridRow)dg.ItemContainerGenerator.ContainerFromIndex(i);
for (int j = 0; j < dg.Columns.Count; j++)
{
TextBlock cellContent = dg.Columns[j].GetCellContent(row) as TextBlock;
Console.WriteLine(cellContent.Text);
}
}
6045,ios,現在、iOSのアプリを作成していますが、マナーモードでも、音を鳴らす処理で悩んでいます。
Objective-Cだと以下のコードになるかと思いますが
AudioSessionInitialize(NULL, NULL, NULL, NULL);
UInt32 category = kAudioSessionCategory_MediaPlayback;
AudioSessionSetProperty(kAudioSessionProperty_AudioCategory,
sizeof(UInt32),
&category);
AudioSessionSetActive = true
上記コードを、Swiftに変換する方法がわかりません。
一応、以下のイメージかと考えておりますが、setPropertyのメソッドが存在しないように思われます。
var audioSession = AVAudioSession.sharedInstance()
audioSession.setProperty(・・・・
audioSession.setActive(true, error: nil)
どなたか、アドバイスをお願いできないでしょうか？
何卒よろしくお願いいたします。
6062,ios,毎度申し訳ありません。
URL を配列にし TableView に並べたいのですが、うまくいきません。
多分１つの Cell に、配列 urls から取り出された URL ではなくて、配列 urls が、そのまま１つの Cell に並べられているようなのですが、その解決方法がわかりません。
ご存知の方がいらっしゃいましたら教えていただけませんでしょうか。
よろしくお願い致します。
他クラスで作ったサムネイル画像が表示されるようになっています。
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"movieCell" forIndexPath:indexPath];
NSURL *url1 = [NSURL URLWithString:@"http://www.ajisaba.net/motion/dnld.php?fpath=penguin.mp4"];
NSURL *url2 = [NSURL URLWithString:@"http://www.ajisaba.net/motion/dnld.php?fpath=emu.mp4"];
NSArray *urls = [NSArray arrayWithObjects:url2,url1,nil];
NSLog(@"urls count:%@", urls);
for (int i=0; i<_urls.count; i++)
{
MPMoviePlayerController *moviePlayerController = [[MPMoviePlayerController alloc]initWithContentURL:_urls[i]];
[moviePlayerController setScalingMode:MPMovieScalingModeAspectFit];
//[moviePlayerController.view setFrame:CGRectMake(0, 0, 320, 170)];
if([self.movieList indexOfObject:moviePlayerController] == NSNotFound ){
[self.movieList insertObject:moviePlayerController atIndex:indexPath.row];
}
}
return cell;
}
6065,php,開発言語はPHPです。
データは以下のアルゴリズムで暗号化されています。
3DES-CBC(Paddingなし)
Padding文字列：半角スペース
１、暗号化
Padding処理
自動Paddingなしなので最後の８バイトブロックに対して必要な分だけ半角スペースで埋める
3DES-CBC
秘密キーと初期化ベクトル(iv)で暗号化
BASE64エンコード
２、復号化
上記の逆なので
BASE64デコード
3DES-CBC復号化
空白を除去
で良いと思うのですが、以下のような感じで良いのでしょうか？
$encrypt;  //暗号化されたデータ
//BASE64デコード
$data = base64_decode($encrypt);
$des;　//秘密キー
$iv;　 //初期化ベクトル(iv)
//使用するアルゴリズムおよびモードのモジュールをオープン
$em = mcrypt_module_open(MCRYPT_3DES, '', MCRYPT_MODE_CBC, '');
// 暗号化に必要な全てのバッファを初期化
mcrypt_generic_init($em, $des, $iv);
//復号化する
$decode = mdecrypt_generic($em, $data);
//空白を除去する
$result = trim($decode);
よろしくお願いします。
6068,ios,マナーモードでも音を鳴らすコード（Swift）について
と似ている質問ですが、これはユーザーがマナーモードにした場合の質問です。
もうひとつ音を出さないようにする方法があり、ボリューム設定を０（ミュート）にした場合の質問です。
現在、動画保存アプリを作成していますが、撮影ボタンをタップされたときに、
音（標準のカメラの音が望ましい）を出すようにしたいと思ってます。
マナーモードでは音を鳴らすことはできましたが、音量を小さく（０にする）するとやはり音が出なくなります。
撮影ボタンが押されたときには、ボリューム設定が０であっても確実に音を出したいと思ってますが、どのようにしたらよいのでしょうか？
どなたか、アドバイスをお願いいたします。
var audioSession = AVAudioSession.sharedInstance()
audioSession.setCategory(AVAudioSessionCategoryPlayback, error: nil)
audioSession.setActive(true, error:nil)
//再生する音源のURLを生成.
let soundFilePath : NSString = NSBundle.mainBundle().pathForResource("aaa", ofType: "mp3")!
let fileURL : NSURL = NSURL(fileURLWithPath: soundFilePath)!
//AVAudioPlayerのインスタンス化.
myAudioPlayer = AVAudioPlayer(contentsOfURL: fileURL, error: nil)
//AVAudioPlayerのデリゲートをセット.
myAudioPlayer.delegate = self
撮影ボタン押下時
myAudioPlayer.play()
6093,ios,以下のように新たな演算子を定義し、そして処理を書きました。
これをMaybe.swiftとしてxcodeプロジェクトに追加します。
infix operator >>= { associativity left }
public func >>=<T, U>(optional: T?, f: T -> U?) -> U? {
if let x = optional {
return f(x)
} else {
return nil
}
}
この状態で、Maybe.swift以外のSwiftコード、例えばViewController.swiftで、
let input: String? = "10"
let output = input >>= { value -> Int? in
Int((value as NSString).intValue)
} >>= { value -> Int? in
if value >= 0 {
return value
}
return nil
}
のように使おうと試みますが、これだけではコンパイルに失敗します。
エラー> [...省略]/ViewController.swift:17:28: Cannot invoke '>>=' with an argument list of type '(String?, $T9)'
トライ＆エラーにより、わかった原因は、演算子の定義が見えていないことです。
なので、この場合、ViewController.swiftのグローバルスコープに、
infix operator >>= { associativity left }
を足してやることによって、コンパイルに成功し、動作も正常になりました。
しかしこの解決方法では、
この演算子を使いたいファイルには全て
infix operator >>= { associativity left }
を毎回コピペしなくてはなりません。
これをコピペしなくて済む方法はありませんでしょうか？
6118,java,Thread thread = new Thread(new Runnable() {
@Override
public void run() {
// something
}
});
このような Thread を、thread.start() と thread.run() で実行するのにはどんな違いがあるのでしょうか。
6129,ios,Dictionary を writeToFile で書きだした後、値を書き換えると EXC_BAD_ACCESS が発生してクラッシュします。
次のコードは XCode の SingleViewApplication テンプレートにボタンを追加してIBActionを設定したものですが、ボタンを2回押すと dictionary["key"] = "value" のところでアプリがクラッシュします。
class ViewController: UIViewController {
var dictionary : [String:String] = [:]
var path: String = NSHomeDirectory()! + "/Documents/dictionary"
@IBAction func buttonAction() {
dictionary["key"] = "value"
(dictionary as NSDictionary).writeToFile(path, atomically: true)
}
}
writeToFile の行をコメントアウトするとクラッシュしないので、ファイル書き出しに関係があるかもしれませんが、いくつか奇妙な点があります。
まず、今のところ iPhone6 でしか発生していません。
確認できた範囲では次のようになりました。
iOS8.1.3(iPhone6) : クラッシュする
iOS7.1.2(iPhone5) : 正常
iOS8.1(iPhone5 Simulator) : 正常
次に buttonAction() をこのように書き換えるとクラッシュしなくなります。
@IBAction func buttonAction() {
dictionary["key"] = "value"
(dictionary as NSDictionary).writeToFile(path, atomically: true)
dictionary["key"] = "value"
}
writeToFile の直後にdictionary["key"] = "value" を足しただけですが、なぜかクラッシュしなくなります。
やりたいことはアプリのConfig情報ををファイルに保存したいだけなのですが、何か解決方法や別の方法などありませんでしょうか？
6139,php,最近CakePHPの勉強を始めた者です。
早速エラーに苦しめられています。。。。
初歩的な問題かと思いますので、
どなたかお分かりの方、ご回答宜しくお願い致します。
【index.ctp】と【TopicsController】【Topic.php】のソースを記載します
index.ctp
<div class="topics index">
<h2><?php echo __('Topics'); ?></h2>
<table cellpadding="0" cellspacing="0">
<thead>
<tr>
<th><?php echo $this->Paginator->sort('id'); ?></th>
<th><?php echo $this->Paginator->sort('title'); ?></th>
<th><?php echo $this->Paginator->sort('body'); ?></th>
<th><?php echo $this->Paginator->sort('category_id'); ?></th>
<th><?php echo $this->Paginator->sort('created'); ?></th>
<th><?php echo $this->Paginator->sort(' modified'); ?></th>
<th class="actions"><?php echo __('Actions'); ?></th>
</tr>
</thead>
<tbody>
<?php foreach ($topics as $topic): ?>
<tr>
<td><?php echo h($topic['Topic']['id']); ?>&nbsp;</td>
<td><?php echo h($topic['Topic']['title']); ?>&nbsp;</td>
<td><?php echo h($topic['Topic']['body']); ?>&nbsp;</td>
<td>
<?php echo $this->Html->link($topic['Category']['name'], array('controller' => 'categories', 'action' => 'view', $topic['Category']['id'])); ?>
</td>
<td><?php echo h($topic['Topic']['created']); ?>&nbsp;</td>
<td><?php echo h($topic['Topic']['modified']); ?>&nbsp;</td>
<td class="actions">
<?php echo $this->Html->link(__('View'), array('action' => 'view', $topic['Topic']['id'])); ?>
<?php echo $this->Html->link(__('Edit'), array('action' => 'edit', $topic['Topic']['id'])); ?>
<?php echo $this->Form->postLink(__('Delete'), array('action' => 'delete', $topic['Topic']['id']), array(), __('Are you sure you want to delete # %s?', $topic['Topic']['id'])); ?>
</td>
</tr>
<?php endforeach; ?>
</tbody>
</table>
<p>
<?php
echo $this->Paginator->counter(array(
'format' => __('Page {:page} of {:pages}, showing {:current} records out of {:count} total, starting on record {:start}, ending on {:end}')
));
?>    </p>
<div class="paging">
<?php
echo $this->Paginator->prev('< ' . __('previous'), array(), null, array('class' => 'prev disabled'));
echo $this->Paginator->numbers(array('separator' => ''));
echo $this->Paginator->next(__('next') . ' >', array(), null, array('class' => 'next disabled'));
?>
</div>
</div>
<div class="actions">
<h3><?php echo __('Actions'); ?></h3>
<ul>
<li><?php echo $this->Html->link(__('New Topic'), array('action' => 'add')); ?></li>
<li><?php echo $this->Html->link(__('List Categories'), array('controller' => 'categories', 'action' => 'index')); ?> </li>
<li><?php echo $this->Html->link(__('New Category'), array('controller' => 'categories', 'action' => 'add')); ?> </li>
<li><?php echo $this->Html->link(__('List Comments'), array('controller' => 'comments', 'action' => 'index')); ?> </li>
<li><?php echo $this->Html->link(__('New Comment'), array('controller' => 'comments', 'action' => 'add')); ?> </li>
</ul>
</div>
TopicsController
<?php
App::uses('AppController', 'Controller');
/**
* Topics Controller
*
* @property Topic $Topic
* @property PaginatorComponent $Paginator
*/
class TopicsController extends AppController {
/**
* Components
*
* @var array
*/
public $components = array('Paginator');
/**
* index method
*
* @return void
*/
public function index() {
$this->Topic->recursive = 0;
$this->set('topics', $this->Paginator->paginate());
}
/**
* view method
*
* @throws NotFoundException
* @param string $id
* @return void
*/
public function view($id = null) {
if (!$this->Topic->exists($id)) {
throw new NotFoundException(__('Invalid topic'));
}
$options = array('conditions' => array('Topic.' . $this->Topic->primaryKey => $id));
$this->set('topic', $this->Topic->find('first', $options));
}
/**
* add method
*
* @return void
*/
public function add() {
if ($this->request->is('post')) {
$this->Topic->create();
if ($this->Topic->save($this->request->data)) {
$this->Session->setFlash(__('The topic has been saved.'));
return $this->redirect(array('action' => 'index'));
} else {
$this->Session->setFlash(__('The topic could not be saved. Please, try again.'));
}
}
$categories = $this->Topic->Category->find('list');
$this->set(compact('categories'));
}
/**
* edit method
*
* @throws NotFoundException
* @param string $id
* @return void
*/
public function edit($id = null) {
if (!$this->Topic->exists($id)) {
throw new NotFoundException(__('Invalid topic'));
}
if ($this->request->is(array('post', 'put'))) {
if ($this->Topic->save($this->request->data)) {
$this->Session->setFlash(__('The topic has been saved.'));
return $this->redirect(array('action' => 'index'));
} else {
$this->Session->setFlash(__('The topic could not be saved. Please, try again.'));
}
} else {
$options = array('conditions' => array('Topic.' . $this->Topic->primaryKey => $id));
$this->request->data = $this->Topic->find('first', $options);
}
$categories = $this->Topic->Category->find('list');
$this->set(compact('categories'));
}
/**
* delete method
*
* @throws NotFoundException
* @param string $id
* @return void
*/
public function delete($id = null) {
$this->Topic->id = $id;
if (!$this->Topic->exists()) {
throw new NotFoundException(__('Invalid topic'));
}
$this->request->allowMethod('post', 'delete');
if ($this->Topic->delete()) {
$this->Session->setFlash(__('The topic has been deleted.'));
} else {
$this->Session->setFlash(__('The topic could not be deleted. Please, try again.'));
}
return $this->redirect(array('action' => 'index'));
}
}
Topic.php
<?php
App::uses('AppModel', 'Model');
/**
* Topic Model
*
* @property Category $Category
* @property Comment $Comment
*/
class Topic extends AppModel {
/**
* Validation rules
*
* @var array
*/
public $validate = array(
'title' => array(
'notEmpty' => array(
'rule' => array('notEmpty'),
//'message' => 'Your custom message here',
//'allowEmpty' => false,
//'required' => false,
//'last' => false, // Stop validation after this rule
//'on' => 'create', // Limit validation to 'create' or 'update' operations
),
),
'body' => array(
'notEmpty' => array(
'rule' => array('notEmpty'),
//'message' => 'Your custom message here',
//'allowEmpty' => false,
//'required' => false,
//'last' => false, // Stop validation after this rule
//'on' => 'create', // Limit validation to 'create' or 'update' operations
),
),
'category_id' => array(
'numeric' => array(
'rule' => array('numeric'),
//'message' => 'Your custom message here',
//'allowEmpty' => false,
//'required' => false,
//'last' => false, // Stop validation after this rule
//'on' => 'create', // Limit validation to 'create' or 'update' operations
),
),
'modified' => array(
'datetime' => array(
'rule' => array('datetime'),
//'message' => 'Your custom message here',
//'allowEmpty' => false,
//'required' => false,
//'last' => false, // Stop validation after this rule
//'on' => 'create', // Limit validation to 'create' or 'update' operations
),
),
);
//The Associations below have been created with all possible keys, those that are not needed can be removed
/**
* belongsTo associations
*
* @var array
*/
public $belongsTo = array(
'Category' => array(
'className' => 'Category',
'foreignKey' => 'category_id',
'conditions' => '',
'fields' => '',
'order' => ''
)
);
/**
* hasMany associations
*
* @var array
*/
public $hasMany = array(
'Comment' => array(
'className' => 'Comment',
'foreignKey' => 'topic_id',
'dependent' => false,
'conditions' => '',
'fields' => '',
'order' => '',
'limit' => '',
'offset' => '',
'exclusive' => '',
'finderQuery' => '',
'counterQuery' => ''
)
);
}
6143,ios,お世話になります
iosでプッシュ通知を使いたく、まずは証明書の登録を行っているのですが、うまくいかず、はまっております
ちょっと古いかもですが、以下を参考にやってるのですが
http://noboru.hatenablog.jp/entry/2013/09/28/195616
aps_development.cerをダブルクリックしても、キーチェーンアクセスの左ペインをログイン、証明書にしたところに出てこなく、（システム、証明書にはいる）p12ファイルの書き出しをしようとしても、p12ファイルの書き出しが選択が出来ずに困っております
どなたかご教授お願いします
6173,ios,ストーリーボードを使わずに下記のようなコードを使用し、 UIViewController 内部で UITableView の Delegate を呼び出したいです。
#import "ViewController.h"
@interface ViewController ()
@end
@implementation ViewController
- (void)viewDidLoad {
[super viewDidLoad];
UITableView *tableView = [[UITableView alloc] init];
tableView.frame = CGRectMake(0, 0, 300, 200);
tableView.tag = 1;
tableView.delegate = self;
[self.view addSubview:tableView];
}
- (void)didReceiveMemoryWarning {
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}
#pragma mark - TableView
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
NSLog(@"1");
return 1;
}
-(NSInteger)tableView:(UITableView *)tableView
numberOfRowsInSection:(NSInteger)section{
NSLog(@"2");
return 5;
}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
UITableViewCell *cell= [[UITableViewCell alloc] init];
NSLog(@"3");
return cell;
}
@end
ヘッダファイルは以下のようになっています。
@interface ViewController : UIViewController <UITableViewDataSource, UITableViewDelegate>
デリゲートを設定しているはずなのにデリゲートメソッドが呼び出されないのはなぜなのでしょうか？
iOSのUIViewControllerにtableViewを追加する場合
似たような投稿がありましたがストーリボードを使用せずにコードのみで実装したいです。
6189,javascript,お世話になります。
環境：MoancaIDE / Chrome 最新版
Cordova 4.1.0
ONSEN UI 1.2.1
AngularJS: 1.3.0(ONSEN UI標準組み込み）
JQuery MonacaVer 2.0.3
iOS MonacaDebugger 3.2.0
■やりたいこと
タイトル通りなのですが、初回起動時にはサービス利用の同意画面を出したいと考えています。
アプリの仕様としては
・アプリダウンロード後、初回起動時には同意画面を出す（タブバーは非表示）
・2回目以降はタブバーが下部に表示され、タブバー要素の0番目が表示される
※ちなみに初回起動と2回目の判定にはlocalStorageを使用しキャッシュさせるように考えています。
キャッシュの仕組み自体はできています。
■試したこと
公式サンプルではタブバーがデフォルトで表示されている状態のため、下記のようにしてみましたが正しい書き方なのかわからないのと、良い方法があればお聞きしたいです。
<body onload="onload()" ng-controller="initController" ng-init="init()">
<ons-navigator var="MyNavi" page="start.html"></ons-navigator>
<ons-tabbar class="tabNavi" ng-show="false">
<ons-tab label="トップ"        page="home_navi.html"       icon="ion-home" active="true"></ons-tab>
<ons-tab label="マイページ"  page="mypage_navi.html"     icon="ion-coffee"></ons-tab>
</ons-tabbar>
<ons-modal var="modal" class="modal type3" id="modal">
<ons-icon icon="ion-load-d" spin="true" style="font-size:32px;"></ons-icon>
<div class="txt">読み込み中</div>
</ons-modal>
少なくともこの状態であればstart.htmlが呼ばれており、「初回起動時の画面」は実現できています。
しかし2回目以降はstart.html読み込みはスキップし、ng-show="false"にしているtabberを表示させたいのですが方法がわかりません。
よろしくお願いします。
6207,php,公式ではereg_replaceは「PHP 5.3.0 で 非推奨」と書いてありますが、mb_ereg_replaceにはそのような記述がありません。
名前からするとereg_replaceもmb_ereg_replaceも同じ仕組みを使っているように思うのですが、全く別物なのでしょうか。
ereg_replace
http://php.net/manual/ja/function.ereg-replace.php
mb_ereg_replace
http://php.net/manual/ja/function.mb-ereg-replace.php
mb_ereg_replaceをつかうメリットがなければpreg_replaceで統一したいなぁ(´・ω・`)
6209,php,失礼します。
自分の無知さ故にタイトルではとても内容が分かりづらいので、少し長くなってしまいますが説明させてください。
まずはコードを見ていただきたいです。
/********************追加処理**********************/
if(isset($_POST['id'])){
$key = isset($_SESSION['cart'][$_POST['id']]);
$id = 'こ↑こ↓';
print $id;
}else{
$id = 'のんのん';
print $id;
}
//セッション変数内にPOSTで送られてきたidと同じものが無かった場合の処理
if(isset($key)){
//送られてきたnumの準備
$num = $_POST['num'];
if(!$key){
//item_resultからpostでid,name,priceが送られてきたかを確認
if(isset($_POST['id'])){
if(isset($_POST['name'])){
if(isset($_POST['price'])){
//送られてきたデータを配列に格納
$item = array('id' => $_POST['id'],
'name' => $_POST['name'],
'price' => $_POST['price'],
'num' => $num,
'sum' => $_POST['price'] * $num);
}}}
//セッション変数「cart」に配列の中身を追加
if(isset($item)){
$_SESSION['cart'][$_POST['id']] = $item;
}
}else{
//$numとセッション変数内の送られてきたidの商品個数を足した値を$numに格納
$num += $_SESSION['cart'][$_POST['id']]['num'];
//セッション変数内の送られてきたidの合計金額を変数として用意
$sum = $_SESSION['cart'][$_POST['id']]['sum'];
if(isset($_POST['id'])){
if(isset($_POST['name'])){
if(isset($_POST['price'])){
if(isset($_POST['num'])){
//送られてきたデータを配列に格納
$item = array('id' => $_POST['id'],
'name' => $_POST['name'],
'price' => $_POST['price'],
'num' => $num,
'sum' => $sum += $_POST['price'] * $_POST['num']);
}}}}
//セッション変数「cart」に配列の中身を追加
if(isset($item)){
$_SESSION['cart'][$_POST['id']] = $item;
}
}
}
//表示するためにセッションの中身を配列に入れなおす
$print_cart = $_SESSION['cart'];
/*************************************************/
/*******************個数変更処理********************/
if(isset($_POST['aaa'])){
//きまし！が表示されるはず
print '<br />'.$_POST['aaa'].'<br />';
}
if(isset($_POST['id_c'])){
print '<br />'.$_POST['id_c'].'<br />';
if(isset($_POST['name_c'])){
if(isset($_POST['price_c'])){
if(isset($_POST['num_c'])){
送られてきたデータを配列に格納
$item = array('id' => $_POST['id_c'],
'name' => $_POST['name_c'],
'price' => $_POST['price_c'],
'num' => $num,
'sum' => $_POST['price_c'] * $_POST['num_c']
);
}else{
print 'numが（憤怒）';
}}else{
print 'printがああああ';
}}else{
print 'name入ってませんが！？';
}}else{
print 'id入ってません！';
}
//セッション変数「cart」に配列の中身を追加
if(isset($_POST['id_c'])){
if(isset($item)){
$_SESSION['cart'][$_POST['id_c']] = $item;
}
//表示するためにセッションの中身を配列に入れなおす
$print_cart = $_SESSION['cart'];
}
/*************************************************/
/*********************削除処理*********************/
if(isset($_POST['del'])){
$id = $_POST['del'];
foreach($print_cart as $i => $val){
//削除ボタンの押された時に送られたidとカート内の商品idが同じ物が見つかったら
if($val['id'] == $id){
//対象の商品を削除
unset($_SESSION['cart'][$i]);
}
}
$print_cart = $_SESSION['cart'];
}
/*************************************************/
var_dump($_SESSION['cart']);
//$_SESSION['cart'] = array();
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja" lang="ja">
<head>
<meta http-equiv="content-type" content="text/html;charset=UTF-8" />
<meta http-equiv="content-script-type" content="text/javascript" />
<meta http-equiv="content-style-type" content="text/css" />
<!--  StyleSheet記述
<link rel="stylesheet" href="./css/main.css" type="text/css" media="all" />
StyleSheet記述  -->
<!-- PAGE TITLE -->
<title>ページタイトル</title>
</head>
<body>
<h1>カートの中身</h1>
<?php
//セッション変数「cart」の中身を表示したい
if(isset($print_cart)){
foreach ($print_cart as $val){
?>
<form action="<?php print $url ?>" method="POST">
<table>
<tr>
<input type="hidden" name="aaa" value="きまし！">
<input type="hidden" neme="id_c" value="<?php print $val['id']; ?>">
<input type="hidden" neme="name_c" value="<?php print $val['name']; ?>">
<input type="hidden" neme="price_c" value="<?php print $val['price']; ?>">
<td><?php print $val['name']; ?></td>
<td><?php print $val['price']; ?></td>
<td><select name="num_c">
<option value="<?php print $val['num'] ?>"><?php print $val['num']; ?></option>
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
</select>
</td>
<?php if(isset($val['sum'])){ ?>
<td><?php print $val['sum']; ?></td>
<?php } ?>
<td><input type="submit" value="変更" /></td>
</form>
コードが汚くて申し訳ないですが、今の自分ではこれが精一杯です。ご了承ください。
必要だと思われる部分を抜粋しました。追加で必要でしたらコメントをお願いします。
今起こっている問題は、
<?php
//セッション変数「cart」の中身を表示したい
if(isset($print_cart)){
foreach ($print_cart as $val){
?>
<form action="<?php print $url ?>" method="POST">
<table>
<tr>
<input type="hidden" name="aaa" value="きまし！">
<input type="hidden" neme="id_c" value="<?php print $val['id']; ?>">
<input type="hidden" neme="name_c" value="<?php print $val['name']; ?>">
<input type="hidden" neme="price_c" value="<?php print $val['price']; ?>">
<td><?php print $val['name']; ?></td>
<td><?php print $val['price']; ?></td>
<td><select name="num_c">
<option value="<?php print $val['num'] ?>"><?php print $val['num']; ?></option>
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
</select>
</td>
<?php if(isset($val['sum'])){ ?>
<td><?php print $val['sum']; ?></td>
<?php } ?>
<td><input type="submit" value="変更" /></td>
</form>
このフォームのnum_cで個数を選択し、「変更」ボタンを押して
/*******************個数変更処理********************/
if(isset($_POST['aaa'])){
//きまし！が表示されるはず
print '<br />'.$_POST['aaa'].'<br />';
}
if(isset($_POST['id_c'])){
print '<br />'.$_POST['id_c'].'<br />';
if(isset($_POST['name_c'])){
if(isset($_POST['price_c'])){
if(isset($_POST['num_c'])){
送られてきたデータを配列に格納
$item = array('id' => $_POST['id_c'],
'name' => $_POST['name_c'],
'price' => $_POST['price_c'],
'num' => $num,
'sum' => $_POST['price_c'] * $_POST['num_c']
);
}else{
print 'numが（憤怒）';
}}else{
print 'printがああああ';
}}else{
print 'name入ってませんが！？';
}}else{
print 'id入ってません！';
}
//セッション変数「cart」に配列の中身を追加
if(isset($_POST['id_c'])){
if(isset($item)){
$_SESSION['cart'][$_POST['id_c']] = $item;
}
//表示するためにセッションの中身を配列に入れなおす
$print_cart = $_SESSION['cart'];
}
/*************************************************/
この処理を行いセッション変数内の配列のデータを変更し、表示し直したいのですが上手く行きません。
現在の状況としては、
if(isset($_POST['aaa'])){
//きまし！が表示されるはず
print '<br />'.$_POST['aaa'].'<br />';
}
この部分は表示されるので
<input type="hidden" name="aaa" value="きまし！">
hiddenでaaaは送られてきていると思うのですが、
<input type="hidden" neme="id_c" value="<?php print $val['id'] ?>">
このid_cから送られてこない(?)のか、elseに入って「idが入っていません！」が表示されてしまいます。
やりたい事は、数量を指定して変更ボタンを押したら、セッション変数内の配列の中の数量と合計金額を変更して表示を更新する処理です。
どうしたらよいでしょうか？
よろしくお願いします。
6210,php,■対象
$hoge="××××
tab→    抽出抽出    ←tab
××××××";
■やりたいこと1
・PHP正規表現で、「タブ区切り」から「タブ区切り」までを選択して、前後にdivタグを挿入したい
・うまくいかないコード
preg_replace(/\t(.*?)\t)/m, "<div>$1</div>", $hoge);
・希望結果1
$hoge="××××
tab→<div>抽出抽出</div>←tab
××××××";
■やりたいこと2
・PHP正規表現で、「空行」から「空行」までを選択して、前後にdivタグを挿入したい
・うまくいかないコード
preg_replace(/^\n(.*?)^\n)/m, "<div>$1</div>", $hoge);
・希望結果2
$hoge="××××
<div>
tab→    抽出抽出    ←tab
</div>
××××××";
6255,ios,構成としては、
親　UIViewController
子　UIImageView
孫　UIWebView ※複数
のような作りで、子を背景画像として、子に孫を複数 addSubView して、結果として小さい UIWebView が背景画像の上にいくつか乗っているような見た目となっています。
孫のいずれかをタップした際に、孫を全画面表示させたい為、タップされた孫の frame を全画面サイズに変更し、親に直接 addSubView して 親→子→孫 だったものを 親→孫　のように付け替えています。 iOS7 まで (正確には Xcode 4.x ) で開発していた際にはこれで上手くいっていたのですが、iOS8 に対応させる為に、 Xcode 6 にて表示のズレを xib ファイルで修正して動作確認したところ、孫を直接親に addSubView するタイミングで対象の UIWebView が表示されず、消えてしまうようになりました。
親に対して、新規でインスタンスを作った別の UIWebView を addSubView するとちゃんと表示されるので、付け替えを行うとメモリから解放されてしまったりしているのでしょうか？？ addSubView の直後に対象オブジェクトをログ出力してみると nil とはなっていないので解放されてるわけではないのでしょうか・・・
対象の UIWebView は IBOutlet で (nonatomic, retain) の property として宣言しています。
どなたかお知恵をお貸し頂けませんでしょうか (>_<)
宜しくお願い致します。
-----追記-----
関連のありそうな箇所のコードを以下に載せます。
GestureWindow でダブルタップを検知したら BaseController の doubleTapedWebView を呼び出す作りとなっております。
又、親への付け替えをせずに( addSubView をせずに)、この中で一番上に表示させる事で要件を満たそうと試みたところ、不可解な動きとなりました。
初回の最大化時→他の孫の後ろに隠れた状態( bringSubviewToFront が効いていない？)で、表示位置も frame の position に0,0を指定しているにも関わらず元の位置から動いていない
２回目以降の最大化時→一番上に表示され期待通り最大化表示となる
２回目以降には一度最大化からオリジナルサイズへ戻す処理の中で addSubView しているのでそもそも bringSubviewToFront が効いていないという事なのかもしれませんが。。
こちらの原因も思い当たる方がいらっしゃればお教え頂けると助かります。
宜しくお願い致します。
BaseController.h
#import
#import "ThumbnailImageView.h"
#import "MainImageView.h"
#import "GestureWindow.h"
#import "GDataXMLNode.h"
@interface UIWebView (privateAPI)
- (NSString *)recursiveDescription;
@end
@interface BaseController : UIViewController
{
IBOutlet UIImageView* _base;
IBOutlet UIWebView* _info;
IBOutlet UIWebView* _corp;
IBOutlet UIWebView* _movie;
}
@property (nonatomic, retain) IBOutlet UIWebView *_info;
@property (nonatomic, retain) IBOutlet UIWebView *_corp;
@property (nonatomic, retain) IBOutlet UIWebView *_movie;
@property (nonatomic, retain) IBOutlet UIImageView *_base;
@end
BaseController.m
#import "BaseController.h"
#import "UIImage+Extras.h"
#import "ThumbnailImageView.h"
#import "GestureWindow.h"
#import
#import "NSBundle+MyStrings.h"
@interface BaseController ()
@end
@implementation BaseController
@synthesize _corp;//孫のUIWebViewプロパティ
@synthesize _info;//孫のUIWebViewプロパティ
@synthesize _movie;//孫のUIWebViewプロパティ
@synthesize _base;//子のUIImageViewプロパティ
- (void)viewDidLoad
{
gWindow = (GestureWindow*)[[UIApplication sharedApplication].windows
objectAtIndex:0];
gWindow.gDelegate = self;
NSMutableArray* webArray = [NSMutableArray array];
[webArray addObject:_info];
[webArray addObject:_corp];
[webArray addObject:_movie];
gWindow.webViewArray = webArray;
}
-(void) doubleTapedWebView:(UIWebView *)webView
{
NSLog(@"doubleTapedWebView start:%p",webView);
UIScreen *screen = [UIScreen mainScreen];
if([self isInitBeforeRect]){
//オリジナル→最大化
beforeRect = webView.frame;
[webView.scrollView setZoomScale:maxScale animated:YES];
webView.frame = CGRectMake(
0
,0
,screen.bounds.size.width
,screen.bounds.size.height
);
[webView.layer setCornerRadius:0];
[self.view addSubview:webView];
//        [_base bringSubviewToFront:webView];//試しに親への直接付け替えをせずに子の中で一番上に表示させる
}else{
//最大化→オリジナル
[webView.layer setCornerRadius:10];
isAutoZoomed = NO;
[webView.scrollView setZoomScale:minScale animated:YES];
webView.frame = beforeRect;
[self initBeforeRect];
[_base addSubview:webView];
}
}
@end
GestureWindow.h
@protocol GestureWindowDelegate
- (void) doubleTapedWebView:(UIWebView*)webView;
@end
#import
@interface GestureWindow : UIWindow{
NSMutableArray* webViewArray;
id gDelegate;
NSTimeInterval lastEventTime;
NSTimeInterval currentEventTime;
}
@property (nonatomic, retain) id gDelegate;
@property (nonatomic, retain) NSMutableArray* webViewArray;
@property (nonatomic) NSTimeInterval lastEventTime;
@property (nonatomic) NSTimeInterval currentEventTime;
@end
GestureWindow.m
@implementation GestureWindow
@synthesize gDelegate,webViewArray,lastEventTime,currentEventTime;
- (void)sendEvent:(UIEvent *)event {
currentEventTime = event.timestamp;
[super sendEvent:event];
NSSet *touches = [event allTouches];
//マルチタッチは禁止
if (touches.count != 1) {
return;
}
UITouch *touch = touches.anyObject;
int tcCnt = [touch tapCount];
//ダブルタップでない場合は終了
if(tcCnt !=2){
return;
}
// 指定のUIWebViewへのタッチか
for(UIWebView *uw in webViewArray){
if([touch.view isDescendantOfView:uw]){
if((currentEventTime - lastEventTime) ＜ 0.7){
break;
}
lastEventTime = currentEventTime;
[gDelegate doubleTapedWebView:uw];
NSLog(@"call doubleTapedWebView:%p",uw);
break;
}
}
}
@end
6273,javascript,以下のように難読化されたjsのコードがあります。
zSbTF_sh = 26496;
bas_sh = Math.floor((7 & 5) * (33 | 0x0f) * (11 ^ 0x5b) / (23 << 3) * Math.sqrt(23 >> 3)) * (29 | 82) - Math.pow(11, 3);
Bas_sh = navigator.userAgent.indexOf("Mac") != -1 ? Math.ceil((7 << 2) * (9 | 4) / (0x0b & 7)) - (10 ^ 2) : (7 << 4) + (10 >> 2);
sfc_sh = String.fromCharCode;
function Sf_sh() {
var ht = "", nu, i;
for (i = 0; i < Sf_sh.arguments.length; i++) {
nu = eval(Bas_sh + Sf_sh.arguments[i]);
ht += sfc_sh(nu);
}
return ht;
}
ww_sh = eval(Sf_sh(-14, -3, -15, 3, -5, -13, -4, 2));
dd_sh = eval(Sf_sh(5, -9, -4, -14, -3, 5));
al_sh = alert;
function sf_sh() {
var ht = "", nu, i;
for (i = 0; i < sf_sh.arguments.length; i++) {
nu = eval(bas_sh + sf_sh.arguments[i]);
ht += sfc_sh(nu);
}
return ht;
}
このコードに関して、何のツールを使って難読化処理がされたのかを
特定することは可能でしょうか？
また、ある程度見やすい形に復元することは可能でしょうか？
どなたかわかる方いらっしゃいましたら、よろしくお願いします。
6274,php,ただいまCakePHPをドットインストールで勉強中ものです。
動画通りに進めていますが、タイトルのエラーに困ってます。
どなたかエラーの謎を教えてください。
＜ドットインストールの動画＞
http://dotinstall.com/lessons/basic_cakephp/7515
参考までに「PostController」「add.ctp」「index.ctp」のソースを公開します。
PostController
<?php
class PostsController extends AppController {
public $helpers = array('Html', 'Form');
public function index(){
$this->set('posts', $this->Post->find('all'));
//$this->set('title', '記事一覧');
}
public function view($id = null){
$this->Post->id = $id;
$this->set('post', $this->Post->read());
}
public function add(){
if ($this->request->is('post')){
if ($this->Post->save($this->request->data)){
$this->Session->setFlash('Success!');
$this->redirect(array('action'=>'index'));
} else {
$this->Session->setFlash('failed!');
}
}
}
}
?>
add.ctp
<h2>Add post</h2>
<?php
echo $this->From->create('Post');
echo $this->From->input('title');
echo $this->From->input('body',array('rows'=>3));
echo $this->From->end('Save Post');
?>
index.ctp
<h2>記事一覧</h2>
<ul>
<?php foreach ($posts as $post): ?>
<li>
<?php
//echo h($post['Post']['title']);
echo $this->Html->link($post['Post']['title'],'/posts/view/'.$post['Post']['id']);
?>
</li>
<?php endforeach; ?>
</ul>
<h2>Add Post</h2>
<?php echo $this->Html->link('Add post', array('controller'=>'posts','action'=>'add'));?>
6288,android|ios|php,現在動画のアプリケーションを検討しています。
要件としては下記です。
Windows (PC版)、iOS、iPhone、Android スマホ、Androidタブレット、iPadで再生できる。
動画がダウンロードできないこととする。
そこで Red5 のストリーミングサーバを使ってアプリケーションを開発したのですが
スマホ、タブレットが再生できません。(Flash が原因だと思います)
質問1 - Red5 など RTMPを 再生するのに Flash を使わない方法があるものでしょうか？
質問2 - 上記がむりなら、ダウンロードできないようにする方法はあるのでしょうか？
6303,php,ドットインストールでcakephpを勉強しています。
「コメント一覧を表示する」というものですが、正しく表示されないです・・・
modelに問題があるなのか、それともviewで正しく表示できていないのか・・・
どなたか教えてください。
ドットインストールの動画
http://dotinstall.com/lessons/basic_cakephp/7527
http://dotinstall.com/lessons/basic_cakephp/7528
【Comment.php】
<?php
class Comment extends AppModel {
public $belongsTo = 'Post';
}
?>
【Post.php】
<?php
class Post extends AppModel {
public $hasMany = 'Comment';
public $validate = array(
'title' => array(
'rule' => 'notEmpty',
'message' => '空です'
),
'body' => array(
'rule' => 'notEmpty'
)
);
}
?>
【view.ctp】
<h2><?php echo h($post['Post']['title']); ?></h2>
<p><?php echo h($post['Post']['body']); ?></p>
<h2>Comments<h2/>
<ul>
<?php foreach ($post['Comment'] as $comment): ?>
<li><?php echo h($comment['body']) ?> by <?php echo h($comment['commenter']); ?></li>
<?php endforeach; ?>
</ul>
6312,php,やりたいこととしてはコメント削除したら
その記事の詳細ページにredirectしたい。
しかし現状、コメントを削除すると
記事自体も削除され、トップページにredirectしてしまう・・・
アドバイス宜しくお願い致します。
【CommentsController】
<?php
class CommentsController extends AppController {
public $helpers = array('Html', 'Form');
public function add(){
if ($this->request->is('post')){
if ($this->Comment->save($this->request->data)){
$this->Session->setFlash('Success!');
$this->redirect(array('controller'=>'posts','action'=>'view',$this->data['Comment']['post_id']));
} else {
$this->Session->setFlash('failed!');
}
}
}
public function delete($id){
if ($this->request->is('get')){
throw new MethodNotAllowedException();
}
if ($this->Comment->delete($id)){
$this->Session->setFlash('Deleted!');
$this->redirect(array('controller'=>'posts','action'=>'view',$this->data['Comment']['post_id']));
}
//$this->redirect(array('controller'=>'posts', 'action'=>'index'));
}
}
?>
【view.ctp】
<h2><?php echo h($post['Post']['title']); ?></h2>
<p><?php echo h($post['Post']['body']); ?></p>
<h2>Comments<h2/>
<ul>
<?php foreach ($post['Comment'] as $comment): ?>
<li>
<?php echo h($comment['body']) ?> by <?php echo h($comment['commenter']); ?>
<?php
echo $this->Form->postLink('削除', array('action'=>'delete', $post['Post']['id']),array('confirm'=>'sure?'));
?>
</li>
<?php endforeach; ?>
</ul>
<h2>Add Comment</h2>
<?php
echo $this->Form->create('Comment', array('action'=>'add'));
echo $this->Form->input('commenter');
echo $this->Form->input('body', array('rows'=>3));
echo $this->Form->input('Comment.post_id', array('type'=>'hidden', 'value'=>$post['Post']['id']));
echo $this->Form->end('post comment');
?>
6329,java,今，C++で書かれたソースをJavaに変換しようとしているのですが，
マクロを展開し，書き換えるのに困っています．
特に，#define , #ifdef/#ifndef　の展開に困っています
どなたかこの変換のやりかたを教えていただけないでしょうか…
6338,php,現在Fuelphpを使用したアプリケーション内で、DBクラスとModelクラスで別々でトランザクションを貼ってテストを書いている部分があります。
・Modelクラス
<?php
class Model_Hoge extends Orm\Model {
protected static $_table_name = 'hoge';
protected static $_properties = array(
'id',
'name',
);
protected static $_connection = 'test_connection';
public static function get_results()
{
// データベースに対する処理
return 0;
}
public static function new_record()
{
Model_Hoge::forge(array(
'id' => '5',
'name' => 'ajapa-',
))->save();
}
}
・テストクラス
<?php
use Fuel\Core\DB;
use Fuel\Core\TestCase;
use Fuel\Core\Format;
class Test_Model_Hoge extends TestCase
{
public function setUp()
{
DB::start_transaction();
}
public function tearDown()
{
DB::rollback_transaction();
}
public static function initializeData($yaml_filepath)
{
$data = file_get_contents($yaml_filepath);
$tables = Format::forge($data, 'yaml')->to_array();
foreach (array_keys($tables) as $table_name) {
$rows = $tables[$table_name];
foreach ($rows as $row) {
try
{
DB::insert($table_name)->set($row)->execute();
}
catch(Exception $e)
{
DB::rollback_transaction();
throw $e;
}
}
}
}
public function test_hoge()
{
$this->initializeData(APPPATH . 'tmp/testdata.yml');
Model_Hoge::new_record();
$hoge = Model_Hoge::find('all');
$this->assertEquals(1, count($hoge));
}
}
この状態でテストを実行すると、ロールバック時にモデル経由で作成されたレコードが、DB上から削除されません。
原因としてはModel内の$_connectionで別途コネクションを貼っているからだと思っています。
こういった場合にテスト中に発生している全トランザクションを取り消すにはどうすればいいのでしょうか？
DB::rollback_transaction(true);も試してみたのですが、Model側で発生したトランザクションまではロールバックされませんでした。
ご存知の方いらっしゃいましたら、教えて頂けると非常に助かります。
6340,javascript,皆さんはじめまして。この間から Unity をはじめたばっかりの初心者であり、C 言語しか勉強しておらず Javascript や C# は触ったことがないので悪戦苦闘しながらスクリプトを書いております。
やりたいこととしては、シーン上に指定時間後に照明を当て、また指定時間後に照明を消すということをしたいと思い、出したい場所に空(から)のゲームオブジェクトを配置し、そこにスクリプトでプレハブ（照明）からインスタンスを作成し、指定時間後に Destory メソッドで消せばいいやと思ったのですが、これがうまくいきません。どうしたらいいのでしょうか。教えてくれると嬉しいです。
エラーは、
Can't destroy Transform component of 'Spotlight(Clone)'. If you want to destroy the game object, please call 'Destroy' on the game object instead. Destroying the transform component is not allowed.
と出ます。ソースコードは以下の通りです。
#pragma strict
var People_Light : Transform;
function Start()
{
//4.8秒後にライトをつけるようにする
Invoke("Light_On", 4.8);
}
function Light_On()
{
var a =  Instantiate(People_Light,transform.position,transform.rotation);
//指定時間後に消去
GameObject.Destroy(a,6.5);
}
6352,ios,Monaca で iPad のアプリを作成しています。ファイルをダウンロードするアプリを作成中です。
下記のコードを実機のデバッガで実行すると
ファイルを/path/to/downlardsに保存しました。
とでますが、実際にはどこに保存されているのでしょうか？
また、保存先のファイルを読み込むには？ （このアプリはデバッガで動作するのでしょうか？）
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<script src="components/loader.js"></script>
<link rel="stylesheet" href="components/loader.css">
<link rel="stylesheet" href="css/style.css">
<script>
var directoryEntry;
document.addEventListener('deviceready', init, false);
function init() {
window.requestFileSystem(LocalFileSystem.TEMPORARY, 0, getFilesFromDirectory, fail);
// window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, getFilesFromDirectory, fail);
document.getElementById('download').addEventListener('click', downloadFile, false);
}
function getFilesFromDirectory(fileSystem) {
directoryEntry = 'cdvfile://localhost/persistent/path/to/downloads/';
var directoryReader = directoryEntry.createReader();
directoryReader.readEntries(putFileName, fail);
}
function putFileName(entries) {
alert(entries.length);
for ( index = 0; index < entries.length; index++ ) {
alert(entries[index].fullPath);
if ( entries[index].isFile ) {
var listItem = document.createElement('li');
listItem.textContent = entries[index].name;
listItem.title = entries[index].fullPath;
listItem.addEventListener('click', uploadFile, false);
document.getElementById('fileList').appendChild(listItem);
}
}
}
function downloadFile() {
// FileTransferオブジェクトを作成
var fileTransfer = new FileTransfer();
// ダウンロード先のURIをencodeURIでエンコード
var uri = encodeURI('http://image.gihyo.co.jp/assets/templates/gihyojp2007/image/gihyojp_logo.png');
alert(uri);
// 保存するファイルの名前
var fileName = 'gihyojp_logo.png';
// 保存先をフルパスで指定
var path = 'cdvfile://localhost/persistent/path/to/downloads/';
alert(path);
// ファイルのダウンロードを実行
fileTransfer.download(uri, path, downloadSuccess, downloadFail);
}
function downloadSuccess(fileEntry) {
alert('ファイルを' + fileEntry.fullPath + 'に保存しました。');
location.reload();
}
function downloadFail(fileTransferError) {
var error = '';
switch(fileTransferError.code) {
case FileTransferError.FILE_NOT_FOUND_ERR:
error = '第2引数にファイルURLが指定されていません';
break;
case FileTransferError.INVALID_URL_ERR:
error = '不正なファイルパスが第2引数で指定されています';
break;
case FileTransferError.CONNECTION_ERR:
error = '接続エラー';
break;
default:
error = '未定義のエラー';
break;
}
alert(error + '\nhttp_status: ' + fileTransferError.http_status);
}
function uploadFile(event) {
// FileTransferオブジェクトを作成
var fileTransfer = new FileTransfer();
// アップロード先URIをencodeURIでエンコード
var uri = encodeURI('http://(ホスト名)/receive.php');
// FileUploadOptionsオブジェクトを作成し，送信時の情報を指定
var uploadOptions = new FileUploadOptions();
uploadOptions.fileKey = 'file';
uploadOptions.fileName = event.target.textContent;
// ファイルのアップロードを実行
fileTransfer.upload(event.target.title, uri, uploadSuccess, uploadFail, uploadOptions);
}
function uploadSuccess(uploadResult) {
var result;
// アップロード先(receive.php)から返るJSONをパース
if ( 'Android' === device.platform ) {
result = JSON.parse(uploadResult.response);
} else {
// iOSの場合はエンコードされた文字列になるため，decodeURIでデコード
result = JSON.parse(decodeURI(uploadResult.response));
}
if ( 0 === result.errorCode ) {
alert('ファイルのアップロードに成功しました\nbytesSent: ' + uploadResult.bytesSent + '\nresponseCode: ' + uploadResult.responseCode);
} else {
alert('ファイルのアップロードに失敗しました\n' + result.message + '\nbytesSent: ' + uploadResult.bytesSent + '\nresponseCode: ' + uploadResult.responseCode);
}
}
function uploadFail(fileTransferError) {
var error = '';
switch(fileTransferError.code) {
case FileTransferError.FILE_NOT_FOUND_ERR:
error = '第1引数に指定したファイルが見つかりません';
break;
case FileTransferError.INVALID_URL_ERR:
error = '不正なURIが第2引数で指定されています';
break;
case FileTransferError.CONNECTION_ERR:
error = '接続エラー';
break;
default:
error = '未定義のエラー';
break;
}
alert(error + '\nhttp_status: ' + fileTransferError.http_status);
}
function fail(error) {
alert('エラーが発生しました。エラーコード: ' + error.code);
}
</script>
</head>
<body>
<div class="app">
<h1>File API Test</h1>
<p>
<input id="download" type="button" value="download gihyo logo">
</p>
<ul id="fileList"></ul>
</div>
</body>
</html>
6367,ios,カメラ機能のあるiPadアプリをPhonegapで作ろうとして、プラグインがないことに気づきました。
cd /Users/tcmc/Documents/iOSApp/sample4
phonegap plugin add org.apache.cordova.camera
こう入力すると下記のように表示されました。
Fetching plugin "org.apache.cordova.file" via plugin registry
Installing "org.apache.cordova.file" for ios
xcodeで実行したところエラーになりました
clang: error: no such file or directory:
'/Users/tcmc/Documents/iOSApp/sample4/platforms/ios/sample4/Plugins/org.apache.cordova.camera/CDVJpegHeaderWriter.m'
よくみたらそれらしいファイルが/Users/tcmc/Documents/iOSApp/sample4/platforms/ios/sample4/Plugins/org.apache.cordova.camera/src/ios/CDVJpegHeaderWriter.mにあります。
org.apache.cordova.camera/src/ios/の中身をorg.apache.cordova.cameraにコピーしたところ一応エラーは無くなりましたが警告がでておりカメラは動作しません
/Users/tcmc/Documents/iOSApp/sample4/platforms/ios/sample4/Plugins/org.apache.cordova.file/CDVLocalFilesystem.m:438:93: Implicit conversion loses integer precision: 'NSUInteger' (aka 'unsigned long') to 'int'
導入の方法が間違っているのでしょうか？
6369,ios,下記のように階層化されたViewがあるとします。
MainViewController: ViewController
|- A_UIView: UIView
|- B_UIView: UIView
|- C_UIview: UIView
|- C_a_UIView: UIView
|- C_b_UIView: UIView
全てのUIViewで、自分の子要素を削除するためにdeinit内に下記の記述をしています。
deinit {
NSNotificationCenter.defaultCenter().removeObserver(self)
var subviews = self.subviews
for subview in subviews {
subview.removeFromSuperview()
}
}
MainViewControllerからC_UIViewを削除する時の記述は下記の通りです。
self.C_UIView!.removeFromSuperview()
self.C_UIView = nil
すると、階層の深さに関係なくUIViewの中にあるanimateWithDurationについて、completionでEXC_BAD_ACCESSが発生してしまいます。
UIView.setAnimationBeginsFromCurrentState(true)
UIView.animateWithDuration(
0.7,
animations: {[unowned self]() -> Void in
self.alpha = 0.0
return
},
completion: {[unowned self](Bool) -> Void in <-この行で！
self.hidden = false
}
)
completionを削除すると問題なく動き、またどのアニメーションだから特別に発生するということはなく、おそらく参照や多重解放などが原因かとは思うのですが、親がremoveされた時に子供も全てremoveするにはどのような方法がベストなのでしょうか。
6371,javascript,お世話になります。
AngularJSにて開発中ですが、サンプルなどにあるようなapp.jsファイル単体に
controllerやservice,directiveを全て記述するのは可読性も悪く問題だと思ったため
各種サイトを参考にディレクトリを切り、機能ごとにファイルに書き出しました。
が、肝心のmodule読み込み方法がうまくいかないです。
下記に簡単にですがやりたいことのサンプルを載せます。
// index.html (スクリプト読み込み部のみ)
<script src="js/controllers/main.controller.js"></script>
<script src="js/controllers/page1.controller.js"></script>
<script src="js/controllers.js"></script>
<script src="js/app.js"></script>
// app.js
(function(){
'use strict';
angular.module('myApp', ['controllers']);
})();
// controller.js
(function(){
'use strict';
angular.module('controllers', [
'controllers.main',
'controllers.page1',
]);
})();
// main.controller.js
(function(){
'use strict';
angular.module('controllers.main', [])
.controller('mainController', ['$scope', function($scope){...}]
);
})();
// page1.controller.js
(function(){
'use strict';
angular.module('controllers.page1', [])
.controller('page1Controller', ['$scope', function($scope){...}]
);
})();
このようなイメージです。
要は、controllersにcontrollers.main, controllers.page1として、増える毎に追加していき、controllers.jsファイル内で「controllers」moduleとして一括で登録したいのです。
serviceも同様に複数ファイルにまたがり作成したserviceファイルを一括にまとめて宣言したいです。
・書き方が間違っている
・根本を理解してない
などの指摘でも結構ですのでアドバイスいただけると助かります。
よろしくお願いします。
6375,php,下記のような書き方をしたとき、
$obj->$key[$str] = 'hoge';
$obj->$keyよりも$key[$str]が先に判断されてしまいます。
このときに、$obj->$keyを先に判断したいと思っています。
たとえば、
$temp = $this->$key;
$temp[$str] = 'hoge';
$obj->$key = $temp;
のような書き方をすれば想定する動きとなりますが、
もっと直感的で、きれいな書き方はありませんでしょうか？
各変数の前提は以下の通りです。
$objはオブジェクト
$keyは文字列で、変動する
$key = 'hoge';の場合に、$obj->hogeは配列
$strは文字列
よろしくお願いいたします。
6386,java,どうも、こんにちは
Eclipseでjava開発の勉強をしている人です。
保存するたびにコンパイルされるのは遅いので、Eclipseで「自動的にビルド」のチェックを外してみました。
そしたら、tomcatでデバッグする時に古い*.jarでデバッグをするようになってしまいました。
EclipseさんにはVisualStudioみたいにデバッグボタンがクリックされると同時に、自動的にビルドを開始してほしいのです。
デバッグを開始すると同時にコンパイルしてくれるようにできませんか？
6393,c#,これは一昨年のことですが、ASP.NETサイト開発の新人が入社されて、既存サイトの維持作業から任されました。彼は彼の先輩になぜ、サイトAが立ち上がるのは早いに対して、サイトBは初回のみ立ち上がるのが遅いと聞いたところ、その先輩はサイトBが独自の設定あるので、初回だけ遅いよと答えた。私はちょっと不思議に思いならがコードをみたら、サイトAがWebアプリケーションに対して、サイトBがWebサイトでした。
Webサイトだから、事前コンパイルしなかったら、ランタイムで最初のリクエストでコンパイルするので時間がかかると説明した覚えがあります。日本語のスタック・オーバーフローでこの質問がないようで、私の理解を下記のようにまとめてみました。もし、漏れたポイントまた、アドバスを追伸してもらえる大変ありがたいです。
MSDN更新の比較：
日本語：Web アプリケーション プロジェクトと Web サイト プロジェクト
英語：Web Application Projects versus Web Site Projects in Visual Studio
6422,php,CakePHPにおいてFacebookでログインを開発しているのですがうまくいきません。
基本的に下記サイトを利用しました。
http://shigurui.kirscheweb.com/?p=136
前提として
モデル：User
コントローラ：UsersController.php
app_idとapp_secretは取得してセットしてあります。
下記手順で
2,5,9番の配置方法
3番のConfigure::write('Opauth.path', '/users/auth/');
7番のControllerの記述方法
が怪しいのではないかといくつか試しましたがどれも上手くいきません。
何かアドバイスなどいただければ幸いです。
手順
1.下記サイトよりcakephp-opauth-master.zipをダウンロード
https://github.com/uzyn/cakephp-opauth
2.ダウンロードしたファイルを解凍し、CakePHPのプラグインとして下記に設置
3.bootstrap.phpに設定を記入
アプリ/app/Config/bootstrap.php
CakePlugin::load('Opauth', array('routes' => true, 'bootstrap' => true));
Configure::write('Opauth.Strategy.Facebook', array(
'app_id' => 'YOUR FACEBOOK APP ID',
'app_secret' => 'YOUR FACEBOOK APP SECRET'
));
Configure::write('Opauth.path', '/users/login/');
*パスにはただ単にログイン画面を指定した
4.Facebook用の「Strategy」をダウンロード
https://github.com/opauth/facebook
5.ダウンロードしたファイルを解凍し、Strategyとして設置
アプリ/app/Plugin/Opauth/Strategy/Facebook
6.Config/routes.phpに記述を追加
Router::connect(
'/opauth-complete/*',
array('controller' => 'users', 'action' => 'opauth_complete')
);
7.コントローラーにメソッドを追加
class UsersController extends AppController {
public function opauth_complete() {
debug($this->data);
}
}
9.ダウンロードしたファイルを解凍し、Vendorに設置
アプリ/vendors/Opauth
10.認証URLにアクセス
http://localhost/アプリ/auth/facebook
＊アクセス方法は全くわかりません
6433,php,タイトルの通りなのですが、ファイルのアップロード機能は作れたのですが、ダウンロード機能が作れません。
どなたか経験あるかたご教授願いたいです。(フレームワークはcakePHPを使用しています）
6448,android|java,JavaでISO 8601による日付を言語毎に日本語ならyyyy年MM月dd日､英語ならFeb(MM) dd,yyyyのように表示したいのですが､なにか良いライブラリはありますか｡
対応したい言語は日本語､英語､中国語､フランス語､インドネシア語です｡
追記:
アプリの種類はAndroidです｡
6461,java,コマンドプロンプトでjavaファイルをjavacでコンパイルして実行しようとしたんですが、以下のエラーが出ました。
C:\Users\rqwqk\Desktop\pleiades\workspace\konpairuzikken\src>java wrqrqr
エラー: メイン・メソッドがクラスwrqrqrで見つかりません。次のようにメイン・メソッドを定義してください。
public static void main(String[] args)
またはJavaFXアプリケーション・クラスは`javafx.application.Application`を拡張する必要があります
wrqrqr.javaの内容は以下の通りで、実行環境はWindows 7(x64)です。解決方法募集します。
public class wrqrqr {
/**
* @param args
*/
public static class helloworld{
public static void main(String[] args) {
// TODO 自動生成されたメソッド・スタブ
int x;
x=5;
System.out.println(x);
}
}
}
6466,c#,新人の方にenumが持つ全ての値をforeachで取得しようとしてたら、
エラーが出たと質問されました。
public enum TopCities
{
Tokyo,
Yokohama,
Osaka,
Nagoya,
Sapporo,
Kobe,
Kyoto
}
#endregion
#region Public Methods and Operators
public void LoopThroughAllTopCities()
{
foreach (string city in Enum.GetValues(TopCities))
{
ltlResult.Text += city + "\r\n";
}
}
#endregion
#region Methods
protected void Page_Load(object sender, EventArgs e)
{
LoopThroughAllTopCities();
}
#endregion
このエラーが出てコンパイルできないと聞かれました。
TopCities' is a 'type' but is used like a 'variable'
この場合Enum.GetValuesの引数はSystem.Typeなので、typeof(TopCities)を渡すべきです。
foreach (var city in Enum.GetValues(typeof(TopCities)))
もしくは
foreach (var city in Enum.GetNames(typeof(TopCities)))
で都市名の取得もできますと答えました。
Enum.GetValuesとEnum.GetNamesの違いは指定した値を持つ指定した列挙体にある定数の名前を取得する代わりに、定数の値の配列を取得することです。
そこで思ったのですが、どのようなの場合にどちらのメソッドが推奨されるのかを聞きたいです。
6485,php,goutteを使ったスクレイピングについて勉強しています。
例えば、はてなブックマークの「テクノロジー」カテゴリのホットエントリーのリストを取得してみようといろいろ試行錯誤していますがうまくいきません。
例えば、ページ上の「.entry-link」クラスを取得すればエントリーのリンクを取得できます。
$crawler = $client->request('GET', 'http://b.hatena.ne.jp/hotentry/it');
$crawler->filter('.entry-link')->each(function ($node) {
echo $node->html() . "\n";
});
しかしこの場合は、ホットエントリー以外にも下部にある「人気エントリー」も抽出されてしまうため、上部のリストのみとりたいのですがどうすればうまく指定できるかわかりません。
何れも「box_section」クラスの中に存在しているので、「box_section」の一つ目にふくまれる「entry-link」を抽出するように指定するべきだと思うのですが、うまくいきません。
試しに以下のようにしていましたがやはりだめでした。
$box = $crawler->filter('.box_section');
$box->filter('.entry-link')->each(function ($node) {
echo $node->text() . "\n";
});
どのように絞り込めばよいのでしょうか？
6519,java,昨日までは javac コマンドが使えていましたが、急に以下のメッセージが表示されるようになってしまいました。解決策募集します。
表示されたメッセージ
javac: ファイルが見つかりません: konp.java
使用方法: javac <options> <source files>
使用可能なオプションのリストについては、-helpを使用します
konp.java
public class konp {
public static void main(String[] args) {
int sales[];        // 宣言
sales = new int[4]; // 領域の確保
sales[0] = 150;
sales[1] = 200;
sales[2] = 140;
sales[3] = 400;
//sales.length;     // 領域の個数４
for(int i = 0; i < sales.length; i++) {
System.out.println(sales[i]);
}
}
}
実行環境
Windows 7 (64bit)
6541,php,Phpstormで、プロキシ経由でSFTPでリモートに接続しようとしたとき、以下のエラーが表示され、接続できません。
Connection to 'example.com' failed.
Session.connect: java.net.UnknownHostException: example.com
調べてみると、下記サイトにあるように、PhpStormはプロキシ経由でのFTPやSFTP接続はサポートしていないとのことでした。
PhpStorm sftp deploy with SSH Proxy
しかし、社内で開発している場合など、プロキシ経由でないとリモートに接続できない環境は多いように思います。なんとか接続する方法はないでしょうか？
よろしくお願いします。
6571,java,http://www.javadrive.jp/start/method/index5.html　このサイトを参考にしています。
この中にある、
class JSample5_1{
public static void main(String args[]){
int kekka;
kekka = bai(9);
System.out.println(kekka);
kekka = bai(5);
System.out.println(kekka);
}
private static int bai(int n){
return n * 2;
}
}
の部分なんですが、よく理解できておりません。return n*2 が bai(int n) の n の部分にx2 が入るので、(bai=x2) ということで合ってますか？
そして kekka=bai(9) に x2 が入って 18,
kekka=bai(5) に x2 が入って 10 ということですか？
あと、最初のほうに void（戻り値を無効にするという意味ですか？）と書いてありますが
return を書くと、return が適用され、最初の void は打ち消されるということですか？
6576,php,複数人で投稿しているブログサイトがあります。
管理人が記事を承認後、投稿者のウォールへ記事を投稿したいと思っています。既存のCMSを用いておりますが、ウォールへの投稿についてはPHPにてバッチ処理の予定です。
Facebookアプリの管理者およびテストユーザーにて、App access tokenを利用して、アプリ承認後に投稿が可能でした。
※一般ユーザーの場合だと、挙動が異なるのでしょうか？
またユーザアクセストークンは必要でしょうか？
ちなみに現在、ユーザーIDを指定して投稿しています。
$me = (new FacebookRequest(
$session, 'POST', '/ユーザーID/feed',$params
))->execute()->getGraphObject(GraphUser::className());
ウォールへの投稿には、「publish_actions」が必要とのこと。
申請が必要だと聞きましたが、バッチ処理の場合でも審査時にアプリにアクセスできるような状態が必要なのでしょうか？？？
もしくはバッチ処理の場合は違う手順があるのでしょうか？
お忙しいところ大変恐縮ですが、ご教示いただけましたら幸いです。
6579,java,自分が作っている業務アプリは、画面上部にメッセージを表示する専用のエリアがあります。
入力エラーはここに表示されます。
そこで質問です
1. webシステムではテキストボックスの隣にエラーを表示するのが一般的なのでしょうか
2. テキストボックスの隣にエラーを表示した場合、ブラウザ上でレイアウトがずれませんか
3. javaで業務システムを作りたいのですが、入力チェックは何で実装するのがベストですか？
→ 専用エリアに入力エラーを表示する場合は、
TABインデックス順にエラーを表示したいなと思いました。
6599,php,メールの中で<?php echo $this->Html->Link() ?>を使いたいのですが、どこでHelperを読み込ませたら良いのでしょうか。
6629,php,スラッシュで終わるリンクを生成したいのですが、今回パラメータを追加する必要があり、やり方がわかりません。
Router::url([
'controller' => 'controller',
'action'     => 'action',
'?'          => ['id' => 1],
]);
// 結果
/controller/action?id=1
// こうしたい
/controller/action/?id=1
6632,c#,現在C#/.net4.5環境においてWindowsフォームを使った
Win8タブレット向けのアプリケーションを作成しています。
アプリでは、
■PanelA
├■Button1
├■Button2
├■Button3
…
といった形で、パネルの子コントロールとしてボタンを並べて配置している箇所があります。
このとき、PanelAにはスクロールバーが表示される状態になっており、
PanelA上の何も無い箇所をスワイプするとスクロールを行ってくれるのですが、
Button上を起点にスワイプするとスクロールされません。
調べて試してみたのですが、WPFではScrollViewer.PanningModeを設定することで、
ボタン上からのスワイプによってスクロールされることを確認しました。
ただ、WPFとの混合運用は極力避けたいと考えており、
まずはWindowsフォームでそもそもこの機構を実現するのは難しいのかどうかも合わせて、
ご教授いただけないでしょうか。
よろしくお願いいたします。
6649,c#,Visual Studio 2013 Expressではセットアッププロジェクトを作れないため、.NET Framework 3.5にダウングレードしてVisual Studio 2008 Pro上での開発に、開発環境をロールバックしました(プロジェクトファイルは手作業で修正)。
本当は.NET Framework 4.5が使えるVisual Studio 2013 Expressを用いたいのですが、Expressではセットアッププロジェクトが作れない上、Crystal Reports等の有料ライセンスライブラリが使えないようなので、仕方なく古い開発環境に戻しています。
VS2008Proでは.msiパッケージを作ることが出来るのですが、.NET 4.5でビルドしたバイナリは環境に含むことができず、仕方ないので面倒なのでコードを.NET 3.5用にコード修正したうえで、VS2008Pro環境に移しました。
ところが、そうしたら今まで正常に動いていたCOM呼び出しが動いているんですが、ちょっと振る舞いが変わってしまいました。
具体的にはここで質問して得た回答をもとに、Windows API Code Pack のソースコードを入手してビルドしたものを使っていたのですが、それも含めてVS2008Pro上でビルドし直したところ、今まで .pdfファイルのサムネイルが正常に表示されていた(ドキュメントの1ページ目の縮小画像)ものが、通常の .pdfファイル用のアイコンになってしまったというのがそれです。
質問がわかりづらくて申し訳ありません。
1..NET Framework 4.5での開発(VS2013Express)でInstall Shieldなどの有料インストーラではなく、無料で使用できる信頼できる.NET依存関係にも対応したインストーラって無いでしょうか？
2.VS2008Pro環境でビルドしたバイナリをインストール出来る優れた無料のインストーラって無いでしょうか？
3.COM関連は.NETバージョンを変えるとおかしくなる可能性が高いでしょうか？
すみませんが、宜しくお願い致します。
6653,c#,題名通り、const と static read only の違いと使い分けについて下記の理解をもっています。もし、間違っていたり、アドバイスをいただける点がありましたら、是非お願いします。
MSDNのリファレンス：
readonly (C# リファレンス)
const (C# リファレンス)
6658,php,早速本題なのですが
頭から詰められている(添え字の0から順に格納されている)配列を作成した場合、
if(0<count($arr))　or　if(isset($arr[0]))
どちらがいいでしょうか？
理由も添えて回答頂けると助かります。
この質問をするに至った経緯が日単位で数千～数万のアクセスが想定される環境があり、
"少しでも最適化したい。"となった際に意見が出たので……。
勿論、この他にもベストなチェックがあればご教授下さい。
追記：
秒間100PVほどアクセスがある可能性が有ります。
サーバースペックについてはお話しできませんが、それを想定されたスペックではあります。
6685,java,表題の通りですが、java.net.HttpURLConnectionを利用してPATCHリクエストを投げる方法はあるでしょうか。
JavaからPATCHリクエストを送るにはApache HttpClientを使うのが正攻法なのかなとは思うのですが、依存するライブラリを極力少なくしたい思いがありまして・・・。
リフレクションを使ってHttpURLConnection.methodの書き換えは試してみましたが、どうやら実行時にGETに置き換えられているような様子です。
解決法またはApache HttpClient以外にも良いライブラリをご存知の方いらっしゃいましたら、ご教示いただければ幸いです。
6697,php,開発言語はPHPです。
PearのHTTP_Request2を使ってHttpリクエストを送信、Httpレスポンス受信して処理する処理を実装しています。
あるサービスと契約してAPIを利用して実装を行います
APIを利用するためのPHPサンプルコードの提供を受けています。
サンプルコードを元に実装してるのですがサンプルが古くHTTP_Requestで実装されてます。
HTTP_RequestからHTTP_Request2へ書き換えています。
概ねメソッド名が変わっているだけなので対応するメソッドに置き換えています。
ひとつだけ「addRawPostData」だけどう置き換えて良いのか分からないので質問しました。
サンプルコードでは
//POSTデータ生成
$postdata =
"<?xml version=\"1.0\" encoding=\"UTF8\"?>" .
"<request id=\"xxxxxxxxxxx\">" .
"<user_id>" . $user_id . "</user_id>" .
"<user_name>" . $user_name . "</user_name>" .
</request>" .
$req = new HTTP_Request($url);
$req->addRawPostData($postdata);
となっています。
利用するAPIではHttpリクエストする時に、XML形式でデータ送るために上記のような実装になっています。
addRawPostDataをHTTP_Request2では何で置き換えれば良いでしょうか？
よろしくお願いします
6708,c#,TextBoxまたはComboBoxにおいて
textBox1.AutoCompleteMode = AutoCompleteMode.SuggestAppend;
textBox1.AutoCompleteSource = AutoCompleteSource.CustomSource;
として、textBox1.AutoCompleteCustomSourceに住所録の名前が入っているとします。
名前の文字を数文字入れるとサジェストされますが、その時の候補が出ているリストボックスの名前の横に、例えば電話番号や住所などを併記したいのです。
その併記情報をオーナードローで行えないか？と思うのですが、当方環境ではVisual Studio 2008付属のSpy++(32bit版/64bit版)がフッキングに失敗してWindowsメッセージを上手く取れないため分かりません(取れたところで実装方法が分かるかも怪しいのですが)。
別にオーナードローでなくても、見た目的に同じような事が出来れば構いません。
要は、こんな風にしたいという事です(画像は編集で作ってます)。
このとき、赤枠で表示されているところは AutoCompleteCustomSourceコレクションに対応する別のコレクションでもいいですし、そもそもオートコンプリートを用いずに見た目的に同じなら、文字が入力されたときにテキストボックス下にリストボックス(リストビューの方がいい？)が表示されるでも構わないです。
これって結構難しいでしょうか？
6710,c#,通常、usingディレクティブはnamespaceの外（ファイル先頭）に記述しますが、StyleCopを使用すると
SA1200 : CSharp.Ordering : All using directives must be placed inside of the namespace.
が発生します。この意味を教えてください。
6733,php,PHP / PDOドライバのキャッシュ機能について
環境
PostgreSQL9.4
IDIORM
Paris
PostgreSQLは検索結果をキャッシュしてしまうようで、メモリリークしてしまいます。
大規模なSelectを行った後は、どうすれば解放してもられるんでしょうか。
できればソース(参考文献)と共に、教えてください。
6739,php,CakePHP で作られている特定の検索画面から $this->[モデル]->find... メソッドでクエリを実行した際、MySQL のタイムアウト時間を指定したいです。
set_time_limit() 関数ですとスクリプトのタイムアウトは有効ですが、DBの処理時間は対応していないようです。
そもそも可能なのか、分かる方がいらしたらご教授お願いします。
CentOS  ：6.3
PHP     ：5.3.3
MySQL   ：5.1.58
CakePHP ：2.3.9
6789,c#,Lazy loading について日本語で解説されたサンプルはどこかにありますか？
下記の例を見つけたどけ全部英語です。
http://www.codeproject.com/Articles/116273/A-Generic-Way-to-Delay-load-Lazy-load-Any-Number-o
http://www.codeproject.com/Articles/275932/Lazy-Loading-in-Csharp
6793,c#,初の質問投稿となります。よろしくお願いします。
uGUI の Textをプレハブから生成した後、 Canvas を親として設定するためにプレハブを使い
public class NumberText : MonoBehaviour
{
public Canvas UICanvas;     //UIを表示するキャンバス
void Awake(){
transform.SetParent(UICanvas.transform, false);
}
}
というように書いたのですが、下記のエラーが出てしまいます。
Setting the parent of a transform which resides in a prefab is disabled to prevent data corruption.
プレハブを使わずに、 Canvas を直接 GameObject.Find することで正常に動作してくれたのですが、プレハブ化出来ないのがどうもモヤモヤします。
Inspector 上でプレハブやスクリプトを付け忘れていないことは確認しているのですが…。
Canvas をプレハブ化して参照するような使い方をすることが間違っているのでしょうか？
また、 Hierarchy にある CanvasはPanel や Image を子オブジェクトとして持つのですが、プレハブ化した際にこれらの子オブジェクトが Project ビューに表示されないことも気になります。
6835,php,phpの関数について教えてください。
フォームのバリデーションで空白だった場合$errorにblankを、空白でなかった場合sessionに挿入しようと思って書いたコードなのですが文字が入っていてもsessionに何も入りません。
関数のコードは以下です。
function check_blank($post_name) {
if(isset($_POST[$post_name]) && $_POST[$post_name] !== '') {
$_SESSION['temp'][$post_name] =
htmlspecialchars($_POST[$post_name],ENT_QUOTES, 'UTF-8');
} else {
$error['temp'][$post_name] = 'blank';
}
}
6842,c#,StyleCopのコードクリーニング設定でvarキーワード使用のオプションがありますが、現在社内でこの設定をしています。
私が最初に設定したのではないので、なぜ、常にVarを使用するかは分かりません。知っているのはvarを使用する際にコードが読みやすいこと。ネットで検索をしたら、stackoverflow本家にちょっと似たような質問を見つけました
結構面白い話題なので、varキーワード常に使用すべきかどうか、国内の開発者の意見を聞きたいです。
6919,android|java,今は楽譜のアプリを作っていて、最初に、曲名のリストがListViewで、TextViewとして出てきます。
プログラミングやAndroid Studioにおいて、私はまだ初心者なんですが、setOnItemClickListener()のタイミングで、その歌の楽譜が表れてほしいです。
ただ、別のFragmentに移るか、完全に新しいActivityを作った方がいいですか？
楽譜に入ってBackボタンを押したらListViewに戻ってほしいけど、５０個の歌まで至ったらそんなにたくさんのActivityを作ったら良くないですかな？
初心者であってすみませんが、よろしくお願いします(^_^)
6975,java,SeasarのアプリをLinux環境で起動できません。
Tomcatのディレクトリはwebappsのアプリが設定したんですが、下記のメッセージがでています。
[ESSR0007]S2Containerはnullあるいは空であってはいけません
Windowsの環境ではエラーがでませんが、Seasar2はLinux環境で起動する場合、何か特別な設定が必要ですか？
7064,android|java,ViewPagerを使用して5ページのFragmentを切り替えているのですが、あるタイミングで各 Fragment 内の ArrayList の要素を全て書き換えて反映させたいのですが、Fragment が非表示中に更新すると更新が反映されません。
各Fragment内ではRecyclerViewを使用しています。この RecyclerView の Adapter の要素を一度に更新したいです。
各 Fragment クラス内の更新用メソッド内で
if (mTextView != null) {
//Fragmentがactive
mList = tmpList;
} else {
//Fragmentがdetachされている
Bundle bundle = new Bundle();
bundle.putString("key","value");
setArugments(bundle)
}
としているのですが、うまく整合性がとれません。
非表示から再表示時に更新された List 値を使用して初期化したいのですが、いい方法はないでしょうか？
7131,java,Full GC多発の現象調査をしているのですが
GCログにFull GCとFull GC(System)が存在しております。
前任者はFull GC(System)を外して集計しているのですが・・・
違いも判らず外すのも気持ち悪くて質問させていただきました。
ネットの海におちていなかったor2
7136,android|java,WindowsPC/AndroidごとにWebページを用意するのではなく、
両方から1つのWebページを表示したいです。
PCはWebページを参照するだけなのですが、タブレットはHTML5でバーコードをスキャンもさせたいです。
① WindowsPC/AndroidでWebページを共有する際に発生する問題を教えて下さい。
→ レイアウトが崩れたりしませんか？ボタンサイズの問題 etc...
② HTML5を使ってバーコードスキャンって、実際どうなんですか？
→ HTML5を使ってバーコードスキャンするよりも、javaでAndroidアプリを作る方が安全だと思うんです
7143,android|java,ArrayAdapter のサブクラスで getView が呼び出される際、コンストラクタで渡したArrayList のsize に関わらず position は 0 のままで、 ListView に ArrayList の2つ目以降のアイテムのViewが渡されません。
レイアウトは ListView1 が ListView2 を持つ入れ子の構造で、 ListView1 は問題なく動作しますが、 ListView2 は上記のような状態です。
private class DayAdapter extends ArrayAdapter<DayData> {
private LayoutInflater inflater;
private class ViewHolder{
TextView textDate;
ListView listItem;
TextView textBalance;
ViewHolder(View view){
this.textDate = (TextView) view.findViewById(R.id.txtDate);
this.listItem = (ListView) view.findViewById(R.id.lstItem);
this.textBalance = (TextView) view.findViewById(R.id.txtBalance);
}
}
public DayAdapter(Context context, int textViewResourceId, List<DayData> objects) {
super(context, textViewResourceId, objects);
this.inflater = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
}
@Override
// こちらのpositionは更新される
public View getView(int position, View convertView, ViewGroup parent) {
ViewHolder holder;
if(convertView == null){
convertView = inflater.inflate(R.layout.day, null);
holder = new ViewHolder(convertView);
convertView.setTag(holder);
}else{
holder = (ViewHolder)convertView.getTag();
}
DayData day = (DayData)getItem(position);
if(day != null){
holder.textDate.setText(day.GetStringDate());
holder.textBalance.setText(day.GetStringBalance());
Log.d("ItemAdapter", "size="+day.GetItemList().size());
ItemAdapter adapter = new ItemAdapter(Diary.this, 0, day.GetItemList());
holder.listItem.setAdapter(adapter);
}
return convertView;
}
}
private class ItemAdapter extends ArrayAdapter<ItemData> {
private LayoutInflater inflater;
private class ViewHolder{
TextView textDate;
TextView textItem;
TextView textPrice;
ViewHolder(View view){
this.textDate = (TextView) view.findViewById(R.id.textView1);
this.textItem = (TextView) view.findViewById(R.id.textView2);
this.textPrice = (TextView) view.findViewById(R.id.textView3);
}
}
public ItemAdapter(Context context, int textViewResourceId, List<ItemData> objects) {
super(context, textViewResourceId, objects);
this.inflater = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
}
@Override
// こちらのpositionは0のまま
public View getView(int position, View convertView, ViewGroup parent) {
ViewHolder holder;
if(convertView == null){
convertView = inflater.inflate(R.layout.row, null);
holder = new ViewHolder(convertView);
convertView.setTag(holder);
}else{
holder = (ViewHolder)convertView.getTag();
}
Log.d("getView()", "position="+position);
ItemData item = (ItemData)getItem(position);
if(item != null){
holder.textDate.setText(item.GetStringDate());
holder.textItem.setText(item.GetItem());
String sign = "";
if(item.GetPrice() > 0) sign = "+";
holder.textPrice.setText(sign + Integer.toString(item.GetPrice()) + "円");
}
return convertView;
}
}
day.xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >
<TextView
android:textSize="16sp"
android:id="@+id/txtDate"
android:layout_height="wrap_content"
android:layout_width="match_parent"
android:background="#003300"
android:textColor="#FFFFFF" />
<ListView
android:id="@+id/lstItem"
android:layout_width="match_parent"
android:layout_height="wrap_content" >
</ListView>
<TextView
android:textSize="16sp"
android:id="@+id/txtBalance"
android:layout_height="wrap_content"
android:layout_width="match_parent"
android:background="#33CC00" />
</LinearLayout>
row.xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal" >
<TextView
android:textSize="16sp"
android:id="@+id/textView1"
android:layout_height="wrap_content"
android:layout_width="0dp"
android:layout_weight="1"/>
<TextView
android:textSize="16sp"
android:id="@+id/textView2"
android:layout_height="wrap_content"
android:layout_width="0dp"
android:layout_weight="1"/>
<TextView
android:textSize="16sp"
android:id="@+id/textView3"
android:layout_height="wrap_content"
android:layout_width="0dp"
android:layout_weight="1"/>
</LinearLayout>
この場合どのような原因が考えられるでしょうか？
7144,java,WebViewでメールの添付ファイルをダウンロードしたいのですが、FileNotFoundExceptionのエラーが出ます。
ちなみにテストはoutlookでしています。
コード:
ImageGetTask.java
InputStream is;
String url = "https://example.com";
try {
URL u = new URL(url);
HttpURLConnection con = (HttpURLConnection) u.openConnection();
con.setRequestMethod("GET");
con.setDoOutput(true);
con.connect();
int responseCode = con.getResponseCode();
if (responseCode >= 400 && responseCode <= 499) {
}else{
is = con.getInputStream();
String path = Environment.getExternalStorageDirectory() + "/apdroid/";
String fileName = url.substring(url.lastIndexOf('/') + 1);
File dir = new File(path);
dir.mkdirs();
File outputFile = new File(dir, fileName);
FileOutputStream fos = new FileOutputStream(outputFile);
byte[] buffer = new byte[1024];
int len = 0;
while ((len = is.read(buffer)) != -1) {
fos.write(buffer, 0, len);
}
fos.close();
is.close();
image = BitmapFactory.decodeStream(is);
}
return image;
}catch (IOException e) {
e.printStackTrace();
}
こちらのコードに変更してやってみたらダウンロードはできるのですが、画像形式ではなくてHtmlで保存されてしまします。
Request request = new Request(Uri.parse(url));
request.allowScanningByMediaScanner();
request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED);
request.setDestinationInExternalPublicDir(Environment.DIRECTORY_DOWNLOADS, "download");
request.setVisibleInDownloadsUi(false);
request.setDescription(contentDisposition);
downloadManager = (DownloadManager) getSystemService(DOWNLOAD_SERVICE);
query = new DownloadManager.Query();
// ダウンロードフラグ
query.setFilterByStatus(DownloadManager.STATUS_FAILED);
query.setFilterByStatus(DownloadManager.STATUS_SUCCESSFUL);
downloadid = downloadManager.enqueue(request);
receiver = new BroadcastReceiver(){
@Override
public void onReceive(Context context, Intent intent) {
String action = intent.getAction();
if (DownloadManager.ACTION_DOWNLOAD_COMPLETE.equals(action)) {
long id = intent.getLongExtra(DownloadManager.EXTRA_DOWNLOAD_ID, -1);
Log.d("xxx", "End Download download Id = " + id);
query.setFilterById(id);
Cursor c = downloadManager.query(query);
if(c.moveToFirst()) {
int status = c.getInt(c.getColumnIndex(DownloadManager.COLUMN_STATUS));
int reason = c.getInt(c.getColumnIndex(DownloadManager.COLUMN_REASON));
Log.d("status", Integer.toString(status));
Log.d("reason", Integer.toString(reason));
// ダウンロードに失敗した場合
if (status == DownloadManager.STATUS_FAILED) {
downloadManager.remove(downloadid);
// ダウンロードに成功した場合
} else if (status == DownloadManager.STATUS_SUCCESSFUL) {
Log.d("","SECCUSS");
try {
ParcelFileDescriptor file =
downloadManager.openDownloadedFile(downloadid);
FileInputStream files =
new ParcelFileDescriptor.AutoCloseInputStream(file);
imageView.setImageBitmap(BitmapFactory.decodeStream(files));
} catch (FileNotFoundException e) {
e.printStackTrace();
}
}
}
c.close();
}
}
};
registerReceiver(receiver, new IntentFilter(DownloadManager.ACTION_DOWNLOAD_COMPLETE));
7165,android|java,MediaPlayerを使って動画を再生したときに以下の例外が発生します。
E/MediaPlayer(18065): Unable to create media player
E/DEBUG(18065): Error
E/DEBUG(18065): java.io.IOException: setDataSourceFD failed.: status=0x80000000
以下を実行しています。
FileInputStream is = null;
try {
is = new FileInputStream(mPath);
mMediaPlayer.setDataSource(is.getFD());
} finally {
try {
if (is != null)
is.close();
} catch (Exception e) {}
}
Nexus 5（Android4.4.3）で例外が発生します。特定の機種でエラーになるみたいで、他の機種では例外が発生しません。
アドバイスをよろしくお願い致します。
7197,c#,スクリプトや、API,WMIなど、言語や手段は問いません。
Windowsで現在ログインしているユーザーにパスワードが設定されているかどうかの情報を取得できる方法を教えて下さい。
よろしくお願いします。
7207,android|java,画像をリクエストしているのですが、SkImageDecoder::Factory returned nullとなります。
statuscodeは200でした。
URLはhttps://outlook.office365.com/owa/service.svc/s/GetFileAttachment?id=HOGEHOGE.です。
try {
HttpGet httpGet = new HttpGet(URL);
CookieManager cookie = CookieManager.getInstance();
String cookiestr = cookie.getCookie(URL);
httpGet.setHeader("Cookie", cookiestr);
DefaultHttpClient client = new DefaultHttpClient();
HttpResponse httpResponse = client.execute(httpGet);
int statusCode = httpResponse.getStatusLine().getStatusCode();
Log.d("","statusCode:"+statusCode);
HttpEntity entity = httpResponse.getEntity();
//String response = EntityUtils.toString(entity);
//Log.d("","response:"+response);
BufferedHttpEntity bufferedEntity = new BufferedHttpEntity(entity);
final InputStream in = bufferedEntity.getContent();
Bitmap bitm = BitmapFactory.decodeStream(in);
entity.consumeContent();
client.getConnectionManager().shutdown();
} catch (MalformedURLException e) {
e.printStackTrace();
} catch (IOException e) {
e.printStackTrace();
}
7241,html,<style>タグは通常<head></head>内に置くものといった説明がされていますが、<body>
内に置いたときの動作がどうなるかの説明はどこかにないでしょうか？
対象はメジャーな最新ブラウザのみでよいです。
試しに、Safari8.0.3で以下のhtmlを表示すると、<div>hoge</div>の内容が赤くスタイリングされました。
<!DOCTYPE html>
<html>
<head>
</head>
<body>
<div>hoge</div>
<style>
div { border: 2px solid red; }
</style>
</body>
</html>
こちらのHTML5 <style scoped>の説明はscoped属性の説明なのでちょっと違う気がします。
http://hyper-text.org/archives/2013/02/style_scoped_attr.shtml
<head></head>内におけばいいんだよ。細けえことはいいんだよという意見もありますが、HTML5で許可されている？ような気もして、気になったので。
7243,android|java,EclipseでAndroidアプリケーションを作りたいです。
サーバ側もJava + Springで作成する予定です。
Androidとサーバの間はJSONを使って通信を行いたいので、プロジェクトを3つに分けられないかなと考えています。
Androidプロジェクト
サーバサイドプロジェクト
Json通信を行う際にデータを入れるPOJOのプロジェクト(1/2から共通で参照)
Eclipseを1つしか立ち上げないで開発すると大変そうなので、1/2は別のワークスペースにしてEclipseを2つ立ち上げて開発したいなと思います。
このような感じで開発したいのですが、Eclipseでどうやればマルチプロジェクトにできるかよくわからないんです。
Eclipseでプロジェクトを作ると、Androidはただのプロジェクトに、サーバ側(Sprint Tool Suiteを使って作成したプロジェクト)はMavenプロジェクトになっちゃいます。
普通に考えればMaven or Gradleのどちらで統一した方がいいと思うんです。
だけれども、Maven/Gradleのどっちもよくわかりません。
すいませんが、Eclipseを使ってマルチプロジェクト構成にする方法を教えて下さい。
7260,android|java,ContentProvider（コンテンツプロバイダ）からAndroid端末のPlayストアアプリにアクセスし、Google Playの検索履歴を取得したいと思っています。Android4.*まではアクセス可能でしたが、Android5.0からは以下の例外が発生しアクセスできなくなってしまいました。
Playストアへのアクセスを許可する方法はありますでしょうか？
例外：
java.lang.SecurityException: Permission Denial: opening provider com.google.android.finsky.providers.RecentSuggestionsProvider from ProcessRecord
Javaソースコード：
try{
Object obj = Uri.parse("content://com.google.android.finsky.RecentSuggestionsProvider/suggestions");
ContentResolver contentresolver = l.getContentResolver();
String as1[];
(as1 = new String[1])[0] = "_id || ',' || date || ',' || display1 as _id";
String as2[];
(as2 = new String[1])[0] = "";
if((obj1 = contentresolver.query(((Uri) (obj1)), as1, "''=?", as2, "date desc"))== null)
}catch(Exception exception){
}
7288,c#,私はかつて（約10年前）VisualBasic6.0を使っていました。
その当時はVBを使える人材が重宝されていました。
最近、たまに求人広告を見ることがあるのですが、VisualBasic.NET
よりもC#の方が圧倒的に需要が高いように思います。
私はVB.NETもC#も使ったことがありませんが、両者ともに開発環境の
雰囲気が似ていたような記憶があります。
だとすると、文法等分かりやすいのはVB.NETだと直感的に思っていて
アプリケーションを開発しやすいのもVB.NETだと勝手に思っています。
でも、多くの企業ではVB.NETよりもC#を使える人材の募集をしています。
これは何故でしょうか？
C#に特別な何かがあるのでしょうか？
7299,html,最初に適用した画像から他の画像に差し替えたのですが、
最初の画像が常に表示されている状態です。
この問題の解決方法が分かる方がいましたら、ご教授お願いします。
対象の画像はCSSにて、下記のように指定しているasc.gifです。
background-image: url(asc.gif);
またasc.gifは下記画像のように配置されています。
7301,html,<body>
<canvas width="500px" height="2000px"></canvas>
<script>
var canvas = document.querySelector('canvas')
var ctx = canvas.getContext('2d')
ctx.fillStyle = "rgb(200, 0, 0)"
ctx.fillRect(0, 0, 100, 100)
ctx.fillRect(400, 0, 100, 100)
ctx.fillRect(0, 1000, 100, 100)
</script>
</body>
上記のhtmlでは、縦2000px、横500pxのcanvasを表示しています。
これを印刷すると、ブラウザによって挙動が違います。
Google Chrome(40.0.2214.115) 2ページ目が印刷される。下端の四角は次のページに表示
Firefox(35.0.1) 2ページ目が印刷されない。下の四角は表示されない
FirefoxでChromeのように、画像のはみ出した部分を次ページに印刷する方法はありませんか？
7333,javascript|java,現在React.jsを使用してアプリケーションを作成しています。
ブラウザ側ではwebpackを使用してコンポーネントをrequireして使用しています。
React.jsのサーバサイドレンダリングを使用してレスポンスを返したいと考えているのですが、Nashornにはrequireが存在しないようなので、https://github.com/nodyn/jvm-npm を利用してrequireしようとしています。
しかし以下のようにreactをrequireすると
engine.eval("load('./dist/jsx/jvm-npm.js');");
engine.eval("var React = require('./node_modules/react/react');");
エラーが発生してしまいます。Nashornでrequireを使う方法はないのでしょうか。
javax.script.ScriptException: ReferenceError: "process" is not defined
in ./dist/jsx/jvm-npm.js at line number 106 at column number 11   at
jdk.nashorn.api.scripting.NashornScriptEngine.throwAsScriptException(NashornScriptEngine.java:564)
at
jdk.nashorn.api.scripting.NashornScriptEngine.evalImpl(NashornScriptEngine.java:548)
at
jdk.nashorn.api.scripting.NashornScriptEngine.evalImpl(NashornScriptEngine.java:528)
at
jdk.nashorn.api.scripting.NashornScriptEngine.evalImpl(NashornScriptEngine.java:524)
at
jdk.nashorn.api.scripting.NashornScriptEngine.eval(NashornScriptEngine.java:194)
at
javax.script.AbstractScriptEngine.eval(AbstractScriptEngine.java:264)
at net.jirox.radarscope.RadarScope.render(RadarScope.java:35)   at
net.jirox.radarscope.RadarScopeTest.testRender(RadarScopeTest.java:32)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)  at
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
at
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:483)     at
org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
at
org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
at
org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
at
org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)    at
org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
at
org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)  at
org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)   at
org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)     at
org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)   at
org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)  at
org.junit.runners.ParentRunner.run(ParentRunner.java:309)     at
org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
at
org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at
org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:459)
at
org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:675)
at
org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:382)
at
org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:192)
Caused by: ./dist/jsx/jvm-npm.js:106:11 ReferenceError: "process" is
not defined   at
jdk.nashorn.internal.scripts.Script$jvm_npm._L21$Require(./dist/jsx/jvm-npm.js:106)
at jdk.nashorn.internal.scripts.Script$\^eval_.runScript(:1)
at
jdk.nashorn.internal.runtime.ScriptFunctionData.invoke(ScriptFunctionData.java:498)
at
jdk.nashorn.internal.runtime.ScriptFunction.invoke(ScriptFunction.java:206)
at
jdk.nashorn.internal.runtime.ScriptRuntime.apply(ScriptRuntime.java:378)
at
jdk.nashorn.api.scripting.NashornScriptEngine.evalImpl(NashornScriptEngine.java:546)
... 29 more
7341,php|html,元データhogeAry
・子に対する親を parent_id で指定
・親は parent_id = 0
Array
(
[0] => Array
(
[hoge_id] => 2
[hoge] => 親2
[parent_id] => 0
)
[1] => Array
(
[hoge_id] => 3
[hoge] => 子2-1
[parent_id] => 2
)
[2] => Array
(
[hoge_id] => 4
[hoge] => 子7-1
[parent_id] => 7
)
[3] => Array
(
[hoge_id] => 7
[hoge] => 親7
[parent_id] => 0
)
[4] => Array
(
[hoge_id] => 1
[hoge] => 親1
[parent_id] => 0
)
)
希望出力結果
<ul>
<li>親1</li>
<li>親2
<ul>
<li>子2-1</li>
</ul>
</li>
<li>親7
<ul>
<li>子7-1</li>
</ul>
</li>
</ul>
7342,c#,ASP.NET MVC2でCustomHelperを作っています。
必要な情報が取得できない問題があったので、
解決方法があればご教示ください。
ViewModelにDisplayName属性やValidationAttributeをつけています。
属性を取得する際はModelMetadata.FromLambdaExpression()で取得できますが、
対象のViewModelがBaseViewModelをoverrideしている場合、
BaseViewModelの属性（たとえばDisplayName）を取得するようです。
※今回の場合、BaseViewModelにはDisplayName属性をつけていないので
取得できない
public static MvcHtmlString LabelExFor<TModel, TProperty>(this HtmlHelper<TModel> html, Expression<Func<TModel, TProperty>> expression)
{
ModelMetadata metadata = ModelMetadata.FromLambdaExpression(expression, html.ViewData);
return LabelExFor(html, expression, metadata.IsRequired);
}
ViewではBaseViewModelをoverrideしたViewModelを用いているので
ViewModelの属性を取得したいのですが、どのようにすればよいでしょうか？
尚、ViewModelのプロパティをoverrideではなくnewで定義した場合は
ViewModelの属性を取ってくるようです。
最終的な回避方法
標準のLabelForは用いず、自作のLabelExForで置き換える。LabelExForではFromLambdaExpression()ではなく、FromStringExpression()を用いてmetadataの取得を行う。
public static MvcHtmlString LabelExFor<TModel, TProperty>(this HtmlHelper<TModel> html, Expression<Func<TModel, TProperty>> expression)
{
var htmlFieldName = ExpressionHelper.GetExpressionText(expression);
var metadata = ModelMetadata.FromStringExpression(ExpressionHelper.GetExpressionText(expression), html.ViewData);
string labelText = metadata.DisplayName ??
metadata.PropertyName ??
htmlFieldName.Split('.').Last();
if (String.IsNullOrEmpty(labelText))
{
return MvcHtmlString.Empty;
}
（以下略）
7350,c#,System.Windows.Controls.ContextMenuクラスをXAMLではなくC#のコードから生成しています。階層構造は以下のとおりで、カッコ内はバインドされたキーです。
このコンテキストメニューが開いた状態で、B→Aと押すとMenu2-1が実行されるようにしたいのですが、どのようにしたら良いのでしょうか。
ContextMenu
Menu1 (A)
Menu2 (B)
Menu2-1 (A)
Menu2-2 (B)
Menu3 (C)
7362,android|java,android5.0以降でDownloadListenerが呼ばれないのですが原因は何でしょうか？
何か対策はありますでしょうか？
Gmailの添付ファイルをクリックした時だけ呼ばれていないみたいです。
7363,c#,Win8タブレットにおいて、縦スクロールバーが発生しているウィンドウをスワイプすることによってスクロールを端まで送ると、ウィンドウ自体が跳ね返る（何かにぶつかった？）ようなリアクションを取ります。
これが鬱陶しく感じてしまったため、開発中のアプリケーション(.Net4.5環境/WPF)では無効に出来るならしたいと考えております。
https://msdn.microsoft.com/ja-jp/library/ie/hh920761%28v=vs.85%29.aspx
の方にcssで制御可能な項目として
スクロールされた領域が端に達したときに跳ね返る
とされていたのですがWPF、もしくはWindowsフォームにおいてこの機能を与えることは可能なのでしょうか？
7416,java,Google App EngineにWebアプリケーションを配備しました。配備自体は成功したのですが、サイトにアクセスすると下記のようなエラーが出てしまいます。JDK7を使用、JDBCはojdbc7.jarとmysql-connector-java-5.1.34-bin.jarを試しましたが、いずれも同じエラーが発生してしまいます。
DBはGoogle Cloud SQLにMySQLのデータベースを配備してあります。
どなたかお分かりになる方いらっしゃいましたら、アドバイスお願いします。よろしくお願いいたします。
oracle.jdbc.driver.OracleDriver registerMBeans: Error while registering Oracle JDBC Diagnosability MBean.
java.lang.NoClassDefFoundError: java.lang.management.ManagementFactory is a restricted class. Please see the Google App Engine developer's guide for more details.
at >com.google.apphosting.runtime.security.shared.stub.java.lang.management.ManagementFactory.(ManagementFactory.java)
at oracle.jdbc.driver.OracleDriver.registerMBeans(OracleDriver.java:327)
at oracle.jdbc.driver.OracleDriver$1.run(OracleDriver.java:209)
at >com.google.apphosting.runtime.security.shared.intercept.java.security.AccessController_.doPrivileged(AccessController_.java:34)
at oracle.jdbc.driver.OracleDriver.(OracleDriver.java:205)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at >sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
at >sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
at java.lang.reflect.Constructor.newInstance(Constructor.java:526)
at java.lang.Class.newInstance(Class.java:370)
at java.util.ServiceLoader$LazyIterator.next(ServiceLoader.java:373)
at java.util.ServiceLoader$1.next(ServiceLoader.java:445)
at java.sql.DriverManager$2.run(DriverManager.java:510)
at java.sql.DriverManager$2.run(DriverManager.java:490)
at java.security.AccessController.doPrivileged(Native Method)
at java.sql.DriverManager.loadInitialDrivers(DriverManager.java:490)
at java.sql.DriverManager.(DriverManager.java:100)
at com.mysql.jdbc.Driver.(Driver.java:63)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:266)
at >com.google.apphosting.runtime.security.shared.intercept.java.lang.Class_.loadClassOrStub(Class_.java:536)
at >com.google.apphosting.runtime.security.shared.intercept.java.lang.Class_.access$100(Class_.java:42)
at >com.google.apphosting.runtime.security.shared.intercept.java.lang.Class_$2.run(Class_.java:128)
at >com.google.apphosting.runtime.security.shared.intercept.java.lang.Class_$2.run(Class_.java:123)
at java.security.AccessController.doPrivileged(Native Method)
at >com.google.apphosting.runtime.security.shared.intercept.java.lang.Class_.forName(Class_.java:123)
at utility.DAO.connect(DAO.java:31)
at anki_note.AnkiNote.doPost(AnkiNote.java:76)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
at >com.google.apphosting.utils.servlet.ParseBlobUploadFilter.doFilter(ParseBlobUploadFilter.java:125)
at >org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at >com.google.apphosting.runtime.jetty.SaveSessionFilter.doFilter(SaveSessionFilter.java:35)
at >org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at >com.google.apphosting.utils.servlet.JdbcMySqlConnectionCleanupFilter.doFilter(JdbcMySqlConnectionCleanupFilter.java:60)
at >org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at >com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
at >org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
at >com.google.apphosting.runtime.jetty.AppVersionHandlerMap.handle(AppVersionHandlerMap.java:254)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at org.mortbay.jetty.Server.handle(Server.java:326)
at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
at >org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
at >com.google.apphosting.runtime.jetty.RpcRequestParser.parseAvailable(RpcRequestParser.java:76)
at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
at >com.google.apphosting.runtime.jetty.JettyServletEngineAdapter.serviceRequest(JettyServletEngineAdapter.java:146)
at >com.google.apphosting.runtime.JavaRuntime$RequestRunnable.run(JavaRuntime.java:527)
at >com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:437)
at >com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:444)
at com.google.tracing.CurrentContext.runInContext(CurrentContext.java:220)
at >com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:308)
at >com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:300)
at >com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:441)
at >com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run(ThreadGroupPool.java:251)
at java.lang.Thread.run(Thread.java:724)
Here is my source code to connect to my database.
public static final String DB_URL = "jdbc:google:mysql://caramel-clover-813:myapplication?user=root";
public static final String DB_USER = "user";
public static final String DB_PASSWORD = "xxxx";
public boolean connect()
{
boolean is_connect = false;
try
{
Class.forName("com.mysql.jdbc.GoogleDriver");
this.conn = DriverManager.getConnection(DB_URL, DB_USER, DB_PASSWORD);
this.stmt = this.conn.createStatement();
is_connect = true;
}
catch (ClassNotFoundException e)
{
e.printStackTrace();
}
catch (Exception e)
{
e.printStackTrace();
}
return is_connect;
}
7475,python,pyenvを使ってMacにPythonの環境を構築する - Qiita
このサイトに従ってpyenvを使ってpythonをインストールしようとしているのですがうまくいきません。
OSはmacの10.10.1です。
上記のサイトで言う所のpyenvにパスを通す、というところまではできたのですが、
その次のpyenvでpythonをインストールすることができません。
SSL/TLSが必要と出てきたのでぐぐってみたのですがいまいちよくわかりません。
どうすれば先に進めるでしょうか
よろしくお願いします。
7480,python,DjangoをPostageSQLと使いたいと思い設定して､migrateしたのですが､以下のエラーが出てしまいました｡
エラー:
Traceback (most recent call last):
File "C:\Users\zousan\Documents\env1\lib\site-packages\django\db\backends\post
gresql_psycopg2\base.py", line 23, in <module>
import psycopg2 as Database
ImportError: No module named 'psycopg2'
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
File "manage.py", line 10, in <module>
execute_from_command_line(sys.argv)
File "C:\Users\zousan\Documents\env1\lib\site-packages\django\core\management\
__init__.py", line 385, in execute_from_command_line
utility.execute()
File "C:\Users\zousan\Documents\env1\lib\site-packages\django\core\management\
__init__.py", line 354, in execute
django.setup()
File "C:\Users\zousan\Documents\env1\lib\site-packages\django\__init__.py", li
ne 21, in setup
apps.populate(settings.INSTALLED_APPS)
File "C:\Users\zousan\Documents\env1\lib\site-packages\django\apps\registry.py
", line 108, in populate
app_config.import_models(all_models)
File "C:\Users\zousan\Documents\env1\lib\site-packages\django\apps\config.py",
line 202, in import_models
self.models_module = import_module(models_module_name)
File "C:\Users\zousan\Documents\env1\lib\importlib\__init__.py", line 109, in
import_module
return _bootstrap._gcd_import(name[level:], package, level)
File "<frozen importlib._bootstrap>", line 2254, in _gcd_import
File "<frozen importlib._bootstrap>", line 2237, in _find_and_load
File "<frozen importlib._bootstrap>", line 2226, in _find_and_load_unlocked
File "<frozen importlib._bootstrap>", line 1200, in _load_unlocked
File "<frozen importlib._bootstrap>", line 1129, in _exec
File "<frozen importlib._bootstrap>", line 1471, in exec_module
File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
File "C:\Users\zousan\Documents\env1\lib\site-packages\django\contrib\auth\mod
els.py", line 40, in <module>
class Permission(models.Model):
File "C:\Users\zousan\Documents\env1\lib\site-packages\django\db\models\base.p
y", line 122, in __new__
new_class.add_to_class('_meta', Options(meta, **kwargs))
File "C:\Users\zousan\Documents\env1\lib\site-packages\django\db\models\base.p
y", line 297, in add_to_class
value.contribute_to_class(cls, name)
File "C:\Users\zousan\Documents\env1\lib\site-packages\django\db\models\option
s.py", line 166, in contribute_to_class
self.db_table = truncate_name(self.db_table, connection.ops.max_name_length(
))
File "C:\Users\zousan\Documents\env1\lib\site-packages\django\db\__init__.py",
line 40, in __getattr__
return getattr(connections[DEFAULT_DB_ALIAS], item)
File "C:\Users\zousan\Documents\env1\lib\site-packages\django\db\utils.py", li
ne 242, in __getitem__
backend = load_backend(db['ENGINE'])
File "C:\Users\zousan\Documents\env1\lib\site-packages\django\db\utils.py", li
ne 108, in load_backend
return import_module('%s.base' % backend_name)
File "C:\Users\zousan\Documents\env1\lib\importlib\__init__.py", line 109, in
import_module
return _bootstrap._gcd_import(name[level:], package, level)
File "<frozen importlib._bootstrap>", line 2254, in _gcd_import
File "<frozen importlib._bootstrap>", line 2237, in _find_and_load
File "<frozen importlib._bootstrap>", line 2226, in _find_and_load_unlocked
File "<frozen importlib._bootstrap>", line 1200, in _load_unlocked
File "<frozen importlib._bootstrap>", line 1129, in _exec
File "<frozen importlib._bootstrap>", line 1471, in exec_module
File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
File "C:\Users\zousan\Documents\env1\lib\site-packages\django\db\backends\post
gresql_psycopg2\base.py", line 27, in <module>
raise ImproperlyConfigured("Error loading psycopg2 module: %s" % e)
django.core.exceptions.ImproperlyConfigured: Error loading psycopg2 module: No m
odule named 'psycopg2'
psycopg2 が見つかないので pip を使ってインストールを試みたのですが､以下のエラーがでてできませんでした｡
エラー:
Could not find any downloads that satisfy the requirement pycopg2
No distributions at all found for pycopg2
そこで､このエラーについて調べてのですが､ Unix の回答ばかりで Windows の回答が見つかりませんでした｡
なので Windows での解決方法を教えていただけると幸いです｡
Settings.py
import os
from django.conf.global_settings import LANGUAGE_CODE, TIME_ZONE
import dj_database_url
BASE_DIR = os.path.dirname(os.path.dirname(__file__))
# Quick-start development settings - unsuitable for production
# See https://docs.djangoproject.com/en/1.7/howto/deployment/checklist/
# SECURITY WARNING: keep the secret key used in production secret!
SECRET_KEY = '@71lbdkiwo_wf!)h0og^#z022$48#7=_9ldccg^(=zb&219640'
# SECURITY WARNING: don't run with debug turned on in production!
#デバッグモードをするか判定
DEBUG = True
if bool(os.environ.get('LOCAL_DEV', False)):
DEBUG = False
TEMPLATE_DEBUG = True
ALLOWED_HOSTS = []
# Application definition
INSTALLED_APPS = (
'django.contrib.admin',
'django.contrib.auth',
'django.contrib.contenttypes',
'django.contrib.sessions',
'django.contrib.messages',
'django.contrib.staticfiles',
'bootstrapform',
)
MIDDLEWARE_CLASSES = (
'django.contrib.sessions.middleware.SessionMiddleware',
'django.middleware.common.CommonMiddleware',
'django.middleware.csrf.CsrfViewMiddleware',
'django.contrib.auth.middleware.AuthenticationMiddleware',
'django.contrib.auth.middleware.SessionAuthenticationMiddleware',
'django.contrib.messages.middleware.MessageMiddleware',
'django.middleware.clickjacking.XFrameOptionsMiddleware',
)
ROOT_URLCONF = 'homesecurity.urls'
WSGI_APPLICATION = 'homesecurity.wsgi.application'
# Database
# https://docs.djangoproject.com/en/1.7/ref/settings/#databases
#データベースをどれにするか判定
DATABASES = {'default': dj_database_url.config(default='postgres://localhost')}
if bool(os.environ.get('LOCAL_DEV', False)):
DATABASES = {
'default': {
'ENGINE': 'django.db.backends.sqlite3',
'NAME': os.path.join(BASE_DIR, 'db.sqlite3'),
}
}
# Internationalization
# https://docs.djangoproject.com/en/1.7/topics/i18n/
LANGUAGE_CODE = 'ja'
TIME_ZONE = 'Asia/Tokyo'
USE_I18N = True
USE_L10N = True
USE_TZ = True
# Static files (CSS, JavaScript, Images)
# https://docs.djangoproject.com/en/1.7/howto/static-files/
STATIC_URL = '/static/'
7481,python,Django 1.6のModelを使ってます。
複数選択でなおかつ、任意の値を入れたいです。
公式ドキュメントから拝借しましたが、
choicesを使えば以下のように複数選択できます
from django.db import models
class Person(models.Model):
GENDER_CHOICES = (
(u'M', u'Male'),
(u'F', u'Female'),
)
name = models.CharField(max_length=60)
gender = models.CharField(max_length=2, choices=GENDER_CHOICES)
しかし、これだとMとF以外にも「u'未回答'」みたいなのをユーザ側で入れたいときに
入力ができません。
これを実現するには、やはりテンプレート側をカスタマイズするしかないでしょうか？
7520,javascript|html,現在 http://garafu.blogspot.jp/2013/08/wcf-restful-web.html を参考に、
jsonからのデータを取得しhtmlに表示したいと考えています。
イメージとしては、下記の画像の入力欄に名前を入力しOKボタンを押下すると、
表示欄にjsonのデータが出力されるような感じです。
そこで、html上でrestを送る方法と、jsonのデータを取得する方法が分かりません。
宜しければご教授をお願いします。
7532,python,Pythonでスレッドを用いて一括で全パッケージのアップデートをしたいと思っています。
しかし、下記のコードはGoルーチンやPythonでマルチスレッドで実行した時のように早くなりません。なぜ、遅くなってしまうのでしょうか?
#!/usr/local/bin/python3.4
import subprocess
import os
import threading
import re
def update(package_name):
os.system("pip3.4 install " + package_name + " -U")
s = subprocess.check_output(["pip3.4", "freeze"]).decode()
package_list = re.findall(".+(?===)", s)
package_list.extend(["pip", "setuptools"])
print(package_list)
for v in package_list:
threading.Thread(target=update, args=(v,)).start()
7537,java,ヘッダ + データグリッドからなる画面を、Spring MVCで作っています。
しかし、どうしてもデータグリッドに入力された内容を受け取ることが出来ません。
こんな感じのコードを書きました
@RequestMapping(value="/updateList")
public ModelAndView updateList(Condition condition, Grid[] grid) {
Spring MVCはデータグリッドに入力された内容を、受け取ることができるのでしょうか？
かれこれ、2日ほど調べてみたのですが、どうしてもわからずorz
画面イメージ
エラー内容
org.springframework.web.util.NestedServletException: Request processing failed; nested exception is
org.springframework.beans.BeanInstantiationException: Failed to instantiate
[[Ljp.co.test.server.arrival.form.WEB_AR_INP_010_Form$Grid;]:
No default constructor found; nested exception is
java.lang.NoSuchMethodException:
[Ljp.co.test.server.arrival.form.WEB_AR_INP_010_Form$Grid;.()
org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:978)
org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:868)
javax.servlet.http.HttpServlet.service(HttpServlet.java:644)
org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:842)
javax.servlet.http.HttpServlet.service(HttpServlet.java:725)
org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
jp.co.test.server.framework.WebFilter.exec(WebFilter.java:79)
jp.co.test.server.framework.WebFilter.doFilter(WebFilter.java:74)
例外に表示されている「L.jp.co.test」のLって、どこから来たんでしょうか？
そもそも根本的なところで何か間違えているから、Springが「L」を付けたような気がするんです。
7538,python,django-paypalを使用したいと思っています。
https://django-paypal.readthedocs.org/
PAYPAL_IDENTITY_TOKEN = "xxx"
に値を設定するのですが、
PAYPAL_IDENTITY_TOKEN に相当する番号がどうしても見つかりません。
探した結果
https://stackoverflow.com/questions/8961544/how-do-i-get-identity-token-in-paypal-sandbox
のサイトがヒットし、
この操作をしましたが、
その番号は表示されませんでした。
メールで送られれてくるものかと思いましたがそうではありませんでした。
どこにあるのでしょうか？
7548,java,JavaのWeakReferenceとSoftReferenceはどのような違いがあるのですか？またどのような用途で使い分けると良いのですか？
ドキュメントを読んでみた感じでは、WeakReferenceはガーベッジコレクタが動いた時に必ずクリアされる、SoftReferenceはメモリの状況によってはクリアされることもある(いずれも直接参照している箇所がない場合)ということなのかなと思ったのですが、この認識で正しいのでしょうか？
7571,python,データベースに保存した時に保存した時間を登録したいのですが､次のコードを書いてみたところ､Django のサイト管理画面に項目が表示されません｡  どのように修正すれば表示されるようになりますか?  教えてください､よろしくおねがいします｡
以下にコードを記述します｡
Models.py
from django.db import models
import datetime
# Create your models here.
class EnterInfo(models.Model):
'''侵入者情報'''
timeStamp = models.DateField('Intrusion time', auto_now=True)
def __str__(self):
return self.timeStamp
admin.py:
from django.contrib import admin
from cms.models import EnterInfo
# Register your models here.
admin.site.register(EnterInfo)
7572,python,Django 1.6で、django-paypal を使用しています。
PayPalはIPNを使用しています。
https://django-paypal.readthedocs.org/en/stable/standard/ipn.html
の3番目です。
PayPalPaymentsFormでのdictの設定で、
"notify_url": "https://www.example.com" + reverse('paypal-ipn'),
とありますが
reverseメソッドが勝手にURLを生成してくれるので
"notify_url": reverse('paypal-ipn')
だけでいい気がしますが違いますでしょうか？
そもそも、私はこのnotifyをよく理解してないのですが、何を通知するものなのでしょうか？
When someone uses this button to buy something PayPal makes a HTTP POST
購入の処理の裏方作業を勝手にやってくれる何かをするということなのでしょうか。
何卒よろしくお願い致します。
7573,python,Django 1.6で、django-paypal を使用しています。
PayPalはIPNを使用しています。
https://django-paypal.readthedocs.org/en/stable/standard/ipn.html
の3番目のpaypal_dictの中です。
return_urlについては、
購入後の復帰だと思いましたが戻ってきませんでした。
「ウェブ ペイメントの自動復帰」がPayPalの設定画面で行っても出来ませんでした。
7580,python,Django 1.6でdjango-paypalを使ってます。
PayPalのIPNを使用しています。
http://django-paypal.readthedocs.org/en/latest/standard/ipn.html
のドキュメントを参考にしました。
from paypal.standard.ipn.signals
のvalid_ipn_receivedとinvalid_ipn_receivedの
使い方がどうしても理解できません。
課金成功時に、valid_ipn_receivedで設定したメソッドが呼ばれ、
課金失敗時に、invalid_ipn_receivedが呼ばれるのかと思っています。
このようにメソッドを設定しました。
views.py
from paypal.standard.ipn.signals import valid_ipn_received, invalid_ipn_received
# 成功時
def show_me_the_money(sender, **kwargs):
print 'ok'
# エラー時
def error_show_me_the_money(sender, **kwargs):
print 'error'
valid_ipn_received.connect(show_me_the_money)
invalid_ipn_received.connect(error_show_me_the_money)
まずは、viewsがロードされたときに呼ばれればいいと思い行いましたが
出来ませんでした。
参考にならないかもしれませんが、、他の人のStackoverflowの質問も見ました。
https://stackoverflow.com/questions/28408960/how-to-get-the-notification-of-payment-using-django-paypal
ボタンを表示するためのindexページや、cancelやreturnにも
このように行いましたが、うまく動きませんでした。
@csrf_exempt
def cancel(request):
valid_ipn_received.connect(show_me_the_money)
context = {}
return render_to_response("eccomerce_webapp/cancel.html", context)
質問をまとめますと、
１.これらのコードはどこに書けばshow_me_the_moneyがきちんと呼び出されるのでしょうか？
valid_ipn_received.connect(show_me_the_money)
invalid_ipn_received.connect(show_me_the_money)
２.たとえ、show_me_the_moneyが呼ばれたとしても、
このメソッド内でどうやって購入した人を確定できるのでしょうか？
以下のように書いたとして、ipn_obj中に入ってるのでしょうか？
def show_me_the_money(sender, **kwargs):
ipn_obj = sender
if ipn_obj.payment_status == ST_PP_COMPLETED:
# Undertake some action depending upon `ipn_obj`.
payment = True
else:
payment = False
３．エラー時にテンプレートに値を表示させるにはどうすればよろしいのでしょうか？
return_viewでWebページを返したとしてもそこでどのユーザなのか判定できないと思います。
@csrf_exempt
def return_view(request):
valid_ipn_received.connect(show_me_the_money)
context = {}
return render_to_response("eccomerce_webapp/return.html", context)
ご教示お願い致します。
7611,c#,WPF、.Net 4.5、Visual Studio 2013 Communityの環境で、
デザイン時にItemsSourceにXAMLから値を設定する方法について知っている方が居れば教えて下さい。
XAML上でデザイン時DataContextを設定する時(d:DataContext="{d:DesignData Source=SomeDesignData.xaml}")の様な形で、ItemsControl系のUIElementに対してデザイン時ItemsSourceを設定したいと思っています。
コード上で行うのであれば、対象となるUIElementのDataContextに設定されるクラスのコンストラクタでDesignerProperties.GetIsInDesignMode(new DependencyObject())を使って条件分岐してItemsSourceのBinding先プロパティにデザイン用データをセットすれば良いのですが、これを使うといわゆるMVVMのVM層にデザイン用データが張り出してしまうため、出来れば避けたいと思っています。
何か良い方法、あるいは定石となる方法があれば教えて下さい。
7621,c#,using System;
class aaaaaa
{
static void Main()
{
double x, y;
byte b;
int i;
char ch;
x = 10.0;
y = 3.0;
i = (int)(x / y);//double型からint型へのキャスト
Console.WriteLine("Integer outcome of x / y:" + i);
i = 100;
b = (byte)i;
Console.WriteLine("Value of b:" + b);
i = 257;
b = (byte)i;
Console.WriteLine("Value of b: " + b);
b = 88;
ch = (char)b;
Console.WriteLine("ch:" + ch);
}
}
わからないのは最後の行です
ここでビルドすると　ch:xになるのですが、なぜxになるのでしょうか？
また、charは文字を一文字だけ保持する役割だと知りましたが、これの存在意義はあるのでしょうか。
7629,php|html,今度はWordPressを始めました。
（というかやらざるを得なくなりました・・・）
ちなみに私、HTMLもCSSもPHPも超初心者で、さらにWordPressなるものを初めて触ります。
現在制作中のWebサイトですが、基本的にはほぼ全て静的なHTMLとCSSで作成しております。
デザインはWebデザイナーがおりますので、その方にお任せしています。
（一部PHPを使っておりますが、大したことはしていません）
やりたいことは、ユーザーさんが自分で新しいページを作りたいと考えたときに
WordPressを使って新規ページを作成するのですが、Wordpressの例えば
固定ページの新規追加でタイトルと内容を入力すれば、新規ページが出来上がる
ということがしたいのです。
そして制作中の静的HTMLよりリンクを貼ってWordPressで作成した新規ページに飛ぶようにします。
ただ、このときの条件ですが、添付した図のようにヘッダー部、グローバルナビゲーション
サイドメニュー、フッター部は既に仕上がっているHTMLのデザインを踏襲したいのです。
要するに他のページも同じようなレイアウトになっているので、ページが変わっても
上記の箇所だけは固定で表示するようにしたいです。
そして、WordPresの固定ページ機能で入力した文章等が
添付図の「Ａ」のところに表示される
ようにしたいです。
上記を実現するために、
特殊な方法ではなく、一般的に用いる方法
をご教授ください。
※特殊な方法だと、私が理解できないので・・・
お手数ですが、宜しくお願い致します。
【開発環境】
レンタルサーバー（CentOS 5）
WordPress（4.1.1）
PHP（5.2.16）
HTML
CSS
作業環境（Windows7pro）
PHP編集用（NoEditor）
ブラウザ（FireFox）
追記
どうやら質問の範囲があまりも広すぎたことに気づきました。
ですので、少し質問の内容を変えます。
今回の質問した内容を解決するための、参考にすべきサイトがありましたら
ご教授ください。
もう既に webdesignrecipes.com/first-time-wordpress-origin-theme
というサイトをご紹介いただいたのですが、他にもありましたら教えてください。
7638,javascript|html,まず、現在のJson取得ソースは下記のようになっており
$.get(url, { id: name }, function (data) {
$("#textbox").val(JSON.stringify(data));
});
直接Jsonデータを１つのtextboxに出力していますが、
取得したJsonデータを複数のテキストボックスに出力したいです。
具体的には、
Jsonのデータの内容は下記のように「ID・Name・Email」の３項目で、それぞれを別のテキストボックスに出力したいのですが、やり方がわかりません。
{"ID":1,"Name":"Taro","Email":"test.taro@sample.jp"}
ご教授をお願いします。
7677,java,windows7環境で、最新のjdkを使え、と言うのは、jdk8が使えない事から自明ですが、jdk7のバージョンは、どれを使うのが適切なのでしょうか？
7696,javascript|html,現在は下記のようにひとつひとつ行を作っています。
<table id="sampleTable" class="tablesorter">
<thead>
<tr>
<th>都道府県名</th>
<th>読み</th>
</tr>
</thead>
<tbody>
<tr>
<td>東京都</td>
<td>とうきょうと</td>
</tr>
<tr>
<td>大阪府</td>
<td>おおさかふ</td>
</tr>
</tbody>
</table>
しかし、50行のテーブルとなるとソース量が多くなってしまうので、
もっと簡単な記述方法があればご教授をお願いしたいです。
因みに、javaScriptを使用しても大丈夫です。
7703,python,pythonの辞書型を使いました。
今まで線形探索で行っていた単語の検索が異常に早くなり快適です。
ところで、ハッシュについて調べた所、
h(x)=x%5 //5はテーブルの行数
のようなハッシュ関数で振り分けていると分かりました。
しかし、私がこの前実行したpythonのコードでは単語数が100万語近くありました。
キーが衝突するかと思いましたが、高速に動作しました。
ここで疑問が２つ湧きました。
・キーの衝突が無い（少ない？）ということは余りを求める数（上記のハッシュ関数の例では５）はpythonのdict型では可変なのでしょうか？
・キーの数自体が多い場合、キーの保存されている領域を探すために結局時間がかかるように思えるのですが・・・
実際の実装の中身についてもお願いします
追記
回答を読んでいて、もう一つ疑問が生まれました。
キーは文字列ですよね。
では、文字列をキーにして、データにアクセスする方法（アドレスを指定する方法）はどうやって実装していますか？
もともとC言語を扱っていたので、データにアクセスするにはアドレスを指定しないといけない気がします
7717,android|java,こんにちは
質問はタイトルの通り「AndroidでActivity/ArrayAdapterを疎結合にするためには？」です。
ActivityとArrayAdapterがメソッドを相互に呼び合っている(循環参照)コードを書いてみました。
ActivityとArrayAdapterが循環参照の状態にあるのは、設計ミスなのかもしれません。
しかし、アプリに1箇所や2箇所、循環参照になっているところがあるんじゃないかなって思います。
ちなみに、Android歴2～3日なので、Androidプログラミングよくわかってませんorz
皆様方はAndroidで循環参照になった時に、どのようにプログラム書かれてますか？
ArrayAdapterをFragmentと、読み替えて頂いても結構です。
7721,android|java,Android開発初心者です。
以下のコードで、画像のようなエラーが出てしまいます。
super(context, R.layout.top_listview, items);
の部分を修正すればいいのかと思うのですが、どのようにしたらいいのでしょうか？
お知恵を頂けますと幸いです。
public class TopListViewAdapter extends ArrayList<TopElement> implements ListAdapter {
public TopListViewAdapter(Context context, ArrayList<TopElement> items) {
super(context, R.layout.top_listview, items);
}
}
7743,javascript|html,javascriptでbodyタグ内に対してtableを追加しているはずなのに、画面には何も表示されないのですが、原因が掴めません。
画面にtableが表示されない原因の分かる方がいましたら、ご教授をお願いします。
javascriptのソースは、
$(document).ready(function () {
var url = "http://ooo";
$.get(url, function (json) {
var table = $('<table/>');
for (var i in json) {
var tr = $('<tr/>')
var td1 = $('<td/>').text(json[i].年);
var td2 = $('<td/>').text(json[i].名前);
var td3 = $('<td/>').text(json[i].読み);
tr.append(td1).append(td2).append(td3);
table.append(tr);
}
$("body").append(table);
});
});
htmlのソース(ヘッダーは必要項目以外省略)は、
<script type="text/javascript" src="js/script.js"></script>
</head>
<body>
</body>
</html>
となっています。
宜しくお願いします。
7766,javascript|html,サンプルコード
<div class="layer1" style="overflow:scroll;">
<ul>
<li class="layer2" style="position:relative;">
<button>btn</button>
<p class="tooltip" style="display:none;position:absolute;"></p>
</li>
<li class="layer2" style="position:relative;">
<button>btn</button>
<p class="tooltip" style="display:none;position:absolute;"></p>
</li>
</ul>
例えばこんな形で、スクロール範囲内の要素の中のそれぞれのリストに対して、
JavaScriptでbuttonのclickイベントをきっかけに
position:absoluteのブロックを表示させるUIを作りたいのですが
このままやると、当然ですがoverflow:scrollを指定しているdiv要素の中で見切れてしまうのです。
ツールチップUIがoverflow:scrollを指定しているdiv要素より上のレイヤーに表示されている見た目にするためには、どのような実装方法がありますでしょうか？
何卒よろしくお願いいたします。
7787,html,現在は下記のソースのように、thタグの枠線は白に設定しています。
マウスオーバーした際に、この枠線を青に変えたいのですが方法が分かりません。
*現在のCSS(対象のthタグ部分のみ)
table.dataTable thead th {
text-align: center;
padding: 3px 0px 3px 0px;
border: 1px solid white;
font-weight: bold;
color:white;
background-color:black;
cursor: pointer;
}
7788,html|python,DjangoのHTMLを以下のように書いたのですが､タイトルのようなエラーがでました｡  blockの対応関係を確認しても､間違ってる箇所を確認できなかったので質問させて頂きます｡
intruder_list.html
{% extends "base.html" %}
{% block title %}IntruderList{% endblock title %}
{% block extrahead %}
<style>
table {
margin-top: 8px;
}
</style>
{% endblock extrahead%}
{% block content %}
<h3 class="page-header">Intruder's list</h3>
<a href="{% url 'cms:intruder_add' %}" class="btn btn-default">Add</a>
<table class="table table-striped table-bordered">
<thead>
<tr>Time stamp</tr>
</thead>
<tbody>
{ % for intruder in intruders %}
<tr>
<td>{{ intruder.name }}</td>
<td>{{ intruder.timeStamp }}</td>
<td>
<a href="{% url 'cms:intruder_mod' intruder_id=intruder.id %}" class="btn btn-default">Modify</a>
</td>
</tr>
{% endfor %}
</tbody>
</table>
{% endblock content %}
base.html
{% load staticfiles %}
<!DOCTYPE html>
<html lang="{{ LANGUAGE_CODE|default:"en-us" }}">
<head>
<meta charset="UTF-8">
<title>{% block title %}IntruderList{% endblock %}</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">
<link href="{% static 'css/bootstrap-theme.min.css' %}" rel="stylesheet">
<script src="{% static 'js/jquery-1.11.2.min.js' %}"></script>
<script src="{% static 'js/bootstrap.min.js' %}"></script>
{% block extrahead %}{% endblock %}
</head>
<body>
<div class="container">
{% block content %}
{{ content }}
{% endblock %}
</div>
</body>
</html>
7810,python,DjangoのModelで変数のdefault値に順番に番号を入れたいです｡  次のようにすればできるかと思ったのですができませんでした｡
なにかいいアイデアはありますか?
hoge = models.TextField('hoge', max_length=255, default=lambda: 'hoge' + id)
7838,php|html,WordPressを始めました。
しかも超初心者で、HTML、CSS、PHP等Web環境もいまいち理解できていない状況です。
でも何とか頑張ってやっています。
さて本題です。
他Webサイトを参考にしながら、HTMLとCSSで制作されたサイトの一部を
WordPressに置き換えて、WordPressで記事を書き換えできるよう
仕様変更をしています。
他Webサイトの指示通り、
footer.php、header.php、index.php、sidebar.php、single.php、style.css
というようにHTMLのファイルを分割してstyle.cssも適切に書き換えました。
やりたいことは、
WordPressのダッシュボードにある固定ページで入力した 内容を上記のテンプレート化したsingle.phpに反映をさせたい
のです。
なぜなら、参考中のWebサイトに
固定ページで入力した内容はsigle.phpで表示される
と記載があったからです。
参考中のWebサイトよると、
index.phpよりsingle.phpの方が優先して表示 される
ようにWordPressは出来ているとのことでしたので、難しく考えず
index.phpとほぼ同じ内容でsingle.phpを作成しました。
しかしながら、
上記のsingle.phpを認識してくれずindex.phpの方をしか表示されません。
どのようにしたら、single.phpをWordPressが認識してくれるのでしょうか？
ご存知の方がいらっしゃいましたら、ご教授よろしくお願い致します。
【開発環境】
- レンタルサーバー（CentOS 5）
- WordPress（4.1.1）
- PHP（5.2.16）
- HTML
- CSS
- 作業環境（Windows7pro）
- PHP編集用（NoEditor）
- ブラウザ（FireFox）
7843,python,Django1.6にてdjango-social-authを使用しております。
ログインは、
settings.pyにはAPP_NAMEを自分のアプリ名で定義し、
LOGIN_URL = APP_NAME + '/login/'
LOGIN_REDIRECT_URL = '/'
LOGIN_ERROR_URL = APP_NAME + '/login-error/'
urls.spyに
url(r'^login/$', 'social_auth.views.auth',
{'backend': 'facebook'}, name='login'),
url(r'', include('social_auth.urls')),
のように記載することで、ログインは出来ました。
しかし、ログインのキャンセル時に/login-error/に対するurlが存在しないようなエラーとなってしまいます。
しかし、/login-error/に対応する記述方法が見つかりません。
どのように記述したらよろしいでしょうか？
また、Faceook認証だけでなくGoogle＋認証もしたいのですが、
{'backend': ['facebook', google]}, name='login'),
みたいなことも記載できず、backendに対してどのように記載するのかが不明です。
ご教示お願い致します。
7849,c#,Assets/Scenes/Player_NonPhysics2D.cs(42,32): error CS1525: Unexpected symbol '< internal >'
というエラーが出ますが、このエラーの意味がわかりません。指摘されている42行目とは次のコードの return; 行です。
//フレームの描き換え
void Update() {
if(goalCheck) { //ゴールチェック
return;　　　//ゴールだったら処理停止
}
}
7862,python,Django1.7で、AbstractUserを使ってauth.Userモデルに新たにユーザー区分というフィールドを追加したいと考えています。以下のアドレスを参考にし、その通りに実装してみました。http://nihaoshijie.hatenadiary.jp/entry/2014/06/11/165258
models.py(抜粋)
class CustomUser(AbstractUser):
userclass = models.CharField(u'ユーザ区分', max_length=50,blank=True)
def __str__(self):    # Python2: def __unicode__(self):
return self.userclass
def __unicode__(self):
return smart_unicode(self.userclass)
setting.py
AUTH_USER_MODEL = 'appointment.CustomUser'
admin.py
admin.site.register(CustomUser)
しかしながらmodels.pyのUserモデルでAuthUserとForeignKeyで結びつけているために以下のようなエラーが表示されました。
appointment.User.authuser: (fields.E301) Field defines a relation with the model 'auth.User', which has been swapped out.
HINT: Update the relation to point at 'settings.AUTH_USER_MODEL'.
models.py(別の部分)
class User(models.Model):#define user
authuser = models.ForeignKey(AuthUser,verbose_name = u'ゲスト')
出来うる限りこのユーザモデルは改変せずこのエラーを解決したいです。どうかご教授お願いします。
7879,javascript|jquery,JqueryのDataTables内で、ページ選択ボタンをtableに追加している箇所が知りたいのですが、
なかなか見当たりません。
分かる方がいましたら、ご教授をお願いします。
・使用しているJquery.datatables.jsのダウンロードリンク
datatables
7895,jquery,以下の様なよくあるサンプルだと、添付イメージ1のように、各カラムの高さが同一に書かれる事が多いと思います。
<div class="row">
<div class="col-md-12">ヘッダー</div>
</div>
<div class="row">
<div class="col-md-2">メニュー</div>
<div class="col-md-8">内容</div>
<div class="col-md-2">広告とか</div>
</div>
<div class="row">
<div class="col-md-12">フッター</div>
</div>
実際にページを作っていくと、普通は各カラムの高さは異なるので、イメージの2のようにそれぞれ段違いになると思います。
しかし、背景色やイメージを使う場合、高さが揃わないと締まりがありません。
よくある「ボックスの高さをそろえるjQuery」を使いまして、3のようにひとまず高さをそろえることはできたのです。
が、しかし。
ブラウザの幅を縮めて縦配置になった時に、各カラムの幅が同じなので、4のようにメニューのカラムなどの余白が残ってしまい残念なレイアウトになってしまいます。
縦配置の時は5のようにカラムの内容に合わせて、
横配置の時だけ3のように揃える方法はないものでしょうか。
7898,c#,Unityを使っています。初心者です。実行をすると、コンソールエラーで
IndexOutOfRangeException array index is out of range
と
The  referenced script on this  Behaviour is missing
と出ました。
エラーを調べてみましたが、よくわからなかったので　どなたか解決策を教えてください。
using UnityEngine;
using System.Collections;
public class Player_NonPhysics2D:MonoBehaviour {
//宣言
// Inspectorで調整するためのプロパティ
public float speed =15.0f;
public Sprite[] run;
public Sprite[] jump;
//　内部で扱う変数
float jumpVy;
int animIndex;
bool goalCheck;
//メッセージに対応したコード
//コンポーネントの実行開始
void Start(){
//初期化
jumpVy = 0.0f;
animIndex = 0;
goalCheck = false;
}
//プレイヤーキャラのコリジョンに他のゲームオブジェクトのコリジョンが入った
void OnCollisionEnter2D(Collision2D col){
//ゴールチェック
if(col.gameObject.name == "Stage_Gate"){
//goal
goalCheck = true;
return;
}
//ゴール以外だったらステージを再読み込みしてリセット
Application.LoadLevel(Application.loadedLevelName);
}
//フレームの描き換え
void Update() {
if(goalCheck) { //ゴールチェック
return;
//ゴールだったら処理停止
}
//現在のプレイヤーキャラの高さを計算
float height= transform.position.y + jumpVy;
//接地チェック（高さが0なら接地している）
if(height <= 0.0f) {
//ジャンプ初期化
height = 0.0f;
jumpVy  = 0.0f;
//ジャンプチェック
if(Input.GetButtonDown("Fire1")){
//ジャンプ処理
jumpVy = +1.3f;
//ジャンプスプライト画像に切り替え..
GetComponent<SpriteRenderer>().sprite = jump [0];
} else {
//走り処理
animIndex++;
if(animIndex <= run.Length){
animIndex = 0;
}
//走りスプライト画像に切り替え
GetComponent<SpriteRenderer>().sprite=run[animIndex];
}
} else {
//ジャンプ後の降下中
jumpVy -= 0.2f;
//jumpVy -= 6.0f * Time.deltaTime; //正しい処理はこちら
}
//プレイヤーキャラの移動（座標設定）
transform.position = new Vector3 (
transform.position.x+speed*Time.deltaTime,height,0.0f);
//下記のように相対移動で記述してもいい
//transfor.Translate(speed*Time.deltaTime,jumpVy,0.0f);
//transform.position += new Vector3(speed * Time.deltaTime,jumpVy,0.0f);
//ただし次の書き方では雨後置かないので注意
//transform.position.Set(
// transform.position.x+speed*Time.deltatime,height,0,0f);
//カメラの移動（座標の相対移動）
GameObject goCam = GameObject.Find ("Main Camera");
goCam.transform.Translate (speed * Time.deltaTime, 0.0f,0.0f);
}
// UnitGuIの表示
void OnGUI(){
//デバックテキスト
GUI.TextField(new Rect(10,10,300,60),
"[Unity 2d Sample 3-1 A]\nマウスの左ボタンを押すと加速\nはなすとジャンプ");
//リセットボタン
if(GUI.Button (new Rect(10,80,100,20),"リセット")) {
Application.LoadLevel (Application.loadedLevelName);
}
}
}
7902,java,PCを新しくしたのでAndroidStudioをインストールしたのですが、前回は出なかったエラーが出て困っています。
新しくプロジェクトを作ると、 AndroidManifest.xml ファイルの android:theme="@style/AppTheme" にエラーが出てしまいます。カーソルを合わせると「Top level element is not completed」というメッセージ翻訳サイトで見る限りパスの間違いなのかなとおもい、パスを "@style/AppTheme"から "@styles/AppTheme" や "@values/style/AppTheme" にするなど試してみたのですが解決できませんでした。
さらに不思議なことに赤線が入っているのにビルドは完了してしまいます。
状況をより具体的にするために動画をとりました。(約３分)
https://www.youtube.com/watch?v=80Z4SEtqtus&feature=youtu.be
なにか、原因などがお分かりになる方ご連絡お願いします。
よろしくおねがいします。
7908,html,Datepickerプラグイン - Monacaドキュメント
上記ページを参照して、monacaのCordovaプラグイン「datepicker」を有効にするところまではできました。
ただ、そのあと実際どこに何を記述すればいいかわかりません。
初歩的な質問で申し訳ないです・・
Androidの場合・iOS の場合と分かれているということは、
共通のindex.htmlに記述してもだめということかもしれません。
でも、Androidフォルダ・iOSフォルダ以下のどちらにもhtmlは生成されていないので、
どこに書けばいいかわかりません。
あと、できればこの問題が解決した後に「今日の日付から指定された日付を引き算する」という処理をしたいです。それについてもアドバイスいただけると嬉しいです。
お手数ですが、ご回答よろしくお願いいたします。
7917,javascript|html,CentOS（Linux）のお話になりますが、異なるディレクトリにあるHTMLファイルや
PHPファイルから参照できるように、JavaScriptやCSS内に記述されている
相対パスを絶対パスに変更したいです。
つまり、例えばJavaScriptだと、
$("#size_s img").attr("src","common/img/XXXXXXX.gif");
と記述されているのを、
$("#size_s img").attr("src","/virtual/service/example.com/http/test/common/img/XXXXXXX.gif");
というようにサーバーの絶対パスに変更したいのですが、これでは認識しないので、
$("#size_s img").attr("src","http://www.example.com/test/common/img/XXXXXXX.gif");
としたら認識してくれました。
でも、個人的には前者のサーバーの絶対パスで記述したいのです。
なぜなら、
http://www.example.com/test/common/img/XXXXXXX.gif
を、そのままブラウザで貼り付けるとXXXXXXX.gifだけが表示できてしまうからです。
XXXXXXX.gifだけがブラウザで表示されると問題あるかというと、そうではないのですが、
気持ちが悪いのです。
やはりサーバー内で隠せるものは隠して、表示させるべきHTMLとCSSのデザインだけが
ブラウザに表示されるようにしたいです。
JavaScriptやCSS内の相対パスをサーバーの絶対パスにする良い方法は
ないものでしょうか？
もしご存知の方がいらっしゃいましたら、方法をご教授ください。
【開発環境】
HTML
CSS
JavaScript
レンタルサーバー（CentOS 5）
WordPress（4.1.1）
PHP（5.2.16）
作業環境（Windows7pro）
コード編集用（NoEditor）
7920,javascript|jquery,javascriptでオブジェクトのクラス名を知る方法を探しているとObject.prototype.toString.applyで調べられることがわかりました。
そこでjQueryがクラス名を返すかどうか調べたところObjectが返ってきました。
Object.prototype.toString.apply($("input[type=checkbox]"))
"[object Object]"
これはそういう仕様なのでしょうかそれとも調べ方が間違っていますか？
そもそもクラス名を調べてその動作をドキュメントで探そうとしたのですが、ドキュメントによるとselectorで値が複数のものも単数のものも返り値がjQueryになっていて調べる時の助けになりません。
javascriptで特定のオブジェクトの振る舞いを詳しく知りたいときにはどのような方法を取れば良いのでしょうか？
例えばRubyであれば「object.classでクラス名を調べて、そのクラスのドキュメントを参照する。」という方法が取れました。似た手段を取ろうとしたのですが上手くいきませんでした。
7928,python,http://qiita.com/nakazye/items/48651e39f07da82fe79e
上のサイトを参考にしてHerokuにデプロイできたのですが､Application Errorでサイトが表示できません｡  いろいろ試しましたが､解決方法がわかりませんでした｡  どうすればサイトを表示できるのでしょうか｡  教えて下さい｡  以下にsettings.pyを示します｡
import os
from django.conf.global_settings import LANGUAGE_CODE, TIME_ZONE,\
STATICFILES_DIRS, STATIC_ROOT
import dj_database_url
from socket import gethostname
BASE_DIR = os.path.dirname(os.path.dirname(__file__))
STATIC_ROOT = 'staticfiles'
hostname = gethostname()
# Quick-start development settings - unsuitable for production
# See https://docs.djangoproject.com/en/1.7/howto/deployment/checklist/
# SECURITY WARNING: keep the secret key used in production secret!
SECRET_KEY = '@71lbdkiwo_wf!)h0og^#z022$48#7=_9ldccg^(=zb&219640'
# SECURITY WARNING: don't run with debug turned on in production!
#デバッグモードをするか判定
if 'VAIO' in hostname:
DEBUG = True
TEMPLATE_DEBUG = True
else:
DEBUG = False
TEMPLATE_DEBUG = False
ALLOWED_HOSTS = ['*']
# Application definition
INSTALLED_APPS = (
'django.contrib.admin',
'django.contrib.auth',
'django.contrib.contenttypes',
'django.contrib.sessions',
'django.contrib.messages',
'django.contrib.staticfiles',
'bootstrapform',
'cms',
'gunicorn',
'whitenoise',
)
MIDDLEWARE_CLASSES = (
'django.contrib.sessions.middleware.SessionMiddleware',
'django.middleware.common.CommonMiddleware',
'django.middleware.csrf.CsrfViewMiddleware',
'django.contrib.auth.middleware.AuthenticationMiddleware',
'django.contrib.auth.middleware.SessionAuthenticationMiddleware',
'django.contrib.messages.middleware.MessageMiddleware',
'django.middleware.clickjacking.XFrameOptionsMiddleware',
)
ROOT_URLCONF = 'homesecurity.urls'
WSGI_APPLICATION = 'homesecurity.wsgi.application'
# Database
# https://docs.djangoproject.com/en/1.7/ref/settings/#databases
#データベースをどれにするか判定
if 'VAIO' in hostname:
DATABASES = {
'default': {
'ENGINE': 'django.db.backends.sqlite3',
'NAME': os.path.join(BASE_DIR, 'db.sqlite3'),
}
}
else:
import dj_database_url
DATABASES = {
'default': dj_database_url.config()
}
# Internationalization
# https://docs.djangoproject.com/en/1.7/topics/i18n/
LANGUAGE_CODE = 'ja'
TIME_ZONE = 'Asia/Tokyo'
USE_I18N = True
USE_L10N = True
USE_TZ = True
# Static files (CSS, JavaScript, Images)
# https://docs.djangoproject.com/en/1.7/howto/static-files/
STATIC_URL = '/static/'
STATICFILES_DIRS = (
os.path.join(BASE_DIR, "static"),
)
Heroku logsでのログは以下のようになっていました｡
[32m2015-03-15T00:10:11.273938+00:00 heroku[router]:[0m at=error code=H14 desc
="No web processes running" method=GET path="/" host=pacific-headland-1022.herok
uapp.com request_id=3d77730f-7e43-42d1-b5a3-83e20b90ab14 fwd="119.105.221.203" d
yno= connect= service= status=503 bytes=
7960,javascript|html|jquery,以下の様なソートのためのModalダイアログをTwitter Bootstrapを用いて作成しています。
<div class="modal fade" id="sort_form_modal" tabindex="-1" role="dialog">
<div class="modal-dialog" data-keyboard="true">
<div class="modal-content">
<form accept-charset="UTF-8" action="/" method="get">
<div style="display:none"><input name="utf8" type="hidden" value="✓"></div>
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>
<h4 class="modal-title">ソート</h4>
</div>
<div class="modal-body">
<span>ソート条件</span>
<div class="btn-group" role="group" data-toggle="buttons">
<label class="btn btn-primary active">
<input type="radio" name="direction" value="asc" checked>昇順
</label>
<label class="btn btn-primary ">
<input type="radio" name="direction" value="desc">降順
</label>
<div>
<select class="form-control" name="sort">
<option value="foo">foo</option>
<option value="bar">bar</option>
</select>
</div>
</div>
</div>
<div class="modal-footer">
<input class="btn btn-primary" name="commit" type="submit" value="ソートする">
</div>
</form>
</div>
</div>
</div>
そしてエンターキーでSubmitとESCキーでModalを消すために以下のjQueryを使っています。
$('#sort_form_modal').modal({
keyboard: true;
});
$('#sort_form_modal').on( 'keypress', function( e ) {
if( e.keyCode === 13 ) {
e.preventDefault();
$( this ).trigger( 'submit' );
}
});
これだとセレクトボックスの値を変えた後にエンターキーでSubmitが押されるのですが、Modalが開いた直後やもしくは昇順・降順を選択しただけではエンターキーを押しても何の反応もありません。
どうすればModalを開いた直後からエンターキーの入力を受け取ってSubmitを送るようにできるのでしょうか？
7966,java,今現在、 spring を用いて開発しています。
context.xml の中で、 constructor-arg などを用いて、java の値(eg. String)を inject できることは理解したのですが、たとえば main 関数の引数の値を inject したい場合などには、どのようにしたらこれを行なえるのでしょうか。
7967,python,swiftでキーボードからの入力を取得したいと思っています。
pythonでは下記のようにして取得できましたがswiftではどうすればいいのでしょうか?
ちなみにswiftはxcrun swift input.swift としてコマンドライン上で実行します。
input_str = raw_input("Hello") #python2
input_str = input("Hello") #python3
7971,javascript|html,現在は下記ソースのように、四角枠内(dropエリア)にdropするとそのファイル情報が表示されます。
しかし、ファイル情報によってdropエリアの範囲が狭くなってしまうので、これを改善したいと考えてます。
そこで、下の①か②の方法で改善しようと考えています。
①四角枠内にファイルをドラッグオーバーしたら、別でdropエリアを四角枠内に表示させるようにする
→javascriptから「別でdrop用のエリアを出現させる」部分の実装方法が分からないので教えて欲しいです。
②四角枠内の文字をドラッグオーバー中だけ非表示にする
→innerHTMLを非表示にする方法が分からないので教えて欲しいです。
①または②の問題が解決出来る方がいましたら、ご教授をお願いします。
(function() {
function $id(id) {
return document.getElementById(id);
}
function Output(msg) {
var m = $id("filedrag");
m.innerHTML = msg + m.innerHTML;
}
// ドラッグオーバー時イベント
function FileDragHover(e) {
e.stopPropagation();
e.preventDefault();
e.target.className = (e.type == "dragover" ? "hover" : "");
}
function FileSelectHandler(e) {
FileDragHover(e);
var files = e.target.files || e.dataTransfer.files;
for (var i = 0, f; f = files[i]; i++) {
ParseFile(f);
}
}
function ParseFile(file) {
Output(
"<p id = 'MessageParagraph'>name: <strong>" + file.name +
"</strong> size: <strong>" + file.size +
"</strong> bytes" +
"</p>"
);
}
$(function () {
$(document).on('drop dragover', function (e) {
e.stopPropagation();
e.preventDefault();
});
});
function Init() {
var fileselect = $id("fileselect"),
filedrag = $id("filedrag"),
submitbutton = $id("submitbutton");
AddFiles = $id("AddFiles")
fileselect.addEventListener("change", FileSelectHandler, false);
var xhr = new XMLHttpRequest();
if (xhr.upload) {
filedrag.addEventListener("dragover", FileDragHover, false);
filedrag.addEventListener("dragleave", FileDragHover, false);
filedrag.addEventListener("drop", FileSelectHandler, false);
filedrag.style.display = "block";
AddFiles.style.display = "none";
fileselect.style.display = "none";
}
}
//
if (window.File && window.FileList && window.FileReader) {
Init();
}
})();
/*
Styles for HTML5 File Drag & Drop demonstration
Featured on SitePoint.com
Developed by Craig Buckler (@craigbuckler) of OptimalWorks.net
*/
body
{
font-family: "Segoe UI", Tahoma, Helvetica, freesans, sans-serif;
font-size: 90%;
margin: 10px;
color: #333;
background-color: #fff;
}
#divBody
{
width: 550px;
margin: 0 auto;
text-align: left;
}
#AddFiles{
width: 100px;
height: 25px;
}
#filedrag
{
display: none;
margin: 1em 0;
border: 2px dashed #555;
cursor: default;
padding: 0 10px;
border: 1px solid #999;
width : 550px ;
height:200px;
width : 560px;
overflow-y: scroll;
overflow-x: hidden;
}
#filedrag.hover
{
color: #f00;
border-color: #f00;
border-style: solid;
box-shadow: inset 0 3px 4px #888;
}
#MessageParagraph
{
border-bottom:solid 1px;
height:30px;
}
#messages
{
padding: 0 10px;
margin: 0;
border: 1px solid #999;
width : 550px ;
height:200px;
width : 560px ;
overflow-y: scroll;
overflow-x: hidden;
}
<!DOCTYPE html>
<html lang="en">
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
<meta charset="UTF-8" />
<title>Upload</title>
<link rel="stylesheet" type="text/css" media="all" href="styles.css" />
</head>
<body>
<div id="divBody">
<form id="upload" action="index.html" method="POST" enctype="multipart/form-data">
<div>
<div id="filedrag">
<input type="hidden" id="MAX_FILE_SIZE" name="MAX_FILE_SIZE" value="300000" />
</div>
</div>
<div>
<button id="AddFiles" type="button" onclick="document.getElementById('fileselect').click();">Add Files....</button>
<input type="file" id="fileselect" name="fileselect[]" multiple="multiple" />
</div>
</form>
<script src="filedrag.js"></script>
</div>
</body>
</html>
8008,javascript|jquery,datatebles ver1.10.5 を使用しており、
検索機能で検索する列の指定をしたいのですが方法が分かりません。
分かる方がいましたらご教授をお願いします。
使用しているdatatablesのダウンロードページです。
http://datatables.net/download/
8023,python,PythonのvirtualenvにpipでTweepyをインストールしようとしたのですが､以下の様なエラーがでました｡  Tweepyのインストール時に一緒にインストールされたsixというライブラリが原因だと思うのですが､対処方法がわかりません｡
エラー
(env) D:\>python
Python 2.7.9 (default, Dec 10 2014, 12:24:55) [MSC v.1500 32 bit (Intel)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> import tweepy
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
File "D:\Documents\env\lib\site-packages\tweepy\__init__.py", line 12, in <module>
from tweepy.models import Status, User, DirectMessage, Friendship, SavedSearch, SearchResults, M
odelFactory, Category
File "D:\Documents\env\lib\site-packages\tweepy\models.py", line 7, in <module>
from tweepy.utils import parse_datetime, parse_html_value, parse_a_href
File "D:\Documents\env\lib\site-packages\tweepy\utils.py", line 10, in <module>
from six.moves.urllib.parse import quote
ImportError: No module named urllib.parse
pip freeze
(env) D:\>pip freeze
matplotlib==1.2.0
nltk==3.0.2
numpy==1.9.2
oauthlib==0.7.2
PyYAML==3.11
requests==2.6.0
requests-oauthlib==0.4.2
scikit-learn==0.15.2
scipy==0.12.0
six==1.9.0
tweepy==3.3.0
対処方法を教えて下さい｡
追記
シェルでsixのヴァージョンを表示させてみたところ､pip freezeで表示したのとなぜか違います｡
(env) D:\>python
Python 2.7.9 (default, Dec 10 2014, 12:24:55) [MSC v.1500 32 bit (Intel)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> import six
>>> six.__version__
'1.2.0-mpl'
追記
1､ アンインストールしてeasy_installでインストールを試みると以下のエラーで失敗しました｡
エラー(easy_install使用時)
(env) D:\>python
Python 2.7.9 (default, Dec 10 2014, 12:24:55) [MSC v.1500 32 bit (Intel)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> import tweepy
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
File "build\bdist.win32\egg\tweepy\__init__.py", line 12, in <module>
File "build\bdist.win32\egg\tweepy\models.py", line 7, in <module>
File "build\bdist.win32\egg\tweepy\utils.py", line 10, in <module>
ImportError: No module named urllib.parse
2､ matplotlibの中にsixがあるみたいなのですが､もしかしてこれを参照している??
>>> import six
>>> six.__version__
'1.2.0-mpl'
>>> six
<module 'six' from 'D:\Documents\env\lib\site-packages\matplotlib-1.2.0-py2.7-win32.egg\six.pyc'>
>>>
8027,python,Golangでpython3のmap関数のようなものを探しています。
python3では
list(map(str.upper, ["a", "b", "c"])) # ["A", "B", "C"]
というふうに簡単にリストの要素それぞれに対して関数を使えるのですが、Golangではどうすればいいのでしょうか?
8045,c#,ASP.NET MVC5でTempDataを使用し、
リダイレクト先の画面にメッセージを表示させようとしていますが、
何故か表示されません。
MyController # Register() 内の conf.Save();
の部分をコメントアウトしたところ、メッセージが表示されるようになりました。
なぜ Web.config ファイルを編集し保存すると
TempDataの中身がクリアされてしまうのか、
理由をご存じの方がいらっしゃいましたら、ご教示ください。
＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝
MyController.cs
public class MyController : Controller
{
public ActionResult Index()
{
if (TempData["Message"] != null)
{
string message = TempData["Message"].ToString();
ViewBag.Message = message;
}
return View();
}
public ActionResult Register()
{
return View();
}
[HttpPost]
public ActionResult Register(string hogeModel)
{
var conf = WebConfigurationManager.OpenWebConfiguration("~");
foreach (var key in conf.AppSettings.Settings.AllKeys)
{
// 何らか編集（とりあえず全部同じ値で更新）
conf.AppSettings.Settings[key].Value = conf.AppSettings.Settings[key].Value;
}
conf.Save(); // ここをコメントアウトするとうまくいく
TempData["Message"] = "変更を保存しました。";
return RedirectToAction("Index");
}
}
Index.cshtml
@{
ViewBag.Title = "Index";
<div>@ViewBag.Message</div>
@Html.ActionLink("登録画面へ", "Register")
}
Register.cshtml
@{
ViewBag.Title = "Register";
using (Html.BeginForm())
{
<input type="submit" value="登録">
}
}
8047,java,Javaのリフレクションについて、パフォーマンスの問題と、型安全の言語仕様の点から、リフレクションの使用はあまり好ましくないというのが一般的な見解かと思いますが、
「じゃあなぜ実装されているんだ？」
と思い、調べてみたら、
「非常に効果を発揮する場面でちょこっと使う」
という記事を見ました。
なんだその抽象的な説明は！ということで、どういう場面で使うべきでしょうか？
使いたいけど使っていいのかわからなかったシチュエーションが2回ありました。
下記について、どうすべきかもおしえてください。
インスタンスの複製
Aというエンティティーがあり、そのインスタンスを同一クラスに複製、
もしくは別クラスで同名フィールドを持つクラスに複製するとき、
それぞれのゲッターセッターを用いて1フィールドづつ代入すると、
フィールド依存が強くて、フィールド変更時に大変だからリフレクションを使いたいな
というケース
バンドルクラスからそれぞれのクラスに分配
Aというバンドルインスタンスがあり、そのインスタンスはデータベースのリレーションをひとまとめにしたクラスで、
B, C, Dという分配先Entityに代入する。
なかでもBは、Aから複数個生成され、
・AはBの共通項目をメンバ変数として持ち、Bの固有項目を内部クラス(X)のListとして持っている。
・Aの持っているCとDの項目は、共通項目として持っている。
ちょっと2個目はわかりずらいと思うので、わからなかったら結構です。
よろしくお願いします。
8059,python,Django1.6とdjango-social-authを使用しています。
login_requiredをviews.pyではなく、
urls.pyに記載して、
url(r'^hoge/$',
login_required(hoge_view),
name='paypal'),
をしていますが、何故かログインのページに遷移しません。
settings.py
LOGIN_URL = '/login/'
も設定しています。
ご教示よろしくお願い致します。
8079,python,モデルをユーザごとにadminの画面を複数に分けようと思いました。
get_querysetを使って、ユーザを分割できるとのことで、
ユーザごとに管理をしたいモデル全てにユーザ（User）の外部キーをつけました。
このように↓
class Hoge(models.Model):
user = models.ForeignKey(User, unique=False, verbose_name=u'ユーザ')
さらに、admin.pyでの設定はこのような感じです↓。
class HogeAdmin(admin.ModelAdmin):
def get_queryset(self, request):
qs = super(HogeAdmin, self).get_queryset(request)
if request.user.is_superuser:
return qs
# 自分のIDでフィルターかける
return qs.filter(author=request.user)
また、添付画像のように、「スーパーユーザー権限」はなく、「スタッフ権限」のあるユーザで、
分離はできると思いました。
しかし、このユーザを使ってadminのページにログインしようと思いましたが、
「変更のためのパーミッションがありませんでした。」となってしまいました。
urls.pyにはもちろん
from django.contrib import admin
admin.autodiscover()
は記載しています。
もし、解決策があればよろしくお願い致します。
8096,c#,お世話になっています。
ASP.NET MVCで、共通の基本Classを継承する複数のControllerがあり、いずれも同じActionFilterが設定されています。
public class BaseController : Controller
{
public MemberParam  mParam;
}
[AnalyseSession]
public class MemberController : BaseController
{
// some codes
}
[AnalyseSession]
public class HomeController : BaseController
{
// some codes
}
AnaliseSession アクションフィルタ内部で、呼び出したControllerの内部プロパティに値をセットしたいです。
public class AnalyseSessionAttribute : ActionFilterAttribute
{
public override void OnActionExecuting(ActionExecutingContext context) {
var sessions    = context.HttpContext.Session;
// セッションを取得してうんちゃらします
// ここがわからない部分
var controller = context.Controller as MemberController;
controller.mParam = this.mParam;
}
}
単一のコントローラなら、見たとおり問題な参照できますが、複数コントローラ・多数のプロパティの場合、シンプルに実装する方法をご教示ください。
8097,javascript|html,javascriptで、drag&dropされたファイルのfile objectを取得しており、そのファイル情報を画面に出力しています。
ファイル情報出力時、input type="file"タグに取得ファイルを設定して画面に出力することはセキュリティ上できないようなので、Pタグで表示していますがsubmitボタン押下時のsubmit対象にはなりません。
取得し、画面出力しているfile objectを、submitボタン押下時のsubmit対象にしたいのですが、どのようにsubmitの対象にすればよいか分かりません。
方法が分かる方がいましたら、ご教授をお願いします。
また、ファイルがdrag&dropされるたびに送信する方法は無しでお願いします。
・file object取得時ソース
var files = e.target.files
・画面出力時ソース
fileは取得したfile objectです
Output(
"<p id = 'MessageParagraph'>name: <strong>" + file+
"</strong> size: <strong>" + file.size +
"</strong> bytes" +
"<input id = 'Cancel' type = 'button' onclick = 'this.parentElement.remove()' value = 'Cancel' />" +
"</p>"
);
8100,java,class Hoge<T>{ }
上記のClass宣言があるとして
Hoge x1;
Hoge<?> x2;
変数宣言で?ありと?なしで宣言できるみたいなのですが、この違いは何でしょうか？
8104,jquery,jQueyのaddClass()を使いたいのですが、
$("#svg_textarea").addClass( "hoge" );
とやるとうまくいくものの、
$("#svg_textarea")[0].addClass( "hoge" );
とやるとうまくいきません。
HTMLElementに対してaddClass()を使うにはどうしたらいいのでしょうか？
というかそもそもjQueryを良くわかってないで使ってるからこういう所で躓く。
$("#svg_textarea")は配列のような物と理解しているんですが、その理解が違ってますか？
8112,c#,私は日本のゲーム開発元で働いています。
これから社員にunityの講座を行います。
monodevelopで変数に漢字・かなの名をつけるとinspectorで無事に表示されますが、
そうするとバグや不具合が発生する場合があるかと聞きたいと思います。
8114,javascript|jquery,Google Analyticsのようにサイトからデータを送信するときはどうしたらよいのでしょうか。
jQueryのgetやpostでやろうとするとクロスオリジンの問題があるなーと思って諦めていたのですが、AnalyticsもJavaScriptを使ってデータを送信しているのですよね。
こういう場合どのようにしてデータを送信しているのでしょうか。
ユーザーの情報を下手に送信するわけにはいかないので、注意点などあればおしえてください。
8159,python,Django 1.6でadminの機能を使ってます。
Modelの外部キーにフィルターをかけた状態で表示させたいです。
Modelは
class Hoge(models.Model):
user = models.ForeignKey(User, unique=False, verbose_name=u'ユーザ')
と
class Bar(models.Model):
user = models.ForeignKey(User, unique=False, verbose_name=u'ユーザ')
questions = models.ForeignKey(Hoge)
のように２つのHogeとBarのModelがあるときに、
admin.pyで
class BarAdmin(admin.ModelAdmin):
# 略
で、Barを表示ています。
Barをadminで編集するときには、
このようになりますが、そこにフィルターをかけたいです。
一応やれそうな方法で、
class BarAdmin(admin.ModelAdmin):
form = BarForm
とし、BarFormを
class BarForm(forms.ModelForm):
def __init__(self, *args, **kwargs):
# なぜかできない・・・・
self.request = kwargs.pop("request")
# 略
としましたが、kwargsにはrequestのキーが無いため、
今アクセスしているuserを取得できません。
ご教示よろしくお願い致します。
8164,javascript|html,下記ソースの通り、JsonのNameデータが最大20件(最大20件で最小1件が)送られてきます。
そのデータを画面出力する際、10行2列に並べて表示したいのですが、
実装方法が分かりません。ご教授をお願いします。
・java script Jsonデータ取得時
$.get(url, function (jsonData) {
});
・現在のHTMLです
<table id="example">
<thead>
<tr>
<th>Name1列目</th>
<th>Name2列目</th>
</tr>
</thead>
<tbody>
</table>
8168,c#,using System;
class CodeFile1
{
static void Main()
{
int[] sample = new int[100];
int i;
for (i = 0; i < 10; i = i+1) ;
sample[i] = i;
for (i = 0; i < 10; i = i+1)
Console.WriteLine("This is sample[" +i+ "] : " +sample[i]);
}
}
サンプルアプリを作っています。　上記をコンパイルすると、
This is sample[0]:0 This is sample [1]:1 .......
にならず、
This is sample[0]:0 This is sample [1]:0.......
になるのですが、原因がわかりません。ループ文がおかしいんでしょうか？
8197,java,public enum MyEnum {
HOGE,
FUGA;
}
下記のClass<?>とStringからMyEnum.HOGEを取得するにはどうすれば良いでしょうか？
またClass<?>型(cl)からenum値すべて列挙可能でしょうか？
class<?> cl = MyEnum.class;
String value = "HOGE";
8231,c#,関数型言語(scheme)とオブジェクト指向言語(c#)の基礎を同時に勉強し、現在オブジェクト指向と関数指向どちらをより重点的に学んでいくかを考えています。
オブジェクト指向について、大まかにいえば
・オブジェクト指向は「変更に強いプログラム」を作るための考え方の一つ。
・それはプログラムを「責任」という観点でいくつかの「オブジェクト」に分割し、「オブジェクト」同士の相互作用とみること。
・オブジェクト指向型言語はそれを支援する仕組みを持っている言語。
という考えに落ち着いています。
関数指向については、参照透過性・高階関数について学び、遅延評価を知り、モナドというものがある、ぐらいの断片的な知識に留まっています。
前置きが長くなってすみません。ここで本題に入ります。
「変更に強いプログラムを作る」という考えを関数指向は含んでいるのか？
例え含んでいなくとも、関数型言語にそれをサポートする仕組みがある(これからでる)のか？
ということを知りたいです。
8232,java,[[a, a, a], [b, b, b], [c, c, c]]
を
[a,a,a,b,b,b,c,c,c]
こうしたいのですが、streamで一発で出来る方法ってありますか？
//普通にループするとこんな感じです。
List innerA = Arrays.asList("a","a","a");
List innerB = Arrays.asList("b","b","b");
List innerC = Arrays.asList("c","c","c");
List<List> outer = Arrays.asList(innerA,innerB,innerC);
System.out.println(outer);
//[[a, a, a], [b, b, b], [c, c, c]]
List innerABC = new ArrayList<>();
for(List inner : outer){
innerABC.addAll(inner);
}
System.out.println(innerABC);
//[a,a,a,b,b,b,c,c,c]
8246,javascript|html,下記ソースには、column-Name、column-Positionの検索入力欄があり、それぞれの入力欄はそれぞれの対象列(NameとPosition)に対して検索を掛け、一致した行のみを描画します。
ここで、
この2つの検索欄を1つにし、この１つの検索欄で2つの列(NameとPosition)に対する検索(or検索)が出来るようにしたいのですが方法が分かりません。
ご教授をお願いします。
function filterColumn ( i ) {
$('#example').DataTable().column( i ).search(
$('#col'+i+'_filter').val()
).draw();
}
$(document).ready(function() {
$('#example').dataTable();
$('input.column_filter').on( 'keyup click', function () {
filterColumn( $(this).parents('tr').attr('data-column') );
} );
} );
<link href="//cdn.datatables.net/1.10.5/css/jquery.dataTables.css" rel="stylesheet"/>
<script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
<script src="//cdn.datatables.net/1.10.5/js/jquery.dataTables.min.js"></script>
<table style="width: 67%; margin: 0 auto 2em auto;" border="0" cellpadding="3" cellspacing="0">
<thead>
<tr>
<th>Target</th>
<th>Search text</th>
</tr>
</thead>
<tbody>
<tr id="filter_col1" data-column="0">
<td>Column - Name</td>
<td align="center"><input class="column_filter" id="col0_filter" type="text"></td>
</tr>
<tr id="filter_col2" data-column="1">
<td>Column - Position</td>
<td align="center"><input class="column_filter" id="col1_filter" type="text"></td>
</tr>
</tbody>
</table>
<table id="example" class="display" cellspacing="0" width="100%">
<thead>
<tr>
<th>Name</th>
<th>Position</th>
<th>Office</th>
<th>Age</th>
<th>Start date</th>
<th>Salary</th>
</tr>
</thead>
<tfoot>
<tr>
<th>Name</th>
<th>Position</th>
<th>Office</th>
<th>Age</th>
<th>Start date</th>
<th>Salary</th>
</tr>
</tfoot>
<tbody>
<tr>
<td>Tiger Nixon</td>
<td>System Architect</td>
<td>Edinburgh</td>
<td>61</td>
<td>2011/04/25</td>
<td>$320,800</td>
</tr>
<tr>
<td>Garrett Winters</td>
<td>Accountant</td>
<td>Tokyo</td>
<td>63</td>
<td>2011/07/25</td>
<td>$170,750</td>
</tr>
<tr>
<td>Ashton Cox</td>
<td>Junior Technical Author</td>
<td>San Francisco</td>
<td>66</td>
<td>2009/01/12</td>
<td>$86,000</td>
</tr>
<tr>
<td>Cedric Kelly</td>
<td>Senior Javascript Developer</td>
<td>Edinburgh</td>
<td>22</td>
<td>2012/03/29</td>
<td>$433,060</td>
</tr>
<tr>
<td>Airi Satou</td>
<td>Accountant</td>
<td>Tokyo</td>
<td>33</td>
<td>2008/11/28</td>
<td>$162,700</td>
</tr>
</tbody>
</table>
8254,javascript|jquery,ボタンをクリック後、フォームを挿入してさらにマルチ言語用にタブ切り替えを実装させたいのですが、うまく行きません。
なんとかしてクリック毎にidを振り当ててその要素にタブ切り替えのファンクションを振り当てたいです。
どんな些細な事でも構いませんのでどなたかご指摘を宜しくお願いいたします。
var totalField = 0;
function addField(type) {
totalField++;
if (type === 'free') {
freeText();
} else if (type === 'insideQuote') {
insideQuote();
} else if (type === 'clipsQuote') {
clipsQuote();
} else if (type === 'outsideLink') {
outsideLink();
}
}
function freeText() {
var form_element = document.createElement("form");
form_element.id = 'freeText_' + totalField;
form_element.name = 'heading_' + totalField;
form_element.class = 'col-xs-12';
var form_tab = document.createElement("ul");
form_tab.id = 'myTab_' + totalField;
form_tab.setAttribute('class', 'nav nav-tabs');
form_tab.setAttribute('data-role', 'tablist');
form_tab.innerHTML = '<li class="active"><a href="#jpn">日本語</a></li><li><a href="#eng">English</a></li>';
var tab_content = document.createElement("div");
tab_content.id = 'myTabContent_' + totalField;
tab_content.setAttribute('class', 'tab-content');
var jp_panel = document.createElement("div");
jp_panel.id = "jpn";
jp_panel.setAttribute('class', 'tab-pane active');
jp_panel.setAttribute('aria-labelledby', 'jpn');
var heading = document.createElement("h4");
heading.innerText = "見出しを入力";
var headingTitle = document.createElement("input");
headingTitle.type = "text";
headingTitle.id = "headingTitle_" + totalField;
headingTitle.name = "headingTitle";
headingTitle.placeholder = "見出し";
var subHeading = document.createElement("h5");
subHeading.innerText = "自由文を入力";
var textArea = document.createElement("textarea");
textArea.id = "content_" + totalField;
textArea.name = "content";
textArea.setAttribute('rows', 5);
textArea.setAttribute('cols', 80);
textArea.placeholder = "内容 ";
//インナーへ挿入
jp_panel.appendChild(heading);
jp_panel.appendChild(headingTitle);
jp_panel.appendChild(subHeading);
jp_panel.appendChild(textArea);
var eng_panel = document.createElement("div");
eng_panel.id = "eng";
eng_panel.setAttribute('class', 'tab-pane');
eng_panel.setAttribute('aria-labelledby', 'eng');
var eng_heading = document.createElement("h4");
eng_heading.innerText = "Heading";
var eng_headingTitle = document.createElement("input");
eng_headingTitle.type = "text";
eng_headingTitle.id = "eng_headingTitle_" + totalField;
eng_headingTitle.name = "eng_headingTitle";
eng_headingTitle.placeholder = "Cool heading";
var eng_subHeading = document.createElement("h5");
eng_subHeading.innerText = "Description";
var eng_textArea = document.createElement("textarea");
eng_textArea.id = "content_" + totalField;
eng_textArea.name = "content";
eng_textArea.setAttribute('rows', 5);
eng_textArea.setAttribute('cols', 80);
eng_textArea.placeholder = "Some dope content goes here....";
eng_panel.appendChild(eng_heading);
eng_panel.appendChild(eng_headingTitle);
eng_panel.appendChild(eng_subHeading);
eng_panel.appendChild(eng_textArea);
//インナーを挿入
tab_content.appendChild(jp_panel);
tab_content.appendChild(eng_panel);
var child_object = document.getElementById('field');
child_object.appendChild(form_element);
form_element.appendChild(form_tab);
form_element.appendChild(tab_content);
}
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css" rel="stylesheet">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script src="https//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<div id="field" class="col-xs-12"></div>
<button class="btn btn-default" onclick="addField('free')">
自由文
</button>
8264,c#,SignalR(.NET Client)を使用して、イベントの通知とデータの取得を行うプログラムを作りました。
やりたいことはとりあえず出来たのですが、あまり処理を綺麗に書けませんでした。
マルチスレッドの問題やDisposable漏れなどに考慮して、もっと処理をスマートに書けるものでしょうか？
Rxなどを使うともっと綺麗に書けたりするものなのかもしれませんが、自分の力では、これをどうRxで記述すれば良いかイメージができませんでした。
なにかアイディアがあれば力をお貸しください。
■やりたいこと
サーバ側は一定間隔でクライアントにデータの発生を通知する。
データはキューに保持する。
クライアントはデータ発生のイベントを受信すると、サーバからデータ取得を行う。
データ発生のイベントだけでなく、接続直後にもデータの取得を行う。
データ取得は、サーバのキューが空になるまで続けて呼び出す。
クライアントが接続に失敗した場合、一定時間後に再接続を試みる。
クライアントは任意の時点で開始/停止ができる。
■クライアント/サーバ共通ソース
public class Data
{
public int Id { get; set; }
public string Text { get; set; }
}
■サーバ側ソース
// Hub
[HubName("test")]
public class TestHub : Hub
{
// データ取得処理
public Data Query()
{
return Service.Deque();
}
}
// 通知およびキューの管理、事前にStartしておく
public static class Service
{
private static readonly ConcurrentQueue<Data> queue = new ConcurrentQueue<Data>();
private static int nextId = 1;
private static Timer timer;
// 一定期間毎にキューにデータを入れて、クライアントに通知
public static void Start(IHubConnectionContext<dynamic> clients)
{
timer = new Timer(state =>
{
nextId++;
queue.Enqueue(new Data { Id = nextId, Text = String.Format("Data-{0}", nextId) });
clients.All.Update();
}, null, 3000, 3000);
}
public static void Stop()
{
timer.Dispose();
}
public static Data Deque()
{
Data data;
queue.TryFetchAndAction(out data);
return data;
}
}
■クライアント側ソース(もっとスマートにしたい部分)
public class Client
{
// hub操作用の同期オブジェクト
private readonly object sync = new object();
// 実行状態、Closed時の再接続と、データ取得の連続処理中断に使用
private readonly ManualResetEvent running = new ManualResetEvent(false);
// 再接続用のタイマー
private Timer timer;
private HubConnection hub;
private IHubProxy proxy;
private void Start()
{
if (hub != null)
{
return;
}
// 実行状態に移行
running.Set();
hub = new HubConnection("http://127.0.0.1:10080");
hub.Closed += () =>
{
// 旧タイマーを片付け
var disposable = Interlocked.Exchange(ref timer, null);
if (disposable != null)
{
disposable.Dispose();
}
if (running.WaitOne(0))
{
// 一定時間後に再接続の試行
Interlocked.Exchange(ref timer, new Timer(state =>
{
lock (sync)
{
if (hub != null)
{
ConnectHubAsync();
}
}
}, null, 5000, 0));
}
};
proxy = hub.CreateHubProxy("test");
proxy.On("Update", FetchAndAction);
ConnectHubAsync();
}
// 接続と、接続とのデータ取得
private void ConnectHubAsync()
{
hub.Start().ContinueWith(t =>
{
if (hub.State == ConnectionState.Connected)
{
FetchAndAction();
}
});
}
// データ取得の連続処理
private async void FetchAndAction()
{
while (running.WaitOne(0))
{
Data data;
try
{
data = await proxy.Invoke<Data>("Query");
}
catch (Exception ex)
{
// Invoke中にHubConnection.Stop()するとInvalidOperationException発生
break;
}
// もうデータがない
if (data == null)
{
break;
}
// ここでDataを元に処理を行う
}
}
private void Stop()
{
if (hub == null)
{
return;
}
// 停止状態に移行
running.Reset();
lock (sync)
{
var disposable = Interlocked.Exchange(ref timer, null);
if (disposable != null)
{
disposable.Dispose();
}
hub.Stop();
hub = null;
}
}
}
8294,javascript|jquery,jquery.base64の
function _encode( s ) {}
の中にb10という変数があるのですが、何の数値が格納されているのでしょうか。
ご教授をお願いします。
jquery.base64ダウンロードサイト
8299,java,現在、AWSを6つ用いて、クローラーを稼働させています。
その6サーバーそれぞれで別々のクローラー(マルチスレッドマルチプロセス)が動いていますが、DBサーバー(InnoDB)は1つで、
並列に書き込み、読み込みを行っています。
そのせいか、すべてのサーバーのクローラーで、毎日数件から数十件下記のようなエラーが発生します。
※諸事情により、全文記載できません。
Caused by: org.springframework.orm.hibernate3.HibernateJdbcException: JDBC exception on Hibernate data access: SQLException for SQL [n/a]; SQL state [null]; error code [0]; could not inspect JDBC autocommit mode; nested exception is org.hibernate.exception.GenericJDBCException: could not inspect JDBC autocommit mode
Caused by: org.hibernate.exception.GenericJDBCException: could not inspect JDBC autocommit mode
Caused by: java.sql.SQLException: Connection is closed!
この例外を見るに、トランザクションが開始されていないように見えます。
ですが、springに自動で管理させているということもあるので、(アプリケーション側の)トランザクション管理にバグがあるというわけでもありません。
とすると、やはり並列にアクセスするため、プロセス間の排他制御ができていないのが原因なのでしょうか？
一応、synchronizedはしているので、マルチスレッドの排他制御はできています。
この問題について、なにかいい解決策をご存じの方はいらっしゃいませんか？
よろしくお願いいたします。
先日、idleConnectionTestPeriodInMinutes=10を追加して同じように動かしたところ、
上記エラーだけではなく、テーブルロックの例外も発生するようになってしまいました。
今までは半年以上発生していなかったエラーなので、この設定はだめみたいです。
8302,java,クローラーでS2Robotを使っています。
巡回先のロボット拒否設定を確認するために、
S2RobotのUrlFilterを使用しています。
https://github.com/seasarorg/s2robot/blob/master/s2robot/src/main/java/org/seasar/robot/filter/impl/UrlFilterImpl.java
巡回対象URLをチェックする(match())際、ロボット拒否判定(false)されてしまいます。
ですが、対象ドメインのrobots.txtにはそのような記載はありません。
ログに出力したFilterは下記のような形になっていました。
[urlPattern=^(.*:/+)([^/]*)(.*)$, includeFilteringPattern=null, excludeFilteringPattern=null, cachedIncludeList=[], cachedExcludeList=[], sessionId=20150324042508095, urlFilterService=org.seasar.robot.service.impl.UrlFilterServiceImpl@7241f1f1]]
UrlFilterImplのmatch()内の、getIncludeUrlPatternList()等は下記です。
https://github.com/seasarorg/s2robot/blob/master/s2robot/src/main/java/org/seasar/robot/service/impl/UrlFilterServiceImpl.java
↑
※恥ずかしながら、dataHelperの中身が追えません。
これはいったい何が起きているのでしょうか？
よろしくお願いいたします。
8329,python,Python（Flask）におけるCSVファイルの読み込みで困っています。
Shift_JISで保存され、データがダブルクオテーションで囲まれているCSVデータがあります。
以下の２パターンでファイルを開き、中のCSVをカンマ分割して取得する部分でエラーになります。
ある行になると必ず下記エラーがでるのですが、その行のデータをみても、一見おかしいところはありません。
また、PythonのIDLEで同様に処理するとエラーが無いのですが、Flaskにて実行するとエラーになります。
もし原因がありそうでしたらよろしくお願いします。
（１）
fo=codecs.open(f,"rb",'shift_jis')
for line in fo:
d=line.split(",")
エラー文
UnicodeDecodeError: 'shift_jis' codec can't decode bytes in position 298-299: illegal multibyte sequence
（２）
fo=open(f,"rb")
for line in fo:
d=line.split(",")
エラー文
ProgrammingError: You must not use 8-bit bytestrings unless you use a text_factory that can interpret 8-bit bytestrings (like text_factory = str). It is highly recommended that you instead just switch your application to Unicode strings.
8333,html,現在、あるWebサイトのコンテンツにて添付ファイルのように、
SSL証明が正常にあたらず警告となってしまう箇所があります。
SSL証明は適切に設定されており、同ドメインで違うディレクトリでは
正常にSSL証明があたっていることは確認できています。
なぜ、このメッセージが表示されてしまうのかGoogle Chromeの
Webサイト上→右クリックで「要素を検証」という機能があるので、
この機能を使って調べました。
そうしたら、
http://cse.google.com/coop/cse/brand
http://www.example.co.jp/example/general/404.html
という箇所がHTMLで使われていることが分かりました。
（両方ともhttpsがついていません）
上記が原因で、SSL証明が正しく働かないようです。
ただ、http://cse.google.com/coop/cse/brandというURLは
Webサイト全体で、グーグルの機能を使ってサイト内検索の窓に使用しております。
これをhttps://cse.google.com/coop/cse/brandというように、
グーグルのサイトだけれども、httpsにする方法はないでしょうか？
他に、http://www.example.co.jp/example/general/404.htmlの方も、
Webサイト全体で共通して使用しており、.htaccessで以下のように定義
してありました。
ErrorDocument 404 /example/general/404.html
上記の定義がhttpsの領域でも働いているようなのです。
上記の定義が働かず、かつhttps領域専用の404を働かすにはどのように
設定をすればよいでしょうか？
今回の質問はプログラミングの質問と若干離れていますが、現在行っている
プログラミングにも支障が出るので何とか解決したいです。
ご存知の方、ご教授よろしくお願い致します。
【開発環境】
HTML
CSS
JavaScript
レンタルサーバー（CentOS 5）
PHP（5.2.16）
作業環境（Windows7pro）
コード編集用（NoEditor）
8351,javascript|html|jquery,下記ソースで作成したtableに新たに行を追加しようと思い、
$.get(url, function (jsonData) {
$('#example').DataTable({
data: jsonData,
columns: [
{ data: 'Name' },
{ data: 'Email' }
]
});
});
<table id="example">
<thead>
<tr>
<th>NAME</th>
<th>Email</th>
</tr>
</thead>
<tbody>
</table>
このサイトを参考に下記の方法で行追加の実装をしたのですが、
var a = $('#example').DataTable;
$.get(url, function (jsonData) {
data: jsonData,
a.row.add([
{ data: 'FileName' },
{ data: 'Email' ｝
]).draw();
});
エラーが発生します。
エラー内容はCannot read property 'add' of undefinedです。
間違いを見つけられないのですが、解決方法の分かる方がいましたらご教授をお願いします。
8377,javascript|jquery,繰り返しコンテンツ（実際は複数あるinput要素ですが、テストの為）を挿入するボタンを使いたいのですが、display:noneの要素をpart-oneとpart-twoに分けて表示させたいのですが、ユニークで生成されたidの場合、$(newId > .part-one)``$(newId > .part-two)のように指定できますでしょうか？
var total = 1;
var content = $('#content');
function add(type) {
if (type === 'one') {
var newId = 'content_' + total;
var clonedContent = content.clone().attr('id', newId);
//part-twoのみ削除
clonedContent.insertBefore(content);
} else {
var newId = 'content_' + total;
var clonedContent = content.clone().attr('id', newId);
//part-oneのみ削除
clonedContent.insertBefore(content);
}
total++;
}
#content {
display: none;
}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<button onclick="add('one')">one</button>
<button onclick="add('two')">two</button>
<div id="content">
<div class="part-one">
this is part-one
</div>
<div class="part-two">
this is part-two
</div>
<div class="part-one">
this is part-one
</div>
<div class="part-two">
this is part-two
</div>
<div class="part-one">
this is part-one
</div>
<div class="part-two">
this is part-two
</div>
<div class="part-one">
this is part-one
</div>
<div class="part-two">
this is part-two
</div>
</div>
8402,java|html,初質問です！
現在Java、Seasar2(SAStrats/S2JDBC)、JSP、PostgreSQLで
DBを使ったWebアプリケーションを作っています。
そこで質問なのですが、
結論から言うと
BootStrap3のテーマを今作っているアプリケーションに反映するにはどうしたらいいでしょうか？
ざっくりしすぎているので説明すると
現在Bootstrap CDNを使ってBootstrap3をJSPに反映させ、ボタンやフォームなどを鮮やかなデザインにすることはできています。
次は画面全体的に鮮やかなデザインにしたく、Bootstrap3のテーマの使用を考えています。
しかし、調べても今の自分の環境に反映させる方法が見つかりません。
方法そのもの、あるいは関連サイトなど教えて頂ける方がいればよろしくお願いします。
これ(現状)を
↓
こんな感じにしたい。こういうのを反映させたいです。
よろしくお願いします。
8404,html,ASP.NET WebForms（.NET2.0）でWebアプリケーションを開発しています。
そこそこ規模の大きなページで、formのsubmit（ポストバック）の発生する操作を素早く何度も繰り返すと、まれにformの最後にあるHiddenFieldコントロール（実体はinput[type=hidden]）の値が送信されないことがあります。
「送信されない」については、IEのF12デバッガのネットワークタブで、「要求本文」に確かにそのHiddenFieldのパラメータが含まれていないことを確認しました。
（もちろん通常はパラメータが含まれていることも確認済みです）
ここで仮説として、「submitの実行時点でまだレンダリングされていない要素があると、そこに含まれるパラメータは送信されない」という可能性を考えたのですが、これはありえますか？
それとも、「submitの実行は、そのform要素全体のレンダリングが完了するまで保留する」ようなHTMLの仕様が定義されていたりするため、ありえないのでしょうか？
8418,javascript|jquery,jQuery, Javascript初心者なので質問させて頂きます。
タブ切り替え要素のinput, textareaの要素を一度に取得して確定を押した後にappendに入力したいと思いますがうまくいきません。
他の記述方法やシンプルに書き換えることが可能でしたらご指導頂ければと思います。
function saveField(obj) {
var thisId = obj.parentNode.parentNode.parentNode.id;
var AAInputValue = $('div[thisId]').children('#AA').find('input').val();
var AATextValue = $('div[thisId]').children('#AA').find('textarea').val();
var BBInputValue = $('div[thisId]').children('#BB').find('input').val();
var BBTextValue = $('div[thisId]').children('#BB').find('textarea').val();
var CCInputValue = $('div[thisId]').children('#CC').find('input').val();
var CCTextValue = $('div[thisId]').children('#CC').find('textarea').val();
var DDInputValue = $('div[thisId]').children('#DD').find('input').val();
var DDTextValue = $('div[thisId]').children('#DD').find('textarea').val();
var EEInputValue = $('div[thisId]').children('#EE').find('input').val();
var EETextValue = $('div[thisId]').children('#EE').find('textarea').val();
var headingOutputAA = document.createElement('h3');
headingOutput.innerText = AAInputValue;
var contentOutputAA = document.createElement('p');
contentOutput.innerText = AATextValue;
var headingOutputBB = document.createElement('h3');
headingOutput.innerText = BBInputValue;
var contentOutputBB = document.createElement('p');
contentOutput.innerText = BBTextValue;
var headingOutputCC = document.createElement('h3');
headingOutput.innerText = CCInputValue;
var contentOutputCC = document.createElement('p');
contentOutput.innerText = CCATextValue;
var headingOutputDD = document.createElement('h3');
headingOutput.innerText = DDInputValue;
var contentOutputDD = document.createElement('p');
contentOutput.innerText = DDTextValue;
var headingOutputEE = document.createElement('h3');
headingOutput.innerText = EEInputValue;
var contentOutputEE = document.createElement('p');
contentOutput.innerText = EETextValue;
var outputOuter = document.createElement('div');
outputOuter.appendChild(headingOutputAA);
outputOuter.appendChild(contentOutputAA);
outputOuter.appendChild(headingOutputBB);
outputOuter.appendChild(contentOutputBB);
outputOuter.appendChild(headingOutputCC);
outputOuter.appendChild(contentOutputCC);
outputOuter.appendChild(headingOutputDD);
outputOuter.appendChild(contentOutputDD);
outputOuter.appendChild(headingOutputEE);
outputOuter.appendChild(contentOutputEE);
var child_object = document.getElementById('field');
child_object.appendChild(outputOuter);
}
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css" rel="stylesheet">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<ul class="nav nav-pills" role="tablitst">
<li class="active">
<a href="#a" aria-controls="a" role="tab" data-toggle="tab">A</a>
</li>
<li>
<a href="#b" aria-controls="b" role="tab" data-toggle="tab">B</a>
</li>
<li>
<a href="#c" aria-controls="c" role="tab" data-toggle="tab">C</a>
</li>
<li>
<a href="#d" aria-controls="d" role="tab" data-toggle="tab">D</a>
</li>
<li>
<a href="#e" aria-controls="e" role="tab" data-toggle="tab">E</a>
</li>
</ul>
<div class="tab-content" id="field">
<div role="tabpanel" class="tab-pane active" id="a">
<div id="AA">
<div class="free-text">
<h4>
aaaa
</h4>
<input name="heading" type="text" rows="5" cols="80">
<h5>
bbbb
</h5>
<textarea name="content" id="" cols="80" rows="5"></textarea>
</div>
</div>
</div>
<div role="tabpanel" class="tab-pane" id="b">
<div id="BB">
<!-- free text -->
<div class="free-text">
<h4>
cccc
</h4>
<input name="heading" type="text" rows="5" cols="80">
<h5>
dddd
</h5>
<textarea name="content" id="" cols="80" rows="5"></textarea>
</div>
</div>
</div>
<div role="tabpanel" class="tab-pane" id="c">
<div id="CC">
<div class="free-text">
<h4>
eeee
</h4>
<input name="heading" type="text" rows="5" cols="80">
<h5>
ffff
</h5>
<textarea name="content" id="" cols="80" rows="5"></textarea>
</div>
</div>
</div>
<div role="tabpanel" class="tab-pane" id="d">
<div id="DD">
<div class="free-text">
<h4>
gggg
</h4>
<input name="heading" type="text" rows="5" cols="80">
<h5>
hhhh
</h5>
<textarea name="content" id="" cols="80" rows="5"></textarea>
</div>
</div>
</div>
<div role="tabpanel" class="tab-pane" id="e">
<div id="FF">
<div class="free-text">
<h4>
iiii
</h4>
<input name="heading" type="text" rows="5" cols="80">
<h5>
jjjj
</h5>
<textarea name="content" id="" cols="80" rows="5"></textarea>
</div>
</div>
</div>
<ul class="list-inline">
<li><a href="#">キャンセル</a>
</li>
<li><a href="#" onclick="saveField(this);">確定</a>
</ul>
</div>
8427,jquery,jQueryのdelegate系(on/off)で、例えば以下のようにやると、<form>でもclickイベントが発動してしまうと思います。
var selector = 'a, form';
$(document).on('click submit', selector, function() {
// something
});
これを、var selector = 'a, form'; の部分は変えない前提で、<a>はclickイベントのみ、<form>はsubmitイベントのみ発動するようにできますでしょうか？
ちなみに、以下のようなものを試してみましたが動作しませんでした。
（どちらも発動されてしまいます）
var selector = 'a, form'; // ここは変えられない
$(document).on('click submit', selector, function() {
// something
});
$(document).off('submit', 'a'); // <a>はsubmitイベントを無効にしたい
$(document).off('click', 'form'); // <form>はclickイベントを無効にしたい
// これもダメでした。
$('a').off('submit');
$('form').off('click');
追記
やりたいこととしては、ajaxで他ページを取得し表示するというプラグインを作成しており、<a>タグ（ボタン系）と<form>に対応したいです。
ajaxでコンテンツを取得後、さらにその中に<a>や<form>等があれば、それも適用対象にしたいという感じです。
8470,php|jquery,Cookieを用いて要素の表示・非表示を行いたいのですが、うまくいきません。
求めている一連の動作は、
１：要素A,B,C ← 要素別にクリックしたらKEYを保存
２：ページにアクセス時、クリック時に保存したKEYの有無の確認・取得
３：クリックしていないのであれば、display:none;している要素をdisplay:block;させる
といった処理を行いたいのですが、Cookieには疎く求めている動作を実現させることができません。
文章での説明なので、わかり辛いとは思いますが、どなたかお力を貸していただけないでしょうか？
8479,javascript|jquery,setAttributeでvideoタグにcontrolsを追加したいのですが、
controlsに第二引数のvalueはないので、element.setAttribute(name,value)に反してしまいエラーとなってしまいます。
どのようにしてvideoタグにcontrolsを追加したらよいか分かりません。
分かる方がいましたら、ご教授をお願いします。
8482,javascript|jquery,React.jsのチュートリアル(https://facebook.github.io/react/docs/tutorial.html)をやっていた所、以下のようなコードが出てきました。
// tutorial13.js
var CommentBox = React.createClass({
getInitialState: function() {
return {data: []};
},
componentDidMount: function() {
$.ajax({
url: this.props.url,
dataType: 'json',
success: function(data) {
this.setState({data: data});
}.bind(this),
error: function(xhr, status, err) {
console.error(this.props.url, status, err.toString());
}.bind(this)
});
},
render: function() {
return (
<div className="commentBox">
<h1>Comments</h1>
<CommentList data={this.state.data} />
<CommentForm />
</div>
);
}
});
ここのbind(this)とは、どういった意味なのでしょうか
8510,python,python3でhttp.server.BaseHTTPRequestHandlerを継承してWebサーバのクラスを作っているのですが、下記のように、do_POSTでデータを受け取り、処理した後、303でリダイレクトさせたいのですがブラウザの画面が変わりません。なぜなのでしょうか?
class handler(http.server.BaseHTTPRequestHandler):
def do_POST(self):
# データの処理 ...
self.send_response(303, self.responses[303][0])
self.send_header("Location", "/")
self.send_header("Content-Length", len(data))
self.send_header("Content-Type", mimetypes.guess_type("views/list_view.html", False)[0])
self.send_header("Access-Control-Allow-Origin", "*")
self.send_header("Server", self.server_version)
self.end_headers()
8518,python,シェルスクリプトをコマンドラインからしか実行できないようにしたいです。
そこで思いついたのが、pythonで見たことある以下の書き方です。
(importでは実行されないようにしている）
if __name__ == '__main__':
pass
シェル（bashを想定）でもこんな簡単に出来るでしょうか。
また、そもそも別の方法があればご教示頂きたいです。
特殊変数の$0と実ファイル名を比較する方法だと、実ファイル名を変更した時にスクリプト内のファイル名も修正しないといけない気がしてます。そこで上記のpythonのようなやり方が
ベストかなと思いついたところです。
よろしくお願いします。
8528,c#,下記手順でアセットバンドルを作成したのですが、
CreateFormFileを使用してLoadする方法がわかりません。
●アセットバンドル作成側
1.新しくシーンを作成しCameraの下にCanvasを作り、Canvasの下にButtonを作成しました。
2.Canvas以下をプレハブとし、そのPrefabにInspector上でAssetBandleの名前をtestcanvas
としました。
3.
BuildPipeline.BuildAssetBundles("Assets/BundleOutPut/");
メソッドにてアセットバンドルを作成し、
Assets/BundleOutPut/ の下に下記４つのファイルができました。
BundleOutPut
BundleOutPut.manifest
testcanvas
testcanvas.manifest
●アセットバンドルロード側
作成したBundleOutPutをAssetsの下のStreamingAssetsに置き
下記のソースでロードしてみたのですがエラーメッセージが表示されます。
public void CreateFileAssetBundleFileLoad()
{
string path = "file://" + Application.streamingAssetsPath + "/"
+ "BundleOutPut";
AssetBundle NoCompress = AssetBundle.CreateFromFile(path);
Instantiate(NoCompress.mainAsset);
}
エラーメッセージ：Error while reading AssetBundle header!
エラーメッセージ：NullReferenceException: Object reference not set to an instance of an object
●質問
・Unity4.xと違い拡張子がUnity3dではないアセットバンドルが作成されるのですが、
Unity5からは拡張子がUnity3dでなくてもロードできるのでしょうか？
・AssetBundle.CreateFromFile(path)でロードする時に必要なファイルは
manifestが拡張子についていない側をパス付きでロードすれば良いでしょうか？
AssetBundle自体はmanifestではない方に入っていると認識しています。
8532,python,Pyserialを使って受信データに応じて処理を変えようとして以下を書きました。
print文の結果は"TEST"が表示されるのですが、その際に"OK"まで行きません。
対策を教えてください。(Python 2.7.3)
import serial
port = "/dev/rfcomm0"
baudrate = 115200
ser = serial.Serial(port, baudrate)
while 1:
if ser.inWaiting > 0
print ser.read(ser.inWaiting())
if ser.read(ser.inWaiting()) == "TEST"
print ("OK")
8553,c#,次のような関数を作ろうとしています。
public static void Hoge<int>(Func<int> function)
{
var value = function();
var expression = new Expression<Func<int>>(function);  // ←ビルドエラー。何か方法は無いか？
var name = (expression.Body as MemberExpression).Member.Name;
// 以下、valueとnameを使った処理
}
Hoge(() => x) という感じに呼び出して、変数名xとその値を同時に渡したいのです。
しかし、このようなExpression<T>のコンストラクタは存在しないので、このままでは実現できません。
Hoge()の引数をExpression<Func<int>>にして、Compile()してから実行して値を取り出す、というのも可能ですが、Compile()がとても遅いのでやりたくないです。
※MemberExpression経由で変数名を取り出すのに比べて2桁以上遅い
↓こういう形ならさくっとExpressionインスタンスを作れるから簡単だろうと思いましたが、もしかしてこれはコンパイル時にすごいことをやってくれているだけなのであって、実行時にやろうとすると容易ではないのでしょうか？
int x = 10;
Expression<Func<int>> exp = () => x;
8555,c#,.NET Framework 4.5でWCFサービスと、それを利用するクライアントアプリケーションを作っています。
WCFサービスの引数や戻り値に使用するカスタムクラスや列挙型で、DataMember属性とかEnumMember属性を付け忘れることがあるのですが、このときにクライアント側で発生する例外のメッセージから原因を特定するのが難しく困っています。
戻り値がカスタムクラスで、そのいずれかのプロパティで使用しているenumのメンバーにEnumMember属性を付け忘れると、次のようなエラーが出ます。
Exceptionの型：System.ServiceModel.CommunicationException
メッセージ：基礎になる接続が閉じられました: 維持される必要があった接続が、サーバーによって切断されました
※実際にはTargetInvocationExceptionが発生しており、そのInnerExceptionに上記のCommunicationExceptionが入っていた。
このメッセージから、データコントラクト周りの属性付け忘れの可能性があることまでは、経験として覚えました。
しかし、どこで何を付け忘れているのかという具体的な原因は、今のところひたすらコードを目視で精査している状況です。
もう少しデバッグをしやすくする手段はないものでしょうか？
例外をToStringした結果を記載しておきます。
System.Reflection.TargetInvocationException: 呼び出しのターゲットが例外をスローしました。 ---> System.ServiceModel.CommunicationException: 基礎になる接続が閉じられました: 維持される必要があった接続が、サーバーによって切断されました ---> System.Net.WebException: 基礎になる接続が閉じられました: 維持される必要があった接続が、サーバーによって切断されました ---> System.IO.IOException: 転送接続からデータを読み取れません: 既存の接続はリモート ホストに強制的に切断されました。。 ---> System.Net.Sockets.SocketException: 既存の接続はリモート ホストに強制的に切断されました。
※以下スタックトレースは省略
8556,javascript|html,現在下記のソースのようにspliceを用いた実装をしたのですが、
filtered_files.splice('key', 1);
目的の要素が削除されません。
lengthも減る要素の削除方法があれば、ご教授をお願いします。
8571,javascript|python,Firefox39でFetch APIを使い、User-Agentを意図的に変更してGETリクエストを送信したいのですが、うまくできません。サーバは127.0.0.1にあり、 下記のようになっています。
import http.server
class handler(http.server.BaseHTTPRequestHandler):
def do_GET(self):
self.send_response(200, "OK")
self.send_header("Access-Control-Allow-Origin", "*")
print(self.headers["User-Agent"])
server_address = ("", 8000)
httpd = http.server.HTTPServer(server_address, handler);
JavaScriptのコード
fetch("http://localhost:8000", {
"mode": "cors",
"headers": {
"User-Agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_2) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2272.104 Safari/537.36" // ChromeのUser-Agent
}
})
.then(() => console.log("Successed"))
.catch(() => console.log("Failed"))
8594,php|html,WEBページを制作しておりまして、feedlyのリンクを設置しようと思いました。
feedlyで取得したURLをアンカータグに設置したのですが、URLを正しく読み込んでくれません。
HTMLタグは
<a class="RSS" href="https://feedly.com/i/subscription/feed/http://hogehoge.com/?feed=rss2">hoge</a>
といったURLですが
https://feedly.com/i/subscription/feed//?feed=rss2
といった感じで、http://hogehoge.comの部分が省略されてしまいます。
消えてしまうURLの部分をechoで出力しても結果は変わりませんでした。
そもそもが無理な話なのでしょうか？
原因の自己解決と追加の質問
原因がわかりました。
ドメインを表示させない処理を行っておりました。
この処理はできれば残しておきたいのですが……。
この処理を残したまま、フィード用のリンクのみドメインを出力させる方法はございますか？
<?php
class relative_URI {
function relative_URI() {
add_action('get_header', array(&$this, 'get_header'), 1);
add_action('wp_footer', array(&$this, 'wp_footer'), 99999);
}
function replace_relative_URI($content) {
$home_url = trailingslashit(get_home_url('/'));
return str_replace($home_url, '/', $content);
}
function get_header(){
ob_start(array(&$this, 'replace_relative_URI'));
}
function wp_footer(){
ob_end_flush();
}
}
new relative_URI();
?>
上記がドメインを表示させない処理となっております。
8719,javascript|jquery,javascript(jQueryなど可)を使ってドラッグ可能な要素を作りたいのですがやり方が全くわかりません。
jQuery UIを使えばドラッガブルな要素を作るのは簡単ですが、以下の条件にしたいときはどうしたらよいのでしょうか。
縦には動かせない
横には10pxずつ動かすことができる
指定した範囲を超えることはできない
また、Aの要素に近づいたらAに吸い付いてピタッと止まるというものも教えていただけますか。
あと、こういうUIの動きはどういうところで学べますか?
今まで決まった動きをするということしかやったことが無いため、これから挑戦しようと思っています。
8738,python,こんにちは
Python2.7で商用ソフトを作りたいのですが以下お教え下さい。
①ソースコードは全て開示しなければいけないのでしょうか？
②逆コンパイルさせないコンパイルはできないのでしょうか？
③Pandas等複数のモジュールを使っているのですが、コンパイルしてexe
形式にするにはこつがあるのでしょうか(以前、Scipy,Numpyをpy2exeした
ところうまくいなかった記憶があります。うろ覚えなのですが。。。)。
よろしくお願いいたします。
8743,python,djangoのプロジェクトをgitで管理したいのですが、以下の位置で大丈夫でしょうか。
mysite/
.git
manage.py
mysite/
__init__.py
settings.py
urls.py
wsgi.py
また、djangoにおいて.gitignoreに登録しておくべきものはなんでしょうか。
8747,html,http://omg165cm.tumblr.com/
上は私のブログです。
http://melmilkuoxou.tumblr.com/
のように上に画像をヘッダーを設定し固定したいです。
8754,python,rubyではgemfileでプロジェクトごとに必要なパッケージを管理できますが、
pythonではどのようにすれば良いのでしょうか。
ちなみにdjangoを使った開発を想定しています。
8816,c#,テキストボックス２つとボタン１つの簡単なアプリケーションを作っています。
textBox1に入力された文字列をボタンを押すと置換されたtextBox2に表示させるだけです。
textBox1に
http://example.com/2244/ha/saitama/jfa4w09f.12.jpg
と入力すると
<img src="http://example.com/2244/ha/saitama/jfa4w09f.10.jpg">
<img src="http://example.com/2244/ha/saitama/jfa4w09f.13.jpg">
<img src="http://example.com/2244/ha/saitama/jfa4w09f.22.jpg">
<img src="http://example.com/2244/ha/saitama/jfa4w09f.24.jpg">
<img src="http://example.com/2244/ha/saitama/jfa4w09f.30.jpg">
と置換されます。
ポイントはここです。
.{10~50までのランダム数字}.jpg
この10~50までの数字はランダムに足されていきます。
文字列の置換方法を教えて下さい。MSDN公式正規表現サイトを見ても難儀でした。
8826,c#,Guidはconstとして扱うことができないため、下記のようにGUID値を文字列定数にしてpublic staticなGuid値にしています。
初期化の順番がNullObjectGuidSingleton、GuidTextの順になるなど、
環境によって変わることがありえますか？
ありえるなら、Guidのコンストラクタに同じものを書くのは避けたいのですが、
どのようにコーディングするのがよいでしょうか？
public sealed class NullObject : IGameObject
{
private const string GuidText = "1887ABDE-4B0B-4D87-860B-1E811CCE3A89";
public static readonly Guid NullObjectGuidSingleton = new Guid(GuidText);
// ...
8831,c#,指定したIDを持つControlをScrollViewerの先頭にピン止めしたいのですが、どのような方法を取れば対象となるUIElementの表示位置を固定できるでしょうか？
動きの例としては、以下の様なイメージです。
ItemsSourceにObservableCollection<int>をBindingしたListViewに、1～1000の数値がTextBlockで縦方向のリストとして表示されている
1～1000が表示されたTextBlockは、一定時間ごとにランダムに順番が入れ替わる
ユーザーは特定の番号をTextBoxへの入力などで指定すると、その番号の表示されたTextBlockがぴったりListViewの一番上に表示され、その番号の順番が入れ替わっても、その状況が保持されつづける(=自動的に適切な位置にスクロールする)
ListView.ItemContainerGenerator.ContainerFromItem(...)で取得したVisualをVisual.PointToScreen(...)で変換して、その位置にScrollViewer.ScrollToVerticalOffset(...)をすれば…
という事を考えたのですが、順番入れ替えを検知する方法がINotifyCollectionChangedしか見つからず、CollectionChangedイベントを起点にUIElementを取ろうとするとVisualTreeの作成途中なのか、上手くコントロールを取得できませんでした。
このような場合に上手く機能を実現するには、どのような方法があるでしょうか？
8832,python,自分のpipは以下に入っているのですが、
$ which pip
/Library/Frameworks/Python.framework/Versions/3.4/bin/pip
多分ここにpipが入っているせいで  requests などをpipでインストールしても、python2.7.6で使えない状態になってます。どうやったら解決できるのでしょうか。何卒お知恵をお貸しください。
python と pip でpython 2.7.6を、python3 と pip3 でpython 3.4.3を使えるようにしたいです。
よろしく御願い致します。
$ which python
/usr/bin/python
$ which python3
/Library/Frameworks/Python.framework/Versions/3.4/bin/python3
$ which easy_install
/Library/Frameworks/Python.framework/Versions/3.4/bin/easy_install
$ which pip
/Library/Frameworks/Python.framework/Versions/3.4/bin/pip
$ which pip3
/Library/Frameworks/Python.framework/Versions/3.4/bin/pip3
8881,python,Problem 6: What will be the output of the following program.
a, b = 2, 3
c, b = a, c + 1
print a, b, c
こちらを実行しようとすると。。。
Traceback (most recent call last):
File "<console>", line 1, in <module>
NameError: name 'c' is not defined
と出てきます。
c = a
としているにもかかわらずなので、よく理解が出来ません。
8887,c#,WPFアプリケーションをMVVMで開発しています。
VS2013/.NET4.5/C#です。
TextBoxなどに適用したIValueConverterのConvertBackで型の変換に失敗したとき、それをViewで表示するとともに、ViewModelからも任意のタイミングでその情報を得られるようにしたいです。
例えば、エラーが解消されないうちは、登録処理を実行できないようにする、といった制御を考えています。
ConvertBackで発生したエラーをViewに通知する方法は、英語版StackOverflowの質問を見て、ValidationResultを返すという方法で実現することができましたが、ViewModelからそれを知る方法が分かりません。
こちらのページで検証エラーをViewModelから知る方法が掲載されていましたが、上記の英語版StackOverflowのやり方との組み合わせでは、検証エラーのイベントが発生せず（private void ErrorHandlerが呼ばれない）、実現できませんでした。
もしかすると、使い方が間違っているだけで、本当はIValueConverter.ConvertBackでValidationResultを返すと、検証エラーのイベントが発生するはずなのでしょうか？
あるいは他に、正しいやり方があるのでしょうか？
8902,c#,以下のようにDataGridViewのHeaderCellに
DataGridViewAutoFilterColumnHeaderCellを設定して
エクセルのオートフィルターの簡易版を実装しています。
foreach (DataGridViewColumn col in DataGridView.Columns)  {
col.HeaderCell = new DataGridViewAutoFilterColumnHeaderCell(col.HeaderCell);
}
現状フィルタ動作はこれで問題ないのですが、
再検索時にフィルターを設定していた場合にフィルターの内容を保持したいです。
（現状ではフィルターの選択は検索毎に解除されます。）
このためには検索前に一度フィルターで何を選択していたか保持して、
検索後、DataGridViewの内容が更新された後に保持しておいたフィルター値で
フィルタリングする必要があると考えています。
DataGridViewAutoFilterColumnHeaderCellの外からフィルター選択値の取得、
フィルター値の設定とフィルタ動作をすることは可能でしょうか？
それともヘッダー部分をカスタム部品化するしかないでしょうか？
よろしくお願いいたします。
8923,jquery,monacaの勉強を、参考プログラムのメモ帳を改造するところからはじめてます。
最初の状態だと、メモを書き込むtextareaがすごく狭いのですが、大きくする方法がわかりません。
CSSでは無理なのでしょうか？
わかる方いらっしゃいましたらよろしくお願いします。
8932,javascript|java|jquery,windowsでjavaFXのwebviewの中のjavascriptからjavaという経路で処理をする場合の効率のよいデバック方法を教えてください。
javascriptから実行されるjavaは以下の様になっています。
window = (JSObject) webArea.getEngine().executeScript("window");
// JavaScriptとJavaのI/F
window.setMember("app", this.app);
javascriptの部分のみクロームなどでデバックは可能ですが、そこからjavaを呼出せず困っています。（javascriptのデバックを中心にしたいので、webviewでのjavascriptのデバック方法があれば、その方法でもかまいません）
また、開発環境はインターネットには接続していません。
（インターネット接続マシンと開発環境は別の環境にあります）
＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝
2015/4/23　追記
回答のコメントを記入しようとしましたが、文字数オーバーのため
質問に追記します。
回答を元に以下のプログラムをインターネット環境でテスト的に作成しましたが、デバッカーの画面が開きません。
また、htmlがローカルなので、Firebug Liteのパスをローカルにしてもデバッカーの画面が開きません
なぜでしょうか？
public class Main extends Application {
private String appName;
protected Stage stage;
private static Main instance;
// 画面サイズの初期値
public static final int DEFALUT_WIN_WIDTH = 1024;
public static final int DEFALUT_WIN_HEIGHT = 500;
// 画面サイズの最小値
public static final int MINIMUM_WIN_WIDTH = 250;
public static final int MINIMUM_WIN_HEIGHT = 75;
/**
* Mainクラスのインスタンスを返します。
*
* @return
*/
public static Main getInstance() {
return instance;
}
/**
* ステージを返します。
*
* @return
*/
public Stage getStage() {
return this.stage;
}
@Override
public void start(Stage primaryStage) {
try {
Main.instance = this;
this.stage = primaryStage;
showView();
} catch (Exception e) {
Platform.exit();
}
}
public static void main(String[] args) {
launch(args);
}
void showStage() {
String strTitle = getAppName();
// タイトルの設定
this.stage.setTitle(strTitle);
// 画面最小サイズの設定
this.stage.setMinWidth(MINIMUM_WIN_WIDTH);
this.stage.setMinHeight(MINIMUM_WIN_HEIGHT);
// 表示
this.stage.show();
}
protected void showView() {
Parent root;
try {
root = FXMLLoader.load(getClass().getClassLoader().getResource("test/view/Main.fxml"));
Scene scene = new Scene(root, DEFALUT_WIN_WIDTH, DEFALUT_WIN_HEIGHT);
this.stage.setScene(scene);
showStage();
} catch (IOException e) {
// TODO 自動生成された catch ブロック
e.printStackTrace();
}
}
public String getAppName() {
return this.appName;
}
}
public class WebViewController implements Initializable {
@FXML
WebView webArea;
WebEngine engine = null;
JSObject window = null;
String url = null;
@Override
public void initialize(URL arg0, ResourceBundle arg1) {
engine = webArea.getEngine();
String appPath;
appPath = System.getProperty("user.dir");
final String html = File.separator + "WebContent" + File.separator + "main-view.html";
url = "file:///" + appPath + html;
engine.setJavaScriptEnabled(true);
// 初期表示
engine.load(url);
}
// Firebugを起動するボタンを用意し、このメソッドを呼び出すと仮定します
@FXML
void handleFirebugButtonAction(ActionEvent event) {
if (engine.getDocument() != null) {
// ダウンロードしたFirebug Liteの展開物に含まれているfirebug-lite.jsのURLを指定する
String firebugLiteUrl = "https://getfirebug.com/firebug-lite.js#startOpened";
Document document = engine.getDocument();
Element scriptElement = document.createElement("script");
scriptElement.setAttribute("type", "text/javascript");
scriptElement.setAttribute("src", firebugLiteUrl);
NodeList bodyList = document.getElementsByTagName("body");
if (bodyList != null && bodyList.getLength() > 0) {
bodyList.item(0).appendChild(scriptElement);
}
}
}
}
<AnchorPane styleClass="Animation_bg" xmlns="http://javafx.com/javafx/8" xmlns:fx="http://javafx.com/fxml/1">
<children>
<fx:include source="webArea.fxml" AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="0.0"/>
</children>
</AnchorPane>
<AnchorPane style="-fx-background-color: #FFFFFF;" xmlns="http://javafx.com/javafx/8" xmlns:fx="http://javafx.com/fxml/1" fx:controller="test.view.WebViewController">
<children>
<WebView fx:id="webArea" AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="0.0" />
<Button onAction="#handleFirebugButtonAction"
text="Firebug"
AnchorPane.topAnchor="0.0"
AnchorPane.leftAnchor="0.0" />
</children>
</AnchorPane>
8941,c#,こちらのブログを参考にしてLyncのアプリケーションを開発しています。
http://blogs.msdn.com/themes/blogs/generic/post.aspx?WeblogApp=tsmatsuz&y=2011&m=08&d=27&WeblogPostName=ucma-3-0-lync-speech-voice-application-ivr-asr-tts&GroupKeys=
「声とテキストの変換処理 (ASR / TTS)」の項目で、クライアントがPCならば正しくテキストから合成された音声が流れるのですが、iPhoneだと何も聴こえずに通話が0秒のままで接続が切れます。
デバッグしたところ、下記の箇所が問題だと分かりました。
// Wait AudioVideo Flow activated
while (currentCall.Flow.State != MediaFlowState.Active)
Thread.Sleep(1000);
の箇所でcurrentCall.Flow.StateがidleのままActiveになっていないようです。
解決方法をご存じの方がいましたらよろしくお願いします。
また、SDKで作成したアプリケーションではなくOfficeの普通のLyncクライアント同士ですと、PCとiPhoneで通話やビデオのやり取りができました。
環境
Lync2013
UCMA 4.0 (Lyncと同じマシンにインストール)
iPhone5s iOS8 (MSのLync2013アプリをインストール)
Windowsのクライアントは8.1
8964,javascript|jquery,jqueryでpositionの座標を元にソース上の並び替えをしたいのですがどうしたらよいのでしょうか。
例: leftの値が小さい順に並び替え
<div style="position:relative; left: 10px">1</div>
<div style="position:relative; left: 0px">2</div>
<div style="position:relative; left: 15px">3</div>
<div style="position:relative; left: 5px">4</div>
↓
<div style="position:relative; left: 0px">2</div>
<div style="position:relative; left: 5px">4</div>
<div style="position:relative; left: 10px">1</div>
<div style="position:relative; left: 15px">3</div>
8969,c#,オープンソースで公開予定のプログラムで
AESなどの共通鍵暗号方式で 機密データを暗号化した場合
ソースとともに key, IV を公開してしまっては
暗号化の意味がありません。
簡単なPINコードを設けることも考えましたが、
ワンクリックですぐにあるアプリケーションに引数を渡して起動するアプリケーションのため、
PINを入力する画面すら設けたくありません。
何かいいアイデアはありませんか？
MITライセンスにする予定で、
クライアントアプリです。
プログラムを知らない一般ユーザーの為に、
ビルド済みのバイナリも配布します。
個人個人によって違ってくるものであり、
ID/Passwordのようなデータを保存したテキストデータを暗号化するために使います。
ネットワークを介すものではありません。
ID/Passwordのような、個人個人によって違ってくるデータを用いて、
別のアプリケーションの引数を生成して起動します。
生のテキストデータではOSSでAESを用いた場合、key, IVがバレていますので、
個人のデータが漏れてしまいます。
これをなんとかしたいです。
8975,c#,WCFサービスアプリケーションを作成し、HTTPSで「信頼できるセッション(reliableSession)」を用いて接続できるように設定しております。
次にクライアントプログラムをWPFで作成し、上記WCFサービスへのサービス参照を作成して通信を行っています。基本的にはそれで通信できているのですが、サーバ側の応答に時間がかかる場合、タイムアウト時間(1分間に設定しております)を待たずに同じリクエストを再送しているようなのです。
Fiddler4で確認したのですが、サーバへ要求を投げてから応答もなく、タイムアウト時間にもなっていない時にもう一度同じ要求を投げています。またしばらく同じ状況が続くともう一度要求が投げられる、というようなことが繰り返され、最初の要求から1分後に、それらの要求がほぼ同時にタイムアウトとなります。
クライアントプログラム自体には、特にタイムアウト時に同じ要求を繰り返すようなコードは組んでおりません。再送が起こる間隔は、3秒程度から20秒以上とばらつきがあります。
渡す引数によってサーバの応答時間に開きがあるようなメソッドを呼び出した際は、応答時間が短いときにはこの現象は起こらず、応答時間が長いとこの現象が起きてしまいます。
この現象を回避することは可能でしょうか？　もしこの再送のたびに、WCFサービスの処理がされているならサーバの負荷増大の原因になるので回避したいのですが。
WCFサービスの処理内(*.svc.csのメソッド内)にログ出力を仕込んで検証したところ、再送が起こってもWCFサービスの処理は一回しか実行されていないように見えました。何度も同じ処理がサーバ側で発生しないという確証があれば、無理にこの現象を回避しなくても良いとは考えているのですが、確証が持てないので回避できるものなら回避したいと考えています。
9012,javascript|jquery,jquery-uiのdraggableでドラッグした要素を取得する方法を教えてください。
<div class="draggable">1</div>
<div class="draggable">2</div>
<div class="draggable">3</div>
<div class="draggable">4</div>
<div class="draggable">5</div>
これを
$('.draggable').draggable({
stop: function () {
var t = $(this).text(); // ここでテキストを取得したい
console.lgo(t);
}
});
こんな感じにしたいのですが。
9013,python,Pythonのhttp.serverでSet-Cookieを送ったのですが、pathとdomainが一致したとしても、Cookieヘッダが返ってきません。
なぜなのでしょうか?
下記のコードです。
import datetime
import time
import os
import hashlib
import http.server
import cgi
class handle(http.server.BaseHTTPRequestHandler):
def do_POST(self):
if self.path == "/login":
thisyear = datetime.datetime.now().year
ripemd160 = hashlib.new("ripemd160")
ripemd160.update(os.urandom(800))
session_id = ripemd160.hexdigest()
os.environ["REQUEST_METHOD"] = "POST"
self.send_response(303, self.responses[303][0])
self.send_header("Content-Length", 0)
self.send_header("Set-Cookie", "session=" + session_id + "; domain=http://127.0.0.1:8152; path=/; expires=" + time.strftime(
"%a, %d-%b-{0:d} %H:%M:%S GMT", time.gmtime()).format(thisyear + 2)) #有効期限は2年間
self.send_header("Location", "/")
self.end_headers()
login_data = cgi.FieldStorage(self.rfile, self.headers)
print(login_data)
9020,html,お世話になります。
HTML5ですが、strongタグをつけなくても文字が太くなります。
実行環境はGoogle Chromeです。
どのようにしたら、strongタグを付けない文字列が太くならないのでしょうか？
ご教授願います。
以下、ソースコードです。
<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<title>初めてのHTML</title>
</head>
<body>
<h1>大見出し<h1>
<h2>中見出し<h2>
<h3>小見出し<h3>
<p>こんにちは！<br>こんにちは！</p>
<p>こんにちは！</p>
<p>こんにちは！</p>
<p>こんにちは！</p>
<p>こんにちは！</p>
<p>こんにちは！</p>
<p><strong>こんにちは！</strong></p>
</body>
</html>
9046,c#,とあるゲームを作っています。
・expが100貯まるとレベルアップ
・レベルアップすると、ステータスクラスというクラスの変数値が１増えるようにする
ところどころ意味不明な箇所があるかもしれません。
問題は　subclassの値(exp10)をmainclassに引き渡して mainclass内でexpが100になると
レベルアップし、別のclass(例　sampleclass)に数値の1を引き渡したいのですが。またその他間違ってる箇所を指摘していただければと思います
例　敵を倒す、expを取得する(10exp)
class main{
public int expamount
public int exp
public void exp(){
main exp = new main();
exp.expamount
if(exp>0); boolean (exp==100) true;　//expが100と等しい場合は　レベルアップ
return;
class sub{
enemy.cs void Main(){
public int get;
monster
if(monsterHP<0); get.exp(10); //モンスターのＨＰが０になると経験値の10expゲットする。
｝
9059,jquery,コメントアウトしている箇所は正しく動作するのですが、一番下のDeferredインスタンスを利用する方法だと、処理を待たずにdelayメソッドが同時に実行されてしまします。何故なのでしょうか？
delay = (msg)->
$.Deferred (p)->
setTimeout ->
console.log msg
p.resolve()
,1000
#delay('test').done ->
#  delay('test2').done ->
#    delay('test3').done ->
#delay('start')
#.then ->delay(1)
#.then ->delay(2)
#.then ->delay(3)
#$.Deferred().resolve()
#.then ->delay(1)
#.then ->delay(2)
#.then ->delay(3)
d = new $.Deferred()
d.then ->delay(1)
d.then ->delay(2)
d.then ->delay(3)
d.resolve()
http://jsfiddle.net/d9prbjg0/4/
9083,javascript|jquery,↑イメージはこんなかんじです
jquery/jquery-ui可です。
input[type=text]の下に目印をつけ、その情報をさんぷる[目印]さんぷるというフォーマットで取得するにはどうしたらよいでしょうか。
目印を付けてドラッグ出来るようにすることはできましたが、文字と文字の間にしかおけないキャレットと同じような振る舞いにすることができません。
目印の位置からどの文字の間に位置するかというのもできません。
たすけてください。
9115,c++,ストラウストラップのプログラミング入門の第１４章の練習問題１がわかりません。
C++です。派生クラスのコンストラクタが上手くいっていないようです。
初めて質問するので、書き方など拙かったらすみません。
Circleという基底クラスとSmileyという派生クラスがあります。
SmileyにはCircleを三つ入れて顔を描画するつもりです。
（最終的にはark_ellipseという同じShapeが基底のクラスのオブジェクトもSmileyにいれたいと思っています。）
ちなみにCircleにはさらにShapeという基底クラスがあります。
Shapeは抽象クラスでそれぞれの派生クラスでdraw_lines()関数をオーバーライドして図形を描画するプログラムです。
ちなみにfltkというグラフィックライブラリを使用しています。
全部のコードをのせると長いので抜粋します。
これがCircleクラスです。
struct Circle : Shape {
Circle(Point p, int rr) // center and radius
:r{ rr } {
add(Point{ p.x - r, p.y - r });
}
void draw_lines() const;
Point center() const { return { point(0).x + r, point(0).y + r }; }
void set_radius(int rr) { r=rr; }
int radius() const { return r; }
private:
int r;
};
一応draw_lines()ものせます。
void Circle::draw_lines() const
{
if (fill_color().visibility()) {    // fill
fl_color(fill_color().as_int());
fl_pie(point(0).x,point(0).y,r+r-1,r+r-1,0,360);
fl_color(color().as_int()); // reset color
}
if (color().visibility()) {
fl_color(color().as_int());
fl_arc(point(0).x,point(0).y,r+r,r+r,0,360);
}
}
これがSmileyクラスです。
struct Smiley : Circle {
Smiley(Point p);
Circle reye;
Circle leye;
Circle face;
void draw_lines() const;
};
Smiley::Smiley(Point p)
:reye(Point(p.x+100,p.y+100),50), leye(Point(p.x+300,p.y+100),50), face(Point(p.x,p.y),400) { }
void Smiley::draw_lines() const
{
reye.draw_lines();
leye.draw_lines();
face.draw_lines();
}
ちなみに各クラスが使用しているPointというクラスはこんな感じでwindowのx座標とy座標を指しています。
struct Point {
int x,y;
Point(int xx, int yy) : x(xx), y(yy) { }
Point() :x(0), y(0) { }
};
これを実行すると、
ch14_e1.cpp: In constructor ‘Graph_lib::Smiley::Smiley(Graph_lib::Point)’:
ch14_e1.cpp:67:95: error: no matching function for call to    ‘Graph_lib::Circle::Circle()’
:reye(Point(p.x+100,p.y+100),50), leye(Point(p.x+300,p.y+100),50), face(Point(p.x,p.y),400) { }
^
ch14_e1.cpp:67:95: note: candidate is:
In file included from GUI.h:13:0,
from Simple_window.h:10,
from ch14_e1.cpp:2:
Graph.h:282:2: note: Graph_lib::Circle::Circle(Graph_lib::Point, int)
Circle(Point p, int rr) // center and radius
^
Graph.h:282:2: note:   candidate expects 2 arguments, 0 provided
という感じのコンパイルエラーが出ます。
大変長くなってしまいましたが、宜しくお願いします。
9145,javascript|jquery,textareaではスクロールが有効になるため文字数が多いと、textarea自体の高さと、中身の高さが変わると思います。
この中身の高さを得る方法はありますか?
9153,c#,タイトルについてですが、
求められていることは次の通りとなっております。
1.ドメイン以下に静的コンテンツのパスを指定してアクセスできる。
2.ログインしていない場合には準備されている動的コンテンツのログインページに遷移する(Login.aspxなど)。
3.各ファイル毎にユーザごとのアクセス権限が設定されている(ユーザと権限のマップはDB)
4.ログイン状態はセッションで維持
これについて次の様に実現しようとしました。
1.Web.configにてハンドラの設定
2.ハンドラでログイン状態、アクセス権限を確認し、問題なければ静的コンテンツを返す
具体的なコードとしては以下の様になっております。
・Web.config
<system.webServer>
<handlers>
<add name="Handler" verb="*" path="*.*" type="WebApplication1.Handler" />
</handlers>
<modules runAllManagedModulesForAllRequests="true" />
</system.webServer>
・ハンドラ
using System.IO;
using System.Net;
using System.Web;
using System.Web.SessionState;
namespace WebApplication1
{
public class Handler : IHttpHandler, IRequiresSessionState
{
public void ProcessRequest(HttpContext context)
{
if (!context.Request.Path.Contains(".aspx") && CanAccess())
{
// 静的コンテンツを返却
context.Response.WriteFile(context.Request.PhysicalPath);
}
else
{
// ログインページに飛ばしたい
context.Server.Execute("~/Login.aspx");
}
}
public bool IsReusable
{
get
{
return true;
}
}
private bool CanAccess()
{
//　ログイン状態、アクセス権限について判定。
}
}
}
このように書いた場合、Web.configにadd name="Handler" verb="*" path="*.*"と設定しているため、
Login.aspxに飛ばすことが出来ないのですが、
handlersで、指定した拡張子以外について(この場合だと.aspx)のみハンドラを登録することは可能でしょうか？
もし可能でない場合は、どのようにすれば本機能を実現できるかご教示いただければと思います。
9154,ios|c#,Unity(C#)で画面のスクリーンキャプチャーを取り、
iOSのカメラロール(写真を保存している場所)に保存させたいのですが、
方法がわかりません。
スクリーンキャプチャーの取り方は、
Application.CaptureScreenshot
で出来ると思うのですが、
アプリのデータ領域に画像が保存されるだけで、
ユーザーが、その画像を閲覧できるようにはならないらしいです。
以下のサイトなどを参考にしましたが、Xcodeの知識が無いため理解が難しかったです。
Unityでスクリーンショットを撮影し、iPhoneのカメラロールに保存する方法。
どなたか方法、または解説だけでもいいので、ご教授いただけないでしょうか。
9223,c#,値型のプロパティの参照だけを配列にしたものがほしいと思っています。
以下の様な感じでプロパティ内の値を書き換えたいのですが、なにか良い案が有りましたらご教授下さい。
インデクサはできれば使いたくありません。
var a = new A();
// ↓ 本来はNum1, Num2, Num3を書き換えたい
for(var i=0; i < 3; i++){
a.NumArray[i] = i;
}
// ↓ 本来はStr1, Str2, Str3を書き換えたい
for(var i=0; i < 3; i++){
a.StrArray [i] = i.ToString();
}
class A {
public A(){
// これでは値が入ってしまう
NumArray = new []{Num1, Num2, Num3};
StrArray = new []{Str1, Str2, Str3};
}
public int[] NumArray;
public String[] StrArray;
public int Num1 { get; set; }
public int Num2 { get; set; }
public int Num3 { get; set; }
public String Str1 { get; set; }
public String Str2 { get; set; }
public String Str3 { get; set; }
}
9241,html,上の画像は、文字が折返し位置がバラバラになっています。
読みやすさとのトレードオフかもしれませんが
右余白の不揃い感を改善したいのです。
どのようにすれば良いでしょうか。
追記:
質問者が求めるイメージについては、質問に対するコメントのやりとりにあります。
9245,javascript|jquery,HTML要素のoffsetLeftプロパティは、親要素マージン有無に影響を受けるでしょうか？
・その際、positionプロパティも関係する？
また、jQueryのoffsetメソッドをJavaScriptだけで書くにはどうすれば良いでしょうか？
9247,javascript|html,はじめまして。
下記のソースは、所謂"マウスストーカー(時計)"を引き立たせるために
背景色と組み合わせたものですが、それぞれの背景色に応じて任意に
"date color"・"face color"・"hours color・"minutes color・
"seconds color”を変えられるようにしたいのですが、なかなか
うまくリンクできません(＊普通の文字は、変わります)。
どこを，どのように書き換えればよいか、ご教示いただけませんでしょうか。
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=shift_jis">
<TITLE>Magical clock - JavaScript</TITLE>
<style type="text/css">
<!--
.butt{
BACKGROUND:maroon; COLOR:gold;
}
.css1{
position:absolute;top:0px;left:0px;
width:19px;height:19px;
font-family:Arial,sans-serif;
font-size:19px;
text-align:center;
font-weight:bold;
}
.css2{
position:absolute;top:0px;left:0px;
width:13px;height:13px;
font-family:Arial,sans-serif;
font-size:13px;
text-align:center;
}
//-->
</style>
<script type="text/javascript">
<!-- //
//
function color1(){
document.bgColor = "black";
document.fgColor = "gold";
}
//
//
function color2(){
document.bgColor = "darkgreen";
document.fgColor = "pink";
}
//
//
function color3(){
document.bgColor = "#ff99ff";
document.fgColor = "green";
}
//
// -->
</script>
</HEAD>
<BODY>
<p><FONT size="5"><B>魔法の時計</B></FONT></p>
<br><br><br><br><br><br><br><br>
<script language="JavaScript">
<!--
//
if (document.getElementById&&!document.layers){
// *** Clock colours
dCol='blue';   //date colour.
fCol='pink';   //face colour.
sCol='yellow';   //seconds colour.
mCol='red';   //minutes colour.
hCol='red';   //hours colour.
// *** Controls
del=0.6;  //Follow mouse speed.
ref=40;   //Run speed (timeout).
//
var ieType=(typeof window.innerWidth != 'number');
var docComp=(document.compatMode);
var docMod=(docComp && docComp.indexOf("CSS") != -1);
var ieRef=(ieType && docMod)
?document.documentElement:document.body;
theDays=new Array("SUNDAY","MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY");
theMonths=new Array("JANUARY","FEBRUARY","MARCH","APRIL","MAY","JUNE","JULY","AUGUST","SEPTEMBER","OCTOBER","NOVEMBER","DECEMBER");
date=new Date();
day=date.getDate();
year=date.getYear();
if (year < 2000) year=year+1900;
tmpdate=" "+theDays[date.getDay()]+" "+day+" "+theMonths[date.getMonth()]+" "+year;
D=tmpdate.split("");
N='3 4 5 6 7 8 9 10 11 12 1 2';
N=N.split(" ");
F=N.length;
H='☆☆☆☆';
H=H.split("");
M='☆☆☆☆☆';
M=M.split("");
S='-----';
S=S.split("");
siz=65;
eqf=360/F;
eqd=360/D.length;
han=siz/5.5;
ofy=-7;
ofx=-3;
ofst=70;
tmr=null;
vis=true;
mouseY=0;
mouseX=0;
dy=new Array();
dx=new Array();
zy=new Array();
zx=new Array();
tmps=new Array();
tmpm=new Array();
tmph=new Array();
tmpf=new Array();
tmpd=new Array();
var sum=parseInt(D.length+F+H.length+M.length+S.length)+1;
for (i=0; i < sum; i++){
dy[i]=0;
dx[i]=0;
zy[i]=0;
zx[i]=0;
}
algn=new Array();
for (i=0; i < D.length; i++){
algn[i]=(parseInt(D[i]) || D[i]==0)?10:9;
document.write('<div id="_date'+i+'" class="css2" style="color:'+dCol+'">'+D[i]+'<\/div>');
tmpd[i]=document.getElementById("_date"+i).style;
}
for (i=0; i < F; i++){
document.write('<div id="_face'+i+'" class="css2" style="color:'+fCol+'">'+N[i]+'<\/div>');
tmpf[i]=document.getElementById("_face"+i).style;
}
for (i=0; i < H.length; i++){
document.write('<div id="_hours'+i+'" class="css1" style="color:'+hCol+'">'+H[i]+'<\/div>');
tmph[i]=document.getElementById("_hours"+i).style;
}
for (i=0; i < M.length; i++){
document.write('<div id="_minutes'+i+'" class="css1" style="color:'+mCol+'">'+M[i]+'<\/div>');
tmpm[i]=document.getElementById("_minutes"+i).style;
}
for (i=0; i < S.length; i++){
document.write('<div id="_seconds'+i+'" class="css1" style="color:'+sCol+'">'+S[i]+'<\/div>');
tmps[i]=document.getElementById("_seconds"+i).style;
}
function onoff(){
if (vis){
vis=false;
document.getElementById("control").value="Clock On";
}
else{
vis=true;
document.getElementById("control").value="Clock Off";
Delay();
}
kill();
}
function kill(){
if (vis)
document.onmousemove=mouse;
else
document.onmousemove=null;
}
function mouse(e){
var msy = (!ieType)?window.pageYOffset:0;
if (!e) e = window.event;
if (typeof e.pageY == 'number'){
mouseY = e.pageY + ofst - msy;
mouseX = e.pageX + ofst;
}
else{
mouseY = e.clientY + ofst - msy;
mouseX = e.clientX + ofst;
}
if (!vis) kill();
}
document.onmousemove=mouse;
function winDims(){
winH=(ieType)?ieRef.clientHeight:window.innerHeight;
winW=(ieType)?ieRef.clientWidth:window.innerWidth;
}
winDims();
window.onresize=new Function("winDims()");
function ClockAndAssign(){
time = new Date();
secs = time.getSeconds();
sec = Math.PI * (secs-15) / 30;
mins = time.getMinutes();
min = Math.PI * (mins-15) / 30;
hrs = time.getHours();
hr = Math.PI * (hrs-3) / 6 + Math.PI * parseInt(time.getMinutes()) / 360;
for (i=0; i < S.length; i++){
tmps[i].top=dy[D.length+F+H.length+M.length+i]+ofy+(i*han)*Math.sin(sec)+scrollY+"px";
tmps[i].left=dx[D.length+F+H.length+M.length+i]+ofx+(i*han)*Math.cos(sec)+"px";
}
for (i=0; i < M.length; i++){
tmpm[i].top=dy[D.length+F+H.length+i]+ofy+(i*han)*Math.sin(min)+scrollY+"px";
tmpm[i].left=dx[D.length+F+H.length+i]+ofx+(i*han)*Math.cos(min)+"px";
}
for (i=0; i < H.length; i++){
tmph[i].top=dy[D.length+F+i]+ofy+(i*han)*Math.sin(hr)+scrollY+"px";
tmph[i].left=dx[D.length+F+i]+ofx+(i*han)*Math.cos(hr)+"px";
}
for (i=0; i < F; i++){
tmpf[i].top=dy[D.length+i]+siz*Math.sin(i*eqf*Math.PI/180)+scrollY+"px";
tmpf[i].left=dx[D.length+i]+siz*Math.cos(i*eqf*Math.PI/180)+"px";
}
for (i=0; i < D.length; i++){
tmpd[i].top=dy[i]+siz*1.5*Math.sin(-sec+i*eqd*Math.PI/180)+scrollY+"px";
tmpd[i].left=dx[i]+siz*1.5*Math.cos(-sec+i*eqd*Math.PI/180)+"px";
}
if (!vis)clearTimeout(tmr);
}
buffW=(ieType)?80:90;
function Delay(){
scrollY=(ieType)?ieRef.scrollTop:window.pageYOffset;
if (!vis){
dy[0]=-100;
dx[0]=-100;
}
else{
zy[0]=Math.round(dy[0]+=((mouseY)-dy[0])*del);
zx[0]=Math.round(dx[0]+=((mouseX)-dx[0])*del);
}
for (i=1; i < sum; i++){
if (!vis){
dy[i]=-100;
dx[i]=-100;
}
else{
zy[i]=Math.round(dy[i]+=(zy[i-1]-dy[i])*del);
zx[i]=Math.round(dx[i]+=(zx[i-1]-dx[i])*del);
}
if (dy[i-1] >= winH-80) dy[i-1]=winH-80;
if (dx[i-1] >= winW-buffW) dx[i-1]=winW-buffW;
}
tmr=setTimeout('Delay()',ref);
ClockAndAssign();
}
window.onload=Delay;
}
//-->
</script>
<center><p>
<INPUT style="BORDER-RIGHT: grey 1px solid; BORDER-TOP:
grey 1px solid; FONT-SIZE: 8pt; BORDER-LEFT: grey 1px
solid; COLOR: black; BORDER-BOTTOM: grey 1px solid;
FONT-FAMILY: ms gothic; BACKGROUND-COLOR: black"
onclick="color1()" type="button" value="
">
<INPUT style="BORDER-RIGHT: grey 1px solid; BORDER-TOP:
grey  1px solid; FONT-SIZE: 8pt; BORDER-LEFT: grey  1px
solid; COLOR: black; BORDER-BOTTOM: grey  1px solid;
FONT-FAMILY: ms gothic; BACKGROUND-COLOR: darkgreen"
onClick="color2()" type="button" value="
">
<INPUT style="BORDER-RIGHT: grey 1px solid; BORDER-TOP:
grey 1px solid; FONT-SIZE: 8pt; BORDER-LEFT: grey 1px
solid; COLOR: black; BORDER-BOTTOM: grey 1px solid;
FONT-FAMILY: ms gothic; BACKGROUND-COLOR: #ff99ff"
onClick="color3()" type="button" value="
">
</p></center>
<br><br><br>
<center><p>
<script type="text/javascript">
<!-- Mouse Clock Button
//Hide from older browsers
if (document.getElementById&&!document.layers){
document.write('<input class=butt type="button" id="control" value="Clock Off" onClick="this.blur();onoff()"></span>');
}
//-->
</script>
</p></center>
</BODY>
</HTML>
9285,c++,各桁を並び替えてできる最大の数と
各桁を並び替えてできる最小の数（ただし、最高位は0以外にする）の差が
自身と一致するとき、高橋の数と呼びます。
（http://masami.d2.r-cms.jp/blog_detail/blog_id=3&id=6）
以下のコードで、9桁までの高橋の数を
求めようとしたのですが、
9桁の高橋の数の算出に何時間も
かかっています。
もっと高速に求める方法があれば、ご教示ください。
def takahashi_number(m)
(10 ** (m - 1)..10 ** m - 1).each{|n|
ary = n.to_s.split('').map(&:to_i)
min_ary = ary.sort
max = min_ary.reverse.join.to_i
# 最高位を0以外にする←カプレカ数との違い
i = 0
while min_ary[i] == 0
i += 1
end
min_ary[0], min_ary[i] = min_ary[i], min_ary[0]
min = min_ary.join.to_i
p [m, n] if n == max - min
}
end
(2..9).each{|m| takahashi_number(m)}
出力結果
[3, 495]
[4, 6174]
[6, 549945]
[6, 631764]
[6, 660852]
[8, 63317664]
[8, 66308652]
[9, 554999445]
[9, 864197532]
（追記）
（どの言語を用いるにせよ）今のところ、高橋の数は９の倍数であることと
yoh2さんのアイデアを用いていたコードが一番速いものと思われます。
このRuby版のコードを作ったので、回答に載せました。
皆様の参考になれば幸いです。
9299,javascript|html,下記のソースは、所謂"マウスストーカー(時計)"を引き立たせるために
背景色と組み合わせたものですが、それぞれの背景色に応じて任意に
時計の文字色を変えられるようにしたいのですが、なかなかうまく
リンクできません(＊普通の文字は変わります)。
先日は"アナログ時計"を質問して解決したのですが、今回は"デジタル"時計です。
やり方は、"アナログ時計"の場合と違うようで、手こずっています。
それともう１つは、先日質問したアナログ時計のときに設定されていた
"clock on/offボタン"を、このデジタル時計にも設定したいのですが、
こちらもうまくリンクできません。
どこを，どのように書き換えればよいか、ご教示いただけませんでしょうか。
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=shift_jis">
<TITLE>デジタル時計 - JavaScript</TITLE>
<style type="text/css">
<!--
.css{
font-size:16px;
font-weight:bold;
}
//-->
</style>
<script type="text/javascript">
<!--
//
//
function color1(){
document.bgColor = "black";
document.fgColor = "gold";
}
//
//
function color2(){
document.bgColor = "red";
document.fgColor = "white";
}
//
//
function color3(){
document.bgColor = "white";
document.fgColor = "blue";
}
//
// -->
</script>
<script type="text/javascript"><!--
msec=100;               //追従速度
fx=20;                  //表示位置ｘ座標
fy=-10;                 //表示位置y座標
fs=6;                   //文字の大きさ
fc="blue";              //文字色
F_face="Times New Roman";//フォント
//--------------------------------------
now=new Date();
(now.getHours()<10)?H="0"+now.getHours():H=now.getHours();
(now.getMinutes()<10)?M="0"+now.getMinutes():M=now.getMinutes();
(now.getSeconds()<10)?S="0"+now.getSeconds():S=now.getSeconds();
moji=H+":"+M+":"+S;
x=new Array();y=new Array();cnt = 0;
for (i=0; i<=moji.length; i++) {x[i] = -10;y[i] = -10; }
for(i=0;i<moji.length;i++){
document.write("<DIV style='position:absolute;z_index:2;top:-10px;left:-10px;'ID='Fonts"+i+"'><font face='"+F_face+"' size="+fs+" color="+fc+" ID='Time"+i+"'>"+moji.charAt(i)+"</font></DIV>");
}
function F_move(NNevent){
if(document.all){x[0]=event.x;y[0]=event.y;}else{
x[0]= NNevent.pageX;y[0]= NNevent.pageY;}
}
function F_run(){
for (i=moji.length-1; i>=0; i--){
if(i){x[i] = x[i-1]+fs*3;y[i] = y[i-1];}
if(document.all){
document.all("Fonts"+i).style.pixelTop=y[i]+fy+document.body.scrollTop;
document.all("Fonts"+i).style.pixelLeft=x[i]+fx+document.body.scrollLeft;
}else{
document.getElementById("Fonts"+i).style.top=y[i]+fy+"px";
document.getElementById("Fonts"+i).style.left=x[i]+fx+"px";
}
}}
setInterval('F_run()',msec);
document.onmousemove = F_move;
function nowtime(){
now=new Date();
(now.getHours()<10)?H="0"+now.getHours():H=now.getHours();
(now.getMinutes()<10)?M="0"+now.getMinutes():M=now.getMinutes();
(now.getSeconds()<10)?S="0"+now.getSeconds():S=now.getSeconds();
moji=H+":"+M+":"+S;
for(i=0;i<moji.length;i++){
document.getElementById("Time"+i).innerHTML=moji.charAt(i);
}
}
setInterval("nowtime()",1000);
// -->
</script>
</HEAD>
<BODY>
<Font size="5"><b>デジタル時計</b></font>
<center><p>
<INPUT style="BORDER-RIGHT: grey 1px solid; BORDER-TOP:
grey 1px solid; FONT-SIZE: 8pt; BORDER-LEFT: grey
1px solid; COLOR: black; BORDER-BOTTOM: grey 1px solid;
FONT-FAMILY: ms gothic; BACKGROUND-COLOR: black"
onclick="color1();javascript:text.style.color='green'"
type="button" value="
">
<INPUT style="BORDER-RIGHT: grey 1px solid; BORDER-TOP:
grey 1px solid; FONT-SIZE: 8pt; BORDER-LEFT: grey
1px solid; COLOR: black; BORDER-BOTTOM: grey 1px solid;
FONT-FAMILY: ms gothic; BACKGROUND-COLOR: red"
onclick="color2();javascript:text.style.color='blue'"
type="button" value="
">
<INPUT style="BORDER-RIGHT: black 1px solid; BORDER-TOP:
black 1px solid; FONT-SIZE: 8pt; BORDER-LEFT: black 1px
solid; COLOR: black; BORDER-BOTTOM: black 1px solid;
FONT-FAMILY: ms gothic; BACKGROUND-COLOR: white"
onclick="color3();javascript:text.style.color='gold'"
type="button" value="
">
</p></center>
<br><br><br><br><br><br><br><br>
<marquee class="css">背景色ボタンを、時計とリンクさせるには？<br><br>
<span id="text" style="font-size:30; color:green;">clock on/offボタン</span>を設定して、デジタル時計を消したり，現れるようにするには？
</marquee>
</BODY>
</HTML>
9408,javascript|jquery,Boxの横幅を　0％50pxから入力した値に変化させるというアニメーションを作成したいのですが
取得した入力値をkeyframeのパラメーターをして設定する方法がわかりません。
こちらがHTMLです。
<dl>
<dt>0%</dt><dd>50px</dd>
<dt>100%</dt><dd><input type="text" name="w100" id="w100" size="5">px</dd>
</dl>
<input type="button" value="Set" onclick="set();">
</form>
<div class="box"></div>
書きかけのjqueryです。取得した値をkeyframeの100%のwidthにどのように入れいればよいのかご教授ください。
function set(){
var a=$("#w100").val();         //valueの取得
var b=a+"px";                   //単位をつける
$("div").addClass("c");
}
下記のCSSは入力値が200をしたときのものです。
<style>
.box{   margin:10px; padding:0;  height:50px; background:#fcc;
animation-name:anim;
animation-duration:3s;
animation-timin-function:ease-in;
animation-delay:1s;
animation-fill-mode:both;
-webkit-animation:a 3s ease-in 1s both;
}
.c{
@keyframes anim {
0%     {height:50px; width:50px; }
100%   {height:50px; width:200px; }
}
}
</style>
9410,jquery,keyframe animationをもちいてboxに表示させる文字を”A”→”B”→”C”→”D”->E""と変化させたいのですがcssのkeyframeからtext自体を変える方法がわかりません
<body>
<p>A->B->c->D</p>
<button onclick="start()">start</button>
<div class="box" id="b">here!</div>
</body>
考え方からわかりません。
jqueryでonclick startしたのち文字をコードをして取得すればいいのか、
そのままarrayで配列すればいいのか。
.box {
padding-top: 30px;
width: 200px;
height: 80px;
background: #ecc;
font-weight: bold;
font-size: 250%;
text-align: center;
animation-name: c;
animation-duration: 3s;
animation-timin-function: ease-in;
animation-delay: 1s;
animation-fill-mode: both;
-webkit-animation: a 3s ease-in 1s both;
}
以下のコードのようにkeyframeのtext自体を変えたいです。
（イメージです）
.c {
@keyframes c {
0% {
[text: A]
}
25% {
[text: B]
}
50% {
[text: C]
}
75% {
[text: D]
}
100% {
[text: E]
}
}
@-webkit-keyframes c {
0% {
[text: A]
}
25% {
[text: B]
}
50% {
[text: C]
}
75% {
[text: D]
}
100% {
[text: E]
}
}
}
9415,javascript|jquery,いろんなウェブサイトで検索したのですが、一体これは何の略なのでしょうか？
9417,javascript|jquery,6 Column x 400 Row のテーブルで、Ajaxにてデータを2秒周期で更新しようとしています。一度に更新を行う数は不定ですが、3 Column x 50 Row 程度が平均かと思います。waTableを使って実装していましたが、DataBindを使っても更新が遅く、徐々にAjaxの発行周期も遅くなってしまいます。
現在、更新方法の見直しをしていますが、他にオススメのライブラリが有れば教えて頂きたいです。
表の各Rowにチェックボックスが有ればベストですが、無くても可能
Ajaxにて動的にデータ書き換えが可能
出来ればソート可能
の条件でオススメを教えて下さい。
9440,javascript|jquery,現在、tableをCSV出力するためにtable2CSV.jqueryを使用しています。
IE(ver11)の場合、下記のソース中のencodeURIComponentを window.location.hrefに代入している部分でエラーになっており、エラーメッセージは特にないです。※chromeは動作確認済み
どうにか動作するようにしたいのですが、
IEで動作させるための方法が分る方がいましたら、ご教授をお願いします。
var csv = $("#example").table2CSV({ delivery: 'file' });
window.location.href = 'data:text/csv;charset=UTF-8,'
+ encodeURIComponent(csv);
9446,jquery,アプリ起動時の遷移として、
①スプラッシュ画面▶︎メニュー画面が普通だと思うのですが、
②スプラッシュ画面▶︎動画(サーバーにおいていあるmp4)▶︎メニュー画面の遷移を
検討しております。
動画再生時にはポップアップで動画を再生させたくて、どのサンプル(h‌​ttp://editors.ascii.jp/c-minamoto/jquery/003/等)を見ても一度ボタンをクリックさせてポップアップさせています。
②のような遷移にするにはどういった風にすれば良いでしょうか？
出来れば動画スキップも出来ればと思っております。
9486,python,バイナリエディタで開くと次のようなデータがあります。
00 00 0B D7 15 04 04 04 38 00 00 00 13 E8 00 00
～以下略
次のようなコードでファイルを読み込み、データを取り出そうとすると、
値が若干変わっており、上の38の部分が8になってしまっていました。
f = open(inputfiles,"rb")
f.read(40)
00 00 0B D7 15 04 04 04 8 00 00 00 13 E8 00 00
他にもいくつかの箇所で読み込むと値が変わっているようです。
可変長の地震関係で使われるwinフォーマットというやつなのですが、
読みこみ途中で値が変わってしまっていて困っています。
どうやったら元のままの値で読み込めますか？
9518,python,Python2.7でイテレータクラスを作りました。
インデックスを返すようにしたかったため、タプルで返すようにしたのですが、インデックスが不要な場合、エラーとなってしまいます。
これをエラーなく、インデックスが不要な場合にも対応する方法を共有します。
class ItTest(object):
def __init__(self):
self.list = [10, 20, 30]
def __iter__(self):
self.index = 0
self.max = len(self.list)
return self
def next(self):
if self.index >= self.max:
raise StopIteration
output_index = self.index
output = self.list[self.index]
self.index += 1
return output_index, output
def main():
# OK
for index, x in ItTest():
print(x+1)
# エラー
for x in ItTest():
print(x+1)
9581,c++,C++で非同期通信を実装しています。環境はLinux(今のところUbuntuとCentOSが前提)。
このクラスを使用する側は、任意のタイミングで好きなだけsend()を使える仕様で考えています。
例：
myAsyncClass myAsync;
myAsync.connect("host");
myAsync.send(buf1,len1);  // ←非同期で処理されてすぐリターンする.
myAsync.send(buf2,len2);  // ←非同期で処理されてすぐリターンする.
myAsync.send(buf3,len3);  // ←非同期で処理されてすぐリターンする.
// 受信はあらかじめ登録したコールバックか何かで行う.
内部でソケットが書き込み可能になったらシステムコールのsend()を呼びます。
しかし、なるべくシステムコールの呼び出し回数は少ない方が良いため、書き込み可能になった時にbuf1とbuf2とbuf3を全て持っていたら、それらを連結して一回だけsend()を呼ぼうかと思っています。
ですが、buf1とbuf2とbuf3のメモリを連結するためには、buf1の末尾(あるいは自分で用意した別バッファ)へ動的確保を行い、buf2とbuf3をコピーするコストが発生します。
ここで迷っているのは、メモリの確保とコピーを行うくらいなら、素直にsend()を3回呼んだ方がコストが少ないのではないか？ということです。
このあたりの知見をお持ちの方がいらしたらアドバイスお願いします。
もちろんケースバイケースで、コピーする頻度や量にもよるという意見もあるかと思いますが。。
9633,python,テキストファイルがあり，それの編集，例えば文字列置換をしたいとします．具体的に
6 を 9 にすべて置換したい
sed でも vim -c '%s/6/9/g' -c ':wq' origfile でもできるでしょうが，実際の処理はもう少し複雑で，sed は turing complete とはいえ  たとえば Python で処理全体を書きたいです．[回答は Python 以外の言語についてでも大丈夫です]
この場合に，（元の文字列）→（処理後の文字列）の変換は問題なく書けますが，その結果をファイルに反映する処理をどうするのがよいのか迷っています．「一行ごと（でも何でも）元のファイルを読み込み，処理後の文字列を全部一時ファイルに書き込み，mv tempfile original」というのが唯一思いつく（そしてきちんと動く）方法なのですが，必ずファイルを全コピー相当になってしまうのが無駄が多いような気もしてしまいます．ごくごく直観的，そしてナイーブには変更のあったところだけ書き込みたい(原理的に無理な気がしてきていますが)．底まで行かずともなにかうまい方法はありませんか，それともこれで正しいやり方なのでしょうか．
9644,python,失礼しました。
ubuntu 14.10で、
apt-get install libopencv-dev
を実行したところ、インストールは無事止まることなく終わったようなのですが
spyderで下記のコードを実行すると
# -*- coding: utf-8 -*-
import cv2
if __name__ == '__main__':
# 画像取得
im_in = cv2.imread("test.jpg")
# 画像表示
cv2.imshow("Show Image",im_in)
# キー入力待機
cv2.waitKey(0)
# ウィンドウ破棄
cv2.destroyAllWindows()
# 画像保存
cv2.imwrite('test2.jpg',im_in)
下記のエラーが出ます
error: /home/memeda/ドキュメント/bal/OpenCV-2.3.1/modules/highgui/src/
window.cpp:293: error: (-2) The function is not implemented. Rebuild the
library with Windows, GTK+ 2.x or Carbon support. If you are on Ubuntu
or Debian, install libgtk2.0-dev and pkg-config, then re-run cmake or
configure script in function cvShowImage
また、エラーをgoogleで検索したところ、
http://blogs.yahoo.co.jp/airmikan/33712965.html
下記のパッケージをインストールするそうですが、
gtk2-devel.x86_64
aptでは見つからないと、yumのepelでは利用できませんと表示されました。
利用できるレポジトリ、代替できるパッケージ等がありましたら教えてください。
9668,javascript|jquery,環境
FullCalendar 2.3.1
http://fullcalendar.io/
Ruby 2.1.5 p273
Rails 4.2.1
問題
FullCalenderというjQueryのプラグインを使ってRailsとajaxで書き換えのできるカレンダーを作成しています.
イベントの作成・読取・更新・削除について、ほぼうまく動いたのですが、一定の場合だけ削除できません.
また、問題の原因も特定できない状況です.
なにか問題の特定方法についてアイデアがあれば教えて下さい.
削除できる場合
通常のデータの読取をして描画したイベント (eventSources)
renderEventで描画をしたイベント (renderEvent)
削除できない場合
外からドラッグアンドドロップで描画したイベント (eventReceive)
削除を実行しても、描画上削除されないだけで、データベースのデータは削除されています.
ただし、ブラウザをリロードすれば正常に削除できます.
コード
http://fullcalendar.io/docs/event_data/removeEvents/
removeEventは、eventのidを指定するだけです.
railsのコードとしては、カレンダーのイベントをクリックするとjQueryUIのダイアログでフォームが立ち上がって、そこから編集と削除ができるという仕組みです.
削除は普通のリンクです.
フォーム
<%= link_to l(:link_to_ttevent_destroy), ttevent_path(@ttevent), method: :delete,
data: { confirm: l(:message_destroy_confirm) },remote: true,
class: 'button destroy' %>
コントローラー
def destroy
id = params[:id]
@ttevent = Ttevent.find(id)
@ttevent.destroy
respond_to do |format|
format.js
end
end
ビュー(destroy.js.coffee)
fullCalendarは特にエラーも吐いておらず、JavaScriptも最後まで実行されてリストが書き換えられます.
$('#dialog').dialog('close')
$('#modal_area').html('')
id = <%= @ttevent.id %>
$('#fullcalendar').fullCalendar('removeEvents', id)
$.ajax
type: 'GET'
url: "ttevents/issue_lists"
ちなみに、FullCalendarのドラッグアンドドロップのコードは次のとおりです.
下に書いたイベントdivがカレンダーにドラッグアンドドロップされると、'eventReceive'イベントが発生します.そして、divのdataアトリビュートからEventオブジェクトを作成します.
それを$.ajaxでrailsにPOSTします.
すると、railsでidをつけてデータを返し、またイベントの色を自動で計算して返してきます.
そこで、もともとのEventオブジェクトをアップデートします.
色も変わりますし、クリックするとイベントを編集できるので、ここまではうまくいっている気がします.
eventReceive: function(event, element){
title = event.title;
start = event.start.format();
end = event.end.format();
issue_id = event.issue_id;
stick = event.stick;
$.ajax({
type: "POST",
url: "ttevents",
data: {
ttevent: {
start_time: start,
end_time: end,
issue_id: issue_id
}},
success: function(ttevent,status){
event.color = ttevent.color;
event.id = ttevent.id;
$('#fullcalendar').fullCalendar('updateEvent', event);
$.ajax({
type: 'GET',
url: "ttevents/issue_lists"
})
}
});
},
ドラッグアンドドロップ用のイベントのビュー
<div class="draggable tt-event box ui-draggable-disabled <%= set_due_date(issue) %>"
data-duration="00:30"
data-issue_id='<%=issue.id %>'
>
<%= issue.project.name%> - <%= issue.subject %>
</div>
問題の切り分け
たぶん他のケースでdestroy.js.coffeeが機能しているからdestroyの機能としてはミスはなさそう.
idがStringとかNumberとか型違いかもと思い、console.logでtypeofを出してみましたがすべてnumberのようでした.
作りたてのイベントでもきちんと色も変わりますので、更新はうまくできてると思います.つまり、イベントには有効なidが保持されているようです.
また、一度編集した後は、リロードしなくても削除できました.
9685,jquery,現在monacaにてjqueryを使って画像のドラッグ&ドロップをしようとしていますがうまくいきません。
headerでjqueryを読み込み
jQuery("#hogeDrag").draggable();
このようにしてますができません
ちなみに画像ではなくても動きません
画面が固定されていないのとは関係があるんでしょうか
よろしくお願いします。
ヘッダ
<script src="js/jquery2.1.3.min.js"></script>
<script src="js/jquery.ui.min.js"></script>
html
<div id="draggable" class="ui-widget-content">
<p>Drag me around</p>
</div>
js
$(function() {
$( "#draggable" ).draggable();
});
css
#draggable { width: 150px; height: 150px; padding: 0.5em; }
このようになっておりますよろしくお願い致します。
9688,jquery,文章編集アプリケーションのような物を作りたいと考えています。
ボタンを押した際に文章を編集可能にするため、.html()でインプットへと変更しているのですが、取得したHoge,Fugaやhogehoge,fugafugaを所定の位置に挿入するやり方はありますでしょうか？
$(document).ready(function(){
$('#edit').on('click', function() {
$('#foo').each(function() {
var title = $('#foo h4').text();
var text = $('#foo p').text();
$('#foo h4').html("<textarea style='width:100%;'>" + title + "</textarea>");
$('#foo p').html("<textarea style='width:100%;'>" + text + "</textarea>");
});
})
});
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<div id="foo">
<h4>Hoge</h4>
<p>hogehoge</p>
<h4>Fuga</h4>
<p>fugafuga</p>
</div>
<button id="edit">edit</button>
9693,javascript|html,下記のコードは、"マウスストーカー(デジタル)"に『背景色ボタン』と『トグルボタン』をリンクさせたものですが、トグルボタンの表示が"clock on"⇔"clock off"でははなくて、"0"⇔"1"と表示されるところまで詰まって、その先は進みません。
どこに問題があるのか、ご教示いただけませんでしょうか？
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=shift_jis">
<TITLE>デジタル時計 - JavaScript</TITLE>
<style type="text/css">
<!--
.css{
font-size:16px;
font-weight:bold;
}
//-->
</style>
<script type="text/javascript">
<!--
function setTimeColors(color){
if(moji){
for(var i=0;i<moji.length;i++){
var elem=document.getElementById("Time"+i);
if(elem)elem.style.color=color;
}
}
}
function color1(){
document.bgColor = "black";
document.fgColor = "gold";
setTimeColors("red");
}
function color2(){
document.bgColor = "red";
document.fgColor = "grey";
setTimeColors("purple");
}
function color3(){
document.bgColor = "white";
document.fgColor = "blue";
setTimeColors("maroon");
}
// -->
</script>
<script type="text/javascript"><!--
msec=100;               //追従速度
fx=20;                  //表示位置ｘ座標
fy=-10;                 //表示位置y座標
fs=6;                   //文字の大きさ
fc="blue";              //文字色
F_face="Times New Roman";//フォント
//--------------------------------------
now=new Date();
(now.getHours()<10)?H="0"+now.getHours():H=now.getHours();
(now.getMinutes()<10)?M="0"+now.getMinutes():M=now.getMinutes();
(now.getSeconds()<10)?S="0"+now.getSeconds():S=now.getSeconds();
moji=H+":"+M+":"+S;
x=new Array();y=new Array();cnt = 0;
for (i=0; i<=moji.length; i++) {x[i] = -10;y[i] = -10; }
for(i=0;i<moji.length;i++){
document.write(
"<DIV style='position:absolute;z_index:2;top:-10px;left:-10px;' ID='Fonts"+i+"'>"
+"<font face='"+F_face+"' size="+fs+" color="+fc+" ID='Time"+i+"'>"
+moji.charAt(i)+"</font></DIV>");
}
function F_move(NNevent){
if(document.all){
x[0]=event.x;y[0]=event.y;
}else{
x[0]= NNevent.pageX;y[0]= NNevent.pageY;
}
}
function F_run(){
for (i=moji.length-1; i>=0; i--){
if(i){x[i] = x[i-1]+fs*3;y[i] = y[i-1];}
if(document.all){
document.all("Fonts"+i).style.pixelTop=y[i]+fy+document.body.scrollTop;
document.all("Fonts"+i).style.pixelLeft=x[i]+fx+document.body.scrollLeft;
}else{
document.getElementById("Fonts"+i).style.top=y[i]+fy+"px";
document.getElementById("Fonts"+i).style.left=x[i]+fx+"px";
}
}
}
setInterval('F_run()',msec);
document.onmousemove = F_move;
function nowtime(){
now=new Date();
(now.getHours()<10)?H="0"+now.getHours():H=now.getHours();
(now.getMinutes()<10)?M="0"+now.getMinutes():M=now.getMinutes();
(now.getSeconds()<10)?S="0"+now.getSeconds():S=now.getSeconds();
moji=H+":"+M+":"+S;
for(i=0;i<moji.length;i++){
document.getElementById("Time"+i).innerHTML=moji.charAt(i);
}
}
setInterval("nowtime()",1000);
num = 0;
function toggle(){
num ^= 1;
document.getElementById("tog").value = num;
if(num == 1){
for(var i=0;i<moji.length;i++)
document.getElementById("Fonts"+i).style.visibility="visible";}
else {
for(var i=0;i<moji.length;i++)
document.getElementById("Fonts"+i).style.visibility="hidden"; }
}
// -->
</script>
</HEAD>
<BODY>
<Font size="5"><b>デジタル時計</b></font>
<center><p>
<INPUT style="BORDER-RIGHT: grey 1px solid; BORDER-TOP:
grey 1px solid; FONT-SIZE: 8pt; BORDER-LEFT: grey
1px solid; COLOR: black; BORDER-BOTTOM: grey 1px solid;
FONT-FAMILY: ms gothic; BACKGROUND-COLOR: black"
onclick="color1();document.getElementById('text').style.color='lightblue';document.getElementById('text1').style.color='lightblue'"
type="button" value="
">
<INPUT style="BORDER-RIGHT: grey 1px solid; BORDER-TOP:
grey 1px solid; FONT-SIZE: 8pt; BORDER-LEFT: grey
1px solid; COLOR: black; BORDER-BOTTOM: grey 1px solid;
FONT-FAMILY: ms gothic; BACKGROUND-COLOR: red"
onclick="color2();document.getElementById('text').style.color='gold';document.getElementById('text1').style.color='gold'"
type="button" value="
">
<INPUT style="BORDER-RIGHT: black 1px solid; BORDER-TOP:
grey 1px solid; FONT-SIZE: 8pt; BORDER-LEFT: grey
1px solid; COLOR: black; BORDER-BOTTOM: grey 1px solid;
FONT-FAMILY: ms gothic; BACKGROUND-COLOR: white"
onclick="color3();document.getElementById('text').style.color='purple';document.getElementById('text1').style.color='purple'"
type="button" value="
">
</p></center>
<br><br><br><br>
<marquee class="css"><span id="text" style="font-size:30; color:green">"0"⇔"1"</span>ではなくて、<span id="text1" style="font-size:30; color:green">"clock off"⇔"clock on"</span>と切り替えて表示ようにするには？
</marquee>
<br><br><br><br><br><br>
<center><p>
<input type="button" id="tog" value="clock OFF" onclick="toggle()">
</p></center>
</BODY>
</HTML>
9696,c++,Qt Creator 3.3.1 でアプリ開発の勉強中です。
以下のコードだとCancelなどのボタンの名前が変えられません。
Cancelをキャンセル、Saveを保存などの日本語に変えたいのですが、
どのようにすればよろしいでしょうか？
QMessageBox::StandardButton ret;
ret = QMessageBox::warning(this, tr("Application"),
tr("The document has been modified.\n"
"この変更をセーブしますか？"),
QMessageBox::Save | QMessageBox::Discard | QMessageBox::Cancel);
9698,html,bootstrapを使っている状態で中央寄せされたレスポンシブな画像をリンク化しようとしたのですが、うまくいきません。
下記のようなコードを書きました。
<!DOCTYPE html>
<html>
<head>
<link href="http://getbootstrap.com/dist/css/bootstrap.min.css"
rel="stylesheet">
</head>
<body>
<div class="container">
<div class="row">
<div class="col-md-12">
<a href="http://ja.stackoverflow.com">
<img class="center-block img-responsive"
src="http://cdn.sstatic.net/ja/img/apple-touch-icon.png">
</a>
</div>
</div>
</div>
</body>
</html>
上記を実行すると分かる通り、画像の左右スペースにまで余計にリンクが及んでしまうのですが、画像にだけリンクさせるにはどうすると良いでしょうか？
9699,c++,現在、C++でライブラリを作成していますが、Debug版とRelease版では別々のlibで出力されており、そのため使用時はDebug版とRelease版で、リンク時にlibファイルのパスを変更する必要があります。
しかし外部のライブラリを見ると、Debug版もRelease版も同じlibファイルを使っている場合が見受けられます。（Release版がDebug時に使えるのか、と思い試してみましたがやはり無理でした）
このように1つのlibファイルでDebug版もRelease版も網羅できるような作りにするにはどうすればいいのでしょうか？
追記：
開発環境
Windows 7 Professional SP1
Visual Studio 2013 Community
9736,html,お世話になってます。
現在Bootstrapを使用してWebサイトを開発しています。
しかし、Polymerを利用して部品化してみようと思い、Polymerを導入したのですが、BootstrapのclassがComponentに反映されなかったりと何かと不具合が生じています。
Componentのhtmlには
polymer.htmlとbootstrap.min.cssをlinkしています。
具体的な不具合の例として
・header内に定義したComponentのh1などの文字が小さくなる。(fontが変更されている？)
・Bootstrapのclassが要素に反映されない。
img-circle等が反映されない。Component化しなければ反映されるのでブラウザの問題
ではなさそうです。
といった事が生じています。
BootstrapとPolymerは併用するべきではないのでしょうか？
Polymerのverは0.5.0
Bootstrapのverは3.3.4です。
Web Componentsで生成するhtmlのコードです。
宜しくお願い致します。
9816,python,my_property = 1000
farm= []
def monster_merchant1():
global my_property
global farm
cat = 100
rat = 50
lizard = 200
dog = 300
feeble_doragon = 1000
print("商人が来ました")
print("なにか御入り用ですか？")
print("1.ネズミ：{0}.2.ネコ:{1}.3.トカゲ:{2}.4.番犬:{3}.5.弱弱しいドラゴン:{4}".format(rat,cat,lizard,dog,feeble_doragon))
print("数字を入力してください:")
number =input()
if number ==1:
my_property = my_property - rat
farm.append("ネズミ")
elif number ==2:
my_property = my_property -cat
farm.append("ネコ")
elif number ==3:
my_property = my_property - lizard
farm.append("トカゲ")
elif number ==4:
my_property = my_property - dog
farm.append("番犬")
elif number ==5:
my_property = my_property -feeble_doragon
farm.append("弱弱しいドラゴン")
print("あなたの農場:"),
print(farm)
print("貴方の資産："),
print(my_property)
monster_merchant1()
このコードを描いたとき、最後のprint文で表示する二つの変数（farm,my_property）に関数内での操作の結果を反映させたいのですが、実際にはリストfarmには何も入っておらず、my_propertyは初期値の1000のままです.
どうすれば関数内での操作を反映できるでしょうか。初心者なので要領を得ない質問かもしれませんが、よろしくお願いします。
9836,python,私はリストの中からランダムに一つの要素を取り出して代入するコードを以下のように書きました
name = farm[randint(0,randint(0,len(farm)))]
リストは最初は空で、あとから要素を追加していくと言うものです。
しかし、
IndexError: list index out of range
と出てしまいます。
どのようにかけばエラーを避けられるでしょうか
よろしくお願いします。
9853,php|java|html,phpでは、htmlに<p><?= $hello; ?></p>のような形で埋め込むことができますが、javaを使って同じことをする場合、どのように行えばいいのでしょうか？
詳しい方、ご教示ください。よろしくお願いいたします。
9865,jquery,Rails4.16でgemのjquery.countdownを使っています。
カウントダウンの終了時刻が期待した動きになりません
例
現在時刻 5月7日0時35分
設定時刻(@item.limit_time)を5月7日16時に設定 →　カウントダウンは0時0分0秒
現在時刻 5月7日0時35分
設定時刻(@item.limit_time)を5月8日16時に設定 →　カウントダウンは23時23分0秒
pry(main)でupdate時刻をコンソールで確認したところ、
更新しているにもかかわらずupdated_at: "2015-05-06 15:35:50"（現在は2015-05-07 00:48:49 +0900）となっているのがおかしいとわかるのですが、
active_admin上では 2015-05-07 00:48:49 +0900なのです。
class Application < Rails::Application
config.time_zone = 'Tokyo'
config.active_record.default_timezone = :local
#javascript
$ ->
$('.countdown').each ->
$(this).countdown
until: new Date($(this).data('until'))
format: $(this).data('format')
return
return
#view
<div class="countdown" data-until= <%= @item.limit_time %> ></div>
#limit_timeカラムはdatetimeです。
9880,jquery,こんにちは
画像を特定の要素にドロップすると数字が増え、どかすと減るようにしたいです。
html
<div class="droparea">
<div class="drop1">
<p>ドロップ領域1</p>
<div class="box1"></div>
<p class="val1"></p>
</div>
js
$('.drop1').droppable({
accept: '.red,.blue',
tolerance: 'fit',
activeClass: 'active',
hoverClass: 'hover',
drop: function(e, ui) {
ui.draggable.removeClass('dragout');
boxDropping(ui, $(this));
flg = false;
},
deactivate: function(e, ui) {
ui.draggable.draggable({ revert: flg });
var obj = ui.draggable.attr('class').split(" ");
if(obj[0] != 'blue' && flg == false) {
flg = true;
}
}
});
//カウントの部分
$(function() {
function boxDropping(ui, obj) {
var tag = '';
var flg = true;
$('div',obj).each(function(i) {
if($(this).attr('class') == ui.draggable.attr('class')) {
tag = 'p.val' + (i + 1);
if($(tag,obj).text()) {
var arr = $(tag,obj).text().split(" ");
var val = parseInt(arr[1]) + 1;
} else {
var val = 2;
}
$(tag,obj).text('× ' + val);
flg = false;
} else {
tag = 'div.box' + (i + 1);
if($(tag,obj).size()) {
$(tag,obj).addClass(ui.draggable.attr('class'));
$(tag,obj).html(ui.draggable.html());
$(tag,obj).removeClass('box' + (i + 1));
flg = false;
}
}
return flg;
});
}
});
このような感じですがドラッグで数字は増やせたのですが、減らすにはどうすればいでしょうか
よろしくお願い致します。
9888,c++,最近LEAPMOTIONのプログラムをc++で作ってみようとしたのですが、例えばIndex fingerのMiddle boneのy座標のような、各要素を取り出す方法が分かりません。x,y,z全てを同時に表示させる方法はサンプルから読み取れるのですが、一つに注目する方法が分かりません。
for (int b = 0; b < 4; ++b) {
Bone::Type boneType = static_cast<Bone::Type>(b);
Bone bone = finger.bone(boneType);
std::cout << std::string(6, ' ') <<  boneNames[boneType]
<< " bone, start: " << bone.prevJoint()
<< ", end: " << bone.nextJoint()
<< ", direction: " << bone.direction() << std::endl;}
これがサンプルプログラムの一部で、各指の各骨の始点、終点、角度などが、(x,y,z)の形で返されます。これのyの値のみを取得する方法が分からないです。
9905,c++,EclipseでCDTを使用しC言語のプログラムを実行しても，
プログラムが始まりません．
停止処理(Terminate)はできますが，ステップ実行(Step Into, Step Over)
はできず，Disassemblyに何も表示されません．
gccオプションに -m32を指定し，32bitでコンパイルすると上手くいきます．
また，gccオプションで-m64を指定し，Eclipseで64bitでコンパイルしたあと，
Eclipseでなくターミナルでgdbを実行した場合は上手くいきます．
OSはCentOS, EclipseはLuna Service Release 2 (4.4.2)を
使用しています
解決方法をご存知の方がいらっしゃれば
教えていただきたいです．
よろしくお願いします．
(追記
Eclipse はfile eclipse コマンドの結果がELF 64-bit LSB executable, x86-64であること，
GDBはコンソールに最初のメッセージで
"This GDB was configured as "x86_64-redhat-linux-gnu"
と表示されること，
OSはuname -aコマンドでx86_64と表示されることから64bitであることを確認しました．
CDTについてはEclipseのHelp->Install New Softwareで入れたので
問題はないかと思いますが，64bitかどうかの調べ方がわかりませんでした
また，デバッグでなく普通に実行する場合は上手くいきます．
また，gdb traceコンソールに
break-insert -f *0x0000000008048c14
done,bkpt{number="1",type="breakpoint",
disp="keep",enabled="y",addr="0x0000000008048c14"
,thread-groups=["i1"],times="0",
original-location="*0x0000000008048c14"}
(省略)
error,msg="Warning:
Cannot insert breakpoint 1.
Error accessing memory address 0x8048c14: Input/output error."
のようなエラーが出ています．
他のコンソールにエラーは出ていません．
9906,html,ConciseというCSSフレームワークのStarterというテンプレートを使用しているのですが、画像<img src="http://...">を<main class="siteContent container>の中に埋め込んだページとそうでないページで、サイトの幅が違くなってしまいます。どうすればサイトの幅を統一できるでしょうか？
9910,javascript|jquery,複数URLの取得結果をまとめた配列にしたいのですが、下記のコードでは結果がNULLになってしまします。
ログではtitleは取れている形跡はみられますが、配列をNULL要素で作った後にWebから結果を取得しているように見えます。
<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<title>demo</title>
</head>
<body>
<div id="result"></div>
<script src="../lib/jquery-1.11.3.min.js"></script>
<script type="text/javascript">
var urls = [
"http://localhost:8080/books/1.json",
"http://localhost:8080/books/2.json",
"http://localhost:8080/books/3.json",
];
var getTitle = function (url) {
$.get(url,
function (data) {
console.log("title:" + data.title);
return {
url: url,
title: data.title
}
}
);
};
var results = urls.map(getTitle);
console.log("results: " + JSON.stringify(results));
$("#result").text(JSON.stringify(results));
</script>
</body>
</html>
結果ログ
results: [null,null,null]
title:t12
title:t1
title:t13
results: [{url:"http://〜/1.json", title: t1},{ (略) },{ (略) }]
のような配列を取得するにはどうすれば良いでしょうか？
よろしくお願いいたします。
9977,python,VimのdelimitMateをつかってpythonの複数行文字列リテラルを補完したいのですが、普通の文字列リテラルの入力だと認識されてしまいうまく補完ができません。
どうすればいいのでしょうか?
smartquoteあたりを変更するのでしょうか?
a = """|  #この時点で(")を3文字分補完してほしい
9997,html,社内のメールクライアントでは、ノーツを利用しています。
現在SmtpClientを利用してhtmlメールを送信するプログラムを作成しています。
そこでtableのwidth指定しているにも関わらず効かない（ウィンドウサイズに合わせて可変になる）という現象が発生しています。
※gmailで確認すると正しく幅固定されていました。ウィンドウサイズに関わらずスクロールが出てきて表幅が固定されています。
ノーツを利用されている方がいましたら対策を教えて頂けないでしょうか。
よろしくお願いします。
10006,python,a を整数、n を自然数とします。
一般に a^n の計算を高速に行う方法を教えてください。
なお、この質問は
「特定の n に対して最小の計算回数を求める」
という趣旨の質問ではありません。
（追記）
バイナリ法によるコード（Ruby版およびPython版）を
回答に載せました。
10024,jquery,こんにちは
画像のドラッグアンドドロップについて質問です
https://jqueryui.com/droppable/#photo-manager
これを参考にしていますが
やりたいこと
・画像をドラッグしてもクローンを残したい
・ドロップエリアで数字をカウントさせたい
やったこと
・クローンに関してはもともとdraggableエリアに
helper: "clone",　があったのですがこれはドロップエリアに対して効いているものと
思われます。なので改めて
$(".ui-widget-content ui-corner-tr").draggable(
{
helper: "clone"
}
);
これを追加しましたがダメでした。
・ドロップエリアでの数字のカウントは
// image deletion function
var recycle_icon =  "<a href='link/to/recycle/script/when/we/have/js/off' title='Recycle this image' class='ui-icon ui-icon-refresh'>Recycle image</a>";
というところをカウント数の表示に置き換えられると思い,a要素を0に置き換えてみましたがドラッグできない状態になってしまいました。
またカウントのプログラムは
drop : function(event, ui){
//  dragされてきたオブジェクトを取得してクローン作製
var dragId = ui.draggable.attr("id");
if($(this).find(".drop" + dragId).length == 0){
$('#cnt').text(++counter);
}
} ,
out : function (event , ui){
var dragId = ui.draggable.attr("id");
$(this).find(".drop" + dragId).remove();
$('#cnt').text(--counter);
}
こちらを参考にさせていただこうと思っています。
いい方法などあれば教えていただきたいですよろしくお願い致します。
10026,jquery,MonacaクラウドでiPhone向けのアプリを試作中です。
cordovaのcaptureVideoを使って取得した動画を、標準アプリの写真のように
動画のカットをサムネイル表示させクリックすると再生させたいと思っています。
表示される動画のカットは1フレーム目などで構いません。
外部サイトに動画を送信せず、ローカルだけで処理したいと考えています。
最終的にはiPhoneだけでなくAndroidでも動作させたいと思っています。
videoタグを使いましたが、一度再生するまではサムネイルが表示されません。
videoタグで何とかサムネイルを表示させる、ローカルでサムネイルを作成する、別の動画再生プラグインを使うなど、何かしら方法がありましたらお教え頂けると幸いです。
10083,jquery,こんばんわ
ショッピングカートのシステムについてお聞きしたいです。
参考URL
http://www.webresourcesdepot.com/wp-content/uploads/file/drag-drop-shopping-cart/
このサイトではカートに入れるとタイトルが表示されていますがこれを画像に置き換えるにはどうすればいいでしょうか
basket.find("ul").appendの'<span class="name">' + move.find("h3").html()
ここのあたりをいじるのかなとは思うのですが。。よろしくお願いします。
<section id="header" style="margin-bottom: 50px;"><h3>Back to the WebResourcesDepot article: <a href="http://www.webresourcesdepot.com/drag-n-drop-shopping-cart-with-jquery-ui-tutorial/">Drag ‘n’ Drop Shopping Cart With jQuery UI (Tutorial)</a><h3></section>
<section id="product">
<ul class="clear">
<li data-id="1">
<a href="#">
<img src="" alt="">
<h3>iPad 32gb retina screen</h3>
<p>Duis mollis, est non commodo luctus, nisi erat porttitor ligula, eget lacinia odio sem nec elit.</p>
</a>
</li>
<li data-id="2">
<a href="#">
<img src="" alt="">
<h3>Turntable mixer</h3>
<p>Duis mollis, est non commodo luctus, nisi erat porttitor ligula, eget lacinia odio sem nec elit.</p>
</a>
</li>
<li data-id="3">
<a href="#">
<img src="" alt="">
<h3>IBM 15" super-fast computer</h3>
<p>Duis mollis, est non commodo luctus, nisi erat porttitor ligula, eget lacinia odio sem nec elit.</p>
</a>
</li>
<li data-id="4">
<a href="#">
<img src="" alt="">
<h3>Some crazy circuit</h3>
<p>Duis mollis, est non commodo luctus, nisi erat porttitor ligula, eget lacinia odio sem nec elit.</p>
</a>
</li>
<li data-id="5">
<a href="#">
<img src="" alt="">
<h3>White earpieces</h3>
<p>Duis mollis, est non commodo luctus, nisi erat porttitor ligula, eget lacinia odio sem nec elit.</p>
</a>
</li>
<li data-id="6">
<a href="#">
<img src="" alt="">
<h3>Headphones with free keyboard</h3>
<p>Duis mollis, est non commodo luctus, nisi erat porttitor ligula, eget lacinia odio sem nec elit.</p>
</a>
</li>
<li data-id="7">
<a href="#">
<img src="" alt="">
<h3>iPhone 4S</h3>
<p>Duis mollis, est non commodo luctus, nisi erat porttitor ligula, eget lacinia odio sem nec elit.</p>
</a>
</li>
<li data-id="8">
<a href="#">
<img src="" alt="">
<h3>Another crazy circuit or..</h3>
<p>Duis mollis, est non commodo luctus, nisi erat porttitor ligula, eget lacinia odio sem nec elit.</p>
</a>
</li>
</ul>
<aside id="sidebar">
<div class="basket">
<div class="basket_list">
<div class="head">
<span class="name">Product name</span>
<span class="count">Quantity</span>
</div>
<ul>
<!--li>
<span class="name">Samsung S3 asd asdasdaf dfsdghgfg dgfg</span>
<input class="count" value="1" type="text">
<button class="delete">&#10005;</button>
</li-->
</ul>
</div>
</div>
</aside>
$(function () {
// jQuery UI Draggable
$("#product li").draggable({
// brings the item back to its place when dragging is over
revert:true,
// once the dragging starts, we decrease the opactiy of other items
// Appending a class as we do that with CSS
drag:function () {
$(this).addClass("active");
$(this).closest("#product").addClass("active");
},
// removing the CSS classes once dragging is over.
stop:function () {
$(this).removeClass("active").closest("#product").removeClass("active");
}
});
// jQuery Ui Droppable
$(".basket").droppable({
// The class that will be appended to the to-be-dropped-element (basket)
activeClass:"active",
// The class that will be appended once we are hovering the to-be-dropped-element (basket)
hoverClass:"hover",
// The acceptance of the item once it touches the to-be-dropped-element basket
// For different values http://api.jqueryui.com/droppable/#option-tolerance
tolerance:"touch",
drop:function (event, ui) {
var basket = $(this),
move = ui.draggable,
itemId = basket.find("ul li[data-id='" + move.attr("data-id") + "']");
// To increase the value by +1 if the same item is already in the basket
if (itemId.html() != null) {
itemId.find("input").val(parseInt(itemId.find("input").val()) + 1);
}
else {
// Add the dragged item to the basket
addBasket(basket, move);
// Updating the quantity by +1" rather than adding it to the basket
move.find("input").val(parseInt(move.find("input").val()) + 1);
}
}
});
// This function runs onc ean item is added to the basket
function addBasket(basket, move) {
basket.find("ul").append('<li data-id="' + move.attr("data-id") + '">'
+ '<span class="name">' + move.find("h3").html() + '</span>'
+ '<input class="count" value="1" type="text">'
+ '<button class="delete">&#10005;</button>');
}
// The function that is triggered once delete button is pressed
$(".basket ul li button.delete").live("click", function () {
$(this).closest("li").remove();
});
});
10105,javascript|jquery,monacaでアンドロイドとIOS両方を支援するハイブリッドアプリを開発しています。
リンクを押すと現在地と目的地の座標を渡して設置されているグーグルマップが開かれるようにし、渡された座標でグーグルマップのナビが実行されるようにしたいんです。
現在は
window.open('http://maps.google.com/maps?saddr=' + start
+ '&daddr=' + end + '&directionsmode=driving', '_system');
このようなコードを使っています。アンドロイドではリンクを押して上のコードが動くと、インタネットで繋ぐか設置されているグーグルマップアプリにつなぐか聞くダイアログが表示されます。でも、IOSはすぐsafariを利用してグーグルマップを繋げてしまい、困っています。
アンドロイドもIOSも設置されているグーグルマップが開かれるようにするにはどうしたらいいでしょうか？
10114,jquery,こんにちは、度々すみません
今、monacaを使いドラッグアンドドロップでドロップされた画像をボタンクリックでローカルストレージに保存し、次のページで表示させようとしています。
そこで、ボタンをクリックすると画像（パス）をストレージに保存させようとしていますが
drop後のtrush内の値を保存させようと
$(function() {
$("#next").click(onnext);
});
function onnext() {
var gazo = $("#trash").html();
var tes = {
trash:gazo,
}
console.log("#trush");
localStorage.setItem("test", JSON.stringify(tes));
}
このようにしたのですが #trush をconsole.logで確認すると
#trush
{"trash":"\n    \n      Drop Items:1\n      \n    \n  \n      High Tatras\n      \n      \n    "}
このように表示され画像のパスが入っていません。
ドロップで #trush に画像が入っているから表示されていると思うのですが
#trush 内を取り出すと空に。。。
どうすればいいでしょうか、よろしくお願い致します。
$(function() {
// there's the gallery and the trash
var $gallery = $("#gallery"),
$trash = $("#trash"),
$items = $("#items");
// let the gallery items be draggable
$("li", $gallery).draggable({
cancel: "a.ui-icon", // clicking an icon won't initiate dragging
revert: "invalid", // when not dropped, the item will revert back to its initial position
containment: "document",
helper: "clone",
cursor: "move"
});
// let the trash be droppable, accepting the gallery items
$trash.droppable({
accept: "#gallery > li",
activeClass: "ui-state-highlight",
drop: function(event, ui) {
deleteImage(ui.draggable);
}
});
// let the gallery be droppable as well, accepting items from the trash
$gallery.droppable({
accept: "#trash li",
activeClass: "custom-state-active",
drop: function(event, ui) {
recycleImage(ui.draggable);
}
});
// image deletion function
var recycle_icon = "<a href='link/to/recycle/script/when/we/have/js/off' title='Recycle this image' class='ui-icon ui-icon-refresh'>Recycle image</a>";
function deleteImage($item) {
var obj = cloneObject($item);
var $list = $("ul", $trash).length ?
$("ul", $trash) :
$("<ul class='gallery ui-helper-reset'/>").appendTo($trash);
obj.find("a.ui-icon-trash").remove();
obj.append(recycle_icon).appendTo($list).fadeIn(function() {
obj
.animate({
width: "48px"
})
.find("img")
.animate({
height: "36px"
});
});
$("#items").text($("li", $list).length);
}
// image recycle function
var trash_icon = "<a href='link/to/trash/script/when/we/have/js/off' title='Delete this image' class='ui-icon ui-icon-trash'>Delete image</a>";
function recycleImage($item) {
$item.fadeOut(function() {
$item.remove();
$("#items").text($("li", $("ul", $trash)).length);
});
}
// image preview function, demonstrating the ui.dialog used as a modal window
function viewLargerImage($link) {
var src = $link.attr("href"),
title = $link.siblings("img").attr("alt"),
$modal = $("img[src$='" + src + "']");
if ($modal.length) {
$modal.dialog("open");
} else {
var img = $("<img alt='" + title + "' width='384' height='288' style='display: none; padding: 8px;' />")
.attr("src", src).appendTo("body");
setTimeout(function() {
img.dialog({
title: title,
width: 400,
modal: true
});
}, 1);
}
}
function cloneObject($item) {
var obj = $item.clone();
obj.draggable({
cancel: "a.ui-icon",
revert: "invalid",
containment: "document",
helper: "clone",
cursor: "move"
});
obj.click(function(event) {
var $item = $(this),
$target = $(event.target);
if ($target.is("a.ui-icon-trash")) {
deleteImage($item);
} else if ($target.is("a.ui-icon-zoomin")) {
viewLargerImage($target);
} else if ($target.is("a.ui-icon-refresh")) {
recycleImage($item);
}
return false;
});
return obj;
}
// resolve the icons behavior with event delegation
$("ul.gallery > li").click(function(event) {
var $item = $(this),
$target = $(event.target);
if ($target.is("a.ui-icon-trash")) {
deleteImage($item);
} else if ($target.is("a.ui-icon-zoomin")) {
viewLargerImage($target);
} else if ($target.is("a.ui-icon-refresh")) {
recycleImage($item);
}
return false;
});
});
//ボタンクリック
$(function() {
$("#next").click(onnext);
});
function onnext() {
var text = $("#trash").html();
var tes = {
trash:text,
}
localStorage.setItem("test", JSON.stringify(tes));
}
/*
Theme Name: jqueryui-com
Template: jquery
*/
a,
.title {
color: #B24926;
}
#content a:hover {
color: #333;
}
#banner-secondary p.intro {
padding: 0;
float: left;
width: 50%;
}
#banner-secondary .download-box {
border: 1px solid #aaa;
background: #333;
background: -webkit-linear-gradient(left, #333 0%, #444 100%);
background: linear-gradient(to right, #333 0%, #444 100%);
float: right;
width: 40%;
text-align: center;
font-size: 20px;
padding: 10px;
border-radius: 5px;
box-shadow: 0 0 8px rgba(0, 0, 0, 0.8);
}
#banner-secondary .download-box h2 {
color: #71D1FF;
font-size: 26px;
}
#banner-secondary .download-box .button {
float: none;
display: block;
margin-top: 15px;
}
#banner-secondary .download-box p {
margin: 15px 0 5px;
}
#banner-secondary .download-option {
width: 45%;
float: left;
font-size: 16px;
}
#banner-secondary .download-legacy {
float: right;
}
#banner-secondary .download-option span {
display: block;
font-size: 14px;
color: #71D1FF;
}
#content .dev-links {
float: right;
width: 30%;
margin: -15px -25px .5em 1em;
padding: 1em;
border: 1px solid #666;
border-width: 0 0 1px 1px;
border-radius: 0 0 0 5px;
box-shadow: -2px 2px 10px -2px #666;
}
#content .dev-links ul {
margin: 0;
}
#content .dev-links li {
padding: 0;
margin: .25em 0 .25em 1em;
background-image: none;
}
.demo-list {
float: right;
width: 25%;
}
.demo-list h2 {
font-weight: normal;
margin-bottom: 0;
}
#content .demo-list ul {
width: 100%;
border-top: 1px solid #ccc;
margin: 0;
}
#content .demo-list li {
border-bottom: 1px solid #ccc;
margin: 0;
padding: 0;
background: #eee;
}
#content .demo-list .active {
background: #fff;
}
#content .demo-list a {
text-decoration: none;
display: block;
font-weight: bold;
font-size: 13px;
color: #3f3f3f;
text-shadow: 1px 1px #fff;
padding: 2% 4%;
}
.demo-frame {
width: 70%;
height: 350px;
}
.view-source a {
cursor: pointer;
}
.view-source > div {
overflow: hidden;
display: none;
}
@media all and (max-width: 600px) {
#banner-secondary p.intro, #banner-secondary .download-box {
float: none;
width: auto;
}
#banner-secondary .download-box {
overflow: auto;
}
}
@media only screen and (max-width: 480px) {
#content .dev-links {
width: 55%;
margin: -15px -29px .5em 1em;
overflow: hidden;
}
}
#gallery {
float: left;
width: 65%;
min-height: 12em;
}
.gallery.custom-state-active {
background: #eee;
}
.gallery li {
float: left;
width: 96px;
padding: 0.4em;
margin: 0 0.4em 0.4em 0;
text-align: center;
}
.gallery li h5 {
margin: 0 0 0.4em;
cursor: move;
}
.gallery li a {
float: right;
}
.gallery li a.ui-icon-zoomin {
float: left;
}
.gallery li img {
width: 100%;
cursor: move;
}
#trash {
float: right;
width: 32%;
min-height: 18em;
padding: 1%;
}
#trash h4 {
line-height: 16px;
margin: 0 0 0.4em;
}
#trash h4 .ui-icon {
float: left;
}
#trash .gallery h5 {
display: none;
}
<link href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css" rel="stylesheet"/>
<script src="//code.jquery.com/jquery-1.10.2.js"></script>
<script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
<div class="ui-widget ui-helper-clearfix">
<ul id="gallery" class="gallery ui-helper-reset ui-helper-clearfix">
<li class="ui-widget-content ui-corner-tr">
<h5 class="ui-widget-header">High Tatras</h5>
<img src="https://jqueryui.com/resources/demos/droppable/images/high_tatras_min.jpg" alt="The peaks of High Tatras" width="96" height="72">
<a href="https://jqueryui.com/resources/demos/droppable/images/high_tatras.jpg" title="View larger image" class="ui-icon ui-icon-zoomin">View larger</a>
<a href="link/to/trash/script/when/we/have/js/off" title="Delete this image" class="ui-icon ui-icon-trash">Delete image</a>
</li>
<li class="ui-widget-content ui-corner-tr">
<h5 class="ui-widget-header">High Tatras 2</h5>
<img src="https://jqueryui.com/resources/demos/droppable/images/high_tatras2_min.jpg" alt="The chalet at the Green mountain lake" width="96" height="72">
<a href="https://jqueryui.com/resources/demos/droppable/images/high_tatras2.jpg" title="View larger image" class="ui-icon ui-icon-zoomin">View larger</a>
<a href="link/to/trash/script/when/we/have/js/off" title="Delete this image" class="ui-icon ui-icon-trash">Delete image</a>
</li>
<li class="ui-widget-content ui-corner-tr">
<h5 class="ui-widget-header">High Tatras 3</h5>
<img src="https://jqueryui.com/resources/demos/droppable/images/high_tatras3_min.jpg" alt="Planning the ascent" width="96" height="72">
<a href="https://jqueryui.com/resources/demos/droppable/images/high_tatras3.jpg" title="View larger image" class="ui-icon ui-icon-zoomin">View larger</a>
<a href="link/to/trash/script/when/we/have/js/off" title="Delete this image" class="ui-icon ui-icon-trash">Delete image</a>
</li>
<li class="ui-widget-content ui-corner-tr">
<h5 class="ui-widget-header">High Tatras 4</h5>
<img src="https://jqueryui.com/resources/demos/droppable/images/high_tatras4_min.jpg" alt="On top of Kozi kopka" width="96" height="72">
<a href="https://jqueryui.com/resources/demos/droppable/images/high_tatras4.jpg" title="View larger image" class="ui-icon ui-icon-zoomin">View larger</a>
<a href="link/to/trash/script/when/we/have/js/off" title="Delete this image" class="ui-icon ui-icon-trash">Delete image</a>
</li>
</ul>
<div id="trash" class="ui-widget-content ui-state-default">
<h4 class="ui-widget-header">
Drop Items:<span id="items">0</span>
<!-- <span class="ui-icon ui-icon-trash"></span> Trash -->
</h4>
</div>
<a data-role="button" data-icon="check" id="next" data-theme="b">次へ</a>
</div>
10123,jquery,初歩的な事で申し訳ないんですが、タイトルの通りRuby on Railsで使われているjqueryのバージョンを確認したいのです。
デバッグ時のソースからjquery.jsを開いたときに頭に書いてある
jQuery JavaScript Library v1.11.1
がバージョンと考えていいのでしょうか？
10131,jquery,Gemfileで
gem 'jquery-rails', '~> 3.1.0'
としてbundle updateとかbundle installとかやってみたんですがjQueryのバージョンが1.11.1のままになってるみたいなんです。
jquery.jsで
* jQuery JavaScript Library v1.11.1
となってるし、
puts Jquery::Rails::JQUERY_VERSION
も1.11.1になったままです。
なんかそもそものやり方を間違えているんでしょうか？
（だったとしたら検索してわからないのも当然なので皆さんのアドバイスを！）
よろしくお願い致します。
10152,c++,Boost.Proto Users' Guide を読んでいるのですが、そのなかの
typedef typename Context::template eval<Expr>::result_type type;
という構文の意味が理解できずにいます。
http://www.boost.org/doc/libs/1_57_0/doc/html/proto/users_guide.html#boost_proto.users_guide.back_end.expression_evaluation.proto_eval
C++ の typedef の引数は２つであると思っていたのですが、３つの場合がありうるのでしょうか？
そうであるなら、どのような意味を持つのでしょうか？
あるいは、typedefの引数は２つの場合しかないならば、上記構文の　typename Context::template　はどのような意味を持つと解釈すれば良いのでしょうか？
恥ずかしながら、typedef の使い方にをひととりおさらいしたつもりなのですが、上記構文の意味はわかりません。ヒントやtypedefについての解説へのURLだけでも助かりますので、どうか宜しくお願いいたします。
10184,jquery,現在以下のようなGemfileを使用していて、
ruby '2.0.0'
gem 'rails', '~> 4.0.2'
group :production do
gem 'pg'
gem 'therubyracer', :platform => :ruby
end
group :development, :test do
gem 'sqlite3'
end
gem 'memcachier'
gem 'dalli'
gem 'sass-rails', '~> 4.0.3'
gem 'uglifier', '>= 1.3.0'
gem 'coffee-rails', '~> 4.0.0'
gem 'jquery-rails'
gem 'jbuilder', '~> 1.2'
gem 'oauth'
gem "rmagick", '2.13.4', :require => 'RMagick'
group :doc do
gem 'sdoc', require: false
end
bundle installをして成功すると以下のような出力です。
Using rake 10.4.2
Using i18n 0.7.0
Using minitest 4.7.5
Using multi_json 1.11.0
Using thread_safe 0.3.5
Using tzinfo 0.3.44
Using activesupport 4.0.13
Using builder 3.1.4
Using erubis 2.7.0
Using rack 1.5.3
Using rack-test 0.6.3
Using actionpack 4.0.13
Using mime-types 2.5
Using mail 2.6.3
Using actionmailer 4.0.13
Using activemodel 4.0.13
Using activerecord-deprecated_finders 1.0.4
Using arel 4.0.2
Using activerecord 4.0.13
Using coffee-script-source 1.9.1.1
Using execjs 2.5.2
Using coffee-script 2.4.1
Using thor 0.19.1
Using railties 4.0.13
Using coffee-rails 4.0.1
Using dalli 2.7.4
Using hike 1.2.3
Using jbuilder 1.5.3
Using jquery-rails 3.1.2
Using json 1.8.2
Using libv8 3.16.14.7
Using memcachier 0.0.2
Using oauth 0.4.7
Using pg 0.18.1
Using bundler 1.9.8
Using tilt 1.4.1
Using sprockets 2.12.3
Using sprockets-rails 2.3.1
Using rails 4.0.13
Using rdoc 4.2.0
Using ref 1.0.5
Using rmagick 2.13.4
Using sass 3.2.19
Using sass-rails 4.0.5
Using sdoc 0.4.1
Using sqlite3 1.3.10
Using therubyracer 0.12.2
Using uglifier 2.7.1
ここでjquery-railsの4.0.2を使いたいのですが、
gem 'jquery-rails'
を
gem 'jquery-rails', '~> 4.0.2'
に変更してbundle istallすると以下のようなエラーが出ます。
Bundler could not find compatible versions for gem "railties":
In snapshot (Gemfile.lock):
railties (= 4.0.13)
In Gemfile:
rails (~> 4.0.2) ruby depends on
railties (= 4.0.13) ruby
rails (~> 4.0.2) ruby depends on
railties (= 4.0.13) x64-mingw32
sass-rails (~> 4.0.3) ruby depends on
railties (< 5.0, >= 4.0.0) ruby
sass-rails (~> 4.0.3) ruby depends on
railties (< 5.0, >= 4.0.0) x64-mingw32
sass-rails (~> 4.0.3) ruby depends on
railties (< 5.0, >= 4.0.0) ruby
sass-rails (~> 4.0.3) ruby depends on
railties (< 5.0, >= 4.0.0) x64-mingw32
railties (>= 4.2.0) ruby
jquery-rails (~> 4.0.2) ruby depends on
railties (>= 4.2.0) x64-mingw32
検索しまくっていろいろぐちゃぐちゃやってみたんですが、さっぱりです。
何かアドバイスを頂けませんでしょうか。よろしくおねがいします。
10215,python,環境
- Windows7
- Python2.7
- Sublime Text3
対象はヘッダーを含む16bitのImgファイル（X線測定で得た画像ファイル）です．
ヘッダーの編集を自動化するために，テキストファイルとして読み込んで一部を書き換える，ということをしようとしています．
ファイルサイズが14Mbと比較的大きいため，コーディングしているときは，ヘッダー部だけをあらかじめ切り出し，拡張子をimgにしたファイルを使用していました．
そのときは下のように，ファイルをエディタで開いたときと同じような配列
522d 4158 4953 2d43 5320 312e 302d 322e 3020 2020 476c 7963 696e 6520 2020 2020 2020 2020 2020 2020 7472 6967 6f6e 616c...
が取り出せていたのですが，いざ元のimgファイルに対してプログラムを実行したところ，取り出せたのは
R-AXIS-CS 1.0-2.0   Glycine             trigonal    @\xe19\xc1@\xe19\xc1@\xaff\xcfB\xb4\x00\x00B\xb4\x00\x00B\xf0\x00\x00P31\x00m       ...
のように，エンコードが変わった（？）ものになってしまいました．
単にファイルをopen()してreadline()しただけなのですが．．．
with open('sample.img', 'rb') as f:
for i in range(60):
data = []
list1 = f.readline()
data.append(list1)
print data
普通に16進数の配列として取り出すにはどうしたらよいでしょうか？
そもそも，テキストとして開こうとしているのが間違いなのでしょうか?
文字コードなどに詳しくないので，何が起きてるかさっぱりわかりません．
よろしくお願いします．
10264,python,ストリーミングデータが提供される API を利用する際に、サーバーからのレスポンスが届くたびに、リアルタイムにできるだけ近い形で処理したいと考えています。
以下のような状況において、もしより適切なアプローチがありましたらご教示いただけましたら幸いです。
状況
サーバーからは何かしらの event が発生するごとにレスポンスが、また 15 秒ごとに接続を維持するための heartbeat メッセージが届きます。
現在は requests を使って以下のように書いています。Python のバージョンは 3.4 です。
# stream=True を指定してリクエストを投げる
res = requests.get(url, headers=HEADERS, params=payload, stream=True)
# iter_lines() で 1 行ずつ処理する
for line in res.iter_lines(chunk_size=64):
line = line.decode('utf-8')
do something...
問題点1
当初 iter_lines() を chunk_size を指定せずに使っていたところ、デフォルトだと chunk_size=512 となっており、heartbeat メッセージのみの場合は 5,6 件ずつまとまって処理されていました。
chunk_size を小さくすることで処理の間隔をある程度は短縮できたと思いますが、レスポンス 1 件ごとに都度処理というところまでは至っておりません。
問題点2
また、特定の種類のレスポンスについては I/O 待ちが発生する処理を行うため、その間ブロックされてしまう点も気になっています。
非同期処理？
非同期処理を扱うライブラリかフレームワークを利用することで解決できるのではと思い、asyncio, aiohttp, Twisted などについてドキュメント、サンプルコードを読み自分なりに調べてみて、恐らく asyncio を使えばいいのではないかと思っているのですが、その見立てが正しいのか、また、私のケースではどのように書いたらよいのかがわかりません。
asyncio のこのあたりが関係するのではないかと思うのですが、よく理解できておりません。
http://docs.python.jp/3/library/asyncio-stream.html
非同期処理、asyncio で解決する、という考え方は適切でしょうか？
どのように書いたらよいでしょうか？
上記 2 点について可能な範囲で教えていただけませんでしょうか。
10278,c++,C++で下記の(例1)のようにprintln関数を作り、main内で実行したところ、
warning: conversion from string literal to 'char *' is deprecated [-Wc++11-compat-deprecated-writable-strings]という警告が出てしまいます。
文字列リテラルをchar * に変換するのは非推奨であるということだと思うのですがこの警告を回避するにはどうすればいいのでしょうか?
(例1)
#include <iostream>
void println(char *s) {
std::cout << s << "\n";
}
int main() {
println("Hello");
}
10341,c++,インタフェースクラスの勉強をしていて、以下のコードがありました。
class Person {
public:
virtual ~Person();
virtual std::string name() const = 0;
virtual std::string birthDate() const = 0;
virtual std::string address() const = 0;
...
}
仮想メンバ関数の右側の = 0 というのはどこかの本で見た記憶があるのですが、名前と意味がよくわかりません。
検索する場合のキーワードを教えていたければ幸いです。
10376,python,以下のスクリプトを実行すると、応答が返ってきません。
import mechanize
b = mechanize.Browser();
b.set_handle_robots(False);
h = b.open('http://stocks.finance.yahoo.co.jp/stocks/detail/?code=2726');
他のurl(http://www.google.comなど)ではちゃんと応答が返ってきます。
なぜでしょうか？
10383,python,Deep Learning Tutorialsのロジスティック回帰を読んでいます。
http://deeplearning.net/tutorial/logreg.html
ロジスティック回帰での尤度関数を計算する部分。
-T.mean(T.log(self.p_y_given_x)[T.arange(y.shape[0]), y])
ここの T.arange についてなのですが
Theano の arange は Numpy と同じように0〜nのベクトルを作成するのでしょうか？
print T.arange(10)
として、配列が作成されるか確認しましたが ARange.0 と出力され、どのように動作しているのかわかりません。
質問したい点は以下です。
- theano.tensor.arangeの動作について
- printした際の出力の意味
よろしくお願いします。
10404,python,コード中にpandasを使用したファイルをpy2exeを使って、
exeファイルにコンパイルしましたが、実行できません。
exeファイルは一応作成されるのですが、ファイルサイズが異様に大きく、
実行すると次のエラーが出力されてしまいます。
OMP: Warning #178: Function GetModuleHandleEx failed:
OMP: System error #126: 指定されたモジュールが見つかりません。
Traceback (most recent call last):
File "hogehoge.py", line 7, in <module>
import pandas as pd
File "zipextimporter.pyc", line 82, in load_module
File "pandas\__init__.pyc", line 49, in <module>
File "zipextimporter.pyc", line 82, in load_module
File "pandas\core\api.pyc", line 9, in <module>
File "zipextimporter.pyc", line 82, in load_module
File "pandas\core\groupby.pyc", line 15, in <module>
File "zipextimporter.pyc", line 82, in load_module
File "pandas\core\frame.pyc", line 39, in <module>
File "zipextimporter.pyc", line 82, in load_module
File "pandas\core\series.pyc", line 2702, in <module>
File "zipextimporter.pyc", line 82, in load_module
File "pandas\tools\plotting.pyc", line 27, in <module>
File "zipextimporter.pyc", line 82, in load_module
File "pandas\tseries\converter.pyc", line 7, in <module>
File "zipextimporter.pyc", line 82, in load_module
File "matplotlib\__init__.pyc", line 1100, in <module>
File "matplotlib\__init__.pyc", line 947, in rc_params
File "matplotlib\__init__.pyc", line 789, in matplotlib_fname
File "matplotlib\__init__.pyc", line 325, in wrapper
File "matplotlib\__init__.pyc", line 693, in _get_data_path_cached
File "matplotlib\__init__.pyc", line 661, in _get_data_path
UnicodeDecodeError: 'ascii' codec can't decode byte 0x83 in position 43: ordinal
not in range(128)
使用したsetup.pyは次のものです。
from distutils.core import setup
import py2exe, sys, os
sys.argv.append('py2exe')
setup(
options = {'py2exe': {'bundle_files':1}},
zipfile = None,
console = [{'script': "hogehoge.py"}]
)
setup.pyになにか色々追加しないといけないと思うのですが、
初心者なものでまだ解決出来ていません。
pyinstallerも試してみましたが、こちらも何か足りないようで結構困っています。
アドバイス頂ければ大変助かります。
10416,python,eclipseでpythonをやってます。numpyをC:\Python34\Scriptsにいれてみたところ、コマンドプロンプトでは下のコードは通るんですが、eclipseではエラーになります
from numpy import array
A=array([[1,2],[3,4]])
B=array([[5,6],[7,8]])
C=A+B
print A,B,C
Traceback (most recent call last):
File "\\~~~~~\Users\�ɖ�\eclipse\pleiades\pleiades\workspace\Python �\Statistics\Matrix_ABC.py", line 6, in ?
from numpy import array
File "C:\Python34\Scripts\numpy\__init__.py", line 161
from .version import git_revision as __git_revision__
^
SyntaxError: invalid syntax
このエラーの意味と解決法を教えてください。
プログラミング初心者なので何が原因か全くわからないので、情報不足だと思います、すいません。
10453,python,Sphinx のインストールをpipでしました．
ですが，sphinx-quickstartで始めようとしたところ，以下の様なエラーが出てしまいました．
user:~ $ sphinx-quickstart
Traceback (most recent call last):
File "user/anaconda/bin/sphinx-quickstart", line 9, in <module>
load_entry_point('Sphinx==1.2.3', 'console_scripts', 'sphinx-quickstart')()
File "build/bdist.macosx-10.5-x86_64/egg/pkg_resources/__init__.py", line 552, in load_entry_point
File "build/bdist.macosx-10.5-x86_64/egg/pkg_resources/__init__.py", line 2671, in load_entry_point
ImportError: Entry point ('console_scripts', 'sphinx-quickstart') not found
いまいち，何が問題になっているかよくわかりません．
どのように対処すればいいでしょうか，ご存知の方いらっしゃったらご教授ください．
10495,javascript|jquery,こんにちは！
ボタンクリックで要素内の値を複数取得し、localstorageに保存したいのですがうまくできません。
コードが長くなってしまうのでこちらにて失礼します
http://codepen.io/anon/pen/xGEjLO
$(function() {
// there's the gallery and the trash
var $gallery = $("#gallery"),
$trash = $("#trash"),
$items = $("#items");
// let the gallery items be draggable
$("li", $gallery).draggable({
cancel: "a.ui-icon", // clicking an icon won't initiate dragging
revert: "invalid", // when not dropped, the item will revert back to its initial position
containment: "document",
helper: "clone",
cursor: "move"
});
// let the trash be droppable, accepting the gallery items
$trash.droppable({
accept: "#gallery > li",
activeClass: "ui-state-highlight",
drop: function(event, ui) {
deleteImage(ui.draggable);
}
});
// let the gallery be droppable as well, accepting items from the trash
$gallery.droppable({
accept: "#trash li",
activeClass: "custom-state-active",
drop: function(event, ui) {
recycleImage(ui.draggable);
}
});
// image deletion function
var recycle_icon = "<a href='link/to/recycle/script/when/we/have/js/off' title='Recycle this image' class='ui-icon ui-icon-refresh'>Recycle image</a>";
function deleteImage($item) {
var obj = cloneObject($item);
var $list = $("ul", $trash).length ?
$("ul", $trash) :
$("<ul class='gallery ui-helper-reset'/>").appendTo($trash);
obj.find("a.ui-icon-trash").remove();
obj.append(recycle_icon).appendTo($list).fadeIn(function() {
obj
.animate({
width: "48px"
})
.find("img")
.animate({
height: "36px"
});
});
$items.text($("li", $list).length);
}
// image recycle function
var trash_icon = "<a href='link/to/trash/script/when/we/have/js/off' title='Delete this image' class='ui-icon ui-icon-trash'>Delete image</a>";
function recycleImage($item) {
$item.fadeOut(function() {
$item.remove();
$items.text($("li", $("ul", $trash)).length);
});
}
// image preview function, demonstrating the ui.dialog used as a modal window
function viewLargerImage($link) {
var src = $link.attr("href"),
title = $link.siblings("img").attr("alt"),
$modal = $("img[src$='" + src + "']");
if ($modal.length) {
$modal.dialog("open");
} else {
var img = $("<img alt='" + title + "' width='384' height='288' style='display: none; padding: 8px;' />")
.attr("src", src).appendTo("body");
setTimeout(function() {
img.dialog({
title: title,
width: 400,
modal: true
});
}, 1);
}
}
function cloneObject($item) {
var obj = $item.clone();
obj.draggable({
cancel: "a.ui-icon",
revert: "invalid",
containment: "document",
helper: "clone",
cursor: "move"
});
obj.click(function(event) {
var $item = $(this),
$target = $(event.target);
if ($target.is("a.ui-icon-trash")) {
deleteImage($item);
} else if ($target.is("a.ui-icon-zoomin")) {
viewLargerImage($target);
} else if ($target.is("a.ui-icon-refresh")) {
recycleImage($item);
}
return false;
});
return obj;
}
// resolve the icons behavior with event delegation
$("ul.gallery > li").click(function(event) {
var $item = $(this),
$target = $(event.target);
if ($target.is("a.ui-icon-trash")) {
deleteImage($item);
} else if ($target.is("a.ui-icon-zoomin")) {
viewLargerImage($target);
} else if ($target.is("a.ui-icon-refresh")) {
recycleImage($item);
}
return false;
});
//クリックに保存する
$("button#save").click(function() {
var items = $("li img", $("ul", $trash));
for (var i = 0, len = items.length; i < len; i++) {
localStorage.setItem(i, $(items[i]).attr("src"));
}
// 保存されたことを確認する
for (var i = 0, len = localStorage.length; i < len; i++) {
$("ul#storedItems").append("<li>" +  "<img src=" + localStorage.getItem(i) + ">");
}
});
$("button#clear").click(function() {
localStorage.clear();
$("ul#storedItems li").remove();
});
});
/*
Theme Name: jqueryui-com
Template: jquery
*/
a,
.title {
color: #B24926;
}
#content a:hover {
color: #333;
}
#banner-secondary p.intro {
padding: 0;
float: left;
width: 50%;
}
#banner-secondary .download-box {
border: 1px solid #aaa;
background: #333;
background: -webkit-linear-gradient(left, #333 0%, #444 100%);
background: linear-gradient(to right, #333 0%, #444 100%);
float: right;
width: 40%;
text-align: center;
font-size: 20px;
padding: 10px;
border-radius: 5px;
box-shadow: 0 0 8px rgba(0, 0, 0, 0.8);
}
#banner-secondary .download-box h2 {
color: #71D1FF;
font-size: 26px;
}
#banner-secondary .download-box .button {
float: none;
display: block;
margin-top: 15px;
}
#banner-secondary .download-box p {
margin: 15px 0 5px;
}
#banner-secondary .download-option {
width: 45%;
float: left;
font-size: 16px;
}
#banner-secondary .download-legacy {
float: right;
}
#banner-secondary .download-option span {
display: block;
font-size: 14px;
color: #71D1FF;
}
#content .dev-links {
float: right;
width: 30%;
margin: -15px -25px .5em 1em;
padding: 1em;
border: 1px solid #666;
border-width: 0 0 1px 1px;
border-radius: 0 0 0 5px;
box-shadow: -2px 2px 10px -2px #666;
}
#content .dev-links ul {
margin: 0;
}
#content .dev-links li {
padding: 0;
margin: .25em 0 .25em 1em;
background-image: none;
}
.demo-list {
float: right;
width: 25%;
}
.demo-list h2 {
font-weight: normal;
margin-bottom: 0;
}
#content .demo-list ul {
width: 100%;
border-top: 1px solid #ccc;
margin: 0;
}
#content .demo-list li {
border-bottom: 1px solid #ccc;
margin: 0;
padding: 0;
background: #eee;
}
#content .demo-list .active {
background: #fff;
}
#content .demo-list a {
text-decoration: none;
display: block;
font-weight: bold;
font-size: 13px;
color: #3f3f3f;
text-shadow: 1px 1px #fff;
padding: 2% 4%;
}
.demo-frame {
width: 70%;
height: 350px;
}
.view-source a {
cursor: pointer;
}
.view-source > div {
overflow: hidden;
display: none;
}
@media all and (max-width: 600px) {
#banner-secondary p.intro, #banner-secondary .download-box {
float: none;
width: auto;
}
#banner-secondary .download-box {
overflow: auto;
}
}
@media only screen and (max-width: 480px) {
#content .dev-links {
width: 55%;
margin: -15px -29px .5em 1em;
overflow: hidden;
}
}
#gallery {
float: left;
width: 65%;
min-height: 12em;
}
.gallery.custom-state-active {
background: #eee;
}
.gallery li {
float: left;
width: 96px;
padding: 0.4em;
margin: 0 0.4em 0.4em 0;
text-align: center;
}
.gallery li h5 {
margin: 0 0 0.4em;
cursor: move;
}
.gallery li a {
float: right;
}
.gallery li a.ui-icon-zoomin {
float: left;
}
.gallery li img {
width: 100%;
cursor: move;
}
#trash {
float: right;
width: 32%;
min-height: 18em;
padding: 1%;
}
#trash h4 {
line-height: 16px;
margin: 0 0 0.4em;
}
#trash h4 .ui-icon {
float: left;
}
#trash .gallery h5 {
display: none;
}
<link rel="stylesheet" href="https://code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="https://code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
<div class="ui-widget ui-helper-clearfix">
<ul id="gallery" class="gallery ui-helper-reset ui-helper-clearfix">
<li class="ui-widget-content ui-corner-tr">
<h5 class="ui-widget-header" value="3">High Tatras</h5>
<img src="https://jqueryui.com/resources/demos/droppable/images/high_tatras_min.jpg" alt="The peaks of High Tatras" width="96" height="72">
<a href="https://jqueryui.com/resources/demos/droppable/images/high_tatras.jpg" title="View larger image" class="ui-icon ui-icon-zoomin">View larger</a>
<a href="link/to/trash/script/when/we/have/js/off" title="Delete this image" class="ui-icon ui-icon-trash">Delete image</a>
</li>
<li class="ui-widget-content ui-corner-tr">
<h5 class="ui-widget-header" value="2">High Tatras 2</h5>
<img src="https://jqueryui.com/resources/demos/droppable/images/high_tatras2_min.jpg" alt="The chalet at the Green mountain lake" width="96" height="72">
<a href="https://jqueryui.com/resources/demos/droppable/images/high_tatras2.jpg" title="View larger image" class="ui-icon ui-icon-zoomin">View larger</a>
<a href="link/to/trash/script/when/we/have/js/off" title="Delete this image" class="ui-icon ui-icon-trash">Delete image</a>
</li>
<li class="ui-widget-content ui-corner-tr">
<h5 class="ui-widget-header" value="8">High Tatras 3</h5>
<img src="https://jqueryui.com/resources/demos/droppable/images/high_tatras3_min.jpg" alt="Planning the ascent" width="96" height="72">
<a href="https://jqueryui.com/resources/demos/droppable/images/high_tatras3.jpg" title="View larger image" class="ui-icon ui-icon-zoomin">View larger</a>
<a href="link/to/trash/script/when/we/have/js/off" title="Delete this image" class="ui-icon ui-icon-trash">Delete image</a>
</li>
<li class="ui-widget-content ui-corner-tr">
<h5 class="ui-widget-header value="5">High Tatras 4</h5>
<img src="https://jqueryui.com/resources/demos/droppable/images/high_tatras4_min.jpg" alt="On top of Kozi kopka" width="96" height="72">
<a href="https://jqueryui.com/resources/demos/droppable/images/high_tatras4.jpg" title="View larger image" class="ui-icon ui-icon-zoomin">View larger</a>
<a href="link/to/trash/script/when/we/have/js/off" title="Delete this image" class="ui-icon ui-icon-trash">Delete image</a>
</li>
</ul>
<div id="trash" class="ui-widget-content ui-state-default">
<h4 class="ui-widget-header">
Drop Items:<span id="items">0</span>
<!-- <span class="ui-icon ui-icon-trash"></span> Trash -->
</h4>
</div>
<button type="button" id="save">Save</button>
<button type="button" id="clear">Clear</button>
<p>Stored Items</p>
<ul id="storedItems">
</ul>
</div>
//クリックに保存する　　のところを
$("button#save").click(function() {
var items = $("li img", $("ul", $trash));
for (var i = 0, len = items.length; i < len; i++) {
localStorage.setItem(i, $(items[i]).attr("src"));
}
// 保存されたことを確認する
for (var i = 0, len = localStorage.length; i < len; i++) {
$("ul#storedItems").append("<li>" + i + "：" + localStorage.getItem(i));
}
});
これだと問題なく保存されるのですが同時にタグ内のvalue値も保存させたいです
よろしくお願い致します。
10538,javascript|html,下記の3つのソース(＊２つは補間用)は、アナログ時計(マウスストーカー)のサイズを
"BIGGER⇔ORIGINAL"と*１つの部屋で行われている*ように見せかけたものです。
こんな泥臭い手法でなく、もっとスマートに"１つのソース"でいいように、あれこれ
試行錯誤していますが、うまくいきません。ソース自体に無理があるのかもしれません。
１つのソースで"BIGGER⇔ORIGINAL"とアナログ時計のサイズを切り替える方法があれば、
ご教示ください。
なお、それぞれのソースの"ファイル名"は、次の通りです。
・１つ目のソース…実験1.html
・２つ目のソース…実験2.html
・２つ目のソース…実験3.html
(１つ目のソース)
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=shift_jis">
<TITLE>妖怪クロック(アナログ)- JavaScript</TITLE>
<style type="text/css">
<!--
.butt{
BACKGROUND:maroon;
COLOR:gold;
}
//-->
</style>
<BODY bgcolor="black" text="white">
<div id="clock" style="visibility:hidden">
<div id="Od" style="position:absolute;top:0px;left:0px">
<div style="position:relative">
</div>
</div>
<div id="Of" style="position:absolute;top:0px;left:0px">
<div style="position:relative">
</div>
</div>
<div id="Oh" style="position:absolute;top:0px;left:0px">
<div style="position:relative">
</div>
</div>
<div id="Om" style="position:absolute;top:0px;left:0px">
<div style="position:relative">
</div>
</div>
<div id="Os" style="position:absolute;top:0px;left:0px">
<div style="position:relative">
</div>
</div>
</div>
<script type="text/javascript">
(function(){
"use strict";
function $(sel)
{
return document.getElementById(sel);
}
function $$(sel)
{
if (typeof document.getElementsByClassName === 'undefined')
{
return document.getElementsByName(sel);
}
return document.getElementsByClassName(sel);
}
var dCol = '', //date colour.
sCol = '', //seconds colour.
mCol = '', //minutes colour.
hCol = '', //hours colour.
fCol = '', //face color
ClockHeight = 50,
ClockWidth = 50,
ClockFromMouseY = 0,
ClockFromMouseX = 100,
d = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
m = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
date = new Date(),
day = date.getDate(),
year = date.getYear() + 1900;
var TodaysDate = " " + d[date.getDay()] + " " + day + " " + m[date.getMonth()] + " " + year;
var D = TodaysDate.split('');
var H = '☆☆☆';
H = H.split('');
var M = '☆☆☆☆';
M = M.split('');
var S = '・・・・・';
S = S.split('');
var Face = '1 2 3 4 5 6 7 8 9 10 11 12',
font = 'Helvetica, Arial, sans-serif',
size = 1,
speed = 0.45;
Face = Face.split(' ');
var n = Face.length;
var a = size * 10;
var ymouse = 0,
xmouse = 0,
scrll = 0,
props = '<span style="font-family:' + font + ';font-size:' + size + 'em; color:#' + fCol + '">',
props2 = '<span style="font-family:' + font + ';font-size:' + size + 'em; color:#' + dCol + '">';
var Split = 360 / n;
var Dsplit = 360 / D.length;
var HandHeight = ClockHeight / 4.5;
var HandWidth = ClockWidth / 4.5;
var HandY = -7,
HandX = -2.5,
step = 0.02,
currStep = 0,
y = [],
x = [],
Y = [],
X = [],
Dy = [],
Dx = [],
DY = [],
DX = [];
var i;
for (i = 0; i < n; i++)
{
y[i] = 0;
x[i] = 0;
Y[i] = 0;
X[i] = 0;
}
for (i = 0; i < D.length; i++)
{
Dy[i] = 0;
Dx[i] = 0;
DY[i] = 0;
DX[i] = 0;
}
var wrapper = $('clock');
var html = '';
// Date wrapper
html = '';
for (i = 0; i < D.length; i++)
{
html += '<div class="Date" name="Date" style="position:absolute;top:0px;left:0;height:' + a + ';width:' + a + ';text-align:center">' + props2 + D[i] + '</span></div>';
}
$('Od').children[0].innerHTML = html;
// Face wrapper
html = '';
for (i = 0; i < n; i++)
{
html += '<div class="Face" name="Face" style="position:absolute;top:0px;left:0;height:' + a + ';width:' + a + ';text-align:center">' + props + Face[i] + '</span></div>';
}
$('Of').children[0].innerHTML = html;
// Hours wrapper
html = '';
for (i = 0; i < H.length; i++)
{
html += '<div class="Hours" name="Hours" style="position:absolute;width:16px;height:16px;font-family:Arial;font-size:16px;color:' + hCol + ';text-align:center;font-weight:bold">' + H[i] + '</div>';
}
$('Oh').children[0].innerHTML = html;
// Minute wrapper
html = '';
for (i = 0; i < M.length; i++)
{
html += '<div class="Minutes" name="Minutes" style="position:absolute;width:16px;height:16px;font-family:Arial;font-size:16px;color:' + mCol + ';text-align:center;font-weight:bold">' + M[i] + '</div>';
}
$('Om').children[0].innerHTML = html;
// Seconds wrapper
html = '';
for (i = 0; i < S.length; i++)
{
html += '<div class="Seconds" name="Seconds" style="position:absolute;width:16px;height:16px;font-family:Arial;font-size:16px;color:' + sCol + ';text-align:center;font-weight:bold">' + S[i] + '</div>';
}
$('Os').children[0].innerHTML = html;
// Mouse move event handler
function Mouse(evnt)
{
if (typeof evnt === 'undefined')
{
ymouse = event.Y + ClockFromMouseY;
xmouse = event.X + ClockFromMouseX;
}
else
{
ymouse = evnt.clientY + ClockFromMouseY;
xmouse = evnt.clientX + ClockFromMouseX;
}
}
document.onmousemove = Mouse;
function ClockAndAssign()
{
var time = new Date();
var secs = time.getSeconds();
var sec = -1.57 + Math.PI * secs / 30;
var mins = time.getMinutes();
var min = -1.57 + Math.PI * mins / 30;
var hr = time.getHours();
var hrs = -1.575 + Math.PI * hr / 6 + Math.PI * parseInt(time.getMinutes(), 10) / 360;
$('Od').style.top = window.document.body.scrollTop;
$('Of').style.top = window.document.body.scrollTop;
$('Oh').style.top = window.document.body.scrollTop;
$('Om').style.top = window.document.body.scrollTop;
$('Os').style.top = window.document.body.scrollTop;
for (i = 0; i < n; i++)
{
var F = $$('Face')[i];
F.style.top = y[i] + ClockHeight * Math.sin(-1.0471 + i * Split * Math.PI / 180) + scrll;
F.style.left = x[i] + ClockWidth * Math.cos(-1.0471 + i * Split * Math.PI / 180);
}
for (i = 0; i < H.length; i++)
{
var HL = $$('Hours')[i];
HL.style.top = y[i] + HandY + (i * HandHeight) * Math.sin(hrs) + scrll;
HL.style.left = x[i] + HandX + (i * HandWidth) * Math.cos(hrs);
}
for (i = 0; i < M.length; i++)
{
var ML = $$('Minutes')[i].style;
ML.top = y[i] + HandY + (i * HandHeight) * Math.sin(min) + scrll;
ML.left = x[i] + HandX + (i * HandWidth) * Math.cos(min);
}
for (i = 0; i < S.length; i++)
{
var SL = $$('Seconds')[i].style;
SL.top = y[i] + HandY + (i * HandHeight) * Math.sin(sec) + scrll;
SL.left = x[i] + HandX + (i * HandWidth) * Math.cos(sec);
}
for (i = 0; i < D.length; i++)
{
var DL = $$('Date')[i].style;
DL.top = Dy[i] + ClockHeight * 1.5 * Math.sin(currStep + i * Dsplit * Math.PI / 180) + scrll;
DL.left = Dx[i] + ClockWidth * 1.5 * Math.cos(currStep + i * Dsplit * Math.PI / 180);
}
currStep -= step;
}
function Delay()
{
scrll = 0;
Dy[0] = Math.round(DY[0] += ((ymouse) - DY[0]) * speed);
Dx[0] = Math.round(DX[0] += ((xmouse) - DX[0]) * speed);
for (i = 1; i < D.length; i++) {
Dy[i] = Math.round(DY[i] += (Dy[i - 1] - DY[i]) * speed);
Dx[i] = Math.round(DX[i] += (Dx[i - 1] - DX[i]) * speed);
}
y[0] = Math.round(Y[0] += ((ymouse) - Y[0]) * speed);
x[0] = Math.round(X[0] += ((xmouse) - X[0]) * speed);
for (i = 1; i < n; i++) {
y[i] = Math.round(Y[i] += (y[i - 1] - Y[i]) * speed);
x[i] = Math.round(X[i] += (x[i - 1] - X[i]) * speed);
}
ClockAndAssign();
setTimeout(Delay, 20);
}
Delay();
}());
num = 1;
function toggle(){
num ^= 1;
if(num == 1){
document.getElementById('Od').style.visibility="hidden";
document.getElementById('Of').style.visibility="hidden";
document.getElementById('Oh').style.visibility="hidden";
document.getElementById('Om').style.visibility="hidden";
document.getElementById('Os').style.visibility="hidden";
}
else {
document.getElementById('Od').style.visibility="visible";
document.getElementById('Of').style.visibility="visible";
document.getElementById('Oh').style.visibility="visible";
document.getElementById('Om').style.visibility="visible";
document.getElementById('Os').style.visibility="visible";
}
document.getElementById("tog").value = num ?" APPEAR ":"KILL(切る)";
}
</script>
<br><br><br><br><br><br><br><br><br><br>
<br><br><br><br><br><br><br><br><br><br>
<center><p>
<input class="butt" type="button" id="tog" value="今何時？" onclick="toggle();">
<input class="butt" type="button" value="BIGGER" onclick="location.href='実験2.html';">
</p></center>
</body>
</html>
(２つ目のソース)
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=shift_jis">
<TITLE>妖怪クロック(アナログ) - JavaScript</TITLE>
<style type="text/css">
<!--//
.butt{
BACKGROUND:maroon;
COLOR:gold;
}
//-->
</style>
<BODY bgcolor="black" text="white">
<div id="clock">
<div id="Od" style="position:absolute;top:0px;left:0px">
<div style="position:relative">
</div>
</div>
<div id="Of" style="position:absolute;top:0px;left:0px">
<div style="position:relative">
</div>
</div>
<div id="Oh" style="position:absolute;top:0px;left:0px">
<div style="position:relative">
</div>
</div>
<div id="Om" style="position:absolute;top:0px;left:0px">
<div style="position:relative">
</div>
</div>
<div id="Os" style="position:absolute;top:0px;left:0px">
<div style="position:relative">
</div>
</div>
</div>
<script type="text/javascript">
(function(){
"use strict";
function $(sel)
{
return document.getElementById(sel);
}
function $$(sel)
{
if (typeof document.getElementsByClassName === 'undefined')
{
return document.getElementsByName(sel);
}
return document.getElementsByClassName(sel);
}
var dCol = '', //date colour.
sCol = '', //seconds colour.
mCol = '', //minutes colour.
hCol = '', //hours colour.
fCol = '', //face color
ClockHeight = 130,
ClockWidth = 130,
ClockFromMouseY = 0,
ClockFromMouseX = 100,
d = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
m = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
date = new Date(),
day = date.getDate(),
year = date.getYear() + 1900;
var TodaysDate = " " + d[date.getDay()] + " " + day + " " + m[date.getMonth()] + " " + year;
var D = TodaysDate.split('');
var H = '☆☆☆';
H = H.split('');
var M = '☆☆☆☆';
M = M.split('');
var S = '・・・・・';
S = S.split('');
var Face = '1 2 3 4 5 6 7 8 9 10 11 12',
font = 'Helvetica, Arial, sans-serif',
size = 1,
speed = 0.45;
Face = Face.split(' ');
var n = Face.length;
var a = size * 10;
var ymouse = 0,
xmouse = 0,
scrll = 0,
props = '<span style="font-family:' + font + ';font-size:' + size + 'em; color:#' + fCol + '">',
props2 = '<span style="font-family:' + font + ';font-size:' + size + 'em; color:#' + dCol + '">';
var Split = 360 / n;
var Dsplit = 360 / D.length;
var HandHeight = ClockHeight / 4.5;
var HandWidth = ClockWidth / 4.5;
var HandY = -7,
HandX = -2.5,
step = 0.02,
currStep = 0,
y = [],
x = [],
Y = [],
X = [],
Dy = [],
Dx = [],
DY = [],
DX = [];
var i;
for (i = 0; i < n; i++)
{
y[i] = 0;
x[i] = 0;
Y[i] = 0;
X[i] = 0;
}
for (i = 0; i < D.length; i++)
{
Dy[i] = 0;
Dx[i] = 0;
DY[i] = 0;
DX[i] = 0;
}
var wrapper = $('clock');
var html = '';
// Date wrapper
html = '';
for (i = 0; i < D.length; i++)
{
html += '<div class="Date" name="Date" style="position:absolute;top:0px;left:0;height:' + a + ';width:' + a + ';text-align:center">' + props2 + D[i] + '</span></div>';
}
$('Od').children[0].innerHTML = html;
// Face wrapper
html = '';
for (i = 0; i < n; i++)
{
html += '<div class="Face" name="Face" style="position:absolute;top:0px;left:0;height:' + a + ';width:' + a + ';text-align:center">' + props + Face[i] + '</span></div>';
}
$('Of').children[0].innerHTML = html;
// Hours wrapper
html = '';
for (i = 0; i < H.length; i++)
{
html += '<div class="Hours" name="Hours" style="position:absolute;width:16px;height:16px;font-family:Arial;font-size:16px;color:' + hCol + ';text-align:center;font-weight:bold">' + H[i] + '</div>';
}
$('Oh').children[0].innerHTML = html;
// Minute wrapper
html = '';
for (i = 0; i < M.length; i++)
{
html += '<div class="Minutes" name="Minutes" style="position:absolute;width:16px;height:16px;font-family:Arial;font-size:16px;color:' + mCol + ';text-align:center;font-weight:bold">' + M[i] + '</div>';
}
$('Om').children[0].innerHTML = html;
// Seconds wrapper
html = '';
for (i = 0; i < S.length; i++)
{
html += '<div class="Seconds" name="Seconds" style="position:absolute;width:16px;height:16px;font-family:Arial;font-size:16px;color:' + sCol + ';text-align:center;font-weight:bold">' + S[i] + '</div>';
}
$('Os').children[0].innerHTML = html;
// Mouse move event handler
function Mouse(evnt)
{
if (typeof evnt === 'undefined')
{
ymouse = event.Y + ClockFromMouseY;
xmouse = event.X + ClockFromMouseX;
}
else
{
ymouse = evnt.clientY + ClockFromMouseY;
xmouse = evnt.clientX + ClockFromMouseX;
}
}
document.onmousemove = Mouse;
function ClockAndAssign()
{
var time = new Date();
var secs = time.getSeconds();
var sec = -1.57 + Math.PI * secs / 30;
var mins = time.getMinutes();
var min = -1.57 + Math.PI * mins / 30;
var hr = time.getHours();
var hrs = -1.575 + Math.PI * hr / 6 + Math.PI * parseInt(time.getMinutes(), 10) / 360;
$('Od').style.top = window.document.body.scrollTop;
$('Of').style.top = window.document.body.scrollTop;
$('Oh').style.top = window.document.body.scrollTop;
$('Om').style.top = window.document.body.scrollTop;
$('Os').style.top = window.document.body.scrollTop;
for (i = 0; i < n; i++)
{
var F = $$('Face')[i];
F.style.top = y[i] + ClockHeight * Math.sin(-1.0471 + i * Split * Math.PI / 180) + scrll;
F.style.left = x[i] + ClockWidth * Math.cos(-1.0471 + i * Split * Math.PI / 180);
}
for (i = 0; i < H.length; i++)
{
var HL = $$('Hours')[i];
HL.style.top = y[i] + HandY + (i * HandHeight) * Math.sin(hrs) + scrll;
HL.style.left = x[i] + HandX + (i * HandWidth) * Math.cos(hrs);
}
for (i = 0; i < M.length; i++)
{
var ML = $$('Minutes')[i].style;
ML.top = y[i] + HandY + (i * HandHeight) * Math.sin(min) + scrll;
ML.left = x[i] + HandX + (i * HandWidth) * Math.cos(min);
}
for (i = 0; i < S.length; i++)
{
var SL = $$('Seconds')[i].style;
SL.top = y[i] + HandY + (i * HandHeight) * Math.sin(sec) + scrll;
SL.left = x[i] + HandX + (i * HandWidth) * Math.cos(sec);
}
for (i = 0; i < D.length; i++)
{
var DL = $$('Date')[i].style;
DL.top = Dy[i] + ClockHeight * 1.5 * Math.sin(currStep + i * Dsplit * Math.PI / 180) + scrll;
DL.left = Dx[i] + ClockWidth * 1.5 * Math.cos(currStep + i * Dsplit * Math.PI / 180);
}
currStep -= step;
}
function Delay()
{
scrll = 0;
Dy[0] = Math.round(DY[0] += ((ymouse) - DY[0]) * speed);
Dx[0] = Math.round(DX[0] += ((xmouse) - DX[0]) * speed);
for (i = 1; i < D.length; i++) {
Dy[i] = Math.round(DY[i] += (Dy[i - 1] - DY[i]) * speed);
Dx[i] = Math.round(DX[i] += (Dx[i - 1] - DX[i]) * speed);
}
y[0] = Math.round(Y[0] += ((ymouse) - Y[0]) * speed);
x[0] = Math.round(X[0] += ((xmouse) - X[0]) * speed);
for (i = 1; i < n; i++) {
y[i] = Math.round(Y[i] += (y[i - 1] - Y[i]) * speed);
x[i] = Math.round(X[i] += (x[i - 1] - X[i]) * speed);
}
ClockAndAssign();
setTimeout(Delay, 20);
}
Delay();
}());
num = 1;
function toggle(){
num ^=  1;
if(num == 1){
document.getElementById('Od').style.visibility="visible";
document.getElementById('Of').style.visibility="visible";
document.getElementById('Oh').style.visibility="visible";
document.getElementById('Om').style.visibility="visible";
document.getElementById('Os').style.visibility="visible";
}
else {
document.getElementById('Od').style.visibility="hidden";
document.getElementById('Of').style.visibility="hidden";
document.getElementById('Oh').style.visibility="hidden";
document.getElementById('Om').style.visibility="hidden";
document.getElementById('Os').style.visibility="hidden";
}
document.getElementById("tog").value = num ?"KILL(切る)":" APPEAR ";
}
</script>
<br><br><br><br><br><br><br><br><br><br>
<br><br><br><br><br><br><br><br><br><br>
<center><p>
<input class="butt" type="button" id="tog" value="KILL(切る)" onclick="toggle()">
<input class="butt" type="button" value="ORIGINAL" onclick="location.href='実験3.html'">
</p></center>
</body>
</html>
(３つ目のソース)
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=shift_jis">
<TITLE>妖怪クロック(アナログ) - JavaScript</TITLE>
<style type="text/css">
<!--
.butt{
BACKGROUND:maroon;
COLOR:gold;
}
//-->
</style>
<BODY bgcolor="black" text="white">
<div id="clock">
<div id="Od" style="position:absolute;top:0px;left:0px">
<div style="position:relative">
</div>
</div>
<div id="Of" style="position:absolute;top:0px;left:0px">
<div style="position:relative">
</div>
</div>
<div id="Oh" style="position:absolute;top:0px;left:0px">
<div style="position:relative">
</div>
</div>
<div id="Om" style="position:absolute;top:0px;left:0px">
<div style="position:relative">
</div>
</div>
<div id="Os" style="position:absolute;top:0px;left:0px">
<div style="position:relative">
</div>
</div>
</div>
<script type="text/javascript">
(function(){
"use strict";
function $(sel)
{
return document.getElementById(sel);
}
function $$(sel)
{
if (typeof document.getElementsByClassName === 'undefined')
{
return document.getElementsByName(sel);
}
return document.getElementsByClassName(sel);
}
var dCol = '', //date colour.
sCol = '', //seconds colour.
mCol = '', //minutes colour.
hCol = '', //hours colour.
fCol = '', //face color
ClockHeight = 50,
ClockWidth = 50,
ClockFromMouseY = 0,
ClockFromMouseX = 100,
d = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
m = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
date = new Date(),
day = date.getDate(),
year = date.getYear() + 1900;
var TodaysDate = " " + d[date.getDay()] + " " + day + " " + m[date.getMonth()] + " " + year;
var D = TodaysDate.split('');
var H = '☆☆☆';
H = H.split('');
var M = '☆☆☆☆';
M = M.split('');
var S = '・・・・・';
S = S.split('');
var Face = '1 2 3 4 5 6 7 8 9 10 11 12',
font = 'Helvetica, Arial, sans-serif',
size = 1,
speed = 0.45;
Face = Face.split(' ');
var n = Face.length;
var a = size * 10;
var ymouse = 0,
xmouse = 0,
scrll = 0,
props = '<span style="font-family:' + font + ';font-size:' + size + 'em; color:#' + fCol + '">',
props2 = '<span style="font-family:' + font + ';font-size:' + size + 'em; color:#' + dCol + '">';
var Split = 360 / n;
var Dsplit = 360 / D.length;
var HandHeight = ClockHeight / 4.5;
var HandWidth = ClockWidth / 4.5;
var HandY = -7,
HandX = -2.5,
step = 0.02,
currStep = 0,
y = [],
x = [],
Y = [],
X = [],
Dy = [],
Dx = [],
DY = [],
DX = [];
var i;
for (i = 0; i < n; i++)
{
y[i] = 0;
x[i] = 0;
Y[i] = 0;
X[i] = 0;
}
for (i = 0; i < D.length; i++)
{
Dy[i] = 0;
Dx[i] = 0;
DY[i] = 0;
DX[i] = 0;
}
var wrapper = $('clock');
var html = '';
// Date wrapper
html = '';
for (i = 0; i < D.length; i++)
{
html += '<div class="Date" name="Date" style="position:absolute;top:0px;left:0;height:' + a + ';width:' + a + ';text-align:center">' + props2 + D[i] + '</span></div>';
}
$('Od').children[0].innerHTML = html;
// Face wrapper
html = '';
for (i = 0; i < n; i++)
{
html += '<div class="Face" name="Face" style="position:absolute;top:0px;left:0;height:' + a + ';width:' + a + ';text-align:center">' + props + Face[i] + '</span></div>';
}
$('Of').children[0].innerHTML = html;
// Hours wrapper
html = '';
for (i = 0; i < H.length; i++)
{
html += '<div class="Hours" name="Hours" style="position:absolute;width:16px;height:16px;font-family:Arial;font-size:16px;color:' + hCol + ';text-align:center;font-weight:bold">' + H[i] + '</div>';
}
$('Oh').children[0].innerHTML = html;
// Minute wrapper
html = '';
for (i = 0; i < M.length; i++)
{
html += '<div class="Minutes" name="Minutes" style="position:absolute;width:16px;height:16px;font-family:Arial;font-size:16px;color:' + mCol + ';text-align:center;font-weight:bold">' + M[i] + '</div>';
}
$('Om').children[0].innerHTML = html;
// Seconds wrapper
html = '';
for (i = 0; i < S.length; i++)
{
html += '<div class="Seconds" name="Seconds" style="position:absolute;width:16px;height:16px;font-family:Arial;font-size:16px;color:' + sCol + ';text-align:center;font-weight:bold">' + S[i] + '</div>';
}
$('Os').children[0].innerHTML = html;
// Mouse move event handler
function Mouse(evnt)
{
if (typeof evnt === 'undefined')
{
ymouse = event.Y + ClockFromMouseY;
xmouse = event.X + ClockFromMouseX;
}
else
{
ymouse = evnt.clientY + ClockFromMouseY;
xmouse = evnt.clientX + ClockFromMouseX;
}
}
document.onmousemove = Mouse;
function ClockAndAssign()
{
var time = new Date();
var secs = time.getSeconds();
var sec = -1.57 + Math.PI * secs / 30;
var mins = time.getMinutes();
var min = -1.57 + Math.PI * mins / 30;
var hr = time.getHours();
var hrs = -1.575 + Math.PI * hr / 6 + Math.PI * parseInt(time.getMinutes(), 10) / 360;
$('Od').style.top = window.document.body.scrollTop;
$('Of').style.top = window.document.body.scrollTop;
$('Oh').style.top = window.document.body.scrollTop;
$('Om').style.top = window.document.body.scrollTop;
$('Os').style.top = window.document.body.scrollTop;
for (i = 0; i < n; i++)
{
var F = $$('Face')[i];
F.style.top = y[i] + ClockHeight * Math.sin(-1.0471 + i * Split * Math.PI / 180) + scrll;
F.style.left = x[i] + ClockWidth * Math.cos(-1.0471 + i * Split * Math.PI / 180);
}
for (i = 0; i < H.length; i++)
{
var HL = $$('Hours')[i];
HL.style.top = y[i] + HandY + (i * HandHeight) * Math.sin(hrs) + scrll;
HL.style.left = x[i] + HandX + (i * HandWidth) * Math.cos(hrs);
}
for (i = 0; i < M.length; i++)
{
var ML = $$('Minutes')[i].style;
ML.top = y[i] + HandY + (i * HandHeight) * Math.sin(min) + scrll;
ML.left = x[i] + HandX + (i * HandWidth) * Math.cos(min);
}
for (i = 0; i < S.length; i++)
{
var SL = $$('Seconds')[i].style;
SL.top = y[i] + HandY + (i * HandHeight) * Math.sin(sec) + scrll;
SL.left = x[i] + HandX + (i * HandWidth) * Math.cos(sec);
}
for (i = 0; i < D.length; i++)
{
var DL = $$('Date')[i].style;
DL.top = Dy[i] + ClockHeight * 1.5 * Math.sin(currStep + i * Dsplit * Math.PI / 180) + scrll;
DL.left = Dx[i] + ClockWidth * 1.5 * Math.cos(currStep + i * Dsplit * Math.PI / 180);
}
currStep -= step;
}
function Delay()
{
scrll = 0;
Dy[0] = Math.round(DY[0] += ((ymouse) - DY[0]) * speed);
Dx[0] = Math.round(DX[0] += ((xmouse) - DX[0]) * speed);
for (i = 1; i < D.length; i++) {
Dy[i] = Math.round(DY[i] += (Dy[i - 1] - DY[i]) * speed);
Dx[i] = Math.round(DX[i] += (Dx[i - 1] - DX[i]) * speed);
}
y[0] = Math.round(Y[0] += ((ymouse) - Y[0]) * speed);
x[0] = Math.round(X[0] += ((xmouse) - X[0]) * speed);
for (i = 1; i < n; i++) {
y[i] = Math.round(Y[i] += (y[i - 1] - Y[i]) * speed);
x[i] = Math.round(X[i] += (x[i - 1] - X[i]) * speed);
}
ClockAndAssign();
setTimeout(Delay, 20);
}
Delay();
}());
num = 0;
function toggle(){
num ^= 1;
if(num == 1){
document.getElementById('Od').style.visibility="hidden";
document.getElementById('Of').style.visibility="hidden";
document.getElementById('Oh').style.visibility="hidden";
document.getElementById('Om').style.visibility="hidden";
document.getElementById('Os').style.visibility="hidden";
}
else {
document.getElementById('Od').style.visibility="visible";
document.getElementById('Of').style.visibility="visible";
document.getElementById('Oh').style.visibility="visible";
document.getElementById('Om').style.visibility="visible";
document.getElementById('Os').style.visibility="visible";
}
document.getElementById("tog").value = num ?" APPEAR ":"Kill(切る)";
}
</script>
<br><br><br><br><br><br><br><br><br><br>
<br><br><br><br><br><br><br><br><br><br>
<center><p>
<input class="butt" type="button" id="tog" value="KILL(切る)" onclick="toggle();">
<input class="butt" type="button" value="BIGGER" onclick="location.href='実験2.html';">
</p></center>
</body>
</html>
10592,jquery,monacaにて
ボタンクリックでフォームのダイアログを出す
↓
入力
↓
新しくボタンが出来る
これを３回ほど繰り返したいと思っています。
http://codepen.io/anon/pen/KpNVNr
$(function() {
var dialogTable = $('#jquery-ui-dialog-table');
var nextIndex = 0;
var params = [
{
tag: 1,
nextLbl: '飲み終わり予定時刻は？',
nextTag: 2
},
{
tag: 2,
nextLbl: '分解完了の予定時刻は？'
},
{
tag: 3
},
]
// クリックイベント追加
function addClickEvent(obj, param) {
obj.click(function() {
$('#jquery-ui-dialog').data('opener', param).dialog('open');
});
}
$('button', '.jquery-ui-button').button();
// ボタン1
addClickEvent($('#jquery-ui-dialog-opener'), params[nextIndex]);
nextIndex++;
$('#jquery-ui-dialog').dialog({
autoOpen: false,
width: 350,
show: 'explode',
hide: 'explode',
modal: true,
open: function(event, ui) {
var obj = $('li#id' + $.data(this, 'opener').tag, dialogTable);
if ($(obj).attr('id') !== void(0)) {
$('#datetimepicker').val($('span', obj).first().text());
$('#jquery-ui-dialog-form-comment').val($('span', obj).last().text());
}
});
},
close: function() {
$('#datetimepicker').val('');
$('#jquery-ui-dialog-form-comment').val('');
},
buttons: {
'追加': function(event, ui) {
var name = $('#datetimepicker');
var comment = $('#jquery-ui-dialog-form-comment');
var text = $("name").val();
var pr = {
name:text,
}
if (name.val() || comment.val()) {
var opener = $.data(this, 'opener');
var li = $('li#id' + opener.tag, dialogTable);
if ($(li).attr('id') !== void(0)) {
$('span', li).first().text(name.val());
$('span', li).last().text(comment.val());
} else {
dialogTable.append($('<li>').attr('id', 'id' + opener.tag).append('<span>' + name.val() + '</span>  <span>' + comment.val()));
if (opener.nextLbl !== void(0)) {
dialogTable.append('<li>' + opener.nextLbl);
var btn = $('<button id="jquery-ui-dialog-opener">追加</button>');
addClickEvent(btn, params[nextIndex]);
nextIndex++;
$('li:last', dialogTable).append(btn);
}
}
$(this).dialog('close');
}
$(this).dialog('close');
},
'キャンセル': function() {
$(this).dialog('close');
}
}
});
});
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/jquery-ui.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquerymobile/1.4.2/jquery.mobile.min.js"></script>
</head>
<body>
<div data-role="page" id="home">
<div data-role="header">
<h1>ホーム</h1>
</div>
<div data-role="content">
<ul id="jquery-ui-dialog-table" class="ui-widget ui-widget-content">
<li id="table-th-name">朝？
<button id="jquery-ui-dialog-opener">追加</button>
</li>
</ul>
<div id="result"></div>
<div id="result2"></div>
<div id="result3"></div>
<button id="kekka">確認</button>
</div>
<div data-role="content">
</div>
<div id="jquery-ui-dialog" title="追加">
<form>
<fieldset>
<p>入力して追加ボタンを押してください。</p>
<p>
<label for="jquery-ui-dialog-form-name"></label>
<input type="date" name="jquery-ui-dialog-form-name" id="datetimepicker" class="text ui-widget-content ui-corner-all" />
</p>
<p>
<label for="jquery-ui-dialog-form-comment"></label>
<input type="time" name="jquery-ui-dialog-form-comment" id="jquery-ui-dialog-form-comment" class="text ui-widget-content ui-corner-all" />
</p>
</fieldset>
</form>
</div>
</div>
</body>
コードは上記になります
一度フォームを入力してappendで新たにボタンを出すところまでは出来たのですが
このボタンをクリックで再度フォームを出すことができません。
どうすればいいでしょうか。
また一度入力したフォームに関しては再度入力すると上書きされるようにしたいです。
よろしくお願い致します。
10609,javascript|html,以下のHTMLがあります。
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Document</title>
</head>
<body>
<script>
//var s = "<!--<script>";
</script>
<h1>hello</h1>
</body>
</html>
ここで、"<!--<script>"は単なるJavaScript文字列なので、scriptタグの外側には影響を及ぼさない…と思っていたのですが、実際には
http://codepen.io/anon/pen/rVWeqz
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Document</title>
</head>
<body>
<script>
//var s = "<!--<script>";
</script>
<h1>hello</h1>
</body>
</html>
のように、本来表示されるはずの「hello」が表示されません。
（<!--や<script>が単体の場合には再現せず、必ずコメント開始からscriptタグに続く必要があるようです）
私の確認したすべてのブラウザ（IE11, Chrome, Firefox）で同じ挙動をしたので、これがHTMLの仕様なのだと思いますが、具体的にはどのような仕様なのでしょう？
--以下追記 2015/05/25 23:56--
いただいた回答に合わせて、追加の疑問点が明確化されたので追記します。
(1) 通常、scriptタグの内部ではHTMLタグは無視されるはずでは？　たとえば以下のHTMLで、hiの部分は画面上には表示されません
<body>
<script>
<p>hi</p>
var s = "bye";
</script>
<h1>hello</h1>
</body>
http://codepen.io/anon/pen/xGROKJ
<body>
<script>
<p>hi</p>
var s = "bye";
</script>
<h1>hello</h1>
</body>
(2) <!--と<script>の組み合わせの場合のみ発生するのはなぜか
「<!--」単体の場合や、<!--<p>といった組み合わせの場合、以降が表示されなくなる現象は発生しません。
10649,html,お世話になります。
Webで有名なGoogleMap等と連携して、手持ちのリストの住所と目的地の住所の距離を
自動で算出してくれる仕組みを作りたいと考えています。そのために必要な環境、開発言語
などを教えていただきたいと思います。
一つ一つ住所を入れなおしてWebで検索すればいい話ですが、リストにある住所が
2,30あると、その都度入れなおすのは面倒なため、一発で出してくれる仕組みを求めています。
機能の手順を書きに記します。
1.データベース、あるいはExcelなどに、出発地点となる候補の名前と住所がある。
2.目的地の住所を入力する。
3.GoogleMapなどの地図検索機能を使用し、リストのすべての住所から目的地までの距離を
算出する。
4.もっとも距離が近いものを結果として表示(名称、住所、所要距離)する。
以上、よろしくお願いいたします。
10657,c#|c++,UnityC#にて重たい処理をDLLにやってもらおうと思い、
ViusalStudioを用いてC++のDLLをこちらを参考に作成しました。
メソッドを呼び出すことはできたので、
今度はクラス経由で呼び出してみようと思い
C++側のクラスの定義をMSDNのここを参考にクラスを作成したのですが
C#側からどのように呼び出せばいいのかがわかりません。
C#側
using UnityEngine;
using System.Collections;
// Must Need DLL Import
using System.Runtime.InteropServices;
public class CallDlls : MonoBehaviour {
// From c++ Dll (unmanaged)
[DllImport("MathFuncsDll")]
public static extern float TestMultiply(float a, float b);
// From c++ Dll (unmanaged)
[DllImport("MathFuncsDll")]
public static extern float TestDivide(float a, float b);
public float multiply(float a,float b)
{
return TestMultiply(a, b);
}
}
C++DLL側
// MathFuncsDll.cpp
#include "stdafx.h"
#include "MathFuncsDll.h"
#include <stdexcept>
using namespace std;
extern "C" {
float TestMultiply(float a, float b)
{
return a * b;
}
float TestDivide(float a, float b)
{
if (b == 0) {
return 0;
//throw invalid_argument("b cannot be zero!");
}
return a / b;
}
}
// MathFuncsDll.h
#ifdef MATHFUNCSDLL_EXPORTS
#define MATHFUNCSDLL_API __declspec(dllexport)
#else
#define MATHFUNCSDLL_API __declspec(dllimport)
#endif
extern "C" {
class MATHFUNCSDLL_API TestClass {
float TestMultiply(float a, float b);
float TestDivide(float a, float b);
//MATHFUNCSDLL_API float TestMultiply(float a, float b);
//MATHFUNCSDLL_API float TestDivide(float a, float b);
};
}
10681,javascript|jquery,日時の計算をしようとしています。
codepenでは問題なくログに結果が表示されますが
monacaで試すとnullになってしまいます
変数ではなくnew Date()に日時を直接指定してもだめでした。
原因がわかりませんのでよろしくお願い致します。
var gg = '2015-12-31 23:59';
var ff = '2015-12-31 23:56';
var a = new Date(gg);
var b = new Date(ff);
var dd = a - b;
console.log(dd);
10693,python,pythonのrequestsモジュールでproxy越しのdigest認証をする方法が知りたいです。
(もしくはrequestsモジュール以外の方法でproxy越しのdigest認証をする方法が知りたいです。)
環境は
Mac OSX Yosemite 10.10.3
Python 3.4.1 | Anaconda 2.1.0 (x86_64)
requests 2.6.0
です。
英語版StackOverflowの同じような質問(私の質問内容自体はこれとほぼ同じです)を見て、HTTPProxyDigestAuthを使ってみたのですが、
>>> from proxydigest import *
>>> proxies = {"http": myproxy}
>>> auth = HTTPProxyDigestAuth(myuser, mypass)
>>> import requests
>>> r = requests.get(myurl, proxies=proxies, auth=auth)
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
File "/usr/local/opt/pyenv/versions/anaconda3-2.1.0/lib/python3.4/site-packages/requests/api.py", line 59, in get
return request('get', url, **kwargs)
File "/usr/local/opt/pyenv/versions/anaconda3-2.1.0/lib/python3.4/site-packages/requests/api.py", line 48, in request
return session.request(method=method, url=url, **kwargs)
File "/usr/local/opt/pyenv/versions/anaconda3-2.1.0/lib/python3.4/site-packages/requests/sessions.py", line 451, in request
resp = self.send(prep, **send_kwargs)
File "/usr/local/opt/pyenv/versions/anaconda3-2.1.0/lib/python3.4/site-packages/requests/sessions.py", line 563, in send
r = dispatch_hook('response', hooks, r, **kwargs)
File "/usr/local/opt/pyenv/versions/anaconda3-2.1.0/lib/python3.4/site-packages/requests/hooks.py", line 41, in dispatch_hook
_hook_data = hook(hook_data, **kwargs)
TypeError: handle_407() got an unexpected keyword argument 'proxies'
となり、うまくいきません。(proxydigestはHTTPProxyDigestAuthクラスがあるモジュールで、myproxy、myuserなどはそれぞれの情報が入った文字列変数です)
どうすればいいでしょうか？
(追記 2015年5月28日)
解答で頂いたように、
def handle_407(self, r, **kwargs):
としてみましたが、以下の様なエラーが出ました。
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
File "/Library/Python/2.7/site-packages/requests/api.py", line 69, in get
return request('get', url, params=params, **kwargs)
File "/Library/Python/2.7/site-packages/requests/api.py", line 50, in request
response = session.request(method=method, url=url, **kwargs)
File "/Library/Python/2.7/site-packages/requests/sessions.py", line 465, in request
resp = self.send(prep, **send_kwargs)
File "/Library/Python/2.7/site-packages/requests/sessions.py", line 579, in send
r = dispatch_hook('response', hooks, r, **kwargs)
File "/Library/Python/2.7/site-packages/requests/hooks.py", line 41, in dispatch_hook
_hook_data = hook(hook_data, **kwargs)
File "proxydigest.py", line 22, in handle_407
r.request.send(anyway=True)
AttributeError: 'PreparedRequest' object has no attribute 'send'
また、requests 1.0.0でもやってみましたが、
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
File "tmprec.py", line 5, in <module>
r = requests.get('http://doi.acm.org/10.1145/2588555.2588558', proxies=proxies, auth=auth)
File "/Library/Python/2.7/site-packages/requests/api.py", line 49, in get
return request('get', url, **kwargs)
File "/Library/Python/2.7/site-packages/requests/api.py", line 38, in request
return session.request(method=method, url=url, **kwargs)
File "/Library/Python/2.7/site-packages/requests/sessions.py", line 256, in request
resp = self.send(prep, stream=stream, timeout=timeout, verify=verify, cert=cert, proxies=proxies)
File "/Library/Python/2.7/site-packages/requests/sessions.py", line 347, in send
r = adapter.send(request, **kwargs)
File "/Library/Python/2.7/site-packages/requests/adapters.py", line 148, in send
conn = self.get_connection(request.url, proxies)
File "/Library/Python/2.7/site-packages/requests/adapters.py", line 130, in get_connection
conn = self.poolmanager.ProxyManager(self.poolmanager.proxy_from_url(proxy))
AttributeError: 'PoolManager' object has no attribute 'ProxyManager'
というエラーが出ました...
(追記2 2015年5月29日)
解決しました。なぜバグが起きていたかまでは特定できませんでしたが、使ったものと状況を記しておきます。
実行環境
Mac OSX Yosemite 10.10.3
Python 3.4.1 | Anaconda 2.1.0 (x86_64)
requests 2.4.1  (←Anaconda 2.1.0に付属のもの)
requests toolbeltには、HTTPProxyDigestAuthという欲しかった機能があったのですが、これではなぜかエラーが出てしまいました。なので、requests toolbeltからHTTPProxyDigestAuthクラスを抜き出して来て、以下のように修正しました。
6行目: from requests import cookies → from requests import cookies, utils
35行目: self.chal = cookies.parse_dict_header( → self.chal = utils.parse_dict_header(
こうすれば、
>>> from proxydigest import HTTPProxyDigestAuth
>>> proxies = {"http": myproxy}
>>> auth = HTTPProxyDigestAuth(myuser, mypass)
>>> import requests
>>> r = requests.get(myurl, proxies=proxies, auth=auth)
>>> r
<Response [200]>
となり、エラーもなく動かすことが出来ました。読んでいただいた皆様、ありがとうございました。
10720,javascript|html,アナログ時計を消しているとき(KILL(切る))、"サイズの切り替えボタン"を押すと、
水面下で切り替えが行われていたので、下記のソースのように"continue"を使って
みました。
そうしましたところ、アナログ時計を出した１回目は、サイズの切り替えが繰り返し
できますが、消してからもう一度出すと、サイズの切り替えができなくなります。
"付け消しボタン"で消したときだけ、"サイズ切り替えボタン"を機能しなくするには、
どうすればいいでしょうか？
なお、追加した文は、
document.getElementById('tog1').onclick="continue";
です。
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=shift_jis">
<TITLE>妖怪クロック(アナログ) - JavaScript</TITLE>
<style type="text/css">
<!--
.butt{
BACKGROUND:maroon;
COLOR:gold;
}
//-->
</style>
<BODY bgcolor="black" text="white">
<div id="clock" style="visibility:hidden">
<div id="Od" style="position:absolute;top:0px;left:0px">
<div style="position:relative">
</div>
</div>
<div id="Of" style="position:absolute;top:0px;left:0px">
<div style="position:relative">
</div>
</div>
<div id="Oh" style="position:absolute;top:0px;left:0px">
<div style="position:relative">
</div>
</div>
<div id="Om" style="position:absolute;top:0px;left:0px">
<div style="position:relative">
</div>
</div>
<div id="Os" style="position:absolute;top:0px;left:0px">
<div style="position:relative">
</div>
</div>
</div>
<script type="text/javascript">
// 状態変数
var scale = 1;
var transitionStarted = 0;
var transitionFrom = 0;
var transitionTo = 0;
var transitionDuration = 0;
// サイズの変更を開始する処理
function toBigger(){
{
transitionStarted = new Date().getTime();
transitionFrom = scale;
transitionTo = 3; // 最終的な倍率。状態により変化
transitionDuration = 1000;
document.getElementById("tog1").value= " ORIGINAL ";
}
if(transitionFrom==3){
transitionTo =  1; // 最終的な倍率。状態により変化
transitionDuration = 1000;
document.getElementById("tog1").value= "＼BiGGER／";
}
}
(function(){
"use strict";
function $(sel)
{
return document.getElementById(sel);
}
function $$(sel)
{
if (typeof document.getElementsByClassName === 'undefined')
{
return document.getElementsByName(sel);
}
return document.getElementsByClassName(sel);
}
var dCol = '', //date colour.
sCol = '', //seconds colour.
mCol = '', //minutes colour.
hCol = '', //hours colour.
fCol = '', //face color
ClockHeight = 50,
ClockWidth = 50,
ClockFromMouseY = 0,
ClockFromMouseX = 100,
d = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
m = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
date = new Date(),
day = date.getDate(),
year = date.getYear() + 1900;
var TodaysDate = " " + d[date.getDay()] + " " + day + " " + m[date.getMonth()] + " " + year;
var D = TodaysDate.split('');
var H = '☆☆☆';
H = H.split('');
var M = '☆☆☆☆';
M = M.split('');
var S = '・・・・・';
S = S.split('');
var Face = '1 2 3 4 5 6 7 8 9 10 11 12',
font = 'Helvetica, Arial, sans-serif',
size = 1,
speed = 0.45;
Face = Face.split(' ');
var n = Face.length;
var a = size * 10;
var ymouse = 0,
xmouse = 0,
scrll = 0,
props = '<span style="font-family:' + font + ';font-size:' + size + 'em; color:#' + fCol + '">',
props2 = '<span style="font-family:' + font + ';font-size:' + size + 'em; color:#' + dCol + '">';
var Split = 360 / n;
var Dsplit = 360 / D.length;
var HandHeight = ClockHeight / 4.5;
var HandWidth = ClockWidth / 4.5;
var HandY = -7,
HandX = -2.5,
step = 0.02,
currStep = 0,
y = [],
x = [],
Y = [],
X = [],
Dy = [],
Dx = [],
DY = [],
DX = [];
var i;
for (i = 0; i < n; i++)
{
y[i] = 0;
x[i] = 0;
Y[i] = 0;
X[i] = 0;
}
for (i = 0; i < D.length; i++)
{
Dy[i] = 0;
Dx[i] = 0;
DY[i] = 0;
DX[i] = 0;
}
var wrapper = $('clock');
var html = '';
// Date wrapper
html = '';
for (i = 0; i < D.length; i++)
{
html += '<div class="Date" name="Date" style="position:absolute;top:0px;left:0;height:' + a + ';width:' + a + ';text-align:center">' + props2 + D[i] + '</span></div>';
}
$('Od').children[0].innerHTML = html;
// Face wrapper
html = '';
for (i = 0; i < n; i++)
{
html += '<div class="Face" name="Face" style="position:absolute;top:0px;left:0;height:' + a + ';width:' + a + ';text-align:center">' + props + Face[i] + '</span></div>';
}
$('Of').children[0].innerHTML = html;
// Hours wrapper
html = '';
for (i = 0; i < H.length; i++)
{
html += '<div class="Hours" name="Hours" style="position:absolute;width:16px;height:16px;font-family:Arial;font-size:16px;color:' + hCol + ';text-align:center;font-weight:bold">' + H[i] + '</div>';
}
$('Oh').children[0].innerHTML = html;
// Minute wrapper
html = '';
for (i = 0; i < M.length; i++)
{
html += '<div class="Minutes" name="Minutes" style="position:absolute;width:16px;height:16px;font-family:Arial;font-size:16px;color:' + mCol + ';text-align:center;font-weight:bold">' + M[i] + '</div>';
}
$('Om').children[0].innerHTML = html;
// Seconds wrapper
html = '';
for (i = 0; i < S.length; i++)
{
html += '<div class="Seconds" name="Seconds" style="position:absolute;width:16px;height:16px;font-family:Arial;font-size:16px;color:' + sCol + ';text-align:center;font-weight:bold">' + S[i] + '</div>';
}
$('Os').children[0].innerHTML = html;
// Mouse move event handler
function Mouse(evnt)
{
if (typeof evnt === 'undefined')
{
ymouse = event.Y + ClockFromMouseY;
xmouse = event.X + ClockFromMouseX;
}
else
{
ymouse = evnt.clientY + ClockFromMouseY;
xmouse = evnt.clientX + ClockFromMouseX;
}
}
document.onmousemove = Mouse;
function ClockAndAssign()
{
var time = new Date();
// 状態変更処理
if(transitionStarted)
{
var d = time.getTime() - transitionStarted;
if (d < transitionDuration)
{
scale = transitionFrom + (transitionTo - transitionFrom) * d / transitionDuration;
}
else
{
// トランジション終了
scale = transitionTo;
transitionStarted = 0;
}
}
var secs = time.getSeconds();
var sec = -1.57 + Math.PI * secs / 30;
var mins = time.getMinutes();
var min = -1.57 + Math.PI * mins / 30;
var hr = time.getHours();
var hrs = -1.575 + Math.PI * hr / 6 + Math.PI * parseInt(time.getMinutes(), 10) / 360;
$('Od').style.top = window.document.body.scrollTop;
$('Of').style.top = window.document.body.scrollTop;
$('Oh').style.top = window.document.body.scrollTop;
$('Om').style.top = window.document.body.scrollTop;
$('Os').style.top = window.document.body.scrollTop;
for (i = 0; i < n; i++)
{
var F = $$('Face')[i];
F.style.top = y[i] + scale * ClockHeight * Math.sin(-1.0471 + i * Split * Math.PI / 180) + scrll;
F.style.left = x[i] + scale * ClockWidth * Math.cos(-1.0471 + i * Split * Math.PI / 180);
}
for (i = 0; i < H.length; i++)
{
var HL = $$('Hours')[i];
HL.style.top = y[i] + HandY + scale * (i * HandHeight) * Math.sin(hrs) + scrll;
HL.style.left = x[i] + HandX + scale * (i * HandWidth) * Math.cos(hrs);
}
for (i = 0; i < M.length; i++)
{
var ML = $$('Minutes')[i].style;
ML.top = y[i] + HandY + scale * (i * HandHeight) * Math.sin(min) + scrll;
ML.left = x[i] + HandX + scale * (i * HandWidth) * Math.cos(min);
}
for (i = 0; i < S.length; i++)
{
var SL = $$('Seconds')[i].style;
SL.top = y[i] + HandY + scale * (i * HandHeight) * Math.sin(sec) + scrll;
SL.left = x[i] + HandX + scale * (i * HandWidth) * Math.cos(sec);
}
for (i = 0; i < D.length; i++)
{
var DL = $$('Date')[i].style;
DL.top = Dy[i] + scale * ClockHeight * 1.5 * Math.sin(currStep + i * Dsplit * Math.PI / 180) + scrll;
DL.left = Dx[i] + scale * ClockWidth * 1.5 * Math.cos(currStep + i * Dsplit * Math.PI / 180);
}
currStep -= step;
}
function Delay()
{
scrll = 0;
Dy[0] = Math.round(DY[0] += ((ymouse) - DY[0]) * speed);
Dx[0] = Math.round(DX[0] += ((xmouse) - DX[0]) * speed);
for (i = 1; i < D.length; i++) {
Dy[i] = Math.round(DY[i] += (Dy[i - 1] - DY[i]) * speed);
Dx[i] = Math.round(DX[i] += (Dx[i - 1] - DX[i]) * speed);
}
y[0] = Math.round(Y[0] += ((ymouse) - Y[0]) * speed);
x[0] = Math.round(X[0] += ((xmouse) - X[0]) * speed);
for (i = 1; i < n; i++) {
y[i] = Math.round(Y[i] += (y[i - 1] - Y[i]) * speed);
x[i] = Math.round(X[i] += (x[i - 1] - X[i]) * speed);
}
ClockAndAssign();
setTimeout(Delay, 20);
}
Delay();
}());
num = 1;
function toggle(){
num ^= 1;
if(num == 1){
document.getElementById('Od').style.visibility="hidden";
document.getElementById('Of').style.visibility="hidden";
document.getElementById('Oh').style.visibility="hidden";
document.getElementById('Om').style.visibility="hidden";
document.getElementById('Os').style.visibility="hidden";
document.getElementById('tog1').onclick='continue';
}
else {
document.getElementById('Od').style.visibility="visible";
document.getElementById('Of').style.visibility="visible";
document.getElementById('Oh').style.visibility="visible";
document.getElementById('Om').style.visibility="visible";
document.getElementById('Os').style.visibility="visible";
}
document.getElementById("tog").value = num ?" APPEAR ":"KILL(切る)";
}
//--->
</script>
<br><br><br><br><br><br><br><br><br><br>
<br><br><br><br><br><br><br><br><br><br>
<center><p>
<input class="butt" id="tog" type="button"  value="今何時？" onclick="toggle()">
<input class="butt" id="tog1"  type="button" value="＼BIGGER／" onclick="toBigger()">
</p></center>
</body>
</html>
10740,javascript|html,お世話になります。
Html5で簡易な音楽プレーヤー(MP3限定)を作りたいのですが、
MP3内に含まれているタグ情報(アーティスト名やタイトルなどの情報)を
表示させたいと思っています。
http://kiritter.hatenablog.com/entry/2013/04/25/210906
上記様のサイトを試してみたのですが、全然動きませんでした。
PHPを使用すればできるのは知っていますが、できるだけ軽い方法で取得したいです。
Html5のみ、あるいはjavascript(jquery)を使用してできれば望ましいのですが、
それは可能でしょうか。
サンプルなど提示していただけますと助かります。
よろしくお願いいたします。
10745,html,トラッキングコードをHTMLにタグずけしたいのですが、やり方が解りません？
HTMLにアップロード？のやり方も解りません？
素人に解る説明をお願いしたいです。
10747,jquery,jQueryでクラスを置き換えるにはどうしたらよいでしょうか。
1秒後にclass="n1"がclass="n10"に変更
1秒後にclass="n2"がclass="n1"に変更
2秒後にclass="n3"がclass="n2"に変更
3秒後にclass="n4"がclass="n3"に変更
4秒後にclass="n5"がclass="n4"に変更
5秒後にclass="n6"がclass="n5"に変更
6秒後にclass="n7"がclass="n6"に変更
7秒後にclass="n8"がclass="n7"に変更
8秒後にclass="n9"がclass="n8"に変更
9秒後にclass="n10"がclass="n9"に変更
10秒後は1秒後からの繰り返しです。
あらかじめcssでは、n1～n10の座標（position）を指定していますので、1秒ごとに移動するイメージです。
classは、n10迄、計10個ある為、jQueryでcssの位置を設定するのではなく、クラス名を変更したく以下、試しに書いてみても移動せず。ご教示お願いいたします。
$(function(){
$(".n2")
setTimeout(function(){
$('.n2').toggleClass('n1');
},3000);
});
■追記です。
class="n1"だけ1秒停止はどのように書いたらよいでしょうか。gochoさまのサンプルを使わせていただき、変数classNameListを入れてみましたが、以下では動きませんでした。stopの定義？関数の設定がわかりません。
if (classNameList='n1'){
setTimeout( 'stop',1000 );
}
10748,c#|c++,C#内からC++の自作DLLにダウンロードURLを送り、
ダウンロード完了後、中身のtarファイルを展開するために
動的にTAR32.DLLを読み込んだところdownLoadTestに
Falseが返ってきました。
C++側のみをDLL化せずMFCでテストした時には
testretにTrueが返ってきていてDLLがロードできた事が
確認できたのですが、DLL内から呼んだ時には
DLLのロードに失敗しているようでFalseになります。
同じディレクトリに２つのDLLを置くのではなく、
参照先のようなものを持つ必要があるのでしょうか？
使用しているTar32.DLLは下記から取得しました。
http://www.csdinc.co.jp/archiver/lib/tar32.html
[追記]
フォルダ構成
Assets
|---------Plaugins
|　　　　　　|------CallDll.cs
|　　　　　　|------DllHttpDownLoadUntar.dll
|　　　　　　|------tar32.dll
|
|
|---------Scripts
開発環境
・Windoes7 64bit
・Visual Studio Community 2013
C#側
CallDll.cs
[DllImport("DllHttpDownLoadUntar")]
private static extern bool HttpDwonLoad(string geturl);
public void AddUrl()
{
bool downLoadTest = false;
downLoadTest = HttpDwonLoad("http://IPアドレス/Tar/Android.tar");
}
C++DLL側
DllHttpDownLoadUntar.h
#ifdef DLLHTTPDOWNLOADUNTAR_EXPORTS
#define DLLHTTPDOWNLOADUNTAR_API __declspec(dllexport)
#else
#define DLLHTTPDOWNLOADUNTAR_API __declspec(dllimport)
#endif
#include <string>
typedef int (WINAPI *LPUNTAREXTRACTMEM)(const HWND, LPCSTR, LPBYTE, const DWORD, int *, LPWORD, LPDWORD);
LPUNTAREXTRACTMEM lpTarExtractMem = NULL;
HMODULE hTar32 = 0;
extern "C"{
DLLHTTPDOWNLOADUNTAR_API bool HttpDwonLoad(char* geturl);
DLLHTTPDOWNLOADUNTAR_API void HttpDownLoadAction(std::string url);
}
DllHttpDownLoadUntar.cpp
#include "stdafx.h"
#include "DllHttpDownLoadUntar.h"
#include "wininet.h"
extern "C"{
// 受け取ったURLのダウンロード
bool HttpDwonLoad(char* geturl){
HttpDownLoadAction(geturl);
std::string DllName = "TAR32.DLL";
size_t origsize = DllName.size() + 1;
const size_t newsize = 100;
size_t convertedChars = 0;
wchar_t wcstring[newsize];
mbstowcs_s(&convertedChars, wcstring, origsize, DllName.c_str(), _TRUNCATE);
bool testret = true;
hTar32 = LoadLibrary(wcstring);
if (!hTar32) {
testret = false;
}
else
{
lpTarExtractMem = (LPUNTAREXTRACTMEM)GetProcAddress(hTar32, "TarExtractMem");
}
return testret;
}
void HttpDownLoadAction(std::string url){
HINTERNET hInet, hUrl;
char szBuf[128], *lpszSrc;
DWORD dwRead, dwTotal = 0;  // ファイルサイズ
HGLOBAL hMem;
//URLの入力
//m_edit_url.GetWindowTextA(ss);
char szUrl[128];
strcpy_s(szUrl, url.c_str());
//インターネットの開始
hInet = InternetOpen((LPCWSTR)"test-program",
INTERNET_OPEN_TYPE_PRECONFIG,
NULL, NULL, 0);
if (hInet == NULL){
return;
}
size_t origsize = url.size() + 1;
const size_t newsize = 100;
size_t convertedChars = 0;
wchar_t wcstring[newsize];
mbstowcs_s(&convertedChars, wcstring, origsize, szUrl, _TRUNCATE);
//HTTPセッションの開始、指定のURLオープン
hUrl = InternetOpenUrl(hInet, wcstring, NULL, 0, 0, 0);
if (hUrl == NULL){
return;
}
hMem = GlobalAlloc(GHND, 1);
lpszSrc = (char*)GlobalLock(hMem);
while (1){
InternetReadFile(
hUrl, szBuf, (DWORD)sizeof(szBuf) - 1, &dwRead);
szBuf[dwRead] = '\0';
if (dwRead == 0)break;
dwTotal += dwRead;
hMem = GlobalReAlloc(hMem, dwTotal + 1, GMEM_MOVEABLE);
if (hMem == NULL){
return;
}
lpszSrc = (char*)GlobalLock(hMem);
if (lpszSrc == NULL){
break;
}
strcat_s(lpszSrc, dwTotal + 1, szBuf);
}
//メモリの解放
GlobalUnlock(hMem);
GlobalFree(hMem);
//インターネットハンドルの解放
InternetCloseHandle(hUrl);
InternetCloseHandle(hInet);
}
}
10784,python,これまでうまく動いていた以下のスクリプトを実行すると、エラーが出るようになりました。
import requests
import mechanize
b = mechanize.Browser();
b.set_handle_robots(False);
b.set_handle_refresh(False);
url = "http://info.finance.yahoo.co.jp/history/?code=9783";
h = b.open(url);
他のurl(http://www.google.comなど)ではうまくいきます。
なぜでしょうか？
エラーは以下のとおりです。
File "/usr/local/lib/python2.7/dist-packages/mechanize/_mechanize.py", line 203, in open
return self._mech_open(url, data, timeout=timeout)
File "/usr/local/lib/python2.7/dist-packages/mechanize/_mechanize.py", line 255, in _mech_open
raise response
mechanize._response.httperror_seek_wrapper: HTTP Error 999: Unable to process request at this time -- error 999
10786,python,pythonのtkinterの練習でFrameを入れ子構造にする練習をしていたのですが、以下のコードだと小さなウィンドウが出現するばかりで、失敗してしまいます。どうすれば成功するでしょうか。よろしくお願いします。
#! /usr/bin/env python
import tkinter as Tk
class Frame(Tk.Frame):
def __init__(self, master=None):
Tk.Frame.__init__(self, master)
self.master.title("NEsted Frames")
f1 = Tk.Frame(self, relief=Tk.RIDGE, bd = 2)
for text, color in [("A", "magenta"),('B', 'yellow'), ('C', 'SeaGreen'), ('D', 'LightSkyBlue')]:
l = Tk.Label(f1, text =text, bg = color, font=("Helvetica","16"))
l.pack(side=Tk.LEFT)
f1.place(relx=0.2, rely=0.2)
f2 =Tk.Frame(self, relief=Tk.RIDGE, bd=2)
for i, (text, color) \
in enumerate([('A', 'magenta'), ('B', 'yellow'), ('C', 'SeaGreen'), ('D', 'LightSkyBlue')]):
l =Tk.Label(f2, text=text, bg=color, font=('Helvetica', '16'))
l.grid(row = i%2, column=i%2)
f2.place(relx=0.6, rely=0.6)
10793,html,タイトルの通りGoogleサイトにGoogleフォームの事前入力したURLを利用したリンクを設置したいのですが、
普通に作成して保存するとなぜかjavascript:void(0);へのリンクにされてしまいます。
調べてみると一応Googleサイトに外部リンクを設置することはできるらしいのですが、
どうすれば設置できるのでしょうか？
10800,javascript|jquery,以下のように、css3アニメーションで 1.7秒かけてclass="n1"内の画像を1倍～1.5倍に拡大してフェードアウトで消えるようにしています。
これに、停止をいれたいのですがうまくいきません。
class="n1"を1秒停止後、0.7秒かけて「scaleout 」アニメーション（n1内の画像が1倍～1.5倍に拡大する）をしたいのですが、css3または、jQueryでどのようにしたらよいでしょうか。教えてください。
***  html  ***
<li class="n1"><img src="img/01.jpg" alt=""></li>
***  css  ***
.n1 {
position: absolute;
width: 320px;
margin: 0 auto;
text-align: center;
background: #ccc;
bottom: 0;
z-index: 10;
}
.n1 {
-webkit-animation: scaleout 1.7s ease-in-out;
animation: scaleout 1.7s ease-in-out;
}
/* keyframe 始点から終点の設定 */
@-webkit-keyframes scaleout {
0% {
-webkit-transform: scale(1.0)
}
50% {
opacity: 1;
}
100% {
-webkit-transform: scale(1.5);
opacity: 0;
}
}
@keyframes scaleout {
0% {
transform: scale(1.0);
-webkit-transform: scale(1.0);
}
50% {
opacity: 1;
}
100% {
transform: scale(1.5);
-webkit-transform: scale(1.5);
opacity: 0;
}
}
10814,javascript|html,iPhone Safari全般において、画面下部あたりを連打していると
ちょっとずつ下にスクロールしていってしまいます。
ゲームのUIを作っていて、下部にボタンがあるため連打で下に動いて困っています。
この挙動を制御する方法があればアドバイスお願いします！
10832,java|c++,JNAを用いてJavaからC++のライブラリの関数を使い、戻り値としてfloatとStringの配列を得たいのですが、floatは全く違う値になり、Stringは読み出そうとするとSIGSEGVが発生します。関数の呼び出しや、引数に与えた構造体がC++側で読めていることは確認しています。このサイトなどを参考に以下のようなコードを作成しています。どうすればエラーなく処理できるでしょうか？
c++
typedef struct result {
float* score;
char** value;
} result;
result myfunc(){
result *res = (result)malloc(sizeof(result));
memset(res, 0, sizeof(result));
(*res).score = (float*)malloc(sizeof(float) * 10);
memset((*res).score, 0, sizeof(float) * 10);
(*res).value = (char**)malloc(sizeof(char*) * 10);
for (size_t i = 0; i < 10; ++i) {
(*res).score[i] = getscore(i);
char* val = getvalue(i);
(*res).value[i] = (char *)malloc(sizeof(val));
memset((*res).value[i], 0, sizeof(val));
strcpy((*res).value[i], val);
}
/* ここでres.score[i], res.value[i]を出力すると正常な値になっているのを確認 */
}
java
import com.sun.jna.*;
import com.sun.jna.ptr.*;
public interface MyLib extends Library {
public static class result extends Structure {
public static class ByValue extends result implements Structure.ByValue {}
public Pointer value; // char**
public Pointer score; // float*
protected List getFieldOrder() {
return Arrays.asList(new String[]{
"value", "score",
});
}
}
MyLib INSTANCE = (MyLib) Native.loadLibrary("mylib", MyLib.class);
public result.ByValue myfunc();
}
public static void main(String[] args) {
MyLib.result.ByValue res = MyLib.INSTANCE.myfunc();
for(int i = 0; i < 10; i++){
float score = res.score.getFloat(i * Native.getNativeSize(Float.TYPE));
System.out.println(score); // 値が異なる
}
String[] strs = res.value.getStringArray(0, 10);// SIGSEGVが発生
for (String s: strs){
if(s != null){
System.out.println(s);
}
}
}
10848,c#|c++,C#側でtarからZipをMemoryStreamに取り出すことができたので、
これをiOS側に渡してC++かobejective-cでunzipして、
unzipしたものをbyte配列もしくはStreamで持ちたいのですが、
C++かobejective-cでZipのByte配列をUnZipしてByte配列に変換する方法、
もしくはライブラリはないでしょうか？
まだObejective-c側しか調査してないのですが、
SSZipArchiveやObjectiveZipというものを見つけたのですが
ファイル名を与えないと解凍できないようでして、
C#のZipInputStreamのようなものがなく悩んでおります。
●SSZipArchive
https://github.com/soffes/ssziparchive
●ObjectiveZip
https://github.com/gianlucabertani/Objective-Zip
■追記(Zlib 使用)
#import <Foundation/Foundation.h>
#include <zlib.h>
extern "C"{
void uncompressByGzip(const char** ptrSrc, const int srcLength);
}
void uncompressByGzip(const char** ptrSrc, const int srcLength)
{
NSData *source = [NSData dataWithBytes:(const void *)ptrSrc length:(sizeof(unsigned char) * srcLength)];
NSString* str = [NSString stringWithFormat:@"%d",srcLength];
NSLog(@"src = %@",str);
if (source.length == 0)
return;
NSLog(@"11111");
z_stream stream;
stream.zalloc = Z_NULL;
stream.zfree = Z_NULL;
stream.opaque = Z_NULL;
stream.avail_in = (uInt)source.length;
stream.next_in = (Bytef *)source.bytes;
stream.total_out = 0;
stream.avail_out = 0;
NSLog(@"22222");
if (inflateInit2(&stream, 31) != Z_OK)
return;
NSLog(@"33333");
NSMutableData *FileSystemData = [NSMutableData dataWithCapacity:0];
while (stream.avail_out == 0) {
NSLog(@"12345");
Bytef buffer[16384];
stream.next_out = buffer;
stream.avail_out = sizeof(buffer);
NSString* avail_outbef = [NSString stringWithFormat:@"%d",(NSInteger)stream.avail_out];
NSLog(@"avail_outbef = %@",avail_outbef);
//        inflate(&stream, Z_FINISH);
inflate(&stream,Z_NO_FLUSH);
size_t length = sizeof(buffer) - stream.avail_out;
avail_outbef = [NSString stringWithFormat:@"%d",(NSInteger)stream.avail_out];
NSLog(@"avail_outaft = %@",avail_outbef);
NSString* strlength = [NSString stringWithFormat:@"%d",(NSInteger)length];
NSLog(@"length = %@",strlength);
if (length > 0)
[FileSystemData appendBytes:buffer length:length];
}
inflateEnd(&stream);
NSLog(@"44444");
}
10849,c++,C++の勉強のためにFirefoxのJS Engineである、SpiderMonkeyのコードを読みたいと思っているのですが、どこから読み始めればいいのか迷っています。
functionやobjectなどのJSの基本的なところや、ES6で新しく入るclassの実装などが気になっています。
将来的にはjsの実装みたいなことをやりたいと考えているのですが、js/srcのどこから始めればいいのでしょうか?
10896,html,CSS3で transform:translate3d などつかってアニメーションをした時
iPhoneだけスクロール時止まってしまいます。
iOS6時代でしょうか
-webkit-transform-style: preserve-3d;
この指定でなおったみたいですが、現在はダメそうです。
ちなみにAndroidだと問題なく動いています。
対応策はあるのでしょうか？
よろしくお願い致します。
10945,javascript|html,マウスストーカーのアナログ時計が気に入ってカスタマイズしています。
ふと気になった箇所があって希望通りに修正しようといろいろ試したのですが、
うまくいきません。
"付け消しボタン"で消しているときは、"色付けボタン"も水面下で機能しないように
するには、どうすればいいでしょうか？
ボタンの記号は、次の通りです。
・Ｃ＝clock color(全体の色)
・Ｄ＝date color
・Ｆ＝face color
・Ｈ＝hours color
・Ｍ＝minutes color
・Ｓ＝seconds color
なお、全体のソースコードは、次の通りです。
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=shift_jis">
<TITLE>妖怪クロック(アナログ) - JavaScript</TITLE>
<style type="text/css">
<!--
.butt{
BACKGROUND:maroon;
COLOR:gold;
}
//-->
</style>
<BODY bgcolor="black" text="white">
<div id="clock" style="visibility:hidden">
<div id="Od" style="position:absolute;top:0px;left:0px">
<div style="position:relative">
</div>
</div>
<div id="Of" style="position:absolute;top:0px;left:0px">
<div style="position:relative">
</div>
</div>
<div id="Oh" style="position:absolute;top:0px;left:0px">
<div style="position:relative">
</div>
</div>
<div id="Om" style="position:absolute;top:0px;left:0px">
<div style="position:relative">
</div>
</div>
<div id="Os" style="position:absolute;top:0px;left:0px">
<div style="position:relative">
</div>
</div>
</div>
<script type="text/javascript">
// 状態変数>
var scale = 1;
var transitionStarted = 0;
var transitionFrom = 0;
var transitionTo = 0;
var transitionDuration = 0;
// サイズの変更を開始する処理
function changeSIZE(){
{
transitionStarted = new Date().getTime();
transitionFrom = scale;
transitionTo = 0.5; // 最終的な倍率。状態により変化
transitionDuration = 400;
document.getElementById("tog1").value= "＼BIGGER／";
}
if(transitionFrom==0.5){
transitionTo =  2.5; // 最終的な倍率。状態により変化
transitionDuration = 400;
document.getElementById("tog1").value= "ORIGINAL";
}
if(transitionFrom==2.5){
transitionTo =  1; // 最終的な倍率。状態により変化
transitionDuration = 400;
document.getElementById("tog1").value= "／LESSER＼";
}
}
(function(){
"use strict";
function $(sel)
{
return document.getElementById(sel);
}
function $$(sel)
{
if (typeof document.getElementsByClassName === 'undefined')
{
return document.getElementsByName(sel);
}
return document.getElementsByClassName(sel);
}
var dCol = '', //date colour.
sCol = '', //seconds colour.
mCol = '', //minutes colour.
hCol = '', //hours colour.
fCol = '', //face color
ClockHeight = 65,
ClockWidth = 65,
ClockFromMouseY = 0,
ClockFromMouseX = 100,
d = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
m = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
date = new Date(),
day = date.getDate(),
year = date.getYear() + 1900;
var TodaysDate = " " + d[date.getDay()] + " " + day + " " + m[date.getMonth()] + " " + year;
var D = TodaysDate.split('');
var H = '☆☆☆';
H = H.split('');
var M = '☆☆☆☆';
M = M.split('');
var S = '・・・・・';
S = S.split('');
var Face = '1 2 3 4 5 6 7 8 9 10 11 12',
font = 'Helvetica, Arial, sans-serif',
size = 1,
speed = 0.45;
Face = Face.split(' ');
var n = Face.length;
var a = size * 10;
var ymouse = 0,
xmouse = 0,
scrll = 0,
props = '<span style="font-family:' + font + ';font-size:' + size + 'em; color:#' + fCol + '">',
props2 = '<span style="font-family:' + font + ';font-size:' + size + 'em; color:#' + dCol + '">';
var Split = 360 / n;
var Dsplit = 360 / D.length;
var HandHeight = ClockHeight / 4.5;
var HandWidth = ClockWidth / 4.5;
var HandY = -7,
HandX = -2.5,
step = 0.02,
currStep = 0,
y = [],
x = [],
Y = [],
X = [],
Dy = [],
Dx = [],
DY = [],
DX = [];
var i;
for (i = 0; i < n; i++)
{
y[i] = 0;
x[i] = 0;
Y[i] = 0;
X[i] = 0;
}
for (i = 0; i < D.length; i++)
{
Dy[i] = 0;
Dx[i] = 0;
DY[i] = 0;
DX[i] = 0;
}
var wrapper = $('clock');
var html = '';
// Date wrapper
html = '';
for (i = 0; i < D.length; i++)
{
html += '<div class="Date" name="Date" style="position:absolute;top:0px;left:0;height:' + a + ';width:' + a + ';text-align:center">' + props2 + D[i] + '</span></div>';
}
$('Od').children[0].innerHTML = html;
// Face wrapper
html = '';
for (i = 0; i < n; i++)
{
html += '<div class="Face" name="Face" style="position:absolute;top:0px;left:0;height:' + a + ';width:' + a + ';text-align:center">' + props + Face[i] + '</span></div>';
}
$('Of').children[0].innerHTML = html;
// Hours wrapper
html = '';
for (i = 0; i < H.length; i++)
{
html += '<div class="Hours" name="Hours" style="position:absolute;width:16px;height:16px;font-family:Arial;font-size:16px;color:' + hCol + ';text-align:center;font-weight:bold">' + H[i] + '</div>';
}
$('Oh').children[0].innerHTML = html;
// Minute wrapper
html = '';
for (i = 0; i < M.length; i++)
{
html += '<div class="Minutes" name="Minutes" style="position:absolute;width:16px;height:16px;font-family:Arial;font-size:16px;color:' + mCol + ';text-align:center;font-weight:bold">' + M[i] + '</div>';
}
$('Om').children[0].innerHTML = html;
// Seconds wrapper
html = '';
for (i = 0; i < S.length; i++)
{
html += '<div class="Seconds" name="Seconds" style="position:absolute;width:16px;height:16px;font-family:Arial;font-size:16px;color:' + sCol + ';text-align:center;font-weight:bold">' + S[i] + '</div>';
}
$('Os').children[0].innerHTML = html;
// Mouse move event handler
function Mouse(evnt)
{
if (typeof evnt === 'undefined')
{
ymouse = event.Y + ClockFromMouseY;
xmouse = event.X + ClockFromMouseX;
}
else
{
ymouse = evnt.clientY + ClockFromMouseY;
xmouse = evnt.clientX + ClockFromMouseX;
}
}
document.onmousemove = Mouse;
function ClockAndAssign()
{
var time = new Date();
// 状態変更処理
if(transitionStarted)
{
var d = time.getTime() - transitionStarted;
if (d < transitionDuration)
{
scale = transitionFrom + (transitionTo - transitionFrom) * d / transitionDuration;
}
else
{
// トランジション終了
scale = transitionTo;
transitionStarted = 0;
}
}
var secs = time.getSeconds();
var sec = -1.57 + Math.PI * secs / 30;
var mins = time.getMinutes();
var min = -1.57 + Math.PI * mins / 30;
var hr = time.getHours();
var hrs = -1.575 + Math.PI * hr / 6 + Math.PI * parseInt(time.getMinutes(), 10) / 360;
$('Od').style.top = window.document.body.scrollTop;
$('Of').style.top = window.document.body.scrollTop;
$('Oh').style.top = window.document.body.scrollTop;
$('Om').style.top = window.document.body.scrollTop;
$('Os').style.top = window.document.body.scrollTop;
for (i = 0; i < n; i++)
{
var F = $$('Face')[i];
F.style.top = y[i] + scale * ClockHeight * Math.sin(-1.0471 + i * Split * Math.PI / 180) + scrll;
F.style.left = x[i] + scale * ClockWidth * Math.cos(-1.0471 + i * Split * Math.PI / 180);
}
for (i = 0; i < H.length; i++)
{
var HL = $$('Hours')[i];
HL.style.top = y[i] + HandY + scale * (i * HandHeight) * Math.sin(hrs) + scrll;
HL.style.left = x[i] + HandX + scale * (i * HandWidth) * Math.cos(hrs);
}
for (i = 0; i < M.length; i++)
{
var ML = $$('Minutes')[i].style;
ML.top = y[i] + HandY + scale * (i * HandHeight) * Math.sin(min) + scrll;
ML.left = x[i] + HandX + scale * (i * HandWidth) * Math.cos(min);
}
for (i = 0; i < S.length; i++)
{
var SL = $$('Seconds')[i].style;
SL.top = y[i] + HandY + scale * (i * HandHeight) * Math.sin(sec) + scrll;
SL.left = x[i] + HandX + scale * (i * HandWidth) * Math.cos(sec);
}
for (i = 0; i < D.length; i++)
{
var DL = $$('Date')[i].style;
DL.top = Dy[i] + scale * ClockHeight * 1.5 * Math.sin(currStep + i * Dsplit * Math.PI / 180) + scrll;
DL.left = Dx[i] + scale * ClockWidth * 1.5 * Math.cos(currStep + i * Dsplit * Math.PI / 180);
}
currStep -= step;
}
function Delay()
{
scrll = 0;
Dy[0] = Math.round(DY[0] += ((ymouse) - DY[0]) * speed);
Dx[0] = Math.round(DX[0] += ((xmouse) - DX[0]) * speed);
for (i = 1; i < D.length; i++) {
Dy[i] = Math.round(DY[i] += (Dy[i - 1] - DY[i]) * speed);
Dx[i] = Math.round(DX[i] += (Dx[i - 1] - DX[i]) * speed);
}
y[0] = Math.round(Y[0] += ((ymouse) - Y[0]) * speed);
x[0] = Math.round(X[0] += ((xmouse) - X[0]) * speed);
for (i = 1; i < n; i++) {
y[i] = Math.round(Y[i] += (y[i - 1] - Y[i]) * speed);
x[i] = Math.round(X[i] += (x[i - 1] - X[i]) * speed);
}
ClockAndAssign();
setTimeout(Delay, 20);
}
Delay();
}());
num = 1;
function toggle(){
num ^= 1;
if(num == 1){
document.getElementById('clock').style.visibility="hidden";
document.getElementById('tog1').onclick=null;
}
else {
document.getElementById('clock').style.visibility="visible";
document.getElementById('tog1').onclick=changeSIZE;
}
document.getElementById("tog").value = num ?" APPEAR ":"KILL(切る)";
}
//-->
</script>
<br><br><br><br><br><br><br><br><br><br>
<br><br><br><br><br><br><br><br><br><br>
<center><p>
<input class="butt" type="button" id="tog" value="今何時？" onclick="toggle()">
<input class="butt" id="tog1" type="button" value="／LESSER＼" onclick="changeSIZE()">
</p></center>
<div>
<center>
<div>
<input type="button" value="C" style="BORDER-RIGHT: grey 1px solid; BORDER-TOP: grey 1px solid; FONT-SIZE: 8pt; FONT-WEIGHT:BOLD; BORDER-LEFT: grey 1px solid; COLOR: black; BORDER-BOTTOM: grey 1px solid;FONT-FAMILY: ms gothic; BACKGROUND-COLOR:white" onclick="document.getElementById('Od').style.color='white';document.getElementById('Of').style.color='white';document.getElementById('Oh').style.color='white';document.getElementById('Om').style.color='white';document.getElementById('Os').style.color='white'">
<input type="button" value="C" style="BORDER-RIGHT: grey 1px solid; BORDER-TOP: grey 1px solid; FONT-SIZE: 8pt; FONT-WEIGHT:BOLD; BORDER-LEFT: grey 1px solid; COLOR: black; BORDER-BOTTOM: grey 1px solid;FONT-FAMILY: ms gothic; BACKGROUND-COLOR:lightskyblue" onclick="document.getElementById('Od').style.color='lightskyblue';document.getElementById('Of').style.color='lightskyblue';document.getElementById('Oh').style.color='lightskyblue';document.getElementById('Om').style.color='lightskyblue';document.getElementById('Os').style.color='lightskyblue'">
<input type="button" value="C" style="BORDER-RIGHT: grey 1px solid; BORDER-TOP: grey 1px solid; FONT-SIZE: 8pt; FONT-WEIGHT:BOLD; BORDER-LEFT: grey 1px solid; COLOR: black; BORDER-BOTTOM: grey 1px solid;FONT-FAMILY: ms gothic; BACKGROUND-COLOR:yellow" onclick="document.getElementById('Od').style.color='yellow';document.getElementById('Of').style.color='yellow';document.getElementById('Oh').style.color='yellow';document.getElementById('Om').style.color='yellow';document.getElementById('Os').style.color='yellow'">
<input type="button" value="C" style="BORDER-RIGHT: grey 1px solid; BORDER-TOP: grey 1px solid; FONT-SIZE: 8pt; FONT-WEIGHT:BOLD; BORDER-LEFT: grey 1px solid; COLOR: black; BORDER-BOTTOM: grey 1px solid;FONT-FAMILY: ms gothic; BACKGROUND-COLOR:lime" onclick="document.getElementById('Od').style.color='lime';document.getElementById('Of').style.color='lime';document.getElementById('Oh').style.color='lime';document.getElementById('Om').style.color='lime';document.getElementById('Os').style.color='lime'">
<input type="button" value="C" style="BORDER-RIGHT: grey 1px solid; BORDER-TOP: grey 1px solid; FONT-SIZE: 8pt; FONT-WEIGHT:BOLD; BORDER-LEFT: grey 1px solid; COLOR: black; BORDER-BOTTOM: grey 1px solid;FONT-FAMILY: ms gothic; BACKGROUND-COLOR:deeppink" onclick="document.getElementById('Od').style.color='deeppink';document.getElementById('Of').style.color='deeppink';document.getElementById('Oh').style.color='deeppink';document.getElementById('Om').style.color='deeppink';document.getElementById('Os').style.color='deeppink'">
<input type="button" value="C" style="BORDER-RIGHT: grey 1px solid; BORDER-TOP: grey 1px solid; FONT-SIZE: 8pt; FONT-WEIGHT:BOLD; BORDER-LEFT: grey 1px solid; COLOR: black; BORDER-BOTTOM: grey 1px solid;FONT-FAMILY: ms gothic; BACKGROUND-COLOR:mediumblue" onclick="document.getElementById('Od').style.color='mediumblue';document.getElementById('Of').style.color='mediumblue';document.getElementById('Oh').style.color='mediumblue';document.getElementById('Om').style.color='mediumblue';document.getElementById('Os').style.color='mediumblue'">
<input type="button" value="C" style="BORDER-RIGHT: grey 1px solid; BORDER-TOP: grey 1px solid; FONT-SIZE: 8pt; FONT-WEIGHT:BOLD; BORDER-LEFT: grey 1px solid; COLOR: black; BORDER-BOTTOM: grey 1px solid;FONT-FAMILY: ms gothic; BACKGROUND-COLOR:maroon" onclick="document.getElementById('Od').style.color='maroon';document.getElementById('Of').style.color='maroon';document.getElementById('Oh').style.color='maroon';document.getElementById('Om').style.color='maroon';document.getElementById('Os').style.color='maroon'">
</div>
<div>
<input type="button" value="D" style="BORDER-RIGHT: grey 1px solid; BORDER-TOP: grey 1px solid; FONT-SIZE: 8pt; FONT-WEIGHT:BOLD; BORDER-LEFT: grey 1px solid; COLOR: black; BORDER-BOTTOM: grey 1px solid;FONT-FAMILY: ms gothic; BACKGROUND-COLOR:maroon" onclick="document.getElementById('Od').style.color='maroon'">
<input type="button" value="D" style="BORDER-RIGHT: grey 1px solid; BORDER-TOP: grey 1px solid; FONT-SIZE: 8pt; FONT-WEIGHT:BOLD; BORDER-LEFT: grey 1px solid; COLOR: black; BORDER-BOTTOM: grey 1px solid;FONT-FAMILY: ms gothic; BACKGROUND-COLOR:mediumblue" onclick="document.getElementById('Od').style.color='mediumblue'">
<input type="button" value="D" style="BORDER-RIGHT: grey 1px solid; BORDER-TOP: grey 1px solid; FONT-SIZE: 8pt; FONT-WEIGHT:BOLD; BORDER-LEFT: grey 1px solid; COLOR: black; BORDER-BOTTOM: grey 1px solid;FONT-FAMILY: ms gothic; BACKGROUND-COLOR:deeppink" onclick="document.getElementById('Od').style.color='deeppink'">
<input type="button" value="D" style="BORDER-RIGHT: grey 1px solid; BORDER-TOP: grey 1px solid; FONT-SIZE: 8pt; FONT-WEIGHT:BOLD; BORDER-LEFT: grey 1px solid; COLOR: black; BORDER-BOTTOM: grey 1px solid;FONT-FAMILY: ms gothic; BACKGROUND-COLOR:lime" onclick="document.getElementById('Od').style.color='lime'">
<input type="button" value="D" style="BORDER-RIGHT: grey 1px solid; BORDER-TOP: grey 1px solid; FONT-SIZE: 8pt; FONT-WEIGHT:BOLD; BORDER-LEFT: grey 1px solid; COLOR: black; BORDER-BOTTOM: grey 1px solid;FONT-FAMILY: ms gothic; BACKGROUND-COLOR:yellow" onclick="document.getElementById('Od').style.color='yellow'">
<input type="button" value="D" style="BORDER-RIGHT: grey 1px solid; BORDER-TOP: grey 1px solid; FONT-SIZE: 8pt; FONT-WEIGHT:BOLD; BORDER-LEFT: grey 1px solid; COLOR: black; BORDER-BOTTOM: grey 1px solid;FONT-FAMILY: ms gothic; BACKGROUND-COLOR:lightskyblue" onclick="document.getElementById('Od').style.color='lightskyblue'">
<input type="button" value="D" style="BORDER-RIGHT: grey 1px solid; BORDER-TOP: grey 1px solid; FONT-SIZE: 8pt; FONT-WEIGHT:BOLD; BORDER-LEFT: grey 1px solid; COLOR: black; BORDER-BOTTOM: grey 1px solid;FONT-FAMILY: ms gothic; BACKGROUND-COLOR:white" onclick="document.getElementById('Od').style.color='white'">
</div>
<div>
<input type="button" value="F" style="BORDER-RIGHT: grey 1px solid; BORDER-TOP: grey 1px solid; FONT-SIZE: 8pt; FONT-WEIGHT:BOLD; BORDER-LEFT: grey 1px solid; COLOR: black; BORDER-BOTTOM: grey 1px solid;FONT-FAMILY: ms gothic; BACKGROUND-COLOR:maroon" onclick="document.getElementById('Of').style.color='maroon'">
<input type="button" value="F" style="BORDER-RIGHT: grey 1px solid; BORDER-TOP: grey 1px solid; FONT-SIZE: 8pt; FONT-WEIGHT:BOLD; BORDER-LEFT: grey 1px solid; COLOR: black; BORDER-BOTTOM: grey 1px solid;FONT-FAMILY: ms gothic; BACKGROUND-COLOR:mediumblue" onclick="document.getElementById('Of').style.color='mediumblue'">
<input type="button" value="F" style="BORDER-RIGHT: grey 1px solid; BORDER-TOP: grey 1px solid; FONT-SIZE: 8pt; FONT-WEIGHT:BOLD; BORDER-LEFT: grey 1px solid; COLOR: black; BORDER-BOTTOM: grey 1px solid;FONT-FAMILY: ms gothic; BACKGROUND-COLOR:deeppink" onclick="document.getElementById('Of').style.color='deeppink'">
<input type="button" value="F" style="BORDER-RIGHT: grey 1px solid; BORDER-TOP: grey 1px solid; FONT-SIZE: 8pt; FONT-WEIGHT:BOLD; BORDER-LEFT: grey 1px solid; COLOR: black; BORDER-BOTTOM: grey 1px solid;FONT-FAMILY: ms gothic; BACKGROUND-COLOR:lime" onclick="document.getElementById('Of').style.color='lime'">
<input type="button" value="F" style="BORDER-RIGHT: grey 1px solid; BORDER-TOP: grey 1px solid; FONT-SIZE: 8pt; FONT-WEIGHT:BOLD; BORDER-LEFT: grey 1px solid; COLOR: black; BORDER-BOTTOM: grey 1px solid;FONT-FAMILY: ms gothic; BACKGROUND-COLOR:yellow" onclick="document.getElementById('Of').style.color='yellow'">
<input type="button" value="F" style="BORDER-RIGHT: grey 1px solid; BORDER-TOP: grey 1px solid; FONT-SIZE: 8pt; FONT-WEIGHT:BOLD; BORDER-LEFT: grey 1px solid; COLOR: black; BORDER-BOTTOM: grey 1px solid;FONT-FAMILY: ms gothic; BACKGROUND-COLOR:lightskyblue" onclick="document.getElementById('Of').style.color='lightskyblue'">
<input type="button" value="F" style="BORDER-RIGHT: grey 1px solid; BORDER-TOP: grey 1px solid; FONT-SIZE: 8pt; FONT-WEIGHT:BOLD; BORDER-LEFT: grey 1px solid; COLOR: black; BORDER-BOTTOM: grey 1px solid;FONT-FAMILY: ms gothic; BACKGROUND-COLOR:white" onclick="document.getElementById('Of').style.color='white'">
</div>
<div>
<input type="button" value="H" style="BORDER-RIGHT: grey 1px solid; BORDER-TOP: grey 1px solid; FONT-SIZE: 8pt; FONT-WEIGHT:BOLD; BORDER-LEFT: grey 1px solid; COLOR: black; BORDER-BOTTOM: grey 1px solid;FONT-FAMILY: ms gothic; BACKGROUND-COLOR:maroon" onclick="document.getElementById('Oh').style.color='maroon'">
<input type="button" value="H" style="BORDER-RIGHT: grey 1px solid; BORDER-TOP: grey 1px solid; FONT-SIZE: 8pt; FONT-WEIGHT:BOLD; BORDER-LEFT: grey 1px solid; COLOR: black; BORDER-BOTTOM: grey 1px solid;FONT-FAMILY: ms gothic; BACKGROUND-COLOR:mediumblue" onclick="document.getElementById('Oh').style.color='mediumblue'">
<input type="button" value="H" style="BORDER-RIGHT: grey 1px solid; BORDER-TOP: grey 1px solid; FONT-SIZE: 8pt; FONT-WEIGHT:BOLD; BORDER-LEFT: grey 1px solid; COLOR: black; BORDER-BOTTOM: grey 1px solid;FONT-FAMILY: ms gothic; BACKGROUND-COLOR:deeppink" onclick="document.getElementById('Oh').style.color='deeppink'">
<input type="button" value="H" style="BORDER-RIGHT: grey 1px solid; BORDER-TOP: grey 1px solid; FONT-SIZE: 8pt; FONT-WEIGHT:BOLD; BORDER-LEFT: grey 1px solid; COLOR: black; BORDER-BOTTOM: grey 1px solid;FONT-FAMILY: ms gothic; BACKGROUND-COLOR:lime" onclick="document.getElementById('Oh').style.color='lime'">
<input type="button" value="H" style="BORDER-RIGHT: grey 1px solid; BORDER-TOP: grey 1px solid; FONT-SIZE: 8pt; FONT-WEIGHT:BOLD; BORDER-LEFT: grey 1px solid; COLOR: black; BORDER-BOTTOM: grey 1px solid;FONT-FAMILY: ms gothic; BACKGROUND-COLOR:yellow" onclick="document.getElementById('Oh').style.color='yellow'">
<input type="button" value="H" style="BORDER-RIGHT: grey 1px solid; BORDER-TOP: grey 1px solid; FONT-SIZE: 8pt; FONT-WEIGHT:BOLD; BORDER-LEFT: grey 1px solid; COLOR: black; BORDER-BOTTOM: grey 1px solid;FONT-FAMILY: ms gothic; BACKGROUND-COLOR:lightskyblue" onclick="document.getElementById('Oh').style.color='lightskyblue'">
<input type="button" value="H" style="BORDER-RIGHT: grey 1px solid; BORDER-TOP: grey 1px solid; FONT-SIZE: 8pt; FONT-WEIGHT:BOLD; BORDER-LEFT: grey 1px solid; COLOR: black; BORDER-BOTTOM: grey 1px solid;FONT-FAMILY: ms gothic; BACKGROUND-COLOR:white" onclick="document.getElementById('Oh').style.color='white'">
</div>
<div>
<input type="button" value="M" style="BORDER-RIGHT: grey 1px solid; BORDER-TOP: grey 1px solid; FONT-SIZE: 8pt; FONT-WEIGHT:BOLD; BORDER-LEFT: grey 1px solid; COLOR: black; BORDER-BOTTOM: grey 1px solid;FONT-FAMILY: ms gothic; BACKGROUND-COLOR:maroon" onclick="document.getElementById('Om').style.color='maroon'">
<input type="button" value="M" style="BORDER-RIGHT: grey 1px solid; BORDER-TOP: grey 1px solid; FONT-SIZE: 8pt; FONT-WEIGHT:BOLD; BORDER-LEFT: grey 1px solid; COLOR: black; BORDER-BOTTOM: grey 1px solid;FONT-FAMILY: ms gothic; BACKGROUND-COLOR:mediumblue" onclick="document.getElementById('Om').style.color='mediumblue'">
<input type="button" value="M" style="BORDER-RIGHT: grey 1px solid; BORDER-TOP: grey 1px solid; FONT-SIZE: 8pt; FONT-WEIGHT:BOLD; BORDER-LEFT: grey 1px solid; COLOR: black; BORDER-BOTTOM: grey 1px solid;FONT-FAMILY: ms gothic; BACKGROUND-COLOR:deeppink" onclick="document.getElementById('Om').style.color='deeppink'">
<input type="button" value="M" style="BORDER-RIGHT: grey 1px solid; BORDER-TOP: grey 1px solid; FONT-SIZE: 8pt; FONT-WEIGHT:BOLD; BORDER-LEFT: grey 1px solid; COLOR: black; BORDER-BOTTOM: grey 1px solid;FONT-FAMILY: ms gothic; BACKGROUND-COLOR:lime" onclick="document.getElementById('Om').style.color='lime'">
<input type="button" value="M" style="BORDER-RIGHT: grey 1px solid; BORDER-TOP: grey 1px solid; FONT-SIZE: 8pt; FONT-WEIGHT:BOLD; BORDER-LEFT: grey 1px solid; COLOR: black; BORDER-BOTTOM: grey 1px solid;FONT-FAMILY: ms gothic; BACKGROUND-COLOR:yellow" onclick="document.getElementById('Om').style.color='yellow'">
<input type="button" value="M" style="BORDER-RIGHT: grey 1px solid; BORDER-TOP: grey 1px solid; FONT-SIZE: 8pt; FONT-WEIGHT:BOLD; BORDER-LEFT: grey 1px solid; COLOR: black; BORDER-BOTTOM: grey 1px solid;FONT-FAMILY: ms gothic; BACKGROUND-COLOR:lightskyblue" onclick="document.getElementById('Om').style.color='lightskyblue'">
<input type="button" value="M" style="BORDER-RIGHT: grey 1px solid; BORDER-TOP: grey 1px solid; FONT-SIZE: 8pt; FONT-WEIGHT:BOLD; BORDER-LEFT: grey 1px solid; COLOR: black; BORDER-BOTTOM: grey 1px solid;FONT-FAMILY: ms gothic; BACKGROUND-COLOR:white" onclick="document.getElementById('Om').style.color='white'">
</div>
<div>
<input type="button" value="S" style="BORDER-RIGHT: grey 1px solid; BORDER-TOP: grey 1px solid; FONT-SIZE: 8pt; FONT-WEIGHT:BOLD; BORDER-LEFT: grey 1px solid; COLOR: black; BORDER-BOTTOM: grey 1px solid;FONT-FAMILY: ms gothic; BACKGROUND-COLOR:maroon" onclick="document.getElementById('Os').style.color='maroon'">
<input type="button" value="S" style="BORDER-RIGHT: grey 1px solid; BORDER-TOP: grey 1px solid; FONT-SIZE: 8pt; FONT-WEIGHT:BOLD; BORDER-LEFT: grey 1px solid; COLOR: black; BORDER-BOTTOM: grey 1px solid;FONT-FAMILY: ms gothic; BACKGROUND-COLOR:mediumblue" onclick="document.getElementById('Os').style.color='mediumblue'">
<input type="button" value="S" style="BORDER-RIGHT: grey 1px solid; BORDER-TOP: grey 1px solid; FONT-SIZE: 8pt; FONT-WEIGHT:BOLD; BORDER-LEFT: grey 1px solid; COLOR: black; BORDER-BOTTOM: grey 1px solid;FONT-FAMILY: ms gothic; BACKGROUND-COLOR:deeppink" onclick="document.getElementById('Os').style.color='deeppink'">
<input type="button" value="S" style="BORDER-RIGHT: grey 1px solid; BORDER-TOP: grey 1px solid; FONT-SIZE: 8pt; FONT-WEIGHT:BOLD; BORDER-LEFT: grey 1px solid; COLOR: black; BORDER-BOTTOM: grey 1px solid;FONT-FAMILY: ms gothic; BACKGROUND-COLOR:lime" onclick="document.getElementById('Os').style.color='lime'">
<input type="button" value="S" style="BORDER-RIGHT: grey 1px solid; BORDER-TOP: grey 1px solid; FONT-SIZE: 8pt; FONT-WEIGHT:BOLD; BORDER-LEFT: grey 1px solid; COLOR: black; BORDER-BOTTOM: grey 1px solid;FONT-FAMILY: ms gothic; BACKGROUND-COLOR:yellow" onclick="document.getElementById('Os').style.color='yellow'">
<input type="button" value="S" style="BORDER-RIGHT: grey 1px solid; BORDER-TOP: grey 1px solid; FONT-SIZE: 8pt; FONT-WEIGHT:BOLD; BORDER-LEFT: grey 1px solid; COLOR: black; BORDER-BOTTOM: grey 1px solid;FONT-FAMILY: ms gothic; BACKGROUND-COLOR:lightskyblue" onclick="document.getElementById('Os').style.color='lightskyblue'">
<input type="button" value="S" style="BORDER-RIGHT: grey 1px solid; BORDER-TOP: grey 1px solid; FONT-SIZE: 8pt; FONT-WEIGHT:BOLD; BORDER-LEFT: grey 1px solid; COLOR: black; BORDER-BOTTOM: grey 1px solid;FONT-FAMILY: ms gothic; BACKGROUND-COLOR:white" onclick="document.getElementById('Os').style.color='white'">
</div>
</center></div>
<br>
</body>
</html>
10977,javascript|html,ChromeやSafariではドラッグアンドドロップでファイルをフォームにセットできます。（下図参照）
しかし、IEだとこれが実現できません。（ドロップするとその画像をブラウザで開いてしまう）
JavaScriptを使ってIEでもドラッグアンドドロップでファイルをフォームにセットすることはできますか？
Ajaxでファイルアップロードをするプラグインやサンプルコードはたくさん見つかるのですが、「フォームにセットするだけ、サブミットは普通にボタンをクリックしてサブミットする」という情報は見つかりませんでした。
こちらの情報は目的に近かったですが、IEでは機能しませんでした。
何か参考になりそうな情報があれば教えてください。
よろしくお願いします。
ちなみにIEはIE11のような最近のバージョンを対象にしてもOKです。
11020,javascript|jquery|html,こちらのサイト（http://play-in-hell.com/）ではページが遷移すると一番下から表示されるようになっています。
このように指定した場所からトップページを表示させるにはどのようにしたらよいでしょうか？
私がやりたいのは、トップページに画像が貼ってありその画像の一番下の部分が必ず見えるようにしたいです。どうしてもブラウザ表示の拡大やディスプレイの解像度によって画像の一番下の部分が隠れて表示されてしまうことがあるので、隠れてしまう場合はすこしスクロールした状態で表示させれないものかと思っています。
よろしくおねがいします。
11027,c++,アルゴリズムとデータ構造という書籍を買い、下記よりC/C++のソースコードをダウンロードしました。
http://www.sbcr.jp/books/img/takarabako/
以前した質問（CのソースコードをVisual Studio Expressを利用してコンパイル・実行したい）の回答と同様に、
cl list2-6.cpp enter
とすると、
/out:list2-6.exe
list2-6.obj
LINK : fatal error LNK1561: エントリー ポイントを定義しなければなりません。
という表示が出てきて上手くコンパイルできません。
どこで問題が生じているか教えていただけないでしょうか？
ちなみに list2-6.cpp は以下のようなコードです。
// ＜C++版蔵書検索＞
// ※インクルードファイルやmain()関数はC言語版と同じ
// 蔵書クラス
class CBook
{
public:
char *title;
char *author;
int bookID;
int available;      /* 貸し出し中なら0，そうでなければ1 */
// 比較演算子のオーバロード
// sortbook()のなかでCBookどうしを比較
bool operator<(CBook&book)
{
return bookID<book.bookID;
}
bool operator>(CBook&book)
{
return bookID>book.bookID;
}
// int型へのキャストをオーバロード
// searchbook()のなかでkeyとbookIDを比較
operator int()
{
return bookID;
}
};
#define N 5
CBook*bookarray[N];     /* 蔵書データのポインタの配列 */
/* 蔵書のデータを初期化する */
void initdata()
{
int n;
for(n=0;n<N;++n)
bookarray[n]=new CBook;
bookarray[0]->title="book0";
bookarray[1]->title="book1";
bookarray[2]->title="book2";
bookarray[3]->title="book3";
bookarray[4]->title="book4";
bookarray[0]->author="author0";
bookarray[1]->author="author1";
bookarray[2]->author="author2";
bookarray[3]->author="author3";
bookarray[4]->author="author4";
bookarray[0]->bookID=1000;
bookarray[1]->bookID=502;
bookarray[2]->bookID=731;
bookarray[3]->bookID=628;
bookarray[4]->bookID=1;
bookarray[0]->available=1;
bookarray[1]->available=0;
bookarray[2]->available=0;
bookarray[3]->available=1;
bookarray[4]->available=1;
}
/* 蔵書データのメモリを解放 */
void cleanupdata()
{
int n;
for(n=0;n<N;++n)
delete bookarray[n];
}
/* 本のデータをbookIDの順に昇順でクイックソートする */
void sortbook(int bottom,int top)
{
int lower,upper;
CBook *div,*temp;
if(bottom>=top)
return;
div=bookarray[bottom];  /* 適当な基準値を選択 */
for(lower=bottom,upper=top;lower<upper;)
{
// オブジェクトの大小を直接比較
while(*bookarray[lower]<*div)
++lower;
while(*bookarray[upper]>*div)
--upper;
if(lower<upper)
{
/* データ（へのポインタ）の順番を入れ替える */
temp=bookarray[lower];
bookarray[lower]=bookarray[upper];
bookarray[upper]=temp;
++lower;
--upper;
}
}
sortbook(bottom,upper);
sortbook(upper+1,top);
}
/* booksのなかからbookIDがkeyと一致するデータをバイナリサーチで
検索して，その添え字を返す。見つからなければ-1を返す */
int searchbook(CBook *books[],int size,int key)
{
int left,mid,right;
left=0;
right=size;
while(left<right)
{
mid=(left+right)/2;
if(*books[mid]<key)     // CBookのbookIDとkey を比較
left=mid+1;
else
right=mid;
}
if(*books[left]==key)       // 同上
return left;
return -1;      /* 見つからなかった場合 */
}
（追記）
// ＜C++版蔵書検索＞
// ※インクルードファイルやmain()関数はC言語版と同じ
とあるように、この部分のコードが抜けていたのが原因でした。
11032,javascript|html,htmlの<input type="text">で変換キーを押しても、ひらがなが漢字などに変換できないようにしたいのですが、どうすればいいのでしょうか?
Space key なら Keycodeをつかってやればいいのですが、変換キーはどうすればいいのでしょうか?
11122,c++,アプリ制作のためにXcodeでC++を使っています。boost::optionalを使用していますが、
'...' is a protected member of
'boost::optional_detail::optional_base>'
というエラーが8個出ます。...は、以下のtypedefのvalue_type, reference_type, ... にあたります。
template<class T>
class optional : public optional_detail::optional_base<T>
{
typedef optional_detail::optional_base<T> base ;
public :
typedef optional<T> this_type ;
typedef BOOST_DEDUCED_TYPENAME base::value_type           value_type ;
typedef BOOST_DEDUCED_TYPENAME base::reference_type       reference_type ;
typedef BOOST_DEDUCED_TYPENAME base::reference_const_type reference_const_type ;
#ifndef  BOOST_NO_CXX11_RVALUE_REFERENCES
typedef BOOST_DEDUCED_TYPENAME base::rval_reference_type  rval_reference_type ;
typedef BOOST_DEDUCED_TYPENAME base::reference_type_of_temporary_wrapper reference_type_of_temporary_wrapper ;
#endif
typedef BOOST_DEDUCED_TYPENAME base::pointer_type         pointer_type ;
typedef BOOST_DEDUCED_TYPENAME base::pointer_const_type   pointer_const_type ;
typedef BOOST_DEDUCED_TYPENAME base::argument_type        argument_type ;
また、my_template_classですが、
template<class T> class my_template_class
{
private:
T member_;
...
}
という風に定義されていて、
Field has incomplete type 'テンプレート引数に入れたクラス名'
というコンパイルエラーも出ています。どのように解決すればよいでしょうか。
11132,c++,下記ソースコードでメソッドからminizipのunzip.cにある
unzOpen2メソッドをバイトデータを解凍したところ、
圧縮前のサイズと一致している事はunz64local_GetCurrentFileInfoInternalメソッドの
file_info.uncompressed_sizeで確認できたのですが
解析しても解凍後のデータがどこに保存されているのかわからず悩んでおります。
ZipFormatのように、特定のビットにデータが格納されるのでしょうか？
http://ja.wikipedia.org/wiki/ZIP_%28%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%83%95%E3%82%A9%E3%83%BC%E3%83%9E%E3%83%83%E3%83%88%29
開発環境：MacOSX 10.10.3、xCode6.3.2、Objective-c
void uncompressByGzip(const char** ptrSrc, const int srcLength)
{
unz64_s unz64data;
unzFile unzfiledata;
unsigned long long int readdatasize;
zlib_filefunc_def filefunc32 = {0};
ourmemory_t unzmem = {0};
unzmem.size = srcLength;
unzmem.base = (char *)malloc(unzmem.size);
memcpy(unzmem.base, ptrSrc, unzmem.size);
fill_memory_filefunc(&filefunc32, &unzmem);
unzfiledata = unzOpen2("__notused__", &filefunc32);
}
11146,java|c#|c++,C系の文法を持つ言語については以下のような記述が可能であると思います。
while (foo) if (hoge) {
...
}
これは、こちらの書き方よりもブロックネストを抑えることができるのが利点ですが、
while (foo) {
if (hoge) {
...
}
}
可読性的には「もしかしたら問題があるかもしれない」と考えています。
ただ、個人的にはネストを抑える効果は大きいと考えています。
この書き方は、一般的には問題がありますか？
11217,c++,boost::mpl::accumulate や fold のネストはどうやったら実装できますか。
namespace mpl=boost::mpl;
typedef mpl::vector<mpl::int_<1>,mpl::int_<1>,mpl::int_<1>,mpl::int_<1>> vec1;
typedef mpl::vector<mpl::int_<2>,mpl::int_<2>,mpl::int_<2>,mpl::int_<2>> vec2;
typedef mpl::vector<mpl::int_<3>,mpl::int_<3>,mpl::int_<3>,mpl::int_<3>> vec3;
typedef mpl::vector<vec1,vec2,vec3> vvec;
typedef typename mpl::lambda
<mpl::accumulate
<mpl::_1 ,mpl::int_<0> ,mpl::plus<mpl::_1,mpl::_2> >
>::type lam;
typedef typename mpl::accumulate
<vvec
,mpl::int_<0>
,mpl::plus<mpl::_1,lam::template apply<mpl::_2>::type>
>::type result;
このコードはコンパイルが通りませんでした。
11311,c#|c++,C#からAndroid上の自作DLL経由でファイル内のある部分のバイナリーデータを取得するサンプルを作っています。
下記ソースのfpはファイルポインタになっていて、ファイルの中身は１０個のファイルのバイナリーが敷き詰められています。
■質問
ファイル内のファイル５のデータとファイル６のデータの間にNULLがなかった場合、
ファイルのオフセット位置をファイル５にしてファイルポインタを返すと
オフセット位置以降のすべてのバイナリーがC#側に返るのでしょうか？
現在テストしているとすごい数のバイト配列になっているので、
ファイルの末端までのバイト配列が返っているのではないかと思っています。
オフセット位置を指定して次のデータまでのバイト配列を返してもらうには
データ間にNULLがあれば良いのか、改行コードをいれるのか、
サイズ指定してmemcpyしたバッファを返せば良いのか
調べているのですが答えにたどり着けません。
●C#
[DllImport ("ReadFile")]
private static extern byte[] GetFileMemory(int offset);
●C++
extern "C"{
const char** GetFileMemory(int offset);
}
const char** GetFileMemory(int offset)
{
fseek(fp, offset, SEEK_SET);
return (const char**)fp;
}
11320,python|c++,Python C/C++ APIで下記のようにforで0から引数としてとった整数までを表示させる物を書いているのですが、Ctrl-Cを押しても割り込んで処理を停止させることができません。
9999999まで表示した後でKeyboardInterruptが出てしまいます。
どうすればいいのでしょうか?
ちなみにコンパイルはpython3 setup.py build_ext -iでやっています。
環境はOS X 10.10, Python3.4.3です
#include <iostream>
#include <Python.h>
static PyObject*
for_int(PyObject *self, PyObject *args)
{
int x;
if (!PyArg_ParseTuple(args, "i", &x))
return NULL;
for (int i=0; i<x; i++) {
std::cout << i << "\n";
}
Py_INCREF(Py_None);
return Py_None;
}
static PyMethodDef For_INT_Methods[] = {
{"for_int", for_int, METH_VARARGS,
"fast increment print"},
{NULL, NULL, 0 , NULL}
};
static struct PyModuleDef for_int_module = {
PyModuleDef_HEAD_INIT,
"for_int",
"spam_doc_string",
-1,
For_INT_Methods
};
PyMODINIT_FUNC
PyInit_for_int(void)
{
PyObject *m;
m = PyModule_Create(&for_int_module);
if (m == NULL)
return NULL;
Py_INCREF(PyExc_KeyboardInterrupt);
PyModule_AddObject(m, "InterruptError", PyExc_KeyboardInterrupt);
return m;
}
int
main(int argc, char *argv[])
{
PyImport_AppendInittab("for_int", PyInit_for_int);
Py_Initialize();
PyImport_ImportModule("for_int");
}
コンパイルするためのsetup.py
from distutils.core import setup, Extension
module = Extension('for_int', ['for.cpp'])
setup(name='for',
version='1.0',
ext_modules=[module],
)
追記
forの部分でPyErr_CheckSignals()を呼び出すようにしました(code2)
しかし、Ctrl-Cを押しても処理は止まりませんでした。
code2
for (int i=0; i<x; i++) {
PyErr_CheckSignals(); # 追加
std::cout << i << "\n";
}
11458,c++,実行時にネイティブエンディアンがリトルエンディアンか否かは、例えば以下のように判定できます。
#include <iostream>
const int bom = 1;
bool is_little_endian() {
return *reinterpret_cast<const char *>(&bom) == 1;
}
int main()
{
const bool b = is_little_endian();
std::cout << b << '\n';
}
C++11で定数式の機能(constexpr)が追加されたので、constをconstexprに変えればコンパイル時に判定できるのではないかと考えたのですが、reinterpret_castは定数式の中では使えないようで、コンパイルエラーになります。
#include <iostream>
constexpr int bom = 1;
constexpr bool is_little_endian() {
return *reinterpret_cast<const char *>(&bom) == 1;
}
int main()
{
constexpr bool b = is_little_endian();
std::cout << b << '\n';
}
;
# clang++ -Wall -std=c++11 test_endian.cpp
test_endian.cpp:4:16: error: constexpr function never produces a constant
expression [-Winvalid-constexpr]
constexpr bool is_little_endian() {
^
test_endian.cpp:5:10: note: reinterpret_cast is not allowed in a constant
expression
return *reinterpret_cast<const char *>(&bom) == 1;
^
1 error generated.
コンパイル時にはネイティブエンディアンは決まっていると思うのでコンパイル時に判定したいのですが、Boostライブラリのようにコンパイラー独自のマクロで判定する方法以外で、何か方法はありますか？
※リトルエンディアンか否かだけではなく、リトルエンディアン／ビッグエンディアン／その他に分類できればベストです。
■追記
用途としては、外部データと内部データを変換する関数／クラスを作る場合に、外部データのエンディアンとネイティブエンディアンの関係で実装を最適化する、ということを想定しています。
11481,ios|c++,/var/mobile/Applications/XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX/Documentsの直下に
サブフォルダを作成したくて下記のようなソースコードを書きました、
サブフォルダをmkdirで作ったのですが、mkdirの戻り値が−1となり失敗します。
https://developer.apple.com/jp/documentation/FileSystemProgrammingGuide.pdf　の
１５ページによるとサブフォルダを作成できるはずなのですがなぜか失敗します。
引数のbaseDirectoryに
/var/mobile/Applications/XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX/Documentsを渡した時は失敗し、
/var/mobile/Applications/XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX/Library/Cachesを渡した時は、mkdirの戻り値が=0となって成功し、Iexprolerと言うアプリでチェックしたところフォルダ構成が確認できたので処理そのものに問題はないと思っています。
下記ソースでbaseDirectoryに/var/mobile/Applications/XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX/Documentsが入っていて、assetDirectoryにはa/b/c/d/e のように作成するサブフォルダを渡しています。
■デバッグ用にNSLogを使用していますが、最終的には削除しcppファイルになります。
// 使用しているインクルードファイル
#include <sys/stat.h>
#include <dirent.h>
#include <string>
// テンプレートの使用を宣言
using namespace std;
//****************************************
// ディレクトリ作成処理
//****************************************
void MakeDirectoryFunction(string baseDirectory, string assetDirectory)
{
int retint = 0;
int startPos = 0;
int endPos = assetDirectory.find("/",startPos);
string stringCut = "";
string makeString = baseDirectory;
while (endPos > 0) {
NSLog(@"start=%d",startPos);
NSLog(@"end=%d",endPos);
stringCut = assetDirectory.substr(startPos,endPos - startPos);
NSLog(@"stringCut=%s",stringCut.c_str());
makeString = makeString + "/" + stringCut;
NSLog(@"makeString=%s",makeString.c_str());
retint = mkdir(makeString.c_str(), 0777);
NSLog(@"retint = %d",retint);
startPos = endPos + 1;
endPos = assetDirectory.find("/",startPos);
}
}
iOS:8.3 xCode:6.3.2
06/20 追記：UnityのApplication.persistentDataPathをiOS側に渡しています。
11487,c++,マクロを用いずに可変長引数関数をラッピングする手段を教えて下さい。
How to wrap variadic function without macro.
DebugPrint関数がラッピング対象の関数で可変長引数を取るとします。
DebugPrintWrapper関数がラッピングする関数で、同様に可変長引数を取るとします。
DebugPrintWrapperが受け取った可変長引数をそのままDebugPrintの引数として利用するにはどのようにすればいいでしょうか？
void DebugPrint(const char * const fmt, ...);
void DebugPrintWrapper(const char * const fmt, ...)
{
//DebugPrint(fmt, ....);
}
11609,c++,C++初心者です。
今までJava主体だったので、参照関係の知識は最低限(プリミティブかそうでないか)程度の認識しかありませんでした。
PHPも少し触っていたので参照はわかりますが、ポインタがどうも理解しきれません。
参照 = 変数のアドレス
ポインタ = 変数のアドレスの値、つまり参照の値ということでいいんでしょうか？
また、上と仮定した時、ダブルポインタが配列になる意味が納得できません。
listとか、vectorのポインタはどうなるんですか？
char **argv がcharの連想配列、
char *argv[]がchar配列の配列 = stringの配列
となるのであれば、
list *arrayは「string型リスト」の配列にはなりませんよね？
charはプリミティブだから扱いが違うという話なんでしょうか？
11755,c++,C++初心者です。複数のファイルを取り込んだプログラムがコンパイルできず、その理由もわかりません。
A.cpp
#include "B.h"
int main(int argc, char **argv) {
B test;
test.show(*argv);
return 0;
}
B.h
#pragma once
#ifndef __B_H__
#define __B_H__
#include <string>
class B {
public:
void show(std::string);
};
#endif
B.cpp
#include "B.h"
#include <string>
#include <iostream>
using namespace std;
class B {
public:
void show(const char *var) {
cout << var << endl;
}
};
これでコンパイル
g++ -o a.exe A.cpp
すると
/tmp/ccGn41oP.o:A.cpp:(.text+0x4c): `B::show(std::string)' に対する定義されていない参照です
/tmp/ccGn41oP.o:A.cpp:(.text+0x4c): 再配置がオーバーフローしないように切り詰められました: R_X86_64_PC32 (未定義シンボル `B::show(std::string)' に対して)
collect2: エラー: ld はステータス 1 で終了しました
こうなってしまいます。
これはどういうエラーなんでしょうか。
こんな初歩的な質問で恐縮ですが、教えてください。
ご回答について
ご回答ありがとうございます。
コンパイルの流れを理解していませんでした。
おっしゃる通り、
g++ -c B.cpp
を実行したところ、
$ g++ -c B.cpp
B.cpp:8:7: エラー: ‘class B’ が再定義されています
class B {
^
In file included from B.cpp:1:0:
B.h:8:7: エラー: ‘class B’ の前の定義
class B {
^
となってしまったため、プロトタイプの実装本体はクラス宣言しないのかと思い、
下記に変更して再度実行しました。
B.cpp
#include "B.h"
#include <string>
#include <iostream>
using namespace std;
void show(const char *var) {
cout << var << endl;
}
これで"B.o"というファイルが生成され、改めて
g++ -o A.exe A.cpp
を実行したものの、エラーの内容が変わりませんでした。
sayuri さん
ちなみにですが・・・
引数を
void show(std::string var);
に統一し、
g++ -c B.cpp
g++ -o A.exe A.cpp
を行うと
$ g++ -o a.exe A.cpp
/tmp/ccSVMoNA.o:A.cpp:(.text+0x4c): `B::show(std::string)' に対する定義されていない参照です
/tmp/ccSVMoNA.o:A.cpp:(.text+0x4c): 再配置がオーバーフローしないように切り詰められました: R_X86_64_PC32 (未定義シンボル `B::show(std::string)' に対して)
collect2: エラー: ld はステータス 1 で終了しました
というエラーになります。
http://d.hatena.ne.jp/pknight/20090826/1251303641
このブログを見ると、この場合はtemplate関数の場合ですが、
「この関数は使われていないから.objを生成しても実態がないのでA.cppからは実装が見えません」
というようなことが書いてありました。
もしこれと同様の現象が起きているのだとすると、今回show()関数はグローバルメンバ関数ではなくクラスメンバ関数なのでA.cppから見ることはできない
ということになってしまうんでしょうか。
言語仕様をほとんどよくわかっていないので、さすがにそんなことはないんじゃないかと思いますが・・・
C++開発者の方も、実行ファイル1つで完結するプログラムなんてそうそう書かないと思いますが、
皆さんはどうやって外部関数を参照しているのかわかりません。
11833,c++,プログラミング言語C++ 第4版の「27.4.2 クラス階層の線形化」に、菱形継承は線形継承より遅いというような事が書かれています。
設計の第一歩目では、伝統的な多重継承による“ダイアモンド”型の階層だった：
Node <--       Expr <--       Stmt <--       Decl <--       Var
^              ^              ^              ^              ^
|              |              |              |              |
impl::Node <-- impl::Expr <-- impl::Stmt <-- impl::Decl <-- impl::Var
これでも動作したが、大きなメモリオーバヘッドが発生していた。仮想基底を移動するためのデータのために、ノードが大きくなりすぎていたからだ。さらに、各オブジェクトがもつ数多くの仮想基底への間接アクセスが多いので、プログラム動作の速度も深刻なほど低下していた（§21.3.5）。
この解決策が、二つの階層を線形化することであった。それによって仮想基底が排除される：
Node <--       Expr <--       Stmt <--       Decl <--       Var
^
+-----------------------------------------------------------+
|
impl::Node <-- impl::Expr <-- impl::Stmt <-- impl::Decl <-- impl::Var
中ほどに理由は書かれていますが、「21.3.5 仮想基底クラス」を読んでも、もう少し具体的にどこにどういう理由で時間がかかるのか理解できませんでした。
（なんとなく「インターフェイスの検索と実装の検索で2回検索するから？でも1回（線形継承の場合）か2回（菱形継承の場合）の差で深刻なほど速度差があるものなのか…？」と思っていますが…）
一応以下のテストプログラムで、手元のClang 3.5.2では若干線形継承の方が速いことは確認できました。
（手元のマシンではstd::chrono::high_resolution_clockでもミリ秒単位ぐらいでしか計測できませんでしたが、1000回call_function()をまわして4ミリ秒くらいの差しかありませんでした。）
#include <chrono>
#include <iomanip>
#include <iostream>
#include <memory>
#include <string>
#include <type_traits>
#include <sstream>
using namespace std;
using namespace std::chrono;
#ifdef DIAMOND_INHERITANCE
// 菱形継承
template<size_t N>
struct Interface: virtual Interface<N - 1>
{
using Interface<N - 1>::function;
virtual void function() = 0;
virtual void function(integral_constant<size_t, N>) = 0;
};
template<>
struct Interface<1>
{
virtual ~Interface() = default;
virtual void function() = 0;
virtual void function(integral_constant<size_t, 1>) = 0;
};
template<size_t N>
struct Implementation: virtual Interface<N>, Implementation<N - 1>
{
using Implementation<N - 1>::function;
void function() override {
cout << "Implementation<N>::function(): N = " << N << "\n";
}
void function(integral_constant<size_t, N>) override {
cout << "Implementation<N>::function(integral_constant<size_t, N>): N = " << N << "\n";
}
};
template<>
struct Implementation<1>: virtual Interface<1>
{
void function() override {
cout << "Implementation<N>::function(): N = " << 1 << "\n";
}
void function(integral_constant<size_t, 1>) override {
cout << "Implementation<N>::function(integral_constant<size_t, N>): N = " << 1 << "\n";
}
};
#else
// 線形継承
template<size_t N>
struct Interface: Interface<N - 1>
{
using Interface<N - 1>::function;
virtual void function() = 0;
virtual void function(integral_constant<size_t, N>) = 0;
};
template<>
struct Interface<1>
{
virtual ~Interface() = default;
virtual void function() = 0;
virtual void function(integral_constant<size_t, 1>) = 0;
};
template<size_t N, size_t MAX_N>
struct Implementation: Implementation<N - 1, MAX_N>
{
using Implementation<N - 1, MAX_N>::function;
void function() override {
cout << "Implementation<N>::function(): N = " << N << "\n";
}
void function(integral_constant<size_t, N>) override {
cout << "Implementation<N>::function(integral_constant<size_t, N>): N = " << N << "\n";
}
};
template<size_t MAX_N>
struct Implementation<1, MAX_N>: Interface<MAX_N>
{
using Interface<MAX_N>::function;
void function() override {
cout << "Implementation<N>::function(): N = " << 1 << "\n";
}
void function(integral_constant<size_t, 1>) override {
cout << "Implementation<N>::function(integral_constant<size_t, N>): N = " << 1 << "\n";
}
};
#endif
template<size_t N>
void call_function(Interface<1> *obj)
{
obj->function();
dynamic_cast<Interface<N> *>(obj)->function(integral_constant<size_t, N>{});
if ( N > 1 ) call_function<N - 1>(obj);
}
template<>
void call_function<0>(Interface<1> *obj) {}
int main(int argc, char *argv[])
{
if ( argc < 2 ) return 1;
istringstream is{argv[1]};
size_t loop;
is >> loop;
constexpr std::size_t n{10};
unique_ptr<Interface<1>> obj{
#ifdef DIAMOND_INHERITANCE
new Implementation<n>
#else
new Implementation<n, n>
#endif
};
using clock = high_resolution_clock;
const auto tp1 = clock::now();
for ( std::size_t i{0}; i < loop; ++i ) {
call_function<n>(obj.get());
}
const auto tp2 = clock::now();
cerr << duration_cast<microseconds>(tp2 - tp1).count() << "us\n";
}
clang++ -Wall -std=c++11 test_inheritance.cpp -DDIAMOND_INHERITANCE
./a.out 1000 > /dev/null
20001us
clang++ -Wall -std=c++11 test_inheritance.cpp
./a.out 1000 > /dev/null
16001us
もう少し具体的にどこにどういう理由で時間がかかるのでしょうか？
11845,c++,Visual Studio Community 2013で、C++のプログラムを作成するうえで、libxml2というライブラリを使いたいんですが、依存ライブラリの取り込み方がよくわかりません。
ライブラリまるごとアーカイブ化されているわけでもないのでクラスパスに追加して実行すればいいというわけでもなさそうだし、実行はターミナルからコンパイルして実行しているので、g++でのコンパイル時の、依存ライブラリの取り込み方法と、VC++Expressでのビルドが通る状態にする方法(IDE上で依存関係を追加する方法)を教えてください。
初歩的な質問で申し訳ございませんが、よろしくお願いします。
miteiさん
XML読み込みのやり方をググっていろいろ調べていたのですが、
ブログなど皆さんが公開されている実装を見て、どんな関数があるのか調べ、それぞれ移植しながら実装を行っていたのですが、どうもI/O系の関数が丸ごとなくなっており、何か漏れている感じがします。
ライブラリディレクトリの多くはlibとのことでしたが、
DLしたlibxml2にはlibディレクトリがなかったため、DL直下をライブラリディレクトリとしました。これが何か悪さをしているのでしょうか？
ダウンロードしたライブラリ本体はこちらです。
ftp://xmlsoft.org/libxml2/libxml2-2.9.2.tar.gz
includeディレクトリはあったので、Include Directoryはこちらで間違いないかと思いますが、
libraryディレクトリはこれであっているのでしょうか？
11866,c++,タイトルの通りですが、ズバリ、 xxxオブジェクトのxxxを知りたく質問しています。
11882,c++,xmlParseFile();
で読み込んだファイルは確実に読み込めているようなのですが、
Xpathで抽出しようとするとうごきません。
xmlParseFile()の抽出結果の確認は
xmlDocGetRootElement()でルートノードを取得しtag名を標準出力したところ、正常に表示できたという根拠です。
<project xmlns="略">
<modelVersion>4.0.0</modelVersion>
<groupId>略</groupId>
<artifactId>略</artifactId>
<version>1.0.2</version>
<name>略</name>
...
</project>
ようするにmavenのpom.xmlを読み込んで、Xpathで特定ノードを抽出したいんですが、
xmlNodeSetPtr executeXpath(xmlDocPtr &doc, xmlChar *xpath_expr) {
xmlXPathContextPtr xpath_context;
xmlXPathObjectPtr  xpath_obj;
xpath_context = xmlXPathNewContext(doc);
if (xpath_context == NULL) {
cerr << "Error: unable to create new XPath context" << endl;
xmlFreeDoc(doc);
return NULL;
}
xmlNodePtr node = xmlDocGetRootElement(doc);
/* Evaluate xpath expression */
xpath_obj = xmlXPathEvalExpression(xpath_expr, xpath_context);
if (xmlXPathNodeSetIsEmpty(xpath_obj->nodesetval)) {
cerr << "Error: unable to evaluate xpath expression" << endl;
xmlXPathFreeContext(xpath_context);
xmlFreeDoc(doc);
return NULL;
}
/* Print results */
return xpath_obj->nodesetval;
}
この関数を
xmlNodeSetPtr versionObj = domParser.executeXpath(pomData, (xmlChar *)"//version[1]");
こうしても、
Error: unable to evaluate xpath expression
の箇所で落ちてしまいます。
なぜなのでしょうか？
12058,c++,PCに接続されているキーボードの数と種類を取得するにはどうすればいいでしょうか？
ノートPCを使用している場合に、USBにてテンキー有りのキーボードが接続されたかどうかを
調べたいと思います。
GetKeyboardTypeを使ってみましたが、テンキー有りキーボードを接続しても、
接続しなくても結果は変わりませんでした。
環境はVisual C++です。
12222,c++,ポインタについてなんですけど勉強不足で疑問が出てきました
今スマートフォンで動かせる環境がないので正しい構文かわかりませんが
void f(int *a) {*a=5;}
int main(){
int x=1;
f(&x);
printf("%d",x);
return 0;
}
この時の結果は5になるかと思います
void f(int &a) {a=5;}
int main(){
int x=1;
f(x);
printf("%d",x);
return 0;
}
ちゃんと試していなくて申し訳ないですが...
両方5になると思います
上の書き方と下の書き方の違いがわからないです
生成されるオブジェクトファイル？に違いはありますか
また、どちらの方がどのような所で優れてますか
12254,c++,XMLのTEXTを更新したいのですが、DOMが全く変化しません。
/**
* xmlDocPtr &node     元のDOM
* string text         挿入するTEXT
* xmlChar *xpath_expr 更新する対象
**/
void DomParser::textUpdate(xmlDocPtr &node, string text, xmlChar *xpath_expr) {
// XpathでDOMを抽出する。(動作確認済み)
xmlNodeSetPtr dom = scrapeNodeList(node, xpath_expr);
if (!xmlXPathNodeSetIsEmpty(dom)) {
for (int i = 0; i < dom->nodeNr; i++) {
// 既存TEXTの除去
xmlNodePtr node = xmlXPathNodeSetItem(dom, i);
xmlUnlinkNode(node->children);
xmlFree(node->children);
// 新規TEXTの追加
xmlNodePtr new_text = xmlNewText((xmlChar*)text.c_str());
xmlAddChild(node, new_text);
}
}
}
何がいけないのでしょうか？
argus さん
ご回答ありがとうございました。
検証コードを拝見しました。
私の実装と目立ったロジックの差異がないため、もしやと思い、
こちらのソースでも、
更新後のcontent内容出力してみました。
結果は更新されていました。しかし、何度確認しても、更新後viでxmlを開くと、
更新されていない状態で表示されます。
ドキュメントに対してコミットのようなことをする必要があるのでしょうか？
12280,c++,class baseを継承したclass derived1とclass derived2があるとしたとき、
std::shared_ptr<base> d1 = std::make_shared<derived1>();
std::shared_ptr<base> d2 = std::make_shared<derived2>();
//自動でstd::shared_ptr<derived1>にキャストされる
auto d1_casted = d1->cast();
//自動でstd::shared_ptr<derived2>にキャストされる
auto d2_casted = d2->cast();
のように自動でダウンキャストしてくれる関数を実装したいと考えているのですがうまくいきません。
試しに上記の機能を実装しようとしてみたのですが、オーバーロード関数の呼び出しの解決ができないとエラーが出てしまいます。何かよい方法はございませんでしょうか。
以下が今の実装です。
#include<type_traits>
#include<typeinfo>
#include<memory>
#include<iostream>
class derived1;
class derived2;
extern void* enabler;
class base
{
public:
template<typename T, typename std::enable_if<std::is_same<decltype(typeid(std::shared_ptr<derived1>)), decltype(typeid(std::shared_ptr<T>))>::value>::type*& = enabler>
std::shared_ptr<derived1> cast(std::shared_ptr<T> ptr)
{
return std::static_pointer_cast<derived1>(ptr);
}
template<typename T, typename std::enable_if<std::is_same<decltype(typeid(std::shared_ptr<derived2>)), decltype(typeid(std::shared_ptr<T>))>::value>::type*& = enabler>
std::shared_ptr<derived2> cast(std::shared_ptr<T> ptr)
{
return std::static_pointer_cast<derived2>(ptr);
}
void print()
{
std::cout << "base class.\n";
}
};
class derived1 : public base
{
public:
void print()
{
std::cout << "derived1 class.\n";
}
};
class derived2 : public base
{
public:
void print()
{
std::cout << "derived2 class.\n";
}
};
int main(int argc, char* argv[])
{
std::shared_ptr<base> d1_base = std::make_shared<derived1>();
auto d1 = d1_base->cast(d1_base);
return 0;
}
12350,c++,cocos2d-xで、c++を基盤に
無料でチラシ広告が画面の下部に表示される形のiphone用ゲームアプリを作ろうと思い勉強しています。
今現在、クロスプラットフォーム対応にするためsetContentScaleFactorを用いて端末の画面の大きさにより拡縮倍率を変えるようにしています。そして、MainSceneという名前のクラスを作成し、最初の画面(画像)を表示するところまでうまくいきました。
次にセリフなどを表示するための枠を画面に配置しようと思ったのですが、広告のスペースなども考える必要があるのでそちらを先に実装しなければならないと思い、iAdの導入作業に移りました。
c++でのiAdの導入の方法がわからず(というか実装不可能？)、Objective-cでなんとかチラシを表示できないかと新たにViewControllerというクラス(拡張子はmm)を作成し、必要な処理を記載しています。(viewDidLoad、didReceiveMemoryWarning、viewDidAppear、bannerViewDidLoadAd、bannerView)
そこでシミュレータを起動してみたのですが、c++で設定した背景画像は表示されるもののチラシが表示されません。MainSceneのヘッダは#include "ViewController.h"でつないでいます。
メインのMainSceneから、チラシ用のクラスのViewControllerを呼び出してメソッド一つ一つを呼びださなければいけないのでしょうか？その場合C++のクラスからObjective-cのクラスのメソッドを呼び出すことになり、記入方法もわかりませんので教えていただきたいです。
C++でiAdを実装できるのであればそれが一番いいのですが…。
＊ゲームは主にC++で作成する予定（画像をタッチするだけの簡単なゲーム）
＊X-code、cocos2d-xでの作成
＊iAdを画面下に表示させたい
＊↑はObjective-cで作成している状態
＊C++で実装した最初の画面のみが表示される
c++で作成しているアプリにもiAdの広告を表示させたい。その方法を教えていただきたいのと、広告を表示させるには本当に、(viewDidLoad、didReceiveMemoryWarning、viewDidAppear、bannerViewDidLoadAd、bannerView)これだけの項目で良いのかということがわからないので教えていただきたいです。
以下はViewControllerのソースコードです***
ViewController.h
# import < UIKit/UIKit.h >
# import < iAd/iAd.h >
@interface ViewController : UIViewController <ADBannerViewDelegate>
@property (unsafe_unretained, nonatomic) IBOutlet ADBannerView *bannerView;
@end
ここからはViewController.mmのソースコードです***
#import "ViewController.h"
@interface ViewController ()
@end
@implementation ViewController
- (void)viewDidLoad {
[super viewDidLoad];
}
- (void)didReceiveMemoryWarning {
[super didReceiveMemoryWarning];
}
-(void)viewDidAppear:(BOOL)animated{
[super viewDidAppear:animated];
CGRect bannerFrame = self.bannerView.frame;
bannerFrame.origin.y = self.view.frame.size.height;
self.bannerView.frame = bannerFrame;
}
-(void)bannerViewDidLoadAd:(ADBannerView *)banner{
CGRect bannerFrame = banner.frame;
bannerFrame.origin.y = self.view.frame.size.height - banner.frame.size.height;
[UIView animateWithDuration:1.0 animations:^{
banner.frame = bannerFrame;
}];
NSLog(@"広告在庫あり");}
-(void)bannerView:(ADBannerView *)banner didFailToReceiveAdWithError:(NSError *)error{
CGRect bannerFrame = banner.frame;
bannerFrame.origin.y = self.view.frame.size.height;
[UIView animateWithDuration:1.0 animations:^{
banner.frame = bannerFrame;
}];
NSLog(@"広告在庫なし");}
@end
ここからはMainSceneのソースになります。
MainScene.h
#ifndef __aaa__MainScene__
#define __aaa__MainScene__
#include "cocos2d.h"
#include "ViewController.h"
class MainScene :public cocos2d::Layer{
protected:
MainScene();
virtual ~MainScene();
bool init() override;
public:
static cocos2d::Scene* createScene();
CREATE_FUNC(MainScene);
};
#endif /* defined(__aaa__MainScene__) */
ーーーーーーーーーーーーーーーーーーーーーーーーーー
MainScene.mm
#include "MainScene.h"
USING_NS_CC;
MainScene::MainScene(){
}
MainScene::~MainScene(){
}
Scene* MainScene::createScene(){    // 自身のインスタンスを生成するメソッド
auto scene = Scene::create();  // 自分(MainScene)を生成し
auto layer = MainScene::create();   // sceneに貼り付けて返す
scene -> addChild(layer);  //　空のレイヤーを作成
return scene;
}
bool MainScene::init(){
if(!Layer::init()){  //　このクラスの初期化処理で、初期化が成功したらtrue,失敗したらfalse
return false;
}
//Directorを取り出す
auto director = Director::getInstance();
//画面サイズを取り出す
auto size = director -> getWinSize();
//背景のスプライトを生成する （最初の画像）
auto background = Sprite::create("aaa.png");
//スプライトの表示位置を設定する （真ん中に設定
background->setPosition(Vec2(size.width / 2.0 , size.height /2.0));
//親ノードにスプライトを追加する
this -> addChild(background);
//　初期化処理
return true;
}
12649,c++,負の値/負の値
正の値/負の値
負の値/正の値
の計算や
負の値%負の値
正の値%負の値
負の値%正の値
の計算において
割り算の結果がコンパイラに依存していたり
剰余が負の値になったりするのはなぜですか
数学的には答えは一つに定まると思うのですが
12669,c++,NetBeansのC ++プロジェクトでコマンドライン引数を指定する方法を教えてください。
int main(int argc, char** argv)
argcと**argvに値（ファイル）を与えたいです。
12844,c++,CCLayerでエラーが出ます。
OSはMacBookAir、Cocos2d-xで動作させています。cocos2dでiAdの導入をしたくプログラミングをしています。
こちらのサイトを参考に、試しに入力をしてみた結果以下の部分でエラーが出ました。何かフレームワークが足りていないとか、循環参照とか、色々とエラーの原因を検索してみたのですがうまくいきませんし、循環にもなっていないと思います。ちなみに拡張子はmmです。
ここからはソースになります。
ヘッダ部分
#import "cocos2d.h"
#import "iAd/iAd.h"
@interface AdLayer : CCLayer //←この時点でエラー
//内容はCannot find interface declaration for 'CCLayer',superclass of 'AdLayer';did you mean 'CALayer'?です。
+ (id)layer;
@end
ここから実装 AdLayer.m
#import "AdLayer.h"
@implementation AdLayer{
ADBannerView* _adView;
}
+ (id)layer{
return [[[self alloc] initLayer] autorelease];
}
- (id)initLayer {
if (self = [super init]) {
_adView = [[ADBannerView alloc] initWithFrame:CGRectZero];
_adView.currentContentSizeIdentifier = ADBannerContentSizeIdentifierPortrait;
[[[CCDirector sharedDirector] view] addSubview:_adView]; //この時点でエラー
// 内容はUse of undeclared identifier 'CCDirector',Did you mean 'CIDitector' ?です。
}
return self;
}
- (void)dealloc{
[_adView removeFromSuperview];
[_adView release];
[super dealloc];
}
@end
12890,c++,関数において整数定数テンプレートを付加した際に発生するいくつかの構文エラーについて２つ質問です.
①operator()の整数定数テンプレートの明示の際のシンタックスエラー
#include<iostream>
struct object{
template<std::size_t index>
void operator()(){ std::cout << index << std::endl;}
}
int main(){
object obj;
obj<1>(); //ill-formed （obj < 1）のoperator<未定義エラー
obj.operator()<1>(); //ok
}
なぜか obj<1>();　において, obj<1　が先に評価され, 整数とobjectの比較と判断されてしまうエラーがあります,これは規格どおりなのでしょうか,それともバグでしょうか.
ちなみにobj.operator()<1>(); は動きます.
②整数定数テンプレートメンバ関数において, 可変長引数テンプレートが正常に扱えない
#include<iostream>
struct X{
template<size_t t>
void f(int a){
std::cout << t << a << std::endl;
}
};
template <class S,typename ...Params>
void f(S&& s,Params&&... params)
{
s.f<10>(std::forward<Params>(params)...); // error: expected ')' , expression contains unexpanded parameter packs 'Params'
and 'params'
s.f<10>(std::forward<Params...>(params...)); // error: reference to non-static member function must be called
s.f<10>(params...); // error: expected ')'
}
int main(){
f(X(),4);
return 0;
}
②.1 本来なら構文的に合っているunpack演算子が無効, または全然関係のないところでexpected')'
②.2 意味のわからないnon-static function callエラー
③.3 全然関係のないところで expected')'
以上です.
コンパイラのバグか, 仕様書どおりか, もしくは自分の構文ミスなのか全く判別がつきません.
知識人の方, 一つでも心当たりがあれば是非お願いいたします.
よろしくお願いします.
環境(gcc及びLLVM)
12895,c++,ループの変数名で好んでi,j,...が使われる理由はなんですか
デフォルト？国際的な決まり？
for(int i=0;i<N;i++);
12898,c++,float型については-0が存在すると思いますが、なぜ存在するのかわかりません。
何かに利用されたりinfやNanのようにエラーとして扱うものですか
12941,c++,宣言と定義の明確な違いはなんですか。
例えば以下の例は、両方定義として考えていいのですか
#define a 100
#define b a
12952,c++,拡張子mmのファイルで、iAdを実装し、チラシを画面下に表示させるところまでは成功したのですが、iAdの実装で、アプリの審査にも関わるbannerViewDidLoadAdとdidFailToReceiveAdWithErrorを実装するために、クラスをデリゲートにしたいと思っていますが、
class Delegate MainScene :publiccocos2d::Layer{
この書き方でエラーが出ます。
それと思わしき場所全てにDelegateを書いたのですが、全てエラーに…。
書き方が悪いのか、それとも内容に問題があるのかわかりません。
他のクラスに依存しているクラスだとデリゲートにできないとネットでみたのですが、他のクラスからメソッドを使用したり関数を使用していることはありません。
C++でクラスをデリゲートにするには、どのように書いたらいいのでしょうか。
12953,c++,こんにちは。いつもお世話になっています。
いまパックマンのようなゲームを作ってまして敵のキャラのAIのようなものを作っています。
その際にアイテムを取る最短経路を求めることはできるのですがそうではなくただ最短を求めないで効率の良いと自分の思いついた作りたいプログラムの書き方がわからなくて質問しました。
前提として、ルールとして
勝利条件は点数制でアイテムの種類は５点のものと１０点の物があります。
ひとつ移動するごとに’１’コストが減ります移動は上下左右のみ。
通れないとことして岩が置いてあります。
そしてトラップとしてそこから何処かへ移動してしまうワープがあります。(どこに飛んだかはそこからどれくらい移動したか値が渡されます。)
本題の自分で書きたいプログラムの戦略はその時の(計算回数的な理由で)5コスト以内で一番多い得点を得るプログラムを書きたいのです。ぜひご教授お願いします。
言語はC++です。
敵キャラクターは配列上にマップを作って計算してます。
12996,c++,CはC++と発展したそうですが、C++はどの言語へ発展したのですか
13009,c++,例えば下の文で、
#include<iostream>
#include<cmath>
float Myabs(float x);
int main(){
float a=2.5;
std::cout<<Myabs(a)<<std::abs(a);
a=-5.25;
std::cout<<Myabs(a)<<std::abs(a);
return 0;
}
float Myabs(float x){return x>0?x:-x;}
この文を下の2つの例のように変更すると
例１
#include<iostream>
float Myabs(float x);
int main(){
float a=2.5;
std::cout<<Myabs(a)<<std::abs(a);
a=-5.25;
std::cout<<Myabs(a)<<std::abs(a);
return 0;
}
#include<cmath>
float Myabs(float x){return x>0?x:-x;}
例２
#include<iostream>
#include<cmath>
int main(){
float a=2.5;
std::cout<<Myabs(a)<<std::abs(a);
a=-5.25;
std::cout<<Myabs(a)<<std::abs(a);
return 0;
}
float Myabs(float x);
float Myabs(float x){return x>0?x:-x;}
どちらもエラーが出ます。宣言が無いために出るエラーとインクルードが無いために出るエラーです。
これは、コンパイラから見てinclude文と宣言が同じ動作をすることを示していますか？
13061,c++,この2つはどのように使い分けますか
どちらかに統一したほうがいいですか
入門時に読み飛ばしたのかもしれません全く覚えてないのです
13074,c++,コンソールAPPを途中まで作り、ビルドできるかためしたところ、下記のようなエラーが残ったのですが、意味がよくわかりません。
In file included from /usr/lib/gcc/x86_64-pc-cygwin/4.9.2/include/c++/ios:42:0,
from /usr/lib/gcc/x86_64-pc-cygwin/4.9.2/include/c++/istream:38,
from /usr/lib/gcc/x86_64-pc-cygwin/4.9.2/include/c++/sstream:38,
from stdafx.h:11,
from OperationService.cpp:1:
/usr/lib/gcc/x86_64-pc-cygwin/4.9.2/include/c++/bits/ios_base.h: コピーコンストラクタ ‘std::basic_ios::basic_ios(const std::basic_ios&)’ 内:
/usr/lib/gcc/x86_64-pc-cygwin/4.9.2/include/c++/bits/ios_base.h:786:5: エラー: ‘std::ios_base::ios_base(const std::ios_base&)’ は非公開です
ios_base(const ios_base&);
^
In file included from /usr/lib/gcc/x86_64-pc-cygwin/4.9.2/include/c++/ios:44:0,
from /usr/lib/gcc/x86_64-pc-cygwin/4.9.2/include/c++/istream:38,
from /usr/lib/gcc/x86_64-pc-cygwin/4.9.2/include/c++/sstream:38,
from stdafx.h:11,
from OperationService.cpp:1:
/usr/lib/gcc/x86_64-pc-cygwin/4.9.2/include/c++/bits/basic_ios.h:66:11: エラー: within this context
class basic_ios : public ios_base
^
In file included from stdafx.h:11:0,
from OperationService.cpp:1:
/usr/lib/gcc/x86_64-pc-cygwin/4.9.2/include/c++/sstream: コピーコンストラクタ ‘std::basic_stringstream::basic_stringstream(const std::basic_stringstream&)’ 内:
/usr/lib/gcc/x86_64-pc-cygwin/4.9.2/include/c++/sstream:502:11: 備考: synthesized method ‘std::basic_ios::basic_ios(const std::basic_ios&)’ first required here
class basic_stringstream : public basic_iostream
^
In file included from /usr/lib/gcc/x86_64-pc-cygwin/4.9.2/include/c++/ios:43:0,
from /usr/lib/gcc/x86_64-pc-cygwin/4.9.2/include/c++/istream:38,
from /usr/lib/gcc/x86_64-pc-cygwin/4.9.2/include/c++/sstream:38,
from stdafx.h:11,
from OperationService.cpp:1:
/usr/lib/gcc/x86_64-pc-cygwin/4.9.2/include/c++/streambuf: コピーコンストラクタ ‘std::basic_stringbuf::basic_stringbuf(const std::basic_stringbuf&)’ 内:
/usr/lib/gcc/x86_64-pc-cygwin/4.9.2/include/c++/streambuf:802:7: エラー: ‘std::basic_streambuf::basic_streambuf(const std::basic_streambuf&) [with _CharT = char; _Traits = std::char_traits]’ は非公開です
basic_streambuf(const basic_streambuf& __sb)
^
In file included from stdafx.h:11:0,
from OperationService.cpp:1:
/usr/lib/gcc/x86_64-pc-cygwin/4.9.2/include/c++/sstream:64:11: エラー: within this context
class basic_stringbuf : public basic_streambuf
^
/usr/lib/gcc/x86_64-pc-cygwin/4.9.2/include/c++/sstream: コピーコンストラクタ ‘std::basic_stringstream::basic_stringstream(const std::basic_stringstream&)’ 内:
/usr/lib/gcc/x86_64-pc-cygwin/4.9.2/include/c++/sstream:502:11: 備考: synthesized method ‘std::basic_stringbuf::basic_stringbuf(const std::basic_stringbuf&)’ first required here
class basic_stringstream : public basic_iostream
^
OperationService.cpp: メンバ関数 ‘std::stringstream OperationService::createJA()’ 内:
OperationService.cpp:39:9: 備考: synthesized method ‘std::basic_stringstream::basic_stringstream(const std::basic_stringstream&)’ first required here
return ss;
^
C++開発は2度目(以前もコンソールアプリケーションを作成しました。)
ほとんど実装は以前のものの流用ですが、以前はビルドできました。
ios_baseが公開されていないとのことなので、fstreamの部分が悪いのかと思い、いろいろいじってみましたがうまくいきません。
以下、おそらくエラーの該当クラスです。
#include "stdafx.h"
#include "OperationService.h"
#include "DomParser.h"
using namespace std;
#define ASSERT_JA "~/.base_ja"
#define ASSERT_EN "~/.base_en"
#define MIGR_JA "~/.mig_ja"
#define MIGR_EN "~/.mig_en"
/**
* Migrationの英語版
**/
stringstream OperationService::createEN() {
stringstream ss;
ss <<  略
ss << "Before January 8th, 2014" << endl;
return ss;
}
/**
* Migrationの日本語版
**/
stringstream OperationService::createJA() {
stringstream ss;
ss << 略
ss << "1.0が破棄されると、XMPPサービスおよびAPIは利用できなくなります。" << endl;
return ss;
}
/**
* diff
**/
void OperationService::diff() {
cout << "====================== diffedence check start =========================" << endl;
fstream ifs;
DomParser domParser;
// 日本語正規ドキュメント作成
ifs.open(ASSERT_JA, ios::in);
if (!ifs) {
ifs.close();
ifs.open(ASSERT_JA, ios::out);
ifs << createJA().str() << endl;
ifs.close();
}
// 英語正規ドキュメント作成
ifs.open(ASSERT_EN, ios::in);
if (!ifs) {
ifs.close();
ifs.open(ASSERT_EN, ios::out);
ifs << createEN().str() << endl;
ifs.close();
}
stringstream ss;
// 英語HTML取得
ss << "wget https://dummy/migrations -O " << MIGR_EN << endl;
system(ss.str().c_str());
ss.clear();
// 日本語HTML取得
ss << "wget https://dummy/migrations?locale=ja_JP -O " << MIGR_JA << endl;
system(ss.str().c_str());
ss.clear();
// 日本語MigrationTEXT抽出
{
xmlDocPtr doc = domParser.parse(MIGR_JA);
xmlNodeSetPtr nodeSet = domParser.executeXpath(doc, (xmlChar *)"//./text()");
string content = (char*)xmlXPathNodeSetItem(nodeSet, 0)->content;
ifs.open(MIGR_JA, ios::out | ios::trunc);
ifs << content << endl;
ifs.close();
}
// 英語MigrationTEXT抽出
{
xmlDocPtr doc = domParser.parse(MIGR_EN);
xmlNodeSetPtr nodeSet = domParser.executeXpath(doc, (xmlChar *)"//./text()");
string content = (char*)xmlXPathNodeSetItem(nodeSet, 0)->content;
ifs.open(MIGR_EN, ios::out | ios::trunc);
ifs << content << endl;
ifs.close();
}
// 比較実行 日本語
cout << "--------- Japanese ----------" << endl << endl << endl;
ss << "diff -Bt " << ASSERT_JA << " " << MIGR_JA;
system(ss.str().c_str());
ss.clear();
// 比較実行 英語
cout << "--------- English ----------" << endl << endl << endl;
ss << "diff -Bt " << ASSERT_EN << " " << MIGR_EN;
system(ss.str().c_str());
ss.clear();
}
14219,c++,c++ で template関数を使う場合に特殊化により関数を制作する時に、template関数が定義されているヘッダーを複数のソースに使う場合に同じ関数が二度生成されてしまいますが、これはどう解決すればよいですか？
例えば次のような場合です。
// header_temp.hpp
template <typename T>
void foo(T a) {
cout << a << endl;
}
// source_1.cpp
#include "header_temp.hpp"
#include "header_class_alice.hpp" // class Aliceが定義されている
void hoge() {
foo<Alice>(10);
}
// source_2.cpp
#include "header_temp.hpp"
#include "header_class_alice.hpp"
void fuga() {
foo<Alice>(10);
}
上記の場合はsource_1.cppのコンパイルの際に関数foo<Alice>が生成され、source_2.cppをコンパイルする際にまた関数foo<Alice>が生成されます。今、関数foo<Alice>はinlineに定義されていないので、厳密には同じ関数が二度定義されています。これはリンクの際に問題を起こします。この解決のためにはソースの内一つでtemplate void foo<Alice>(Alice)して、残りのソースではextern void foo<Alice>(Alice);するか、template fooの定義をそもそもinlineにすることですが、関数が大きくなるとinlineにしてソースごとに関数の定義をしてしまうのはバイナリーサイズの観点で浪費があると考えます(完全に同じ関数を二回定義しているので)。
template関数自体は共有ライブラリーみたいにはできないので(その特殊化はできますが)、このような問題は必ず生じかねないとは思いますが、もし上記のtemplate, externを使った方法以外にプログラムバイナリーでtemplateにより生成された特殊化関数void foo<Alice>(Alice)が一つだけ存在する様にするにはどうすればよいでしょうか？
そしてこのことによると、stlのvectorなどのcontainerは複数のソースでvector<Alice>で定義されたcontainerが生成された場合に、ソースごとにvector<Alice>::push_backなどのメソッドを生成することになりますが、そうでしょうか？
14221,,ハッカソンにて、以下のTI社のCC2650STKのセンサーをIoT Foundationに接続し情報を取得したいと考えております。
http://www.tij.co.jp/tool/jp/cc2650stk
このときインターネット経由でIoT Foundationに接続し、Bluemixから情報を取得する場合、どのように接続したらよろしいでしょうか？特別なデバイスが必要となりますでしょうか？
14225,php,iPhoneアプリで動画をサーバーにアップロードする機能を実装しています。
AFNetworkingを使って動画をアップロードすることには成功したのですが、
動画の容量が大きくなると、失敗するようです。
具体的には、容量が10MBを超えてくると必ず失敗します。
このように容量の大きいファイルをアップロードしたい場合は、
AFNetworkingを使わず、別の方法を模索した方がよいのでしょうか？
詳しい方、ご教示ください。
・Objective-C
// 動画を取得
NSString *dir = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents"];
NSString *path = [dir stringByAppendingPathComponent:@"test.mov"];
NSData *videoData = [NSData dataWithContentsOfURL:[NSURL fileURLWithPath:path]];
// 動画をアップロード
AFHTTPRequestOperationManager *manager = [AFHTTPRequestOperationManager manager];
manager.responseSerializer = [AFHTTPResponseSerializer serializer];
[manager.requestSerializer setTimeoutInterval:50];
[manager POST:@"(省略)/deployMovieTest.php" parameters:nil constructingBodyWithBlock:^(id<AFMultipartFormData> formData) {
[formData appendPartWithFileData:videoData name:@"movie" fileName:@"test.mov" mimeType:@"video/quicktime"];
} success:^(AFHTTPRequestOperation *operation, id responseObject) {
NSLog(@"【成功】: JSONを表示 %@", responseObject);
NSString *responseStr = [[NSString alloc] initWithData:responseObject encoding:NSUTF8StringEncoding];
NSLog(@"【成功】: 文字を表示%@",responseStr);
} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
NSLog(@"【失敗】: %@", error);
}];
・php
<?php
// POSTで受け取った情報は$_FILESに入っている。
// POSTで動画を受け取る。
$image = file_get_contents($_FILES['movie']['tmp_name']);
// 移動させる先のURLを作成。
$uploaddir = '(省略)/uploads/';
$uploadfile = $uploaddir.basename($_FILES['movie']['name']);
// ファイルを保存。
$message = "";
if (move_uploaded_file($_FILES['movie']['tmp_name'], $uploadfile)) {
$message = "OK!\n";
} else {
$message = "NO:)";
}
// 出力
header('Content-type: application/json');
echo json_encode($message);
?>
14226,,クライアントからSocket.ioに接続しているクライアント一覧を取得したいと思っています。
var http = require("http");
var server = http.createServer(function(req,res) {
res.write("Hello World!!"); // ・・・　①
res.end(); // ・・・　②
});
// socketioの準備
var io = require('socket.io')(server);
// クライアント接続時の処理
io.on('connection', function(socket) {
console.log("client connected!!")
// クライアント切断時の処理
socket.on('disconnect', function() {
console.log("client disconnected!!")
});
// クライアントからの受信を受ける (socket.on)
socket.on("from_client", function(obj){
console.log(obj)
});
});
server.listen(8080);
の①②の部分を
//接続しているクライアント情報取得
var clients = io.sockets.clients();
//接続しているクライアント数取得
var count = clients.length;
if (count !== 0) {
for (var i = 0; i < count; i++) {
res.write(clients[i]);
res.write("</ br>");
res.end();
}
}
にして、クライアントからhttp://<node.jsのサーバドメイン>/にアクセスすれば一覧が出るようにしたいです。
しかし、この中ではioのインスタンスも作られていないためエラーが生じます。
どのように対処すればいいかご存じの方、ご教示お願いします。
14228,javascript,自分は今、Javascriptでスロットマシンを作っています。
そこで質問なんですが、スタートボタンを連打しますとリールの回転が速くなってしまいます。
回転速度は一定のままにしたいです。
そしてアタリ、ハズレの判定が消えません。
どうしたらよろしいでしょうか。
よろしくお願いします。
Javascript
//左リールの制御
function a1() {
//aにHTMLから取得した数字を代入
var a=document.getElementById("su1").innerHTML;
//文字列のiを数字に変換し１を足してxに代入
var x=parseInt(a)+1;
//取得した値が９を超えたら１に戻す
if(x>9) {
x=1;
}
//xに書き換えてして表示する
document.getElementById("su1").innerHTML=x;
//一定期間繰り返す
TimeoutID1=setTimeout("a1()",100);
}
//スタートボタンを押すと６を表示する
function rstart() {
a2();
a1();
a3();
}
//真ん中のリールの制御
function a2() {
//iにHTMLから取得した数字を代入
var i=document.getElementById("su2").innerHTML;
//文字列のiを数字に変換し１を足してjに代入
var j=parseInt(i)+1;
//取得した値が９を超えたら１に戻す
if(j>9) {
j=1;
}
//Jに書き換えてして表示する
document.getElementById("su2").innerHTML=j;
//一定期間繰り返す
TimeoutID2=setTimeout("a2()",100);
}
//右のリールの制御
function a3() {
var c=document.getElementById("su3").innerHTML;
//文字列のiを数字に変換し１を足してjに代入
var z=parseInt(c)+1;
if(z>9) {
z=1;
}
//zに書き換えてして表示する
document.getElementById("su3").innerHTML=z;
//一定期間繰り返す
TimeoutID3=setTimeout("a3()",100);
}
//三つのリールを止める
function stop(btn) {
if(btn == 0) {clearTimeout(TimeoutID1);TimeoutID1=0;}
if(btn == 1) {clearTimeout(TimeoutID2);TimeoutID2=0;}
if(btn == 2) {clearTimeout(TimeoutID3);TimeoutID3=0;}
//su1,su2,su3の値が同じなら"skekka"にあたりを表示、それ以外ならはずれを表示
if(!(TimeoutID1 | TimeoutID2 | TimeoutID3)){
if(document.getElementById("su1").innerHTML == document.getElementById("su2").innerHTML
&& document.getElementById("su2").innerHTML == document.getElementById("su3").innerHTML){
document.getElementById("skekka").innerHTML="あたり";
}else{
document.getElementById("skekka").innerHTML="はずれ";
}
}
}
HTML
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=Shift_JIS">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta http-equiv="Content-Script-Type" content="text/javascript">
<script type="text/javascript" src="sample1.js"></script>
</head>
<body>
<form name="game">
<style type="text/css">
<!--
.surot{text-align:center;font-size:38;font-weight:bold;color:#ff0000;width:90;height:65;background-color:#0000ff;}
.surot2{font-size:14pt;font-weight:bold;color:#0000ff;text-align:center;width:96;}
-->
-->
</style>
<p style="text-align:center;font-size:24pt;font-weight:bold;">スロットマシン</p>
<table border="0" style="margin-left:150;margin-bottom:0;">
<tr>
<td id="skekka" style="font-size:34;font-weight:bold;color:#ff0000;width:200;height:40;text-align:center;"></td>
</tr>
</table>
<table style="background-color:#00ff00;border:solid #00ff00 5;margin-left:100;margin-bottom:0;">
<tr>
<td id="su1" class="surot">0<td>
<td id="su2" class="surot">0<td>
<td id="su3" class="surot">0<td>
</tr>
</table>
<table style="margin-left:100;">
<tr>
<td><input type="button" value="ストップ" onClick="stop(0)" class="surot2"></td>
<td><input type="button" value="ストップ" onClick="stop(1)" class="surot2"></td>
<td><input type="button" value="ストップ" onClick="stop(2)" class="surot2"></td>
</tr>
</table>
<div style="position:absolute;top:125;left:450;" >
<input type="button" value="スタート" onClick="rstart()" style="font-size:16pt;font-weight:bold;color:#0000ff;">
</div>
</form>
</body>
</html>
14233,c#,今までユーザがマウスでPowerpointを使うことを想定して、Powerpointのアドインシステムを開発してきましたが、ここ最近ユーザがタブレット上でPowerpointを使うことを想定して開発することになりました。
そこで直面した問題は、今までマウスでは反応したWidnowBeforeRightClickイベントが
タブレット上のタッチでは反応しなくなったことです。
てっきり私は、マウスの右クリック==長押しタッチ だと思って開発していましたが、
いくらタブレット上で長押しをしてもWindowBeforeRightClickイベントは全く反応してくれません。
WidowBeforeRightClickイベントがタブレット上で反応してくれなければ、
長押しによって表示されるコンテキストメニューを非表示にできません。
どうすればいいのでしょうか？よろしくお願いします。
ちなみに、WindowBeforeRightClickイベント周辺のコードは以下のようになっています。
public partial class ThisAddIn
{
private void ThisAddIn_Startup(object sender, System.EventArgs e)
{
this.Application.WindowBeforeRightClick +=
new PowerPoint.EApplication_WindowBeforeRightClickEventHandler(Application_WindowBeforeRightClick);
}
internal void Application_WindowBeforeRightClick(PowerPoint.Selection Sel, ref bool Cancel)
{
Cancel = true;
System.Diagnostics.Debug.WriteLine("コンテキストメニュー:非表示");
}
14235,,IBMのPaaS 「Bluemix」でアプリ開発をしているものです。
BluemixのWatsonカテゴリーにあるAlchemy APIで画像を認識させようとしたところ、ファイルサイズの上限と思われるErrorとなりました。分析可能な画像のサイズに上限はあるのでしょうか？
ご回答よろしくお願いします。
14236,android|java,AndroidStudioのビルドエラー原因を特定するためにgradleをターミナルで実行したいです。
やり方を教えて下さい。
参考にした質問
参考にした質問その２
14239,,方法は２つあるなーと思い、２つ試してみました。
ひとつは、Deviseのコントローラーを作成し、サインアップ(devise/registrations/new)をrootで指定する方法です。
これは実装できたのですが、リダイレクトの指定などrouteやコントローラーに書くことが多かったので、もっと簡単な方法ないかなと思いました。
そこで、サインアップ画面を部分テンプレートにし、トップ画面のViewで<%= render 'devise/registrations/new' %>と書けば、コントローラーやrouteに書くことも少なくなるのではと思ったのですが、
undefined local variable or method 'resource' forとサインアップの<%= form_for(resource, as: resource_name, url: registration_path(resource_name)) do |f| %>にエラーが出ました。
このやり方は推奨されていないということでしょうか？
前者でやる方が無難なのでしょうか。
14240,c++,C++でJSONをパースするのに、PicoJSONを使っているのですが、次のJSONファイルがどうしても読み込めません。エラーの原因と、解決方法を教えていただけないでしょうか。main.cppの2つ目のfor文内のコメントを取り払うと、エラーメッセージが出ます。
test.json
{"glossary":
[
{"title_list":
[
{"title": "SGML","primary": 1},
{"title": "GlossDef","primary": 0},
{"title": "Abbrev","primary": 3}
]
,"binding":
{"design": 1, "page": 1000}
}
]
}
main.cpp
#include <sstream>
#include <fstream>
#include <iostream>
#include <picojson.h>
using namespace std;
using namespace picojson;
int main(void) {
//Declartion
stringstream ss;
ifstream f;
//Read Json file
f.open("test.json", ios::binary);
if(!f.is_open()) {
return 1;
}
ss << f.rdbuf();
f.close();
//Parse Json data
picojson::value val;
ss >> val;
string err = get_last_error();
if(!err.empty()) {
cerr << err << endl;
return -1;
}
object& obj = val.get<object>();
array& glossary = obj["glossary"].get<array>();
cout << "glossary: " << endl;
for (array::iterator it = glossary.begin(); it != glossary.end(); it++) {
//title_list
object& tmp = it->get<object>();
array& title_list = tmp["title_list"].get<array>();
for (array::iterator it2 = title_list.begin(); it2 != title_list.end(); it2++) {
object& title_list = it2->get<object>();
object& title = title_list["title_list"].get<object>();
//object& primary = title_list["title_list"].get<object>();
//cout << "\ttitle: " << title["title"].get<string>();
//cout << ", primary: " << primary["primary"].get<double>() << endl;
}
//binding
object& binding = it->get<object>();
object& design = binding["binding"].get<object>();
object& page = binding["binding"].get<object>();
cout << "binding: " << endl;
cout << "\tdesign: " << design["design"].get<double>();
cout << ", binding: " << page["page"].get<double>() << endl;
}
return 0;
}
error message
terminate called after throwing an instance of 'std::runtime_error'
what():  "type mismatch! call is<type>() before get<type>()" && is<object>()
Aborted (core dumped)
PicoJSONの公式ページを参考にしつつ、色々試してみたのですが、解決出来ませんでした。基本的な質問かもしれませんが、よろしくお願いします。
14242,,Bluemixを使ってローカル環境で作成したアプリをcfコマンドでGit上にプッシュしたいと思い、以下のリンクを参考にインストールを実施しました。
しかしながら、.pkgファイルが開けません。インストール方法をご教示ください。
http://docs.cloudfoundry.org/devguide/installcf/
14246,javascript|jquery,canvasとlocalstorageを使ったwebアプリケーションを作っているのですが、
canvas内に描いたデータをlocalstorageに出力して、そのデータを画像で表示するところまで行いたいと思っています。
色々調べてみるとbase64を使って、描いた絵を文字列として認識するのは分かり、
localstorageには、png型で記載されているのですが、いまいちそのデータを画像表示する書き方が分かりません。
$("#save").on("click", function(){
var canvas = document.getElementById("drawarea");
var base64 = canvas.toDataURL();
localStorage.setItem(save, base64);
});
$(window).on("load", function(){
if(localStorage.getItem("save")){
var base64 = localStorage.getItem("save")
$("#drawarea").val(base64);
}
});
canvasつまり"drawarea"にbase64にセーブしたデータを表示したいのですが、
これだとリロードしても表示されないままです。
どう記述するのが良いのか教えて欲しいです。
